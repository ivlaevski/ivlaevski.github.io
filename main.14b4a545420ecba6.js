(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6304:(wt,Le,P)=>{"use strict";P.d(Le,{Dh:()=>De,GT:()=>ye,cc:()=>ue,hO:()=>re,on:()=>V,pX:()=>me,xv:()=>ge});var u=P(5879),le=P(120),F=P(2793);wt=P.hmd(wt);const de=["ngOnDestroy"],me=(q,Me,Ve,oe={})=>new Proxy(q,{get:(_e,ae)=>Ve.runOutsideAngular(()=>{var Ce;if(q[ae])return!(null===(Ce=null==oe?void 0:oe.spy)||void 0===Ce)&&Ce.get&&oe.spy.get(ae,q[ae]),q[ae];if(de.indexOf(ae)>-1)return()=>{};const se=Me.toPromise().then(Z=>{const W=Z&&Z[ae];return"function"==typeof W?W.bind(Z):W&&W.then?W.then(ve=>Ve.run(()=>ve)):Ve.run(()=>W)});return new Proxy(()=>{},{get:(Z,W)=>se[W],apply:(Z,W,ve)=>se.then(Pe=>{var Ue;const Ge=Pe&&Pe(...ve);return!(null===(Ue=null==oe?void 0:oe.spy)||void 0===Ue)&&Ue.apply&&oe.spy.apply(ae,ve,Ge),Ge})})})}),ye=(q,Me)=>{Me.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(oe=>{Object.defineProperty(q.prototype,oe,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,oe))})})};class Q{constructor(Me){return Me}}const De=new u.OlP("angularfire2.app.options"),ge=new u.OlP("angularfire2.app.name");function V(q,Me,Ve){const _e="object"==typeof Ve&&Ve||{};_e.name=_e.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const Ce=le.Z.apps.filter(se=>se&&se.name===_e.name)[0]||Me.runOutsideAngular(()=>le.Z.initializeApp(q,_e));try{JSON.stringify(q)!==JSON.stringify(Ce.options)&&j("error",`${Ce.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Q(Ce)}const j=(q,...Me)=>{(0,u.X6Q)()&&typeof console<"u"&&console[q](...Me)},K={provide:Q,useFactory:V,deps:[De,u.R0b,[new u.FiY,ge]]};let re=(()=>{class q{constructor(Ve){le.Z.registerVersion("angularfire",F.q4.full,"core"),le.Z.registerVersion("angularfire",F.q4.full,"app-compat"),le.Z.registerVersion("angular",u.q4F.full,Ve.toString())}static initializeApp(Ve,oe){return{ngModule:q,providers:[{provide:De,useValue:Ve},{provide:ge,useValue:oe}]}}}return q.\u0275fac=function(Ve){return new(Ve||q)(u.LFG(u.Lbi))},q.\u0275mod=u.oAB({type:q}),q.\u0275inj=u.cJS({providers:[K]}),q})();function ue(q,Me,Ve,oe,_e){const[,ae,Ce]=globalThis.\u0275AngularfireInstanceCache.find(se=>se[0]===q)||[];if(ae)return function Se(q,Me){try{return q.toString()===Me.toString()}catch{return q===Me}}(_e,Ce)||(fe("error",`${Me} was already initialized on the ${Ve} Firebase App with different settings.${be?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:_e,was:Ce})),ae;{const se=oe();return globalThis.\u0275AngularfireInstanceCache.push([q,se,_e]),se}}const be=!!wt.hot,fe=(q,...Me)=>{(0,u.X6Q)()&&typeof console<"u"&&console[q](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(wt,Le,P)=>{"use strict";P.d(Le,{q4:()=>Vs,iC:()=>Yd,fc:()=>Au,HU:()=>qd,vb:()=>Sl,JM:()=>Xa});var u=P(5879),le=P(4097),F=P(5861),de=P(4303),me=P(9058),ye=P(4537),Q=P(7879);const De=(b,D)=>D.some(x=>b instanceof x);let ge,V;const re=new WeakMap,ue=new WeakMap,Se=new WeakMap,be=new WeakMap,fe=new WeakMap;let Ve={get(b,D,x){if(b instanceof IDBTransaction){if("done"===D)return ue.get(b);if("objectStoreNames"===D)return b.objectStoreNames||Se.get(b);if("store"===D)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ce(b[D])},set:(b,D,x)=>(b[D]=x,!0),has:(b,D)=>b instanceof IDBTransaction&&("done"===D||"store"===D)||D in b};function ae(b){return"function"==typeof b?function _e(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K(){return V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...D){return b.apply(se(this),D),Ce(re.get(this))}:function(...D){return Ce(b.apply(se(this),D))}:function(D,...x){const $=b.call(se(this),D,...x);return Se.set($,D.sort?D.sort():[D]),Ce($)}}(b):(b instanceof IDBTransaction&&function Me(b){if(ue.has(b))return;const D=new Promise((x,$)=>{const pe=()=>{b.removeEventListener("complete",Re),b.removeEventListener("error",qe),b.removeEventListener("abort",qe)},Re=()=>{x(),pe()},qe=()=>{$(b.error||new DOMException("AbortError","AbortError")),pe()};b.addEventListener("complete",Re),b.addEventListener("error",qe),b.addEventListener("abort",qe)});ue.set(b,D)}(b),De(b,function j(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,Ve):b)}function Ce(b){if(b instanceof IDBRequest)return function q(b){const D=new Promise((x,$)=>{const pe=()=>{b.removeEventListener("success",Re),b.removeEventListener("error",qe)},Re=()=>{x(Ce(b.result)),pe()},qe=()=>{$(b.error),pe()};b.addEventListener("success",Re),b.addEventListener("error",qe)});return D.then(x=>{x instanceof IDBCursor&&re.set(x,b)}).catch(()=>{}),fe.set(D,b),D}(b);if(be.has(b))return be.get(b);const D=ae(b);return D!==b&&(be.set(b,D),fe.set(D,b)),D}const se=b=>fe.get(b),ve=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],Ue=new Map;function Ge(b,D){if(!(b instanceof IDBDatabase)||D in b||"string"!=typeof D)return;if(Ue.get(D))return Ue.get(D);const x=D.replace(/FromIndex$/,""),$=D!==x,pe=Pe.includes(x);if(!(x in($?IDBIndex:IDBObjectStore).prototype)||!pe&&!ve.includes(x))return;const Re=function(){var qe=(0,F.Z)(function*(Dt,...vt){const Ht=this.transaction(Dt,pe?"readwrite":"readonly");let yn=Ht.store;return $&&(yn=yn.index(vt.shift())),(yield Promise.all([yn[x](...vt),pe&&Ht.done]))[0]});return function(vt){return qe.apply(this,arguments)}}();return Ue.set(D,Re),Re}!function oe(b){Ve=b(Ve)}(b=>({...b,get:(D,x,$)=>Ge(D,x)||b.get(D,x,$),has:(D,x)=>!!Ge(D,x)||b.has(D,x)}));const pt="@firebase/installations",Gt="0.6.4",Ut=1e4,Ke=`w:${Gt}`,H="FIS_v2",Y="https://firebaseinstallations.googleapis.com/v1",ie=36e5,lt=new me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(b){return b instanceof me.ZR&&b.code.includes("request-failed")}function _t({projectId:b}){return`${Y}/projects/${b}/installations`}function It(b){return{token:b.token,requestStatus:2,expiresIn:mn(b.expiresIn),creationTime:Date.now()}}function Jt(b,D){return He.apply(this,arguments)}function He(){return(He=(0,F.Z)(function*(b,D){const $=(yield D.json()).error;return lt.create("request-failed",{requestName:b,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function We({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ut(b){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,F.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function mn(b){return Number(b.replace("s","000"))}function cn(){return(cn=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const $=_t(b),pe=We(b),Re=D.getImmediate({optional:!0});if(Re){const Ht=yield Re.getHeartbeatsHeader();Ht&&pe.append("x-firebase-client",Ht)}const Dt={method:"POST",headers:pe,body:JSON.stringify({fid:x,authVersion:H,appId:b.appId,sdkVersion:Ke})},vt=yield ut(()=>fetch($,Dt));if(vt.ok){const Ht=yield vt.json();return{fid:Ht.fid||x,registrationStatus:2,refreshToken:Ht.refreshToken,authToken:It(Ht.authToken)}}throw yield Jt("Create Installation",vt)})).apply(this,arguments)}function In(b){return new Promise(D=>{setTimeout(D,b)})}const Kn=/^[cdef][\w-]{21}$/,qt="";function Qt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function un(b){return function Xn(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Kn.test(x)?x:qt}catch{return qt}}function Fn(b){return`${b.appName}!${b.appId}`}const zn=new Map;function ur(b,D){const x=Fn(b);dr(x,D),function Sn(b,D){const x=function xn(){return!Ar&&"BroadcastChannel"in self&&(Ar=new BroadcastChannel("[Firebase] FID Change"),Ar.onmessage=b=>{dr(b.data.key,b.data.fid)}),Ar}();x&&x.postMessage({key:b,fid:D}),function ti(){0===zn.size&&Ar&&(Ar.close(),Ar=null)}()}(x,D)}function dr(b,D){const x=zn.get(b);if(x)for(const $ of x)$(D)}let Ar=null;const Yi="firebase-installations-database",Li=1,Fr="firebase-installations-store";let Ki=null;function Qe(){return Ki||(Ki=function Z(b,D,{blocked:x,upgrade:$,blocking:pe,terminated:Re}={}){const qe=indexedDB.open(b,D),Dt=Ce(qe);return $&&qe.addEventListener("upgradeneeded",vt=>{$(Ce(qe.result),vt.oldVersion,vt.newVersion,Ce(qe.transaction))}),x&&qe.addEventListener("blocked",()=>x()),Dt.then(vt=>{Re&&vt.addEventListener("close",()=>Re()),pe&&vt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),Dt}(Yi,Li,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Fr)}})),Ki}function he(b,D){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,F.Z)(function*(b,D){const x=Fn(b),pe=(yield Qe()).transaction(Fr,"readwrite"),Re=pe.objectStore(Fr),qe=yield Re.get(x);return yield Re.put(D,x),yield pe.done,(!qe||qe.fid!==D.fid)&&ur(b,D.fid),D})).apply(this,arguments)}function gt(b){return Et.apply(this,arguments)}function Et(){return(Et=(0,F.Z)(function*(b){const D=Fn(b),$=(yield Qe()).transaction(Fr,"readwrite");yield $.objectStore(Fr).delete(D),yield $.done})).apply(this,arguments)}function $t(b,D){return dn.apply(this,arguments)}function dn(){return(dn=(0,F.Z)(function*(b,D){const x=Fn(b),pe=(yield Qe()).transaction(Fr,"readwrite"),Re=pe.objectStore(Fr),qe=yield Re.get(x),Dt=D(qe);return void 0===Dt?yield Re.delete(x):yield Re.put(Dt,x),yield pe.done,Dt&&(!qe||qe.fid!==Dt.fid)&&ur(b,Dt.fid),Dt})).apply(this,arguments)}function te(b){return X.apply(this,arguments)}function X(){return X=(0,F.Z)(function*(b){let D;const x=yield $t(b.appConfig,$=>{const pe=function Ie(b){return fn(b||{fid:Qt(),registrationStatus:0})}($),Re=function et(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(lt.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},$=function $e(b,D){return St.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:$}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:hn(b)}:{installationEntry:D}}(b,pe);return D=Re.registrationPromise,Re.installationEntry});return x.fid===qt?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}}),X.apply(this,arguments)}function St(){return St=(0,F.Z)(function*(b,D){try{const x=yield function ln(b,D){return cn.apply(this,arguments)}(b,D);return he(b.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield gt(b.appConfig):yield he(b.appConfig,{fid:D.fid,registrationStatus:0}),x}}),St.apply(this,arguments)}function hn(b){return en.apply(this,arguments)}function en(){return(en=(0,F.Z)(function*(b){let D=yield Rr(b.appConfig);for(;1===D.registrationStatus;)yield In(100),D=yield Rr(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:$}=yield te(b);return $||x}return D})).apply(this,arguments)}function Rr(b){return $t(b,D=>{if(!D)throw lt.create("installation-not-found");return fn(D)})}function fn(b){return function mr(b){return 1===b.registrationStatus&&b.registrationTime+Ut<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function xr(){return(xr=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const $=function Ns(b,{fid:D}){return`${_t(b)}/${D}/authTokens:generate`}(b,x),pe=function je(b,{refreshToken:D}){const x=We(b);return x.append("Authorization",function _n(b){return`${H} ${b}`}(D)),x}(b,x),Re=D.getImmediate({optional:!0});if(Re){const Ht=yield Re.getHeartbeatsHeader();Ht&&pe.append("x-firebase-client",Ht)}const Dt={method:"POST",headers:pe,body:JSON.stringify({installation:{sdkVersion:Ke,appId:b.appId}})},vt=yield ut(()=>fetch($,Dt));if(vt.ok)return It(yield vt.json());throw yield Jt("Generate Auth Token",vt)})).apply(this,arguments)}function go(b){return dl.apply(this,arguments)}function dl(){return dl=(0,F.Z)(function*(b,D=!1){let x;const $=yield $t(b.appConfig,Re=>{if(!Kr(Re))throw lt.create("not-registered");const qe=Re.authToken;if(!D&&function Zi(b){return 2===b.requestStatus&&!function mo(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+ie}(b)}(qe))return Re;if(1===qe.requestStatus)return x=function Fi(b,D){return Mr.apply(this,arguments)}(b,D),Re;{if(!navigator.onLine)throw lt.create("app-offline");const Dt=function _o(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}(Re);return x=function Bi(b,D){return An.apply(this,arguments)}(b,Dt),Dt}});return x?yield x:$.authToken}),dl.apply(this,arguments)}function Mr(){return(Mr=(0,F.Z)(function*(b,D){let x=yield Br(b.appConfig);for(;1===x.authToken.requestStatus;)yield In(100),x=yield Br(b.appConfig);const $=x.authToken;return 0===$.requestStatus?go(b,D):$})).apply(this,arguments)}function Br(b){return $t(b,D=>{if(!Kr(D))throw lt.create("not-registered");return function nr(b){return 1===b.requestStatus&&b.requestTime+Ut<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function An(){return An=(0,F.Z)(function*(b,D){try{const x=yield function Pn(b,D){return xr.apply(this,arguments)}(b,D),$=Object.assign(Object.assign({},D),{authToken:x});return yield he(b.appConfig,$),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const $=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield he(b.appConfig,$)}else yield gt(b.appConfig);throw x}}),An.apply(this,arguments)}function Kr(b){return void 0!==b&&2===b.registrationStatus}function Jn(){return(Jn=(0,F.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:$}=yield te(D);return $?$.catch(console.error):go(D).catch(console.error),x.fid})).apply(this,arguments)}function vo(){return vo=(0,F.Z)(function*(b,D=!1){const x=b;return yield function Ta(b){return Ui.apply(this,arguments)}(x),(yield go(x,D)).token}),vo.apply(this,arguments)}function Ui(){return(Ui=(0,F.Z)(function*(b){const{registrationPromise:D}=yield te(b);D&&(yield D)})).apply(this,arguments)}function Io(b){return lt.create("missing-app-config-values",{valueName:b})}const L="installations",z=b=>{const D=b.getProvider("app").getImmediate(),x=function Zr(b){if(!b||!b.options)throw Io("App Configuration");if(!b.name)throw Io("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw Io(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,de._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},J=b=>{const D=b.getProvider("app").getImmediate(),x=(0,de._getProvider)(D,L).getImmediate();return{getId:()=>function Xi(b){return Jn.apply(this,arguments)}(x),getToken:pe=>function Ln(b){return vo.apply(this,arguments)}(x,pe)}};(function Fe(){(0,de._registerComponent)(new ye.wA(L,z,"PUBLIC")),(0,de._registerComponent)(new ye.wA("installations-internal",J,"PRIVATE"))})(),(0,de.registerVersion)(pt,Gt),(0,de.registerVersion)(pt,Gt,"esm2017");const xe="@firebase/remote-config",mt=new me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class tn{constructor(D,x,$,pe){this.client=D,this.storage=x,this.storageCache=$,this.logger=pe}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-x,pe=$<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${pe}.`),pe}fetch(D){var x=this;return(0,F.Z)(function*(){const[$,pe]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(pe&&x.isCachedDataFresh(D.cacheMaxAgeMillis,$))return pe;D.eTag=pe&&pe.eTag;const Re=yield x.client.fetch(D),qe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Re.status&&qe.push(x.storage.setLastSuccessfulFetchResponse(Re)),yield Promise.all(qe),Re})()}}function vr(b=navigator){return b.languages&&b.languages[0]||b.language}class Ji{constructor(D,x,$,pe,Re,qe){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=$,this.projectId=pe,this.apiKey=Re,this.appId=qe}fetch(D){var x=this;return(0,F.Z)(function*(){const[$,pe]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),qe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Dt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},vt={sdk_version:x.sdkVersion,app_instance_id:$,app_instance_id_token:pe,app_id:x.appId,language_code:vr()},Ht={method:"POST",headers:Dt,body:JSON.stringify(vt)},yn=fetch(qe,Ht),gn=new Promise((ui,To)=>{D.signal.addEventListener(()=>{const hs=new Error("The operation was aborted.");hs.name="AbortError",To(hs)})});let kr;try{yield Promise.race([yn,gn]),kr=yield yn}catch(ui){let To="fetch-client-network";throw"AbortError"===(null==ui?void 0:ui.name)&&(To="fetch-timeout"),mt.create(To,{originalErrorMessage:null==ui?void 0:ui.message})}let Vr=kr.status;const Vo=kr.headers.get("ETag")||void 0;let Pr,jo;if(200===kr.status){let ui;try{ui=yield kr.json()}catch(To){throw mt.create("fetch-client-parse",{originalErrorMessage:null==To?void 0:To.message})}Pr=ui.entries,jo=ui.state}if("INSTANCE_STATE_UNSPECIFIED"===jo?Vr=500:"NO_CHANGE"===jo?Vr=304:("NO_TEMPLATE"===jo||"EMPTY_CONFIG"===jo)&&(Pr={}),304!==Vr&&200!==Vr)throw mt.create("fetch-status",{httpStatus:Vr});return{status:Vr,eTag:Vo,config:Pr}})()}}class oc{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,F.Z)(function*(){const $=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,$)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:$}){var pe=this;return(0,F.Z)(function*(){yield function Ra(b,D){return new Promise((x,$)=>{const pe=Math.max(D-Date.now(),0),Re=setTimeout(x,pe);b.addEventListener(()=>{clearTimeout(Re),$(mt.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const Re=yield pe.client.fetch(D);return yield pe.storage.deleteThrottleMetadata(),Re}catch(Re){if(!function yi(b){if(!(b instanceof me.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Re))throw Re;const qe={throttleEndTimeMillis:Date.now()+(0,me.$s)($),backoffCount:$+1};return yield pe.storage.setThrottleMetadata(qe),pe.attemptFetch(D,qe)}})()}}class hl{constructor(D,x,$,pe,Re){this.app=D,this._client=x,this._storageCache=$,this._storage=pe,this._logger=Re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function on(b,D){const x=b.target.error||void 0;return mt.create(D,{originalErrorMessage:x&&(null==x?void 0:x.message)})}const Ii="app_namespace_store";class bd{constructor(D,x,$,pe=function yr(){return new Promise((b,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=$=>{D(on($,"storage-open"))},x.onsuccess=$=>{b($.target.result)},x.onupgradeneeded=$=>{0===$.oldVersion&&$.target.result.createObjectStore(Ii,{keyPath:"compositeKey"})}}catch(x){D(mt.create("storage-open",{originalErrorMessage:null==x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=$,this.openDbPromise=pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,F.Z)(function*(){const $=yield x.openDbPromise;return new Promise((pe,Re)=>{const Dt=$.transaction([Ii],"readonly").objectStore(Ii),vt=x.createCompositeKey(D);try{const Ht=Dt.get(vt);Ht.onerror=yn=>{Re(on(yn,"storage-get"))},Ht.onsuccess=yn=>{const gn=yn.target.result;pe(gn?gn.value:void 0)}}catch(Ht){Re(mt.create("storage-get",{originalErrorMessage:null==Ht?void 0:Ht.message}))}})})()}set(D,x){var $=this;return(0,F.Z)(function*(){const pe=yield $.openDbPromise;return new Promise((Re,qe)=>{const vt=pe.transaction([Ii],"readwrite").objectStore(Ii),Ht=$.createCompositeKey(D);try{const yn=vt.put({compositeKey:Ht,value:x});yn.onerror=gn=>{qe(on(gn,"storage-set"))},yn.onsuccess=()=>{Re()}}catch(yn){qe(mt.create("storage-set",{originalErrorMessage:null==yn?void 0:yn.message}))}})})()}delete(D){var x=this;return(0,F.Z)(function*(){const $=yield x.openDbPromise;return new Promise((pe,Re)=>{const Dt=$.transaction([Ii],"readwrite").objectStore(Ii),vt=x.createCompositeKey(D);try{const Ht=Dt.delete(vt);Ht.onerror=yn=>{Re(on(yn,"storage-delete"))},Ht.onsuccess=()=>{pe()}}catch(Ht){Re(mt.create("storage-delete",{originalErrorMessage:null==Ht?void 0:Ht.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class xa{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const x=D.storage.getLastFetchStatus(),$=D.storage.getLastSuccessfulFetchTimestampMillis(),pe=D.storage.getActiveConfig(),Re=yield x;Re&&(D.lastFetchStatus=Re);const qe=yield $;qe&&(D.lastSuccessfulFetchTimestampMillis=qe);const Dt=yield pe;Dt&&(D.activeConfig=Dt)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function na(){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,F.Z)(function*(){if(!(0,me.hl)())return!1;try{return yield(0,me.eu)()}catch{return!1}})).apply(this,arguments)}!function ni(){(0,de._registerComponent)(new ye.wA("remote-config",function b(D,{instanceIdentifier:x}){const $=D.getProvider("app").getImmediate(),pe=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw mt.create("registration-window");if(!(0,me.hl)())throw mt.create("indexed-db-unavailable");const{projectId:Re,apiKey:qe,appId:Dt}=$.options;if(!Re)throw mt.create("registration-project-id");if(!qe)throw mt.create("registration-api-key");if(!Dt)throw mt.create("registration-app-id");const vt=new bd(Dt,$.name,x=x||"firebase"),Ht=new xa(vt),yn=new Q.Yd(xe);yn.logLevel=Q.in.ERROR;const gn=new Ji(pe,de.SDK_VERSION,x,Re,qe,Dt),kr=new oc(gn,vt),Vr=new tn(kr,vt,Ht,yn),Vo=new hl($,Vr,Ht,vt,yn);return function vi(b){const D=(0,me.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Vo),Vo},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(xe,"0.4.4"),(0,de.registerVersion)(xe,"0.4.4","esm2017")}();const ac=(b,D)=>D.some(x=>b instanceof x);let ra,wn;const au=new WeakMap,ri=new WeakMap,Ma=new WeakMap,ii=new WeakMap,ia=new WeakMap;let si={get(b,D,x){if(b instanceof IDBTransaction){if("done"===D)return ri.get(b);if("objectStoreNames"===D)return b.objectStoreNames||Ma.get(b);if("store"===D)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ds(b[D])},set:(b,D,x)=>(b[D]=x,!0),has:(b,D)=>b instanceof IDBTransaction&&("done"===D||"store"===D)||D in b};function ka(b){return"function"==typeof b?function lu(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fl(){return wn||(wn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...D){return b.apply(as(this),D),Ds(au.get(this))}:function(...D){return Ds(b.apply(as(this),D))}:function(D,...x){const $=b.call(as(this),D,...x);return Ma.set($,D.sort?D.sort():[D]),Ds($)}}(b):(b instanceof IDBTransaction&&function sg(b){if(ri.has(b))return;const D=new Promise((x,$)=>{const pe=()=>{b.removeEventListener("complete",Re),b.removeEventListener("error",qe),b.removeEventListener("abort",qe)},Re=()=>{x(),pe()},qe=()=>{$(b.error||new DOMException("AbortError","AbortError")),pe()};b.addEventListener("complete",Re),b.addEventListener("error",qe),b.addEventListener("abort",qe)});ri.set(b,D)}(b),ac(b,function L_(){return ra||(ra=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,si):b)}function Ds(b){if(b instanceof IDBRequest)return function Ei(b){const D=new Promise((x,$)=>{const pe=()=>{b.removeEventListener("success",Re),b.removeEventListener("error",qe)},Re=()=>{x(Ds(b.result)),pe()},qe=()=>{$(b.error),pe()};b.addEventListener("success",Re),b.addEventListener("error",qe)});return D.then(x=>{x instanceof IDBCursor&&au.set(x,b)}).catch(()=>{}),ia.set(D,b),D}(b);if(ii.has(b))return ii.get(b);const D=ka(b);return D!==b&&(ii.set(b,D),ia.set(D,b)),D}const as=b=>ia.get(b);function pl(b,D,{blocked:x,upgrade:$,blocking:pe,terminated:Re}={}){const qe=indexedDB.open(b,D),Dt=Ds(qe);return $&&qe.addEventListener("upgradeneeded",vt=>{$(Ds(qe.result),vt.oldVersion,vt.newVersion,Ds(qe.transaction))}),x&&qe.addEventListener("blocked",()=>x()),Dt.then(vt=>{Re&&vt.addEventListener("close",()=>Re()),pe&&vt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),Dt}function gl(b,{blocked:D}={}){const x=indexedDB.deleteDatabase(b);return D&&x.addEventListener("blocked",()=>D()),Ds(x).then(()=>{})}const Cd=["get","getKey","getAll","getAllKeys","count"],F_=["put","add","delete","clear"],cu=new Map;function Td(b,D){if(!(b instanceof IDBDatabase)||D in b||"string"!=typeof D)return;if(cu.get(D))return cu.get(D);const x=D.replace(/FromIndex$/,""),$=D!==x,pe=F_.includes(x);if(!(x in($?IDBIndex:IDBObjectStore).prototype)||!pe&&!Cd.includes(x))return;const Re=function(){var qe=(0,F.Z)(function*(Dt,...vt){const Ht=this.transaction(Dt,pe?"readwrite":"readonly");let yn=Ht.store;return $&&(yn=yn.index(vt.shift())),(yield Promise.all([yn[x](...vt),pe&&Ht.done]))[0]});return function(vt){return qe.apply(this,arguments)}}();return cu.set(D,Re),Re}!function $i(b){si=b(si)}(b=>({...b,get:(D,x,$)=>Td(D,x)||b.get(D,x,$),has:(D,x)=>!!Td(D,x)||b.has(D,x)}));const zh="/firebase-messaging-sw.js",Dd="/firebase-cloud-messaging-push-scope",Wh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",B_="https://fcmregistrations.googleapis.com/v1",Ir="google.c.a.c_id",U_="google.c.a.c_l",og="google.c.a.ts";var qh=function(b){return b.PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",b}(qh||{});function Fo(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sd(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(x),pe=new Uint8Array($.length);for(let Re=0;Re<$.length;++Re)pe[Re]=$.charCodeAt(Re);return pe}const ml="fcm_token_details_db",Ad=5,lc="fcm_token_object_Store";function cc(){return cc=(0,F.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Re=>Re.name).includes(ml))return null;let D=null;return(yield pl(ml,Ad,{upgrade:($=(0,F.Z)(function*(pe,Re,qe,Dt){var vt;if(Re<2||!pe.objectStoreNames.contains(lc))return;const Ht=Dt.objectStore(lc),yn=yield Ht.index("fcmSenderId").get(b);if(yield Ht.clear(),yn)if(2===Re){const gn=yn;if(!gn.auth||!gn.p256dh||!gn.endpoint)return;D={token:gn.fcmToken,createTime:null!==(vt=gn.createTime)&&void 0!==vt?vt:Date.now(),subscriptionOptions:{auth:gn.auth,p256dh:gn.p256dh,endpoint:gn.endpoint,swScope:gn.swScope,vapidKey:"string"==typeof gn.vapidKey?gn.vapidKey:Fo(gn.vapidKey)}}}else if(3===Re){const gn=yn;D={token:gn.fcmToken,createTime:gn.createTime,subscriptionOptions:{auth:Fo(gn.auth),p256dh:Fo(gn.p256dh),endpoint:gn.endpoint,swScope:gn.swScope,vapidKey:Fo(gn.vapidKey)}}}else if(4===Re){const gn=yn;D={token:gn.fcmToken,createTime:gn.createTime,subscriptionOptions:{auth:Fo(gn.auth),p256dh:Fo(gn.p256dh),endpoint:gn.endpoint,swScope:gn.swScope,vapidKey:Fo(gn.vapidKey)}}}}),function(Re,qe,Dt,vt){return $.apply(this,arguments)})})).close(),yield gl(ml),yield gl("fcm_vapid_details_db"),yield gl("undefined"),function Pa(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var $}),cc.apply(this,arguments)}const Eo="firebase-messaging-database",Yh=1,Bs="firebase-messaging-store";let Xr=null;function Oa(){return Xr||(Xr=pl(Eo,Yh,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Bs)}})),Xr}function ls(b){return Na.apply(this,arguments)}function Na(){return Na=(0,F.Z)(function*(b){const D=dc(b),$=yield(yield Oa()).transaction(Bs).objectStore(Bs).get(D);if($)return $;{const pe=yield function iI(b){return cc.apply(this,arguments)}(b.appConfig.senderId);if(pe)return yield Rd(b,pe),pe}}),Na.apply(this,arguments)}function Rd(b,D){return uc.apply(this,arguments)}function uc(){return(uc=(0,F.Z)(function*(b,D){const x=dc(b),pe=(yield Oa()).transaction(Bs,"readwrite");return yield pe.objectStore(Bs).put(D,x),yield pe.done,D})).apply(this,arguments)}function _l(){return(_l=(0,F.Z)(function*(b){const D=dc(b),$=(yield Oa()).transaction(Bs,"readwrite");yield $.objectStore(Bs).delete(D),yield $.done})).apply(this,arguments)}function dc({appConfig:b}){return b.appId}const oi=new me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xd(b,D){return Md.apply(this,arguments)}function Md(){return(Md=(0,F.Z)(function*(b,D){const x=yield Xh(b),$=$_(D),pe={method:"POST",headers:x,body:JSON.stringify($)};let Re;try{Re=yield(yield fetch(fc(b.appConfig),pe)).json()}catch(qe){throw oi.create("token-subscribe-failed",{errorInfo:null==qe?void 0:qe.toString()})}if(Re.error)throw oi.create("token-subscribe-failed",{errorInfo:Re.error.message});if(!Re.token)throw oi.create("token-subscribe-no-token");return Re.token})).apply(this,arguments)}function hc(){return(hc=(0,F.Z)(function*(b,D){const x=yield Xh(b),$=$_(D.subscriptionOptions),pe={method:"PATCH",headers:x,body:JSON.stringify($)};let Re;try{Re=yield(yield fetch(`${fc(b.appConfig)}/${D.token}`,pe)).json()}catch(qe){throw oi.create("token-update-failed",{errorInfo:null==qe?void 0:qe.toString()})}if(Re.error)throw oi.create("token-update-failed",{errorInfo:Re.error.message});if(!Re.token)throw oi.create("token-update-no-token");return Re.token})).apply(this,arguments)}function La(b,D){return sa.apply(this,arguments)}function sa(){return(sa=(0,F.Z)(function*(b,D){const $={method:"DELETE",headers:yield Xh(b)};try{const Re=yield(yield fetch(`${fc(b.appConfig)}/${D}`,$)).json();if(Re.error)throw oi.create("token-unsubscribe-failed",{errorInfo:Re.error.message})}catch(pe){throw oi.create("token-unsubscribe-failed",{errorInfo:null==pe?void 0:pe.toString()})}})).apply(this,arguments)}function fc({projectId:b}){return`${B_}/projects/${b}/registrations`}function Xh(b){return uu.apply(this,arguments)}function uu(){return(uu=(0,F.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function $_({p256dh:b,auth:D,endpoint:x,vapidKey:$}){const pe={web:{endpoint:x,auth:D,p256dh:b}};return $!==Wh&&(pe.web.applicationPubKey=$),pe}const Qh=6048e5;function Pd(){return Pd=(0,F.Z)(function*(b){const D=yield function pc(b,D){return Od.apply(this,arguments)}(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:Fo(D.getKey("auth")),p256dh:Fo(D.getKey("p256dh"))},$=yield ls(b.firebaseDependencies);if($){if(function ef(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}($.subscriptionOptions,x))return Date.now()>=$.createTime+Qh?function lg(b,D){return vl.apply(this,arguments)}(b,{token:$.token,createTime:Date.now(),subscriptionOptions:x}):$.token;try{yield La(b.firebaseDependencies,$.token)}catch(pe){console.warn(pe)}return j_(b.firebaseDependencies,x)}return j_(b.firebaseDependencies,x)}),Pd.apply(this,arguments)}function du(){return du=(0,F.Z)(function*(b){const D=yield ls(b.firebaseDependencies);D&&(yield La(b.firebaseDependencies,D.token),yield function Kh(b){return _l.apply(this,arguments)}(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),du.apply(this,arguments)}function vl(){return vl=(0,F.Z)(function*(b,D){try{const x=yield function kd(b,D){return hc.apply(this,arguments)}(b.firebaseDependencies,D),$=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Rd(b.firebaseDependencies,$),x}catch(x){throw yield function Jh(b){return du.apply(this,arguments)}(b),x}}),vl.apply(this,arguments)}function j_(b,D){return yl.apply(this,arguments)}function yl(){return(yl=(0,F.Z)(function*(b,D){const $={token:yield xd(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Rd(b,$),$.token})).apply(this,arguments)}function Od(){return(Od=(0,F.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sd(D)})})).apply(this,arguments)}function hu(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function gc(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const $=D.notification.body;$&&(b.notification.body=$);const pe=D.notification.image;pe&&(b.notification.image=pe);const Re=D.notification.icon;Re&&(b.notification.icon=Re)}(D,b),function cg(b,D){D.data&&(b.data=D.data)}(D,b),function Nd(b,D){var x,$,pe,Re,qe;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Dt=null!==(pe=null===($=D.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==pe?pe:null===(Re=D.notification)||void 0===Re?void 0:Re.click_action;Dt&&(b.fcmOptions.link=Dt);const vt=null===(qe=D.fcmOptions)||void 0===qe?void 0:qe.analytics_label;vt&&(b.fcmOptions.analyticsLabel=vt)}(D,b),D}function Ld(b,D){const x=[];for(let $=0;$<b.length;$++)x.push(b.charAt($)),$<D.length&&x.push(D.charAt($));return x.join("")}function Fd(b){return oi.create("missing-app-config-values",{valueName:b})}Ld("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ld("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dg{constructor(D,x,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pe=function ug(b){if(!b||!b.options)throw Fd("App Configuration Object");if(!b.name)throw Fd("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const $ of D)if(!x[$])throw Fd($);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:pe,installations:x,analyticsProvider:$}}_delete(){return Promise.resolve()}}function mc(){return(mc=(0,F.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(zh,{scope:Dd}),b.swRegistration.update().catch(()=>{})}catch(D){throw oi.create("failed-service-worker-registration",{browserErrorMessage:null==D?void 0:D.message})}})).apply(this,arguments)}function Fa(){return(Fa=(0,F.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield function fu(b){return mc.apply(this,arguments)}(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw oi.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function Ba(){return(Ba=(0,F.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Wh)})).apply(this,arguments)}function _c(){return _c=(0,F.Z)(function*(b,D){if(!navigator)throw oi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw oi.create("permission-blocked");return yield function wo(b,D){return Ba.apply(this,arguments)}(b,null==D?void 0:D.vapidKey),yield function hg(b,D){return Fa.apply(this,arguments)}(b,null==D?void 0:D.serviceWorkerRegistration),function V_(b){return Pd.apply(this,arguments)}(b)}),_c.apply(this,arguments)}function Js(){return(Js=(0,F.Z)(function*(b,D,x){const $=function nf(b){switch(b){case qh.NOTIFICATION_CLICKED:return"notification_open";case qh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:x[Ir],message_name:x[U_],message_time:x[og],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function jn(){return jn=(0,F.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===qh.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(hu(x)):b.onMessageHandler.next(hu(x)));const $=x.data;(function H_(b){return"object"==typeof b&&!!b&&Ir in b})($)&&"1"===$["google.c.a.e"]&&(yield function fg(b,D,x){return Js.apply(this,arguments)}(b,x.messageType,$))}),jn.apply(this,arguments)}const Ua="@firebase/messaging",wi=b=>{const D=new dg(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function rf(b,D){return jn.apply(this,arguments)}(D,x)),D},pg=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:$=>function tf(b,D){return _c.apply(this,arguments)}(D,$)}};function Va(){return bi.apply(this,arguments)}function bi(){return(bi=(0,F.Z)(function*(){try{yield(0,me.eu)()}catch{return!1}return typeof window<"u"&&(0,me.hl)()&&(0,me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bd(){(0,de._registerComponent)(new ye.wA("messaging",wi,"PUBLIC")),(0,de._registerComponent)(new ye.wA("messaging-internal",pg,"PRIVATE")),(0,de.registerVersion)(Ua,"0.12.4"),(0,de.registerVersion)(Ua,"0.12.4","esm2017")}();const fr="analytics",z_="firebase_id",an="origin",sf=6e4,af="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gu="https://www.googletagmanager.com/gtag/js",ai=new Q.Yd("@firebase/analytics"),Ci=new me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function bo(b){if(!b.startsWith(gu)){const D=Ci.create("invalid-gtag-resource",{gtagURL:b});return ai.warn(D.message),""}return b}function mu(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function ot(){return(ot=(0,F.Z)(function*(b,D,x,$,pe,Re){const qe=$[pe];try{if(qe)yield D[qe];else{const vt=(yield mu(x)).find(Ht=>Ht.measurementId===pe);vt&&(yield D[vt.appId])}}catch(Dt){ai.error(Dt)}b("config",pe,Re)})).apply(this,arguments)}function eo(){return(eo=(0,F.Z)(function*(b,D,x,$,pe){try{let Re=[];if(pe&&pe.send_to){let qe=pe.send_to;Array.isArray(qe)||(qe=[qe]);const Dt=yield mu(x);for(const vt of qe){const Ht=Dt.find(gn=>gn.measurementId===vt),yn=Ht&&D[Ht.appId];if(!yn){Re=[];break}Re.push(yn)}}0===Re.length&&(Re=Object.values(D)),yield Promise.all(Re),b("event",$,pe||{})}catch(Re){ai.error(Re)}})).apply(this,arguments)}const El=30,Vd=new class ja{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function vg(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function jd(){return(jd=(0,F.Z)(function*(b){var D;const{appId:x,apiKey:$}=b,pe={method:"GET",headers:vg($)},Re=af.replace("{app-id}",x),qe=yield fetch(Re,pe);if(200!==qe.status&&304!==qe.status){let Dt="";try{const vt=yield qe.json();null!==(D=vt.error)&&void 0!==D&&D.message&&(Dt=vt.error.message)}catch{}throw Ci.create("config-fetch-failed",{httpStatus:qe.status,responseMessage:Dt})}return qe.json()})).apply(this,arguments)}function Ss(){return(Ss=(0,F.Z)(function*(b,D=Vd,x){const{appId:$,apiKey:pe,measurementId:Re}=b.options;if(!$)throw Ci.create("no-app-id");if(!pe){if(Re)return{measurementId:Re,appId:$};throw Ci.create("no-api-key")}const qe=D.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dt=new df;return setTimeout((0,F.Z)(function*(){Dt.abort()}),void 0!==x?x:sf),cf({appId:$,apiKey:pe,measurementId:Re},qe,Dt,D)})).apply(this,arguments)}function cf(b,D,x){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,F.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},$,pe=Vd){var Re;const{appId:qe,measurementId:Dt}=b;try{yield function aa(b,D){return new Promise((x,$)=>{const pe=Math.max(D-Date.now(),0),Re=setTimeout(x,pe);b.addEventListener(()=>{clearTimeout(Re),$(Ci.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}($,D)}catch(vt){if(Dt)return ai.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${null==vt?void 0:vt.message}]`),{appId:qe,measurementId:Dt};throw vt}try{const vt=yield function sI(b){return jd.apply(this,arguments)}(b);return pe.deleteThrottleMetadata(qe),vt}catch(vt){const Ht=vt;if(!function uf(b){if(!(b instanceof me.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Ht)){if(pe.deleteThrottleMetadata(qe),Dt)return ai.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${null==Ht?void 0:Ht.message}]`),{appId:qe,measurementId:Dt};throw vt}const yn=503===Number(null===(Re=null==Ht?void 0:Ht.customData)||void 0===Re?void 0:Re.httpStatus)?(0,me.$s)(x,pe.intervalMillis,El):(0,me.$s)(x,pe.intervalMillis),gn={throttleEndTimeMillis:Date.now()+yn,backoffCount:x+1};return pe.setThrottleMetadata(qe,gn),ai.debug(`Calling attemptFetch again in ${yn} millis`),cf(b,gn,$,pe)}}),Ha.apply(this,arguments)}class df{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Eu,Ti;function wu(){return(wu=(0,F.Z)(function*(b,D,x,$,pe){if(pe&&pe.global)b("event",x,$);else{const Re=yield D;b("event",x,Object.assign(Object.assign({},$),{send_to:Re}))}})).apply(this,arguments)}function Bo(){return(Bo=(0,F.Z)(function*(){if(!(0,me.hl)())return ai.warn(Ci.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,me.eu)()}catch(b){return ai.warn(Ci.create("indexeddb-unavailable",{errorInfo:null==b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Ga(){return Ga=(0,F.Z)(function*(b,D,x,$,pe,Re,qe){var Dt;const vt=function us(b){return Ss.apply(this,arguments)}(b);vt.then(Vr=>{x[Vr.measurementId]=Vr.appId,b.options.measurementId&&Vr.measurementId!==b.options.measurementId&&ai.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Vr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vr=>ai.error(Vr)),D.push(vt);const Ht=function Di(){return Bo.apply(this,arguments)}().then(Vr=>{if(Vr)return $.getId()}),[yn,gn]=yield Promise.all([vt,Ht]);(function Iu(b){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(gu)&&x.src.includes(b))return x;return null})(Re)||function vu(b,D){const x=function _u(b,D){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(b,D)),x}("firebase-js-sdk-policy",{createScriptURL:bo}),$=document.createElement("script"),pe=`${gu}?l=${b}&id=${D}`;$.src=x?null==x?void 0:x.createScriptURL(pe):pe,$.async=!0,document.head.appendChild($)}(Re,yn.measurementId),Ti&&(pe("consent","default",Ti),function Cu(b){Ti=b}(void 0)),pe("js",new Date);const kr=null!==(Dt=null==qe?void 0:qe.config)&&void 0!==Dt?Dt:{};return kr[an]="firebase",kr.update=!0,null!=gn&&(kr[z_]=gn),pe("config",yn.measurementId,kr),Eu&&(pe("set",Eu),function vc(b){Eu=b}(void 0)),yn.measurementId}),Ga.apply(this,arguments)}class to{constructor(D){this.app=D}_delete(){return delete Kt[this.app.options.appId],Promise.resolve()}}let Kt={},gf=[];const Hd={};let no,or,za="dataLayer",bl=!1;function Cl(b,D,x){!function Tu(){const b=[];if((0,me.ru)()&&b.push("This is a browser extension environment."),(0,me.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map(($,pe)=>`(${pe+1}) ${$}`).join(" "),x=Ci.create("invalid-analytics-context",{errorInfo:D});ai.warn(x.message)}}();const $=b.options.appId;if(!$)throw Ci.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Ci.create("no-api-key");ai.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kt[$])throw Ci.create("already-exists",{id:$});if(!bl){!function W_(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(za);const{wrappedGtag:Re,gtagCore:qe}=function li(b,D,x,$,pe){let Re=function(...qe){window[$].push(arguments)};return window[pe]&&"function"==typeof window[pe]&&(Re=window[pe]),window[pe]=function yu(b,D,x,$){function Re(){return Re=(0,F.Z)(function*(qe,...Dt){try{if("event"===qe){const[vt,Ht]=Dt;yield function On(b,D,x,$,pe){return eo.apply(this,arguments)}(b,D,x,vt,Ht)}else if("config"===qe){const[vt,Ht]=Dt;yield function $d(b,D,x,$,pe,Re){return ot.apply(this,arguments)}(b,D,x,$,vt,Ht)}else if("consent"===qe){const[vt]=Dt;b("consent","update",vt)}else if("get"===qe){const[vt,Ht,yn]=Dt;b("get",vt,Ht,yn)}else if("set"===qe){const[vt]=Dt;b("set",vt)}else b(qe,...Dt)}catch(vt){ai.error(vt)}}),Re.apply(this,arguments)}return function pe(qe){return Re.apply(this,arguments)}}(Re,b,D,x),{gtagCore:Re,wrappedGtag:window[pe]}}(Kt,gf,Hd,za,"gtag");or=Re,no=qe,bl=!0}return Kt[$]=function sr(b,D,x,$,pe,Re,qe){return Ga.apply(this,arguments)}(b,gf,Hd,D,no,za,x),new to(b)}function qa(){return ca.apply(this,arguments)}function ca(){return(ca=(0,F.Z)(function*(){if((0,me.ru)()||!(0,me.zI)()||!(0,me.hl)())return!1;try{return yield(0,me.eu)()}catch{return!1}})).apply(this,arguments)}const Tl="@firebase/analytics";!function wr(){(0,de._registerComponent)(new ye.wA(fr,(D,{options:x})=>Cl(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,de._registerComponent)(new ye.wA("analytics-internal",function b(D){try{const x=D.getProvider(fr).getImmediate();return{logEvent:($,pe,Re)=>function Si(b,D,x,$){b=(0,me.m9)(b),function q_(b,D,x,$,pe){return wu.apply(this,arguments)}(or,Kt[b.app.options.appId],D,x,$).catch(pe=>ai.error(pe))}(x,$,pe,Re)}}catch(x){throw Ci.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,de.registerVersion)(Tl,"0.10.0"),(0,de.registerVersion)(Tl,"0.10.0","esm2017")}();var $s=P(1954),Vi=P(2631);const Ec=new class Ai extends Vi.v{}(class Dl extends $s.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(D,x,$):(D.flush(this),0)}});var zd=P(6321),Ri=P(9397),ua=P(3093),br=P(5137);const Vs=new u.GfV("7.6.1"),wc="__angularfire_symbol__analyticsIsSupportedValue",Rs="__angularfire_symbol__analyticsIsSupported",Ya="__angularfire_symbol__remoteConfigIsSupportedValue",Su="__angularfire_symbol__remoteConfigIsSupported",bc="__angularfire_symbol__messagingIsSupportedValue",Ka="__angularfire_symbol__messagingIsSupported";function Xa(b,D,x){if(D){if(1===D.length)return D[0];const Re=D.filter(qe=>qe.app===x);if(1===Re.length)return Re[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Rs]||(globalThis[Rs]=qa().then(b=>globalThis[wc]=b).catch(()=>globalThis[wc]=!1)),globalThis[Ka]||(globalThis[Ka]=Va().then(b=>globalThis[bc]=b).catch(()=>globalThis[bc]=!1)),globalThis[Su]||(globalThis[Su]=na().then(b=>globalThis[Ya]=b).catch(()=>globalThis[Ya]=!1));const Sl=(b,D)=>{const x=D?[D]:(0,le.C6)(),$=[];return x.forEach(pe=>{pe.container.getProvider(b).instances.forEach(qe=>{$.includes(qe)||$.push(qe)})}),$};function $o(){}class Wd{constructor(D,x=Ec){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,$){const pe=this.zone;return this.delegate.schedule(function(qe){pe.runGuarded(()=>{D.apply(this,[qe])})},x,$)}}class ds{constructor(D){this.zone=D,this.task=null}call(D,x){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$o,{},$o,$o)),x.pipe((0,Ri.b)({next:$,complete:$,error:$})).subscribe(D).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qd=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Wd(Zone.current)),this.insideAngular=x.run(()=>new Wd(Zone.current,zd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(u.LFG(u.R0b))},b.\u0275prov=u.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Cr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Au(b){return b.pipe((0,ua.Q)(Cr().outsideAngular))}function Yd(b){return Cr(),function Ru(b){return function(x){return(x=x.lift(new ds(b.ngZone))).pipe((0,br.R)(b.outsideAngular),(0,ua.Q)(b.insideAngular))}}(Cr())(b)}},9058:(wt,Le,P)=>{"use strict";P.d(Le,{$s:()=>gt,BH:()=>ae,DV:()=>mn,Dv:()=>dr,G6:()=>Ke,GJ:()=>ut,L:()=>ge,LL:()=>Oe,Pz:()=>_e,Sg:()=>Ce,UG:()=>W,UI:()=>ln,US:()=>ye,Wj:()=>xn,Wl:()=>It,Yr:()=>Ut,ZB:()=>K,ZR:()=>ke,aH:()=>oe,b$:()=>Ue,cI:()=>_t,dS:()=>Yi,eu:()=>Y,g5:()=>F,gK:()=>Sn,gQ:()=>un,h$:()=>De,hl:()=>H,hu:()=>le,jU:()=>ve,lb:()=>ti,m9:()=>dn,ne:()=>Fn,p$:()=>j,pd:()=>Qt,r3:()=>Mt,ru:()=>Pe,tV:()=>V,uI:()=>Z,ug:()=>Li,vZ:()=>cn,w1:()=>pt,w9:()=>je,xO:()=>Kn,xb:()=>_n,z$:()=>se,zI:()=>ie,zd:()=>qt});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},le=function(te,X){if(!te)throw F(X)},F=function(te){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+te)},de=function(te){const X=[];let Ie=0;for(let et=0;et<te.length;et++){let $e=te.charCodeAt(et);$e<128?X[Ie++]=$e:$e<2048?(X[Ie++]=$e>>6|192,X[Ie++]=63&$e|128):55296==(64512&$e)&&et+1<te.length&&56320==(64512&te.charCodeAt(et+1))?($e=65536+((1023&$e)<<10)+(1023&te.charCodeAt(++et)),X[Ie++]=$e>>18|240,X[Ie++]=$e>>12&63|128,X[Ie++]=$e>>6&63|128,X[Ie++]=63&$e|128):(X[Ie++]=$e>>12|224,X[Ie++]=$e>>6&63|128,X[Ie++]=63&$e|128)}return X},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,X){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ie=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[];for(let $e=0;$e<te.length;$e+=3){const St=te[$e],hn=$e+1<te.length,en=hn?te[$e+1]:0,Rr=$e+2<te.length,fn=Rr?te[$e+2]:0;let xr=(15&en)<<2|fn>>6,Ns=63&fn;Rr||(Ns=64,hn||(xr=64)),et.push(Ie[St>>2],Ie[(3&St)<<4|en>>4],Ie[xr],Ie[Ns])}return et.join("")},encodeString(te,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(te):this.encodeByteArray(de(te),X)},decodeString(te,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(te):function(te){const X=[];let Ie=0,et=0;for(;Ie<te.length;){const $e=te[Ie++];if($e<128)X[et++]=String.fromCharCode($e);else if($e>191&&$e<224){const St=te[Ie++];X[et++]=String.fromCharCode((31&$e)<<6|63&St)}else if($e>239&&$e<365){const Rr=((7&$e)<<18|(63&te[Ie++])<<12|(63&te[Ie++])<<6|63&te[Ie++])-65536;X[et++]=String.fromCharCode(55296+(Rr>>10)),X[et++]=String.fromCharCode(56320+(1023&Rr))}else{const St=te[Ie++],hn=te[Ie++];X[et++]=String.fromCharCode((15&$e)<<12|(63&St)<<6|63&hn)}}return X.join("")}(this.decodeStringToByteArray(te,X))},decodeStringToByteArray(te,X){this.init_();const Ie=X?this.charToByteMapWebSafe_:this.charToByteMap_,et=[];for(let $e=0;$e<te.length;){const St=Ie[te.charAt($e++)],en=$e<te.length?Ie[te.charAt($e)]:0;++$e;const fn=$e<te.length?Ie[te.charAt($e)]:64;++$e;const Pn=$e<te.length?Ie[te.charAt($e)]:64;if(++$e,null==St||null==en||null==fn||null==Pn)throw new Q;et.push(St<<2|en>>4),64!==fn&&(et.push(en<<4&240|fn>>2),64!==Pn&&et.push(fn<<6&192|Pn))}return et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}};class Q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(te){const X=de(te);return ye.encodeByteArray(X,!0)},ge=function(te){return De(te).replace(/\./g,"")},V=function(te){try{return ye.decodeString(te,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function j(te){return K(void 0,te)}function K(te,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return X}for(const Ie in X)!X.hasOwnProperty(Ie)||!re(Ie)||(te[Ie]=K(te[Ie],X[Ie]));return te}function re(te){return"__proto__"!==te}const q=()=>{try{return function ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const X=te&&V(te[1]);return X&&JSON.parse(X)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},oe=()=>{var te;return null===(te=q())||void 0===te?void 0:te.config},_e=te=>{var X;return null===(X=q())||void 0===X?void 0:X[`_${te}`]};class ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,Ie)=>{this.resolve=X,this.reject=Ie})}wrapCallback(X){return(Ie,et)=>{Ie?this.reject(Ie):this.resolve(et),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(Ie):X(Ie,et))}}}function Ce(te,X){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const et=X||"demo-project",$e=te.iat||0,St=te.sub||te.user_id;if(!St)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const hn=Object.assign({iss:`https://securetoken.google.com/${et}`,aud:et,iat:$e,exp:$e+3600,auth_time:$e,sub:St,user_id:St,firebase:{sign_in_provider:"custom",identities:{}}},te);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(hn)),""].join(".")}function se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(se())}function W(){var te;const X=null===(te=q())||void 0===te?void 0:te.forceEnvironment;if("node"===X)return!0;if("browser"===X)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function Pe(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function Ue(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pt(){const te=se();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function Ut(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Ke(){return!W()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){try{return"object"==typeof indexedDB}catch{return!1}}function Y(){return new Promise((te,X)=>{try{let Ie=!0;const et="validate-browser-context-for-indexeddb-analytics-module",$e=self.indexedDB.open(et);$e.onsuccess=()=>{$e.result.close(),Ie||self.indexedDB.deleteDatabase(et),te(!0)},$e.onupgradeneeded=()=>{Ie=!1},$e.onerror=()=>{var St;X((null===(St=$e.error)||void 0===St?void 0:St.message)||"")}}catch(Ie){X(Ie)}})}function ie(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ke extends Error{constructor(X,Ie,et){super(Ie),this.code=X,this.customData=et,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor(X,Ie,et){this.service=X,this.serviceName=Ie,this.errors=et}create(X,...Ie){const et=Ie[0]||{},$e=`${this.service}/${X}`,St=this.errors[X],hn=St?function lt(te,X){return te.replace(nt,(Ie,et)=>{const $e=X[et];return null!=$e?String($e):`<${et}?>`})}(St,et):"Error";return new ke($e,`${this.serviceName}: ${hn} (${$e}).`,et)}}const nt=/\{\$([^}]+)}/g;function _t(te){return JSON.parse(te)}function It(te){return JSON.stringify(te)}const Jt=function(te){let X={},Ie={},et={},$e="";try{const St=te.split(".");X=_t(V(St[0])||""),Ie=_t(V(St[1])||""),$e=St[2],et=Ie.d||{},delete Ie.d}catch{}return{header:X,claims:Ie,data:et,signature:$e}},je=function(te){const Ie=Jt(te).claims;return!!Ie&&"object"==typeof Ie&&Ie.hasOwnProperty("iat")},ut=function(te){const X=Jt(te).claims;return"object"==typeof X&&!0===X.admin};function Mt(te,X){return Object.prototype.hasOwnProperty.call(te,X)}function mn(te,X){if(Object.prototype.hasOwnProperty.call(te,X))return te[X]}function _n(te){for(const X in te)if(Object.prototype.hasOwnProperty.call(te,X))return!1;return!0}function ln(te,X,Ie){const et={};for(const $e in te)Object.prototype.hasOwnProperty.call(te,$e)&&(et[$e]=X.call(Ie,te[$e],$e,te));return et}function cn(te,X){if(te===X)return!0;const Ie=Object.keys(te),et=Object.keys(X);for(const $e of Ie){if(!et.includes($e))return!1;const St=te[$e],hn=X[$e];if(In(St)&&In(hn)){if(!cn(St,hn))return!1}else if(St!==hn)return!1}for(const $e of et)if(!Ie.includes($e))return!1;return!0}function In(te){return null!==te&&"object"==typeof te}function Kn(te){const X=[];for(const[Ie,et]of Object.entries(te))Array.isArray(et)?et.forEach($e=>{X.push(encodeURIComponent(Ie)+"="+encodeURIComponent($e))}):X.push(encodeURIComponent(Ie)+"="+encodeURIComponent(et));return X.length?"&"+X.join("&"):""}function qt(te){const X={};return te.replace(/^\?/,"").split("&").forEach(et=>{if(et){const[$e,St]=et.split("=");X[decodeURIComponent($e)]=decodeURIComponent(St)}}),X}function Qt(te){const X=te.indexOf("?");if(!X)return"";const Ie=te.indexOf("#",X);return te.substring(X,Ie>0?Ie:void 0)}class un{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let X=1;X<this.blockSize;++X)this.pad_[X]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(X,Ie){Ie||(Ie=0);const et=this.W_;if("string"==typeof X)for(let Pn=0;Pn<16;Pn++)et[Pn]=X.charCodeAt(Ie)<<24|X.charCodeAt(Ie+1)<<16|X.charCodeAt(Ie+2)<<8|X.charCodeAt(Ie+3),Ie+=4;else for(let Pn=0;Pn<16;Pn++)et[Pn]=X[Ie]<<24|X[Ie+1]<<16|X[Ie+2]<<8|X[Ie+3],Ie+=4;for(let Pn=16;Pn<80;Pn++){const xr=et[Pn-3]^et[Pn-8]^et[Pn-14]^et[Pn-16];et[Pn]=4294967295&(xr<<1|xr>>>31)}let fn,mr,$e=this.chain_[0],St=this.chain_[1],hn=this.chain_[2],en=this.chain_[3],Rr=this.chain_[4];for(let Pn=0;Pn<80;Pn++){Pn<40?Pn<20?(fn=en^St&(hn^en),mr=1518500249):(fn=St^hn^en,mr=1859775393):Pn<60?(fn=St&hn|en&(St|hn),mr=2400959708):(fn=St^hn^en,mr=3395469782);const xr=($e<<5|$e>>>27)+fn+Rr+mr+et[Pn]&4294967295;Rr=en,en=hn,hn=4294967295&(St<<30|St>>>2),St=$e,$e=xr}this.chain_[0]=this.chain_[0]+$e&4294967295,this.chain_[1]=this.chain_[1]+St&4294967295,this.chain_[2]=this.chain_[2]+hn&4294967295,this.chain_[3]=this.chain_[3]+en&4294967295,this.chain_[4]=this.chain_[4]+Rr&4294967295}update(X,Ie){if(null==X)return;void 0===Ie&&(Ie=X.length);const et=Ie-this.blockSize;let $e=0;const St=this.buf_;let hn=this.inbuf_;for(;$e<Ie;){if(0===hn)for(;$e<=et;)this.compress_(X,$e),$e+=this.blockSize;if("string"==typeof X){for(;$e<Ie;)if(St[hn]=X.charCodeAt($e),++hn,++$e,hn===this.blockSize){this.compress_(St),hn=0;break}}else for(;$e<Ie;)if(St[hn]=X[$e],++hn,++$e,hn===this.blockSize){this.compress_(St),hn=0;break}}this.inbuf_=hn,this.total_+=Ie}digest(){const X=[];let Ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $e=this.blockSize-1;$e>=56;$e--)this.buf_[$e]=255&Ie,Ie/=256;this.compress_(this.buf_);let et=0;for(let $e=0;$e<5;$e++)for(let St=24;St>=0;St-=8)X[et]=this.chain_[$e]>>St&255,++et;return X}}function Fn(te,X){const Ie=new zn(te,X);return Ie.subscribe.bind(Ie)}class zn{constructor(X,Ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ie,this.task.then(()=>{X(this)}).catch(et=>{this.error(et)})}next(X){this.forEachObserver(Ie=>{Ie.next(X)})}error(X){this.forEachObserver(Ie=>{Ie.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,Ie,et){let $e;if(void 0===X&&void 0===Ie&&void 0===et)throw new Error("Missing Observer.");$e=function En(te,X){if("object"!=typeof te||null===te)return!1;for(const Ie of X)if(Ie in te&&"function"==typeof te[Ie])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:Ie,complete:et},void 0===$e.next&&($e.next=Qn),void 0===$e.error&&($e.error=Qn),void 0===$e.complete&&($e.complete=Qn);const St=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$e.error(this.finalError):$e.complete()}catch{}}),this.observers.push($e),St}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let Ie=0;Ie<this.observers.length;Ie++)this.sendOne(Ie,X)}sendOne(X,Ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{Ie(this.observers[X])}catch(et){typeof console<"u"&&console.error&&console.error(et)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qn(){}const dr=function(te,X,Ie,et){let $e;if(et<X?$e="at least "+X:et>Ie&&($e=0===Ie?"none":"no more than "+Ie),$e)throw new Error(te+" failed: Was called with "+et+(1===et?" argument.":" arguments.")+" Expects "+$e+".")};function Sn(te,X){return`${te} failed: ${X} argument `}function xn(te,X,Ie,et){if((!et||Ie)&&"function"!=typeof Ie)throw new Error(Sn(te,X)+"must be a valid function.")}function ti(te,X,Ie,et){if((!et||Ie)&&("object"!=typeof Ie||null===Ie))throw new Error(Sn(te,X)+"must be a valid context object.")}const Yi=function(te){const X=[];let Ie=0;for(let et=0;et<te.length;et++){let $e=te.charCodeAt(et);if($e>=55296&&$e<=56319){const St=$e-55296;et++,le(et<te.length,"Surrogate pair missing trail surrogate."),$e=65536+(St<<10)+(te.charCodeAt(et)-56320)}$e<128?X[Ie++]=$e:$e<2048?(X[Ie++]=$e>>6|192,X[Ie++]=63&$e|128):$e<65536?(X[Ie++]=$e>>12|224,X[Ie++]=$e>>6&63|128,X[Ie++]=63&$e|128):(X[Ie++]=$e>>18|240,X[Ie++]=$e>>12&63|128,X[Ie++]=$e>>6&63|128,X[Ie++]=63&$e|128)}return X},Li=function(te){let X=0;for(let Ie=0;Ie<te.length;Ie++){const et=te.charCodeAt(Ie);et<128?X++:et<2048?X+=2:et>=55296&&et<=56319?(X+=4,Ie++):X+=3}return X},Ki=1e3,Qe=2,he=144e5,Ze=.5;function gt(te,X=Ki,Ie=Qe){const et=X*Math.pow(Ie,te),$e=Math.round(Ze*et*(Math.random()-.5)*2);return Math.min(he,et+$e)}function dn(te){return te&&te._delegate?te._delegate:te}},1774:(wt,Le,P)=>{"use strict";P.d(Le,{c:()=>be});var u=P(6225),le=P(839);let F;const me=fe=>fe.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ye=fe=>(void 0===F&&(F=void 0===fe.style.animationName&&void 0!==fe.style.webkitAnimationName?"-webkit-":""),F),Q=(fe,q,Me)=>{const Ve=q.startsWith("animation")?ye(fe):"";fe.style.setProperty(Ve+q,Me)},De=(fe,q)=>{const Me=q.startsWith("animation")?ye(fe):"";fe.style.removeProperty(Me+q)},j=[],Se=(fe=[],q)=>{if(void 0!==q){const Me=Array.isArray(q)?q:[q];return[...fe,...Me]}return fe},be=fe=>{let q,Me,Ve,oe,_e,ae,ve,H,Y,ie,we,nt,_t,Ce=[],se=[],Z=[],W=!1,Pe={},Ue=[],Ge=[],pt={},Gt=0,Ut=!1,Ke=!1,ke=!0,Oe=!1,lt=!0,It=!1;const Jt=fe,He=[],We=[],je=[],ut=[],Mt=[],mn=[],_n=[],ln=[],cn=[],In=[],Xn="function"==typeof AnimationEffect||void 0!==u.w&&"function"==typeof u.w.AnimationEffect,Kn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Xn,Qt=()=>In,En=(k,z)=>((null!=z&&z.oneTimeCallback?We:He).push({c:k,o:z}),_t),dr=()=>{if(Kn)In.forEach(k=>{k.cancel()}),In.length=0;else{const k=je.slice();(0,le.r)(()=>{k.forEach(z=>{De(z,"animation-name"),De(z,"animation-duration"),De(z,"animation-timing-function"),De(z,"animation-iteration-count"),De(z,"animation-delay"),De(z,"animation-play-state"),De(z,"animation-fill-mode"),De(z,"animation-direction")})})}},Sn=()=>{Mt.forEach(k=>{null!=k&&k.parentNode&&k.parentNode.removeChild(k)}),Mt.length=0},$t=()=>void 0!==_e?_e:ve?ve.getFill():"both",dn=()=>void 0!==Y?Y:void 0!==ae?ae:ve?ve.getDirection():"normal",te=()=>Ut?"linear":void 0!==Ve?Ve:ve?ve.getEasing():"linear",X=()=>Ke?0:void 0!==ie?ie:void 0!==Me?Me:ve?ve.getDuration():0,Ie=()=>void 0!==oe?oe:ve?ve.getIterations():1,et=()=>void 0!==we?we:void 0!==q?q:ve?ve.getDelay():0,Br=()=>{0!==Gt&&(Gt--,0===Gt&&((()=>{Cs(),ln.forEach(xe=>xe()),cn.forEach(xe=>xe());const k=ke?1:0,z=Ue,J=Ge,Fe=pt;je.forEach(xe=>{const Xe=xe.classList;z.forEach(st=>Xe.add(st)),J.forEach(st=>Xe.remove(st));for(const st in Fe)Fe.hasOwnProperty(st)&&Q(xe,st,Fe[st])}),He.forEach(xe=>xe.c(k,_t)),We.forEach(xe=>xe.c(k,_t)),We.length=0,lt=!0,ke&&(Oe=!0),ke=!0})(),ve&&ve.animationFinish()))},Bi=(k=!0)=>{Sn();const z=(fe=>(fe.forEach(q=>{for(const Me in q)if(q.hasOwnProperty(Me)){const Ve=q[Me];if("easing"===Me)q["animation-timing-function"]=Ve,delete q[Me];else{const oe=me(Me);oe!==Me&&(q[oe]=Ve,delete q[Me])}}}),fe))(Ce);je.forEach(J=>{if(z.length>0){const Fe=((fe=[])=>fe.map(q=>{const Me=q.offset,Ve=[];for(const oe in q)q.hasOwnProperty(oe)&&"offset"!==oe&&Ve.push(`${oe}: ${q[oe]};`);return`${100*Me}% { ${Ve.join(" ")} }`}).join(" "))(z);nt=void 0!==fe?fe:(fe=>{let q=j.indexOf(fe);return q<0&&(q=j.push(fe)-1),`ion-animation-${q}`})(Fe);const xe=((fe,q,Me)=>{var Ve;const oe=(fe=>{const q=void 0!==fe.getRootNode?fe.getRootNode():fe;return q.head||q})(Me),_e=ye(Me),ae=oe.querySelector("#"+fe);if(ae)return ae;const Ce=(null!==(Ve=Me.ownerDocument)&&void 0!==Ve?Ve:document).createElement("style");return Ce.id=fe,Ce.textContent=`@${_e}keyframes ${fe} { ${q} } @${_e}keyframes ${fe}-alt { ${q} }`,oe.appendChild(Ce),Ce})(nt,Fe,J);Mt.push(xe),Q(J,"animation-duration",`${X()}ms`),Q(J,"animation-timing-function",te()),Q(J,"animation-delay",`${et()}ms`),Q(J,"animation-fill-mode",$t()),Q(J,"animation-direction",dn());const Xe=Ie()===1/0?"infinite":Ie().toString();Q(J,"animation-iteration-count",Xe),Q(J,"animation-play-state","paused"),k&&Q(J,"animation-name",`${xe.id}-alt`),(0,le.r)(()=>{Q(J,"animation-name",xe.id||null)})}})},Kr=(k=!0)=>{(()=>{mn.forEach(Fe=>Fe()),_n.forEach(Fe=>Fe());const k=se,z=Z,J=Pe;je.forEach(Fe=>{const xe=Fe.classList;k.forEach(Xe=>xe.add(Xe)),z.forEach(Xe=>xe.remove(Xe));for(const Xe in J)J.hasOwnProperty(Xe)&&Q(Fe,Xe,J[Xe])})})(),Ce.length>0&&(Kn?(je.forEach(k=>{const z=k.animate(Ce,{id:Jt,delay:et(),duration:X(),easing:te(),iterations:Ie(),fill:$t(),direction:dn()});z.pause(),In.push(z)}),In.length>0&&(In[0].onfinish=()=>{Br()})):Bi(k)),W=!0},Zi=k=>{if(k=Math.min(Math.max(k,0),.9999),Kn)In.forEach(z=>{z.currentTime=z.effect.getComputedTiming().delay+X()*k,z.pause()});else{const z=`-${X()*k}ms`;je.forEach(J=>{Ce.length>0&&(Q(J,"animation-delay",z),Q(J,"animation-play-state","paused"))})}},mo=k=>{In.forEach(z=>{z.effect.updateTiming({delay:et(),duration:X(),easing:te(),iterations:Ie(),fill:$t(),direction:dn()})}),void 0!==k&&Zi(k)},_o=(k=!0,z)=>{(0,le.r)(()=>{je.forEach(J=>{Q(J,"animation-name",nt||null),Q(J,"animation-duration",`${X()}ms`),Q(J,"animation-timing-function",te()),Q(J,"animation-delay",void 0!==z?`-${z*X()}ms`:`${et()}ms`),Q(J,"animation-fill-mode",$t()||null),Q(J,"animation-direction",dn()||null);const Fe=Ie()===1/0?"infinite":Ie().toString();Q(J,"animation-iteration-count",Fe),k&&Q(J,"animation-name",`${nt}-alt`),(0,le.r)(()=>{Q(J,"animation-name",nt||null)})})})},nr=(k=!1,z=!0,J)=>(k&&ut.forEach(Fe=>{Fe.update(k,z,J)}),Kn?mo(J):_o(z,J),_t),vo=()=>{W&&(Kn?In.forEach(k=>{k.pause()}):je.forEach(k=>{Q(k,"animation-play-state","paused")}),It=!0)},Ui=()=>{H=void 0,Br()},Cs=()=>{H&&clearTimeout(H)},Da=k=>new Promise(z=>{null!=k&&k.sync&&(Ke=!0,En(()=>Ke=!1,{oneTimeCallback:!0})),W||Kr(),Oe&&(Kn?(Zi(0),mo()):_o(),Oe=!1),lt&&(Gt=ut.length+1,lt=!1),En(()=>z(),{oneTimeCallback:!0}),ut.forEach(J=>{J.play()}),Kn?(In.forEach(k=>{k.play()}),(0===Ce.length||0===je.length)&&Br()):(()=>{if(Cs(),(0,le.r)(()=>{je.forEach(k=>{Ce.length>0&&Q(k,"animation-play-state","running")})}),0===Ce.length||0===je.length)Br();else{const k=et()||0,z=X()||0,J=Ie()||1;isFinite(J)&&(H=setTimeout(Ui,k+z*J+100)),((fe,q)=>{let Me;const Ve={passive:!0},_e=ae=>{fe===ae.target&&(Me&&Me(),Cs(),(0,le.r)(()=>{je.forEach(k=>{De(k,"animation-duration"),De(k,"animation-delay"),De(k,"animation-play-state")}),(0,le.r)(Br)}))};fe&&(fe.addEventListener("webkitAnimationEnd",_e,Ve),fe.addEventListener("animationend",_e,Ve),Me=()=>{fe.removeEventListener("webkitAnimationEnd",_e,Ve),fe.removeEventListener("animationend",_e,Ve)})})(je[0])}})(),It=!1}),Zr=(k,z)=>{const J=Ce[0];return void 0===J||void 0!==J.offset&&0!==J.offset?Ce=[{offset:0,[k]:z},...Ce]:J[k]=z,_t};return _t={parentAnimation:ve,elements:je,childAnimations:ut,id:Jt,animationFinish:Br,from:Zr,to:(k,z)=>{const J=Ce[Ce.length-1];return void 0===J||void 0!==J.offset&&1!==J.offset?Ce=[...Ce,{offset:1,[k]:z}]:J[k]=z,_t},fromTo:(k,z,J)=>Zr(k,z).to(k,J),parent:k=>(ve=k,_t),play:Da,pause:()=>(ut.forEach(k=>{k.pause()}),vo(),_t),stop:()=>{ut.forEach(k=>{k.stop()}),W&&(dr(),W=!1),Ut=!1,Ke=!1,lt=!0,Y=void 0,ie=void 0,we=void 0,Gt=0,Oe=!1,ke=!0,It=!1},destroy:k=>(ut.forEach(z=>{z.destroy(k)}),(k=>{dr(),k&&Sn()})(k),je.length=0,ut.length=0,Ce.length=0,He.length=0,We.length=0,W=!1,lt=!0,_t),keyframes:k=>{const z=Ce!==k;return Ce=k,z&&(k=>{Kn?Qt().forEach(z=>{if(z.effect.setKeyframes)z.effect.setKeyframes(k);else{const J=new KeyframeEffect(z.effect.target,k,z.effect.getTiming());z.effect=J}}):Bi()})(Ce),_t},addAnimation:k=>{if(null!=k)if(Array.isArray(k))for(const z of k)z.parent(_t),ut.push(z);else k.parent(_t),ut.push(k);return _t},addElement:k=>{if(null!=k)if(1===k.nodeType)je.push(k);else if(k.length>=0)for(let z=0;z<k.length;z++)je.push(k[z]);else console.error("Invalid addElement value");return _t},update:nr,fill:k=>(_e=k,nr(!0),_t),direction:k=>(ae=k,nr(!0),_t),iterations:k=>(oe=k,nr(!0),_t),duration:k=>(!Kn&&0===k&&(k=1),Me=k,nr(!0),_t),easing:k=>(Ve=k,nr(!0),_t),delay:k=>(q=k,nr(!0),_t),getWebAnimations:Qt,getKeyframes:()=>Ce,getFill:$t,getDirection:dn,getDelay:et,getIterations:Ie,getEasing:te,getDuration:X,afterAddRead:k=>(ln.push(k),_t),afterAddWrite:k=>(cn.push(k),_t),afterClearStyles:(k=[])=>{for(const z of k)pt[z]="";return _t},afterStyles:(k={})=>(pt=k,_t),afterRemoveClass:k=>(Ge=Se(Ge,k),_t),afterAddClass:k=>(Ue=Se(Ue,k),_t),beforeAddRead:k=>(mn.push(k),_t),beforeAddWrite:k=>(_n.push(k),_t),beforeClearStyles:(k=[])=>{for(const z of k)Pe[z]="";return _t},beforeStyles:(k={})=>(Pe=k,_t),beforeRemoveClass:k=>(Z=Se(Z,k),_t),beforeAddClass:k=>(se=Se(se,k),_t),onFinish:En,isRunning:()=>0!==Gt&&!It,progressStart:(k=!1,z)=>(ut.forEach(J=>{J.progressStart(k,z)}),vo(),Ut=k,W||Kr(),nr(!1,!0,z),_t),progressStep:k=>(ut.forEach(z=>{z.progressStep(k)}),Zi(k),_t),progressEnd:(k,z,J)=>(Ut=!1,ut.forEach(Fe=>{Fe.progressEnd(k,z,J)}),void 0!==J&&(ie=J),Oe=!1,ke=!0,0===k?(Y="reverse"===dn()?"normal":"reverse","reverse"===Y&&(ke=!1),Kn?(nr(),Zi(1-z)):(we=(1-z)*X()*-1,nr(!1,!1))):1===k&&(Kn?(nr(),Zi(z)):(we=z*X()*-1,nr(!1,!1))),void 0!==k&&(En(()=>{ie=void 0,Y=void 0,we=void 0},{oneTimeCallback:!0}),ve||Da()),_t)}}},3365:(wt,Le,P)=>{"use strict";P.d(Le,{E:()=>V,a:()=>u,s:()=>De});const u=j=>{try{if(j instanceof Q)return j.value;if(!de()||"string"!=typeof j||""===j)return j;if(j.includes("onload="))return"";const K=document.createDocumentFragment(),re=document.createElement("div");K.appendChild(re),re.innerHTML=j,ye.forEach(fe=>{const q=K.querySelectorAll(fe);for(let Me=q.length-1;Me>=0;Me--){const Ve=q[Me];Ve.parentNode?Ve.parentNode.removeChild(Ve):K.removeChild(Ve);const oe=F(Ve);for(let _e=0;_e<oe.length;_e++)le(oe[_e])}});const ue=F(K);for(let fe=0;fe<ue.length;fe++)le(ue[fe]);const Se=document.createElement("div");Se.appendChild(K);const be=Se.querySelector("div");return null!==be?be.innerHTML:Se.innerHTML}catch(K){return console.error(K),""}},le=j=>{if(j.nodeType&&1!==j.nodeType)return;if(typeof NamedNodeMap<"u"&&!(j.attributes instanceof NamedNodeMap))return void j.remove();for(let re=j.attributes.length-1;re>=0;re--){const ue=j.attributes.item(re),Se=ue.name;if(!me.includes(Se.toLowerCase())){j.removeAttribute(Se);continue}const be=ue.value,fe=j[Se];(null!=be&&be.toLowerCase().includes("javascript:")||null!=fe&&fe.toLowerCase().includes("javascript:"))&&j.removeAttribute(Se)}const K=F(j);for(let re=0;re<K.length;re++)le(K[re])},F=j=>null!=j.children?j.children:j.childNodes,de=()=>{var j;const K=window,re=null===(j=null==K?void 0:K.Ionic)||void 0===j?void 0:j.config;return!re||(re.get?re.get("sanitizerEnabled",!0):!0===re.sanitizerEnabled||void 0===re.sanitizerEnabled)},me=["class","id","href","src","name","slot"],ye=["script","style","iframe","meta","link","object","embed"];class Q{constructor(K){this.value=K}}const De=j=>{const K=window,re=K.Ionic;if(!re||!re.config||"Object"===re.config.constructor.name)return K.Ionic=K.Ionic||{},K.Ionic.config=Object.assign(Object.assign({},K.Ionic.config),j),K.Ionic.config},V=!1},6559:(wt,Le,P)=>{"use strict";P.d(Le,{C:()=>me,a:()=>F,d:()=>de});var u=P(5861),le=P(839);const F=function(){var ye=(0,u.Z)(function*(Q,De,ge,V,j,K){var re;if(Q)return Q.attachViewToDom(De,ge,j,V);if(!(K||"string"==typeof ge||ge instanceof HTMLElement))throw new Error("framework delegate is missing");const ue="string"==typeof ge?null===(re=De.ownerDocument)||void 0===re?void 0:re.createElement(ge):ge;return V&&V.forEach(Se=>ue.classList.add(Se)),j&&Object.assign(ue,j),De.appendChild(ue),yield new Promise(Se=>(0,le.c)(ue,Se)),ue});return function(De,ge,V,j,K,re){return ye.apply(this,arguments)}}(),de=(ye,Q)=>{if(Q){if(ye)return ye.removeViewFromDom(Q.parentElement,Q);Q.remove()}return Promise.resolve()},me=()=>{let ye,Q;return{attachViewToDom:function(){var V=(0,u.Z)(function*(j,K,re={},ue=[]){var Se,be;let fe;if(ye=j,K){const Me="string"==typeof K?null===(Se=ye.ownerDocument)||void 0===Se?void 0:Se.createElement(K):K;ue.forEach(Ve=>Me.classList.add(Ve)),Object.assign(Me,re),ye.appendChild(Me),fe=Me,yield new Promise(Ve=>(0,le.c)(Me,Ve))}else if(ye.children.length>0&&("ION-MODAL"===ye.tagName||"ION-POPOVER"===ye.tagName)&&!(fe=ye.children[0]).classList.contains("ion-delegate-host")){const Ve=null===(be=ye.ownerDocument)||void 0===be?void 0:be.createElement("div");Ve.classList.add("ion-delegate-host"),ue.forEach(oe=>Ve.classList.add(oe)),Ve.append(...ye.children),ye.appendChild(Ve),fe=Ve}const q=document.querySelector("ion-app")||document.body;return Q=document.createComment("ionic teleport"),ye.parentNode.insertBefore(Q,ye),q.appendChild(ye),null!=fe?fe:ye});return function(K,re){return V.apply(this,arguments)}}(),removeViewFromDom:()=>(ye&&Q&&(Q.parentNode.insertBefore(ye,Q),Q.remove()),Promise.resolve())}}},619:(wt,Le,P)=>{"use strict";P.d(Le,{G:()=>me});class le{constructor(Q,De,ge,V,j){this.id=De,this.name=ge,this.disableScroll=j,this.priority=1e6*V+De,this.ctrl=Q}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Q=this.ctrl.capture(this.name,this.id,this.priority);return Q&&this.disableScroll&&this.ctrl.disableScroll(this.id),Q}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class F{constructor(Q,De,ge,V){this.id=De,this.disable=ge,this.disableScroll=V,this.ctrl=Q}block(){if(this.ctrl){if(this.disable)for(const Q of this.disable)this.ctrl.disableGesture(Q,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Q of this.disable)this.ctrl.enableGesture(Q,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const de="backdrop-no-scroll",me=new class u{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Q){var De;return new le(this,this.newID(),Q.name,null!==(De=Q.priority)&&void 0!==De?De:0,!!Q.disableScroll)}createBlocker(Q={}){return new F(this,this.newID(),Q.disable,!!Q.disableScroll)}start(Q,De,ge){return this.canStart(Q)?(this.requestedStart.set(De,ge),!0):(this.requestedStart.delete(De),!1)}capture(Q,De,ge){if(!this.start(Q,De,ge))return!1;const V=this.requestedStart;let j=-1e4;if(V.forEach(K=>{j=Math.max(j,K)}),j===ge){this.capturedId=De,V.clear();const K=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Q}});return document.dispatchEvent(K),!0}return V.delete(De),!1}release(Q){this.requestedStart.delete(Q),this.capturedId===Q&&(this.capturedId=void 0)}disableGesture(Q,De){let ge=this.disabledGestures.get(Q);void 0===ge&&(ge=new Set,this.disabledGestures.set(Q,ge)),ge.add(De)}enableGesture(Q,De){const ge=this.disabledGestures.get(Q);void 0!==ge&&ge.delete(De)}disableScroll(Q){this.disabledScroll.add(Q),1===this.disabledScroll.size&&document.body.classList.add(de)}enableScroll(Q){this.disabledScroll.delete(Q),0===this.disabledScroll.size&&document.body.classList.remove(de)}canStart(Q){return!(void 0!==this.capturedId||this.isDisabled(Q))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Q){const De=this.disabledGestures.get(Q);return!!(De&&De.size>0)}newID(){return this.gestureId++,this.gestureId}}},2124:(wt,Le,P)=>{"use strict";P.r(Le),P.d(Le,{MENU_BACK_BUTTON_PRIORITY:()=>me,OVERLAY_BACK_BUTTON_PRIORITY:()=>de,blockHardwareBackButton:()=>le,startHardwareBackButton:()=>F});var u=P(5861);const le=()=>{document.addEventListener("backbutton",()=>{})},F=()=>{const ye=document;let Q=!1;ye.addEventListener("backbutton",()=>{if(Q)return;let De=0,ge=[];const V=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(re,ue){ge.push({priority:re,handler:ue,id:De++})}}});ye.dispatchEvent(V);const j=function(){var re=(0,u.Z)(function*(ue){try{if(null!=ue&&ue.handler){const Se=ue.handler(K);null!=Se&&(yield Se)}}catch(Se){console.error(Se)}});return function(Se){return re.apply(this,arguments)}}(),K=()=>{if(ge.length>0){let re={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ge.forEach(ue=>{ue.priority>=re.priority&&(re=ue)}),Q=!0,ge=ge.filter(ue=>ue.id!==re.id),j(re).then(()=>Q=!1)}};K()})},de=100,me=99},839:(wt,Le,P)=>{"use strict";P.d(Le,{a:()=>De,b:()=>ge,c:()=>F,d:()=>be,e:()=>Se,f:()=>ue,g:()=>V,h:()=>re,i:()=>Q,j:()=>_e,k:()=>me,l:()=>fe,m:()=>de,n:()=>K,o:()=>q,p:()=>oe,q:()=>ae,r:()=>j,s:()=>Ce,t:()=>u,u:()=>Me,v:()=>Ve});const u=(se,Z=0)=>new Promise(W=>{le(se,Z,W)}),le=(se,Z=0,W)=>{let ve,Pe;const Ue={passive:!0},pt=()=>{ve&&ve()},Gt=Ut=>{(void 0===Ut||se===Ut.target)&&(pt(),W(Ut))};return se&&(se.addEventListener("webkitTransitionEnd",Gt,Ue),se.addEventListener("transitionend",Gt,Ue),Pe=setTimeout(Gt,Z+500),ve=()=>{Pe&&(clearTimeout(Pe),Pe=void 0),se.removeEventListener("webkitTransitionEnd",Gt,Ue),se.removeEventListener("transitionend",Gt,Ue)}),pt},F=(se,Z)=>{se.componentOnReady?se.componentOnReady().then(W=>Z(W)):j(()=>Z(se))},de=se=>void 0!==se.componentOnReady,me=(se,Z=[])=>{const W={};return Z.forEach(ve=>{se.hasAttribute(ve)&&(null!==se.getAttribute(ve)&&(W[ve]=se.getAttribute(ve)),se.removeAttribute(ve))}),W},ye=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Q=(se,Z)=>{let W=ye;return Z&&Z.length>0&&(W=W.filter(ve=>!Z.includes(ve))),me(se,W)},De=(se,Z,W,ve)=>{var Pe;if(typeof window<"u"){const Ue=window,Ge=null===(Pe=null==Ue?void 0:Ue.Ionic)||void 0===Pe?void 0:Pe.config;if(Ge){const pt=Ge.get("_ael");if(pt)return pt(se,Z,W,ve);if(Ge._ael)return Ge._ael(se,Z,W,ve)}}return se.addEventListener(Z,W,ve)},ge=(se,Z,W,ve)=>{var Pe;if(typeof window<"u"){const Ue=window,Ge=null===(Pe=null==Ue?void 0:Ue.Ionic)||void 0===Pe?void 0:Pe.config;if(Ge){const pt=Ge.get("_rel");if(pt)return pt(se,Z,W,ve);if(Ge._rel)return Ge._rel(se,Z,W,ve)}}return se.removeEventListener(Z,W,ve)},V=(se,Z=se)=>se.shadowRoot||Z,j=se=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(se):"function"==typeof requestAnimationFrame?requestAnimationFrame(se):setTimeout(se),K=se=>!!se.shadowRoot&&!!se.attachShadow,re=se=>{const Z=se.closest("ion-item");return Z?Z.querySelector("ion-label"):null},ue=se=>{if(se.focus(),se.classList.contains("ion-focusable")){const Z=se.closest("ion-app");Z&&Z.setFocus([se])}},Se=(se,Z)=>{let W;const ve=se.getAttribute("aria-labelledby"),Pe=se.id;let Ue=null!==ve&&""!==ve.trim()?ve:Z+"-lbl",Ge=null!==ve&&""!==ve.trim()?document.getElementById(ve):re(se);return Ge?(null===ve&&(Ge.id=Ue),W=Ge.textContent,Ge.setAttribute("aria-hidden","true")):""!==Pe.trim()&&(Ge=document.querySelector(`label[for="${Pe}"]`),Ge&&(""!==Ge.id?Ue=Ge.id:Ge.id=Ue=`${Pe}-lbl`,W=Ge.textContent)),{label:Ge,labelId:Ue,labelText:W}},be=(se,Z,W,ve,Pe)=>{if(se||K(Z)){let Ue=Z.querySelector("input.aux-input");Ue||(Ue=Z.ownerDocument.createElement("input"),Ue.type="hidden",Ue.classList.add("aux-input"),Z.appendChild(Ue)),Ue.disabled=Pe,Ue.name=W,Ue.value=ve||""}},fe=(se,Z,W)=>Math.max(se,Math.min(Z,W)),q=(se,Z)=>{if(!se){const W="ASSERT: "+Z;throw console.error(W),new Error(W)}},Me=se=>se.timeStamp||Date.now(),Ve=se=>{if(se){const Z=se.changedTouches;if(Z&&Z.length>0){const W=Z[0];return{x:W.clientX,y:W.clientY}}if(void 0!==se.pageX)return{x:se.pageX,y:se.pageY}}return{x:0,y:0}},oe=se=>{const Z="rtl"===document.dir;switch(se){case"start":return Z;case"end":return!Z;default:throw new Error(`"${se}" is not a valid value for [side]. Use "start" or "end" instead.`)}},_e=(se,Z)=>{const W=se._original||se;return{_original:se,emit:ae(W.emit.bind(W),Z)}},ae=(se,Z=0)=>{let W;return(...ve)=>{clearTimeout(W),W=setTimeout(se,Z,...ve)}},Ce=(se,Z)=>{if(null!=se||(se={}),null!=Z||(Z={}),se===Z)return!0;const W=Object.keys(se);if(W.length!==Object.keys(Z).length)return!1;for(const ve of W)if(!(ve in Z)||se[ve]!==Z[ve])return!1;return!0}},8796:(wt,Le,P)=>{"use strict";P.d(Le,{L:()=>de,a:()=>me,b:()=>ye,c:()=>Q,d:()=>De,e:()=>se,g:()=>ve,l:()=>ae,s:()=>Z,t:()=>j,w:()=>Ce});var u=P(5861),le=P(4516),F=P(839);const de="ionViewWillEnter",me="ionViewDidEnter",ye="ionViewWillLeave",Q="ionViewDidLeave",De="ionViewWillUnload",j=Pe=>new Promise((Ue,Ge)=>{(0,le.w)(()=>{K(Pe),re(Pe).then(pt=>{pt.animation&&pt.animation.destroy(),ue(Pe),Ue(pt)},pt=>{ue(Pe),Ge(pt)})})}),K=Pe=>{const Ue=Pe.enteringEl,Ge=Pe.leavingEl;W(Ue,Ge,Pe.direction),Pe.showGoBack?Ue.classList.add("can-go-back"):Ue.classList.remove("can-go-back"),Z(Ue,!1),Ue.style.setProperty("pointer-events","none"),Ge&&(Z(Ge,!1),Ge.style.setProperty("pointer-events","none"))},re=function(){var Pe=(0,u.Z)(function*(Ue){const Ge=yield Se(Ue);return Ge&&le.B.isBrowser?be(Ge,Ue):fe(Ue)});return function(Ge){return Pe.apply(this,arguments)}}(),ue=Pe=>{const Ue=Pe.enteringEl,Ge=Pe.leavingEl;Ue.classList.remove("ion-page-invisible"),Ue.style.removeProperty("pointer-events"),void 0!==Ge&&(Ge.classList.remove("ion-page-invisible"),Ge.style.removeProperty("pointer-events"))},Se=function(){var Pe=(0,u.Z)(function*(Ue){return Ue.leavingEl&&Ue.animated&&0!==Ue.duration?Ue.animationBuilder?Ue.animationBuilder:"ios"===Ue.mode?(yield Promise.resolve().then(P.bind(P,2411))).iosTransitionAnimation:(yield Promise.resolve().then(P.bind(P,1835))).mdTransitionAnimation:void 0});return function(Ge){return Pe.apply(this,arguments)}}(),be=function(){var Pe=(0,u.Z)(function*(Ue,Ge){yield q(Ge,!0);const pt=Ue(Ge.baseEl,Ge);oe(Ge.enteringEl,Ge.leavingEl);const Gt=yield Ve(pt,Ge);return Ge.progressCallback&&Ge.progressCallback(void 0),Gt&&_e(Ge.enteringEl,Ge.leavingEl),{hasCompleted:Gt,animation:pt}});return function(Ge,pt){return Pe.apply(this,arguments)}}(),fe=function(){var Pe=(0,u.Z)(function*(Ue){const Ge=Ue.enteringEl,pt=Ue.leavingEl;return yield q(Ue,!1),oe(Ge,pt),_e(Ge,pt),{hasCompleted:!0}});return function(Ge){return Pe.apply(this,arguments)}}(),q=function(){var Pe=(0,u.Z)(function*(Ue,Ge){(void 0!==Ue.deepWait?Ue.deepWait:Ge)&&(yield Promise.all([se(Ue.enteringEl),se(Ue.leavingEl)])),yield Me(Ue.viewIsReady,Ue.enteringEl)});return function(Ge,pt){return Pe.apply(this,arguments)}}(),Me=function(){var Pe=(0,u.Z)(function*(Ue,Ge){Ue&&(yield Ue(Ge))});return function(Ge,pt){return Pe.apply(this,arguments)}}(),Ve=(Pe,Ue)=>{const Ge=Ue.progressCallback,pt=new Promise(Gt=>{Pe.onFinish(Ut=>Gt(1===Ut))});return Ge?(Pe.progressStart(!0),Ge(Pe)):Pe.play(),pt},oe=(Pe,Ue)=>{ae(Ue,ye),ae(Pe,de)},_e=(Pe,Ue)=>{ae(Pe,me),ae(Ue,Q)},ae=(Pe,Ue)=>{if(Pe){const Ge=new CustomEvent(Ue,{bubbles:!1,cancelable:!1});Pe.dispatchEvent(Ge)}},Ce=()=>new Promise(Pe=>(0,F.r)(()=>(0,F.r)(()=>Pe()))),se=function(){var Pe=(0,u.Z)(function*(Ue){const Ge=Ue;if(Ge){if(null!=Ge.componentOnReady){if(null!=(yield Ge.componentOnReady()))return}else if(null!=Ge.__registerHost)return void(yield new Promise(Gt=>(0,F.r)(Gt)));yield Promise.all(Array.from(Ge.children).map(se))}});return function(Ge){return Pe.apply(this,arguments)}}(),Z=(Pe,Ue)=>{Ue?(Pe.setAttribute("aria-hidden","true"),Pe.classList.add("ion-page-hidden")):(Pe.hidden=!1,Pe.removeAttribute("aria-hidden"),Pe.classList.remove("ion-page-hidden"))},W=(Pe,Ue,Ge)=>{void 0!==Pe&&(Pe.style.zIndex="back"===Ge?"99":"101"),void 0!==Ue&&(Ue.style.zIndex="100")},ve=Pe=>Pe.classList.contains("ion-page")?Pe:Pe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Pe},3299:(wt,Le,P)=>{"use strict";P.d(Le,{m:()=>j});var u=P(5861),le=P(2124),F=P(839),de=P(4073),me=P(1774);const ye=K=>(0,me.c)().duration(K?400:300),Q=K=>{let re,ue;const Se=K.width+8,be=(0,me.c)(),fe=(0,me.c)();K.isEndSide?(re=Se+"px",ue="0px"):(re=-Se+"px",ue="0px"),be.addElement(K.menuInnerEl).fromTo("transform",`translateX(${re})`,`translateX(${ue})`);const Me="ios"===(0,de.b)(K),Ve=Me?.2:.25;return fe.addElement(K.backdropEl).fromTo("opacity",.01,Ve),ye(Me).addAnimation([be,fe])},De=K=>{let re,ue;const Se=(0,de.b)(K),be=K.width;K.isEndSide?(re=-be+"px",ue=be+"px"):(re=be+"px",ue=-be+"px");const fe=(0,me.c)().addElement(K.menuInnerEl).fromTo("transform",`translateX(${ue})`,"translateX(0px)"),q=(0,me.c)().addElement(K.contentEl).fromTo("transform","translateX(0px)",`translateX(${re})`),Me=(0,me.c)().addElement(K.backdropEl).fromTo("opacity",.01,.32);return ye("ios"===Se).addAnimation([fe,q,Me])},ge=K=>{const re=(0,de.b)(K),ue=K.width*(K.isEndSide?-1:1)+"px",Se=(0,me.c)().addElement(K.contentEl).fromTo("transform","translateX(0px)",`translateX(${ue})`);return ye("ios"===re).addAnimation(Se)},j=(()=>{const K=new Map,re=[],ue=function(){var H=(0,u.Z)(function*(Y){const ie=yield oe(Y);return!!ie&&ie.open()});return function(ie){return H.apply(this,arguments)}}(),Se=function(){var H=(0,u.Z)(function*(Y){const ie=yield void 0!==Y?oe(Y):_e();return void 0!==ie&&ie.close()});return function(ie){return H.apply(this,arguments)}}(),be=function(){var H=(0,u.Z)(function*(Y){const ie=yield oe(Y);return!!ie&&ie.toggle()});return function(ie){return H.apply(this,arguments)}}(),fe=function(){var H=(0,u.Z)(function*(Y,ie){const we=yield oe(ie);return we&&(we.disabled=!Y),we});return function(ie,we){return H.apply(this,arguments)}}(),q=function(){var H=(0,u.Z)(function*(Y,ie){const we=yield oe(ie);return we&&(we.swipeGesture=Y),we});return function(ie,we){return H.apply(this,arguments)}}(),Me=function(){var H=(0,u.Z)(function*(Y){if(null!=Y){const ie=yield oe(Y);return void 0!==ie&&ie.isOpen()}return void 0!==(yield _e())});return function(ie){return H.apply(this,arguments)}}(),Ve=function(){var H=(0,u.Z)(function*(Y){const ie=yield oe(Y);return!!ie&&!ie.disabled});return function(ie){return H.apply(this,arguments)}}(),oe=function(){var H=(0,u.Z)(function*(Y){return yield Ke(),"start"===Y||"end"===Y?Ut(ke=>ke.side===Y&&!ke.disabled)||Ut(ke=>ke.side===Y):null!=Y?Ut(we=>we.menuId===Y):Ut(we=>!we.disabled)||(re.length>0?re[0].el:void 0)});return function(ie){return H.apply(this,arguments)}}(),_e=function(){var H=(0,u.Z)(function*(){return yield Ke(),Ge()});return function(){return H.apply(this,arguments)}}(),ae=function(){var H=(0,u.Z)(function*(){return yield Ke(),pt()});return function(){return H.apply(this,arguments)}}(),Ce=function(){var H=(0,u.Z)(function*(){return yield Ke(),Gt()});return function(){return H.apply(this,arguments)}}(),se=(H,Y)=>{K.set(H,Y)},ve=H=>{const Y=H.side;re.filter(ie=>ie.side===Y&&ie!==H).forEach(ie=>ie.disabled=!0)},Pe=function(){var H=(0,u.Z)(function*(Y,ie,we){if(Gt())return!1;if(ie){const ke=yield _e();ke&&Y.el!==ke&&(yield ke.setOpen(!1,!1))}return Y._setOpen(ie,we)});return function(ie,we,ke){return H.apply(this,arguments)}}(),Ge=()=>Ut(H=>H._isOpen),pt=()=>re.map(H=>H.el),Gt=()=>re.some(H=>H.isAnimating),Ut=H=>{const Y=re.find(H);if(void 0!==Y)return Y.el},Ke=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(H=>new Promise(Y=>(0,F.c)(H,Y))));return se("reveal",ge),se("push",De),se("overlay",Q),typeof document<"u"&&document.addEventListener("ionBackButton",H=>{const Y=Ge();Y&&H.detail.register(le.MENU_BACK_BUTTON_PRIORITY,()=>Y.close())}),{registerAnimation:se,get:oe,getMenus:ae,getOpen:_e,isEnabled:Ve,swipeGesture:q,isAnimating:Ce,isOpen:Me,enable:fe,toggle:be,close:Se,open:ue,_getOpenSync:Ge,_createAnimation:(H,Y)=>{const ie=K.get(H);if(!ie)throw new Error("animation not registered");return ie(Y)},_register:H=>{re.indexOf(H)<0&&(H.disabled||ve(H),re.push(H))},_unregister:H=>{const Y=re.indexOf(H);Y>-1&&re.splice(Y,1)},_setOpen:Pe,_setActiveMenu:ve}})()},6710:(wt,Le,P)=>{"use strict";P.d(Le,{a:()=>le,b:()=>F,p:()=>u});const u=(de,...me)=>console.warn(`[Ionic Warning]: ${de}`,...me),le=(de,...me)=>console.error(`[Ionic Error]: ${de}`,...me),F=(de,...me)=>console.error(`<${de.tagName.toLowerCase()}> must be used inside ${me.join(" or ")}.`)},6225:(wt,Le,P)=>{"use strict";P.d(Le,{d:()=>le,w:()=>u});const u=typeof window<"u"?window:void 0,le=typeof document<"u"?document:void 0},4516:(wt,Le,P)=>{"use strict";P.d(Le,{B:()=>j,H:()=>pt,a:()=>vo,b:()=>mr,c:()=>Oe,d:()=>It,e:()=>Zr,f:()=>_t,g:()=>lt,h:()=>Ue,i:()=>Et,j:()=>K,r:()=>Br,w:()=>Io});var u=P(5861);let F,de,me,ye=!1,Q=!1,De=!1,ge=!1,V=!1;const j={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},K=L=>{const k=new URL(L,Ln.$resourcesUrl$);return k.origin!==Xi.location.origin?k.href:k.pathname},Me="s-id",Ve="sty-id",ae="http://www.w3.org/1999/xlink",Ce={},ve=L=>"object"==(L=typeof L)||"function"===L;function Pe(L){var k,z,J;return null!==(J=null===(z=null===(k=L.head)||void 0===k?void 0:k.querySelector('meta[name="csp-nonce"]'))||void 0===z?void 0:z.getAttribute("content"))&&void 0!==J?J:void 0}const Ue=(L,k,...z)=>{let J=null,Fe=null,xe=null,Xe=!1,st=!1;const tt=[],it=Xt=>{for(let rn=0;rn<Xt.length;rn++)J=Xt[rn],Array.isArray(J)?it(J):null!=J&&"boolean"!=typeof J&&((Xe="function"!=typeof L&&!ve(J))&&(J=String(J)),Xe&&st?tt[tt.length-1].$text$+=J:tt.push(Xe?Ge(null,J):J),st=Xe)};if(it(z),k){k.key&&(Fe=k.key),k.name&&(xe=k.name);{const Xt=k.className||k.class;Xt&&(k.class="object"!=typeof Xt?Xt:Object.keys(Xt).filter(rn=>Xt[rn]).join(" "))}}if("function"==typeof L)return L(null===k?{}:k,tt,Ut);const mt=Ge(L,null);return mt.$attrs$=k,tt.length>0&&(mt.$children$=tt),mt.$key$=Fe,mt.$name$=xe,mt},Ge=(L,k)=>({$flags$:0,$tag$:L,$text$:k,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),pt={},Ut={forEach:(L,k)=>L.map(Ke).forEach(k),map:(L,k)=>L.map(Ke).map(k).map(H)},Ke=L=>({vattrs:L.$attrs$,vchildren:L.$children$,vkey:L.$key$,vname:L.$name$,vtag:L.$tag$,vtext:L.$text$}),H=L=>{if("function"==typeof L.vtag){const z=Object.assign({},L.vattrs);return L.vkey&&(z.key=L.vkey),L.vname&&(z.name=L.vname),Ue(L.vtag,z,...L.vchildren||[])}const k=Ge(L.vtag,L.vtext);return k.$attrs$=L.vattrs,k.$children$=L.vchildren,k.$key$=L.vkey,k.$name$=L.vname,k},ie=(L,k,z,J,Fe,xe,Xe)=>{let st,tt,it,mt;if(1===xe.nodeType){for(st=xe.getAttribute("c-id"),st&&(tt=st.split("."),(tt[0]===Xe||"0"===tt[0])&&(it={$flags$:0,$hostId$:tt[0],$nodeId$:tt[1],$depth$:tt[2],$index$:tt[3],$tag$:xe.tagName.toLowerCase(),$elm$:xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},k.push(it),xe.removeAttribute("c-id"),L.$children$||(L.$children$=[]),L.$children$[it.$index$]=it,L=it,J&&"0"===it.$depth$&&(J[it.$index$]=it.$elm$))),mt=xe.childNodes.length-1;mt>=0;mt--)ie(L,k,z,J,Fe,xe.childNodes[mt],Xe);if(xe.shadowRoot)for(mt=xe.shadowRoot.childNodes.length-1;mt>=0;mt--)ie(L,k,z,J,Fe,xe.shadowRoot.childNodes[mt],Xe)}else if(8===xe.nodeType)tt=xe.nodeValue.split("."),(tt[1]===Xe||"0"===tt[1])&&(st=tt[0],it={$flags$:0,$hostId$:tt[1],$nodeId$:tt[2],$depth$:tt[3],$index$:tt[4],$elm$:xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===st?(it.$elm$=xe.nextSibling,it.$elm$&&3===it.$elm$.nodeType&&(it.$text$=it.$elm$.textContent,k.push(it),xe.remove(),L.$children$||(L.$children$=[]),L.$children$[it.$index$]=it,J&&"0"===it.$depth$&&(J[it.$index$]=it.$elm$))):it.$hostId$===Xe&&("s"===st?(it.$tag$="slot",xe["s-sn"]=tt[5]?it.$name$=tt[5]:"",xe["s-sr"]=!0,J&&(it.$elm$=Jn.createElement(it.$tag$),it.$name$&&it.$elm$.setAttribute("name",it.$name$),xe.parentNode.insertBefore(it.$elm$,xe),xe.remove(),"0"===it.$depth$&&(J[it.$index$]=it.$elm$)),z.push(it),L.$children$||(L.$children$=[]),L.$children$[it.$index$]=it):"r"===st&&(J?xe.remove():(Fe["s-cr"]=xe,xe["s-cn"]=!0))));else if(L&&"style"===L.$tag$){const Xt=Ge(null,xe.textContent);Xt.$elm$=xe,Xt.$index$="0",L.$children$=[Xt]}},we=(L,k)=>{if(1===L.nodeType){let z=0;for(;z<L.childNodes.length;z++)we(L.childNodes[z],k);if(L.shadowRoot)for(z=0;z<L.shadowRoot.childNodes.length;z++)we(L.shadowRoot.childNodes[z],k)}else if(8===L.nodeType){const z=L.nodeValue.split(".");"o"===z[0]&&(k.set(z[1]+"."+z[2],L),L.nodeValue="",L["s-en"]=z[3])}},Oe=L=>nr.push(L),lt=L=>Mr(L).$modeName$,_t=L=>Mr(L).$hostElement$,It=(L,k,z)=>{const J=_t(L);return{emit:Fe=>Jt(J,k,{bubbles:!!(4&z),composed:!!(2&z),cancelable:!!(1&z),detail:Fe})}},Jt=(L,k,z)=>{const J=Ln.ce(k,z);return L.dispatchEvent(J),J},He=new WeakMap,We=(L,k,z)=>{let J=_o.get(L);Cs&&z?(J=J||new CSSStyleSheet,"string"==typeof J?J=k:J.replaceSync(k)):J=k,_o.set(L,J)},je=(L,k,z)=>{var J;const Fe=Mt(k,z),xe=_o.get(Fe);if(L=11===L.nodeType?L:Jn,xe)if("string"==typeof xe){let st,Xe=He.get(L=L.head||L);if(Xe||He.set(L,Xe=new Set),!Xe.has(Fe)){if(L.host&&(st=L.querySelector(`[${Ve}="${Fe}"]`)))st.innerHTML=xe;else{st=Jn.createElement("style"),st.innerHTML=xe;const tt=null!==(J=Ln.$nonce$)&&void 0!==J?J:Pe(Jn);null!=tt&&st.setAttribute("nonce",tt),L.insertBefore(st,L.querySelector("link"))}Xe&&Xe.add(Fe)}}else L.adoptedStyleSheets.includes(xe)||(L.adoptedStyleSheets=[...L.adoptedStyleSheets,xe]);return Fe},Mt=(L,k)=>"sc-"+(k&&32&L.$flags$?L.$tagName$+"-"+k:L.$tagName$),mn=L=>L.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),_n=(L,k,z,J,Fe,xe)=>{if(z!==J){let Xe=An(L,k),st=k.toLowerCase();if("class"===k){const tt=L.classList,it=cn(z),mt=cn(J);tt.remove(...it.filter(Xt=>Xt&&!mt.includes(Xt))),tt.add(...mt.filter(Xt=>Xt&&!it.includes(Xt)))}else if("style"===k){for(const tt in z)(!J||null==J[tt])&&(tt.includes("-")?L.style.removeProperty(tt):L.style[tt]="");for(const tt in J)(!z||J[tt]!==z[tt])&&(tt.includes("-")?L.style.setProperty(tt,J[tt]):L.style[tt]=J[tt])}else if("key"!==k)if("ref"===k)J&&J(L);else if(Xe||"o"!==k[0]||"n"!==k[1]){const tt=ve(J);if((Xe||tt&&null!==J)&&!Fe)try{if(L.tagName.includes("-"))L[k]=J;else{const mt=null==J?"":J;"list"===k?Xe=!1:(null==z||L[k]!=mt)&&(L[k]=mt)}}catch{}let it=!1;st!==(st=st.replace(/^xlink\:?/,""))&&(k=st,it=!0),null==J||!1===J?(!1!==J||""===L.getAttribute(k))&&(it?L.removeAttributeNS(ae,k):L.removeAttribute(k)):(!Xe||4&xe||Fe)&&!tt&&(J=!0===J?"":J,it?L.setAttributeNS(ae,k,J):L.setAttribute(k,J))}else k="-"===k[2]?k.slice(3):An(Xi,st)?st.slice(2):st[2]+k.slice(3),z&&Ln.rel(L,k,z,!1),J&&Ln.ael(L,k,J,!1)}},ln=/\s/,cn=L=>L?L.split(ln):[],In=(L,k,z,J)=>{const Fe=11===k.$elm$.nodeType&&k.$elm$.host?k.$elm$.host:k.$elm$,xe=L&&L.$attrs$||Ce,Xe=k.$attrs$||Ce;for(J in xe)J in Xe||_n(Fe,J,xe[J],void 0,z,k.$flags$);for(J in Xe)_n(Fe,J,xe[J],Xe[J],z,k.$flags$)},Xn=(L,k,z,J)=>{const Fe=k.$children$[z];let Xe,st,tt,xe=0;if(ye||(De=!0,"slot"===Fe.$tag$&&(F&&J.classList.add(F+"-s"),Fe.$flags$|=Fe.$children$?2:1)),null!==Fe.$text$)Xe=Fe.$elm$=Jn.createTextNode(Fe.$text$);else if(1&Fe.$flags$)Xe=Fe.$elm$=Jn.createTextNode("");else{if(ge||(ge="svg"===Fe.$tag$),Xe=Fe.$elm$=Jn.createElementNS(ge?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Fe.$flags$?"slot-fb":Fe.$tag$),ge&&"foreignObject"===Fe.$tag$&&(ge=!1),In(null,Fe,ge),(L=>null!=L)(F)&&Xe["s-si"]!==F&&Xe.classList.add(Xe["s-si"]=F),Fe.$children$)for(xe=0;xe<Fe.$children$.length;++xe)st=Xn(L,Fe,xe,Xe),st&&Xe.appendChild(st);"svg"===Fe.$tag$?ge=!1:"foreignObject"===Xe.tagName&&(ge=!0)}return Xe["s-hn"]=me,3&Fe.$flags$&&(Xe["s-sr"]=!0,Xe["s-cr"]=de,Xe["s-sn"]=Fe.$name$||"",tt=L&&L.$children$&&L.$children$[z],tt&&tt.$tag$===Fe.$tag$&&L.$elm$&&Kn(L.$elm$,!1)),Xe},Kn=(L,k)=>{Ln.$flags$|=1;const z=L.childNodes;for(let J=z.length-1;J>=0;J--){const Fe=z[J];Fe["s-hn"]!==me&&Fe["s-ol"]&&(ur(Fe).insertBefore(Fe,zn(Fe)),Fe["s-ol"].remove(),Fe["s-ol"]=void 0,De=!0),k&&Kn(Fe,k)}Ln.$flags$&=-2},qt=(L,k,z,J,Fe,xe)=>{let st,Xe=L["s-cr"]&&L["s-cr"].parentNode||L;for(Xe.shadowRoot&&Xe.tagName===me&&(Xe=Xe.shadowRoot);Fe<=xe;++Fe)J[Fe]&&(st=Xn(null,z,Fe,L),st&&(J[Fe].$elm$=st,Xe.insertBefore(st,zn(k))))},Qt=(L,k,z)=>{for(let J=k;J<=z;++J){const Fe=L[J];if(Fe){const xe=Fe.$elm$;xn(Fe),xe&&(Q=!0,xe["s-ol"]?xe["s-ol"].remove():Kn(xe,!0),xe.remove())}}},Fn=(L,k)=>L.$tag$===k.$tag$&&("slot"===L.$tag$?L.$name$===k.$name$:L.$key$===k.$key$),zn=L=>L&&L["s-ol"]||L,ur=L=>(L["s-ol"]?L["s-ol"]:L).parentNode,En=(L,k)=>{const z=k.$elm$=L.$elm$,J=L.$children$,Fe=k.$children$,xe=k.$tag$,Xe=k.$text$;let st;null===Xe?(ge="svg"===xe||"foreignObject"!==xe&&ge,"slot"===xe||In(L,k,ge),null!==J&&null!==Fe?((L,k,z,J)=>{let _i,Ur,Fe=0,xe=0,Xe=0,st=0,tt=k.length-1,it=k[0],mt=k[tt],Xt=J.length-1,rn=J[0],Mn=J[Xt];for(;Fe<=tt&&xe<=Xt;)if(null==it)it=k[++Fe];else if(null==mt)mt=k[--tt];else if(null==rn)rn=J[++xe];else if(null==Mn)Mn=J[--Xt];else if(Fn(it,rn))En(it,rn),it=k[++Fe],rn=J[++xe];else if(Fn(mt,Mn))En(mt,Mn),mt=k[--tt],Mn=J[--Xt];else if(Fn(it,Mn))("slot"===it.$tag$||"slot"===Mn.$tag$)&&Kn(it.$elm$.parentNode,!1),En(it,Mn),L.insertBefore(it.$elm$,mt.$elm$.nextSibling),it=k[++Fe],Mn=J[--Xt];else if(Fn(mt,rn))("slot"===it.$tag$||"slot"===Mn.$tag$)&&Kn(mt.$elm$.parentNode,!1),En(mt,rn),L.insertBefore(mt.$elm$,it.$elm$),mt=k[--tt],rn=J[++xe];else{for(Xe=-1,st=Fe;st<=tt;++st)if(k[st]&&null!==k[st].$key$&&k[st].$key$===rn.$key$){Xe=st;break}Xe>=0?(Ur=k[Xe],Ur.$tag$!==rn.$tag$?_i=Xn(k&&k[xe],z,Xe,L):(En(Ur,rn),k[Xe]=void 0,_i=Ur.$elm$),rn=J[++xe]):(_i=Xn(k&&k[xe],z,xe,L),rn=J[++xe]),_i&&ur(it.$elm$).insertBefore(_i,zn(it.$elm$))}Fe>tt?qt(L,null==J[Xt+1]?null:J[Xt+1].$elm$,z,J,xe,Xt):xe>Xt&&Qt(k,Fe,tt)})(z,J,k,Fe):null!==Fe?(null!==L.$text$&&(z.textContent=""),qt(z,null,k,Fe,0,Fe.length-1)):null!==J&&Qt(J,0,J.length-1),ge&&"svg"===xe&&(ge=!1)):(st=z["s-cr"])?st.parentNode.textContent=Xe:L.$text$!==Xe&&(z.data=Xe)},Qn=L=>{const k=L.childNodes;let z,J,Fe,xe,Xe,st;for(J=0,Fe=k.length;J<Fe;J++)if(z=k[J],1===z.nodeType){if(z["s-sr"])for(Xe=z["s-sn"],z.hidden=!1,xe=0;xe<Fe;xe++)if(st=k[xe].nodeType,k[xe]["s-hn"]!==z["s-hn"]||""!==Xe){if(1===st&&Xe===k[xe].getAttribute("slot")){z.hidden=!0;break}}else if(1===st||3===st&&""!==k[xe].textContent.trim()){z.hidden=!0;break}Qn(z)}},dr=[],Sn=L=>{let k,z,J,Fe,xe,Xe,st=0;const tt=L.childNodes,it=tt.length;for(;st<it;st++){if(k=tt[st],k["s-sr"]&&(z=k["s-cr"])&&z.parentNode)for(J=z.parentNode.childNodes,Fe=k["s-sn"],Xe=J.length-1;Xe>=0;Xe--)z=J[Xe],!z["s-cn"]&&!z["s-nr"]&&z["s-hn"]!==k["s-hn"]&&(Ar(z,Fe)?(xe=dr.find(mt=>mt.$nodeToRelocate$===z),Q=!0,z["s-sn"]=z["s-sn"]||Fe,xe?xe.$slotRefNode$=k:dr.push({$slotRefNode$:k,$nodeToRelocate$:z}),z["s-sr"]&&dr.map(mt=>{Ar(mt.$nodeToRelocate$,z["s-sn"])&&(xe=dr.find(Xt=>Xt.$nodeToRelocate$===z),xe&&!mt.$slotRefNode$&&(mt.$slotRefNode$=xe.$slotRefNode$))})):dr.some(mt=>mt.$nodeToRelocate$===z)||dr.push({$nodeToRelocate$:z}));1===k.nodeType&&Sn(k)}},Ar=(L,k)=>1===L.nodeType?null===L.getAttribute("slot")&&""===k||L.getAttribute("slot")===k:L["s-sn"]===k||""===k,xn=L=>{L.$attrs$&&L.$attrs$.ref&&L.$attrs$.ref(null),L.$children$&&L.$children$.map(xn)},Yi=(L,k)=>{k&&!L.$onRenderResolve$&&k["s-p"]&&k["s-p"].push(new Promise(z=>L.$onRenderResolve$=z))},Li=(L,k)=>{if(L.$flags$|=16,!(4&L.$flags$))return Yi(L,L.$ancestorComponent$),Io(()=>Fr(L,k));L.$flags$|=512},Fr=(L,k)=>{const J=L.$lazyInstance$;let Fe;return k&&(L.$flags$|=256,L.$queuedListeners$&&(L.$queuedListeners$.map(([xe,Xe])=>dn(J,xe,Xe)),L.$queuedListeners$=void 0),Fe=dn(J,"componentWillLoad")),Fe=Ki(Fe,()=>dn(J,"componentWillRender")),Ki(Fe,()=>he(L,J,k))},Ki=(L,k)=>Qe(L)?L.then(k):k(),Qe=L=>L instanceof Promise||L&&L.then&&"function"==typeof L.then,he=function(){var L=(0,u.Z)(function*(k,z,J){var Fe;const xe=k.$hostElement$,st=xe["s-rc"];J&&(L=>{const k=L.$cmpMeta$,z=L.$hostElement$,J=k.$flags$,xe=je(z.shadowRoot?z.shadowRoot:z.getRootNode(),k,L.$modeName$);10&J&&(z["s-sc"]=xe,z.classList.add(xe+"-h"),2&J&&z.classList.add(xe+"-s"))})(k);Ze(k,z,xe,J),st&&(st.map(it=>it()),xe["s-rc"]=void 0);{const it=null!==(Fe=xe["s-p"])&&void 0!==Fe?Fe:[],mt=()=>gt(k);0===it.length?mt():(Promise.all(it).then(mt),k.$flags$|=4,it.length=0)}});return function(z,J,Fe){return L.apply(this,arguments)}}(),Ze=(L,k,z,J)=>{try{k=k.render&&k.render(),L.$flags$&=-17,L.$flags$|=2,((L,k,z=!1)=>{const J=L.$hostElement$,Fe=L.$cmpMeta$,xe=L.$vnode$||Ge(null,null),Xe=(L=>L&&L.$tag$===pt)(k)?k:Ue(null,null,k);if(me=J.tagName,Fe.$attrsToReflect$&&(Xe.$attrs$=Xe.$attrs$||{},Fe.$attrsToReflect$.map(([st,tt])=>Xe.$attrs$[tt]=J[st])),z&&Xe.$attrs$)for(const st of Object.keys(Xe.$attrs$))J.hasAttribute(st)&&!["key","ref","style","class"].includes(st)&&(Xe.$attrs$[st]=J[st]);if(Xe.$tag$=null,Xe.$flags$|=4,L.$vnode$=Xe,Xe.$elm$=xe.$elm$=J.shadowRoot||J,F=J["s-sc"],de=J["s-cr"],ye=0!=(1&Fe.$flags$),Q=!1,En(xe,Xe),Ln.$flags$|=1,De){Sn(Xe.$elm$);let st,tt,it,mt,Xt,rn,Mn=0;for(;Mn<dr.length;Mn++)st=dr[Mn],tt=st.$nodeToRelocate$,tt["s-ol"]||(it=Jn.createTextNode(""),it["s-nr"]=tt,tt.parentNode.insertBefore(tt["s-ol"]=it,tt));for(Mn=0;Mn<dr.length;Mn++)if(st=dr[Mn],tt=st.$nodeToRelocate$,st.$slotRefNode$){for(mt=st.$slotRefNode$.parentNode,Xt=st.$slotRefNode$.nextSibling,it=tt["s-ol"];it=it.previousSibling;)if(rn=it["s-nr"],rn&&rn["s-sn"]===tt["s-sn"]&&mt===rn.parentNode&&(rn=rn.nextSibling,!rn||!rn["s-nr"])){Xt=rn;break}(!Xt&&mt!==tt.parentNode||tt.nextSibling!==Xt)&&tt!==Xt&&(!tt["s-hn"]&&tt["s-ol"]&&(tt["s-hn"]=tt["s-ol"].parentNode.nodeName),mt.insertBefore(tt,Xt))}else 1===tt.nodeType&&(tt.hidden=!0)}Q&&Qn(Xe.$elm$),Ln.$flags$&=-2,dr.length=0})(L,k,J)}catch(Fe){Kr(Fe,L.$hostElement$)}return null},gt=L=>{const z=L.$hostElement$,Fe=L.$lazyInstance$,xe=L.$ancestorComponent$;dn(Fe,"componentDidRender"),64&L.$flags$?dn(Fe,"componentDidUpdate"):(L.$flags$|=64,te(z),dn(Fe,"componentDidLoad"),L.$onReadyResolve$(z),xe||$t()),L.$onInstanceResolve$(z),L.$onRenderResolve$&&(L.$onRenderResolve$(),L.$onRenderResolve$=void 0),512&L.$flags$&&Sa(()=>Li(L,!1)),L.$flags$&=-517},Et=L=>{{const k=Mr(L),z=k.$hostElement$.isConnected;return z&&2==(18&k.$flags$)&&Li(k,!1),z}},$t=L=>{te(Jn.documentElement),Sa(()=>Jt(Xi,"appload",{detail:{namespace:"ionic"}}))},dn=(L,k,z)=>{if(L&&L[k])try{return L[k](z)}catch(J){Kr(J)}},te=L=>L.classList.add("hydrated"),et=(L,k,z)=>{var J;if(k.$members$){L.watchers&&(k.$watchers$=L.watchers);const Fe=Object.entries(k.$members$),xe=L.prototype;if(Fe.map(([Xe,[st]])=>{31&st||2&z&&32&st?Object.defineProperty(xe,Xe,{get(){return((L,k)=>Mr(this).$instanceValues$.get(k))(0,Xe)},set(tt){((L,k,z,J)=>{const Fe=Mr(L),xe=Fe.$hostElement$,Xe=Fe.$instanceValues$.get(k),st=Fe.$flags$,tt=Fe.$lazyInstance$;z=((L,k)=>null==L||ve(L)?L:4&k?"false"!==L&&(""===L||!!L):2&k?parseFloat(L):1&k?String(L):L)(z,J.$members$[k][0]);const it=Number.isNaN(Xe)&&Number.isNaN(z);if((!(8&st)||void 0===Xe)&&z!==Xe&&!it&&(Fe.$instanceValues$.set(k,z),tt)){if(J.$watchers$&&128&st){const Xt=J.$watchers$[k];Xt&&Xt.map(rn=>{try{tt[rn](z,Xe,k)}catch(Mn){Kr(Mn,xe)}})}2==(18&st)&&Li(Fe,!1)}})(this,Xe,tt,k)},configurable:!0,enumerable:!0}):1&z&&64&st&&Object.defineProperty(xe,Xe,{value(...tt){const it=Mr(this);return it.$onInstancePromise$.then(()=>it.$lazyInstance$[Xe](...tt))}})}),1&z){const Xe=new Map;xe.attributeChangedCallback=function(st,tt,it){Ln.jmp(()=>{const mt=Xe.get(st);if(this.hasOwnProperty(mt))it=this[mt],delete this[mt];else{if(xe.hasOwnProperty(mt)&&"number"==typeof this[mt]&&this[mt]==it)return;if(null==mt){const Xt=Mr(this),rn=null==Xt?void 0:Xt.$flags$;if(!(8&rn)&&128&rn&&it!==tt){const Mn=Xt.$lazyInstance$,_i=k.$watchers$[st];null==_i||_i.forEach(Ur=>{null!=Mn[Ur]&&Mn[Ur].call(Mn,it,tt,st)})}return}}this[mt]=(null!==it||"boolean"!=typeof this[mt])&&it})},L.observedAttributes=Array.from(new Set([...Object.keys(null!==(J=k.$watchers$)&&void 0!==J?J:{}),...Fe.filter(([st,tt])=>15&tt[0]).map(([st,tt])=>{const it=tt[1]||st;return Xe.set(it,st),512&tt[0]&&k.$attrsToReflect$.push([st,it]),it})]))}}return L},$e=function(){var L=(0,u.Z)(function*(k,z,J,Fe,xe){if(!(32&z.$flags$)){z.$flags$|=32;{if((xe=mo(J)).then){const it=()=>{};xe=yield xe,it()}xe.isProxied||(J.$watchers$=xe.watchers,et(xe,J,2),xe.isProxied=!0);const tt=()=>{};z.$flags$|=8;try{new xe(z)}catch(it){Kr(it)}z.$flags$&=-9,z.$flags$|=128,tt(),St(z.$lazyInstance$)}if(xe.style){let tt=xe.style;"string"!=typeof tt&&(tt=tt[z.$modeName$=(L=>nr.map(k=>k(L)).find(k=>!!k))(k)]);const it=Mt(J,z.$modeName$);if(!_o.has(it)){const mt=()=>{};We(it,tt,!!(1&J.$flags$)),mt()}}}const Xe=z.$ancestorComponent$,st=()=>Li(z,!0);Xe&&Xe["s-rc"]?Xe["s-rc"].push(st):st()});return function(z,J,Fe,xe,Xe){return L.apply(this,arguments)}}(),St=L=>{dn(L,"connectedCallback")},en=L=>{const k=L["s-cr"]=Jn.createComment("");k["s-cn"]=!0,L.insertBefore(k,L.firstChild)},Rr=L=>{dn(L,"disconnectedCallback")},fn=function(){var L=(0,u.Z)(function*(k){if(!(1&Ln.$flags$)){const z=Mr(k);z.$rmListeners$&&(z.$rmListeners$.map(J=>J()),z.$rmListeners$=void 0),null!=z&&z.$lazyInstance$?Rr(z.$lazyInstance$):null!=z&&z.$onReadyPromise$&&z.$onReadyPromise$.then(()=>Rr(z.$lazyInstance$))}});return function(z){return L.apply(this,arguments)}}(),mr=(L,k={})=>{var z;const Fe=[],xe=k.exclude||[],Xe=Xi.customElements,st=Jn.head,tt=st.querySelector("meta[charset]"),it=Jn.createElement("style"),mt=[],Xt=Jn.querySelectorAll(`[${Ve}]`);let rn,Mn=!0,_i=0;for(Object.assign(Ln,k),Ln.$resourcesUrl$=new URL(k.resourcesUrl||"./",Jn.baseURI).href,Ln.$flags$|=2;_i<Xt.length;_i++)We(Xt[_i].getAttribute(Ve),mn(Xt[_i].innerHTML),!0);L.map(Ur=>{Ur[1].map(os=>{var Aa;const pn={$flags$:os[0],$tagName$:os[1],$members$:os[2],$listeners$:os[3]};pn.$members$=os[2],pn.$listeners$=os[3],pn.$attrsToReflect$=[],pn.$watchers$=null!==(Aa=os[4])&&void 0!==Aa?Aa:{};const rr=pn.$tagName$,vi=class extends HTMLElement{constructor(Ts){super(Ts),Bi(Ts=this,pn),1&pn.$flags$&&Ts.attachShadow({mode:"open",delegatesFocus:!!(16&pn.$flags$)})}connectedCallback(){rn&&(clearTimeout(rn),rn=null),Mn?mt.push(this):Ln.jmp(()=>(L=>{if(!(1&Ln.$flags$)){const k=Mr(L),z=k.$cmpMeta$,J=()=>{};if(1&k.$flags$)Pn(L,k,z.$listeners$),null!=k&&k.$lazyInstance$?St(k.$lazyInstance$):null!=k&&k.$onReadyPromise$&&k.$onReadyPromise$.then(()=>St(k.$lazyInstance$));else{let Fe;if(k.$flags$|=1,Fe=L.getAttribute(Me),Fe){if(1&z.$flags$){const xe=je(L.shadowRoot,z,L.getAttribute("s-mode"));L.classList.remove(xe+"-h",xe+"-s")}((L,k,z,J)=>{const xe=L.shadowRoot,Xe=[],tt=xe?[]:null,it=J.$vnode$=Ge(k,null);Ln.$orgLocNodes$||we(Jn.body,Ln.$orgLocNodes$=new Map),L[Me]=z,L.removeAttribute(Me),ie(it,Xe,[],tt,L,L,z),Xe.map(mt=>{const Xt=mt.$hostId$+"."+mt.$nodeId$,rn=Ln.$orgLocNodes$.get(Xt),Mn=mt.$elm$;rn&&Ta&&""===rn["s-en"]&&rn.parentNode.insertBefore(Mn,rn.nextSibling),xe||(Mn["s-hn"]=k,rn&&(Mn["s-ol"]=rn,Mn["s-ol"]["s-nr"]=Mn)),Ln.$orgLocNodes$.delete(Xt)}),xe&&tt.map(mt=>{mt&&xe.appendChild(mt)})})(L,z.$tagName$,Fe,k)}Fe||12&z.$flags$&&en(L);{let xe=L;for(;xe=xe.parentNode||xe.host;)if(1===xe.nodeType&&xe.hasAttribute("s-id")&&xe["s-p"]||xe["s-p"]){Yi(k,k.$ancestorComponent$=xe);break}}z.$members$&&Object.entries(z.$members$).map(([xe,[Xe]])=>{if(31&Xe&&L.hasOwnProperty(xe)){const st=L[xe];delete L[xe],L[xe]=st}}),$e(L,k,z)}J()}})(this))}disconnectedCallback(){Ln.jmp(()=>fn(this))}componentOnReady(){return Mr(this).$onReadyPromise$}};pn.$lazyBundleId$=Ur[0],!xe.includes(rr)&&!Xe.get(rr)&&(Fe.push(rr),Xe.define(rr,et(vi,pn,1)))})});{it.innerHTML=Fe+"{visibility:hidden}.hydrated{visibility:inherit}",it.setAttribute("data-styles","");const Ur=null!==(z=Ln.$nonce$)&&void 0!==z?z:Pe(Jn);null!=Ur&&it.setAttribute("nonce",Ur),st.insertBefore(it,tt?tt.nextSibling:st.firstChild)}Mn=!1,mt.length?mt.map(Ur=>Ur.connectedCallback()):Ln.jmp(()=>rn=setTimeout($t,30))},Pn=(L,k,z,J)=>{z&&z.map(([Fe,xe,Xe])=>{const st=Ns(L,Fe),tt=xr(k,Xe),it=go(Fe);Ln.ael(st,xe,tt,it),(k.$rmListeners$=k.$rmListeners$||[]).push(()=>Ln.rel(st,xe,tt,it))})},xr=(L,k)=>z=>{try{256&L.$flags$?L.$lazyInstance$[k](z):(L.$queuedListeners$=L.$queuedListeners$||[]).push([k,z])}catch(J){Kr(J)}},Ns=(L,k)=>4&k?Jn:8&k?Xi:16&k?Jn.body:L,go=L=>0!=(2&L),Fi=new WeakMap,Mr=L=>Fi.get(L),Br=(L,k)=>Fi.set(k.$lazyInstance$=L,k),Bi=(L,k)=>{const z={$flags$:0,$hostElement$:L,$cmpMeta$:k,$instanceValues$:new Map};return z.$onInstancePromise$=new Promise(J=>z.$onInstanceResolve$=J),z.$onReadyPromise$=new Promise(J=>z.$onReadyResolve$=J),L["s-p"]=[],L["s-rc"]=[],Pn(L,z,k.$listeners$),Fi.set(L,z)},An=(L,k)=>k in L,Kr=(L,k)=>(0,console.error)(L,k),Zi=new Map,mo=(L,k,z)=>{const J=L.$tagName$.replace(/-/g,"_"),Fe=L.$lazyBundleId$,xe=Zi.get(Fe);return xe?xe[J]:P(863)(`./${Fe}.entry.js`).then(Xe=>(Zi.set(Fe,Xe),Xe[J]),Kr)},_o=new Map,nr=[],Xi=typeof window<"u"?window:{},Jn=Xi.document||{head:{}},Ln={$flags$:0,$resourcesUrl$:"",jmp:L=>L(),raf:L=>requestAnimationFrame(L),ael:(L,k,z,J)=>L.addEventListener(k,z,J),rel:(L,k,z,J)=>L.removeEventListener(k,z,J),ce:(L,k)=>new CustomEvent(L,k)},vo=L=>{Object.assign(Ln,L)},Ta=!0,Cs=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),yo=[],ta=[],hr=(L,k)=>z=>{L.push(z),V||(V=!0,k&&4&Ln.$flags$?Sa(Da):Ln.raf(Da))},ss=L=>{for(let k=0;k<L.length;k++)try{L[k](performance.now())}catch(z){Kr(z)}L.length=0},Da=()=>{ss(yo),ss(ta),(V=yo.length>0)&&Ln.raf(Da)},Sa=L=>Promise.resolve(void 0).then(L),Zr=hr(yo,!1),Io=hr(ta,!0)},9203:(wt,Le,P)=>{"use strict";P.r(Le),P.d(Le,{GESTURE_CONTROLLER:()=>u.G,createGesture:()=>ge});var u=P(619);const le=(re,ue,Se,be)=>{const fe=F(re)?{capture:!!be.capture,passive:!!be.passive}:!!be.capture;let q,Me;return re.__zone_symbol__addEventListener?(q="__zone_symbol__addEventListener",Me="__zone_symbol__removeEventListener"):(q="addEventListener",Me="removeEventListener"),re[q](ue,Se,fe),()=>{re[Me](ue,Se,fe)}},F=re=>{if(void 0===de)try{const ue=Object.defineProperty({},"passive",{get:()=>{de=!0}});re.addEventListener("optsTest",()=>{},ue)}catch{de=!1}return!!de};let de;const Q=re=>re instanceof Document?re:re.ownerDocument,ge=re=>{let ue=!1,Se=!1,be=!0,fe=!1;const q=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},re),Me=q.canStart,Ve=q.onWillStart,oe=q.onStart,_e=q.onEnd,ae=q.notCaptured,Ce=q.onMove,se=q.threshold,Z=q.passive,W=q.blurOnStart,ve={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Pe=((re,ue,Se)=>{const be=Se*(Math.PI/180),fe="x"===re,q=Math.cos(be),Me=ue*ue;let Ve=0,oe=0,_e=!1,ae=0;return{start(Ce,se){Ve=Ce,oe=se,ae=0,_e=!0},detect(Ce,se){if(!_e)return!1;const Z=Ce-Ve,W=se-oe,ve=Z*Z+W*W;if(ve<Me)return!1;const Pe=Math.sqrt(ve),Ue=(fe?Z:W)/Pe;return ae=Ue>q?1:Ue<-q?-1:0,_e=!1,!0},isGesture:()=>0!==ae,getDirection:()=>ae}})(q.direction,q.threshold,q.maxAngle),Ue=u.G.createGesture({name:re.gestureName,priority:re.gesturePriority,disableScroll:re.disableScroll}),Gt=()=>{ue&&(fe=!1,Ce&&Ce(ve))},Ut=()=>!!Ue.capture()&&(ue=!0,be=!1,ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime,Ve?Ve(ve).then(H):H(),!0),H=()=>{W&&(()=>{if(typeof document<"u"){const Oe=document.activeElement;null!=Oe&&Oe.blur&&Oe.blur()}})(),oe&&oe(ve),be=!0},Y=()=>{ue=!1,Se=!1,fe=!1,be=!0,Ue.release()},ie=Oe=>{const lt=ue,nt=be;if(Y(),nt){if(V(ve,Oe),lt)return void(_e&&_e(ve));ae&&ae(ve)}},we=((re,ue,Se,be,fe)=>{let q,Me,Ve,oe,_e,ae,Ce,se=0;const Z=Ke=>{se=Date.now()+2e3,ue(Ke)&&(!Me&&Se&&(Me=le(re,"touchmove",Se,fe)),Ve||(Ve=le(Ke.target,"touchend",ve,fe)),oe||(oe=le(Ke.target,"touchcancel",ve,fe)))},W=Ke=>{se>Date.now()||ue(Ke)&&(!ae&&Se&&(ae=le(Q(re),"mousemove",Se,fe)),Ce||(Ce=le(Q(re),"mouseup",Pe,fe)))},ve=Ke=>{Ue(),be&&be(Ke)},Pe=Ke=>{Ge(),be&&be(Ke)},Ue=()=>{Me&&Me(),Ve&&Ve(),oe&&oe(),Me=Ve=oe=void 0},Ge=()=>{ae&&ae(),Ce&&Ce(),ae=Ce=void 0},pt=()=>{Ue(),Ge()},Gt=(Ke=!0)=>{Ke?(q||(q=le(re,"touchstart",Z,fe)),_e||(_e=le(re,"mousedown",W,fe))):(q&&q(),_e&&_e(),q=_e=void 0,pt())};return{enable:Gt,stop:pt,destroy:()=>{Gt(!1),be=Se=ue=void 0}}})(q.el,Oe=>{const lt=K(Oe);return!(Se||!be||(j(Oe,ve),ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime=lt,ve.velocityX=ve.velocityY=ve.deltaX=ve.deltaY=0,ve.event=Oe,Me&&!1===Me(ve))||(Ue.release(),!Ue.start()))&&(Se=!0,0===se?Ut():(Pe.start(ve.startX,ve.startY),!0))},Oe=>{ue?!fe&&be&&(fe=!0,V(ve,Oe),requestAnimationFrame(Gt)):(V(ve,Oe),Pe.detect(ve.currentX,ve.currentY)&&(!Pe.isGesture()||!Ut())&&ke())},ie,{capture:!1,passive:Z}),ke=()=>{Y(),we.stop(),ae&&ae(ve)};return{enable(Oe=!0){Oe||(ue&&ie(void 0),Y()),we.enable(Oe)},destroy(){Ue.destroy(),we.destroy()}}},V=(re,ue)=>{if(!ue)return;const Se=re.currentX,be=re.currentY,fe=re.currentTime;j(ue,re);const q=re.currentX,Me=re.currentY,oe=(re.currentTime=K(ue))-fe;if(oe>0&&oe<100){const ae=(Me-be)/oe;re.velocityX=(q-Se)/oe*.7+.3*re.velocityX,re.velocityY=.7*ae+.3*re.velocityY}re.deltaX=q-re.startX,re.deltaY=Me-re.startY,re.event=ue},j=(re,ue)=>{let Se=0,be=0;if(re){const fe=re.changedTouches;if(fe&&fe.length>0){const q=fe[0];Se=q.clientX,be=q.clientY}else void 0!==re.pageX&&(Se=re.pageX,be=re.pageY)}ue.currentX=Se,ue.currentY=be},K=re=>re.timeStamp||Date.now()},4073:(wt,Le,P)=>{"use strict";P.d(Le,{a:()=>j,b:()=>Gt,c:()=>F,g:()=>V,i:()=>Ut});var u=P(4516);class le{constructor(){this.m=new Map}reset(H){this.m=new Map(Object.entries(H))}get(H,Y){const ie=this.m.get(H);return void 0!==ie?ie:Y}getBoolean(H,Y=!1){const ie=this.m.get(H);return void 0===ie?Y:"string"==typeof ie?"true"===ie:!!ie}getNumber(H,Y){const ie=parseFloat(this.m.get(H));return isNaN(ie)?void 0!==Y?Y:NaN:ie}set(H,Y){this.m.set(H,Y)}}const F=new le,ge="ionic-persist-config",V=Ke=>K(Ke),j=(Ke,H)=>("string"==typeof Ke&&(H=Ke,Ke=void 0),V(Ke).includes(H)),K=(Ke=window)=>{if(typeof Ke>"u")return[];Ke.Ionic=Ke.Ionic||{};let H=Ke.Ionic.platforms;return null==H&&(H=Ke.Ionic.platforms=re(Ke),H.forEach(Y=>Ke.document.documentElement.classList.add(`plt-${Y}`))),H},re=Ke=>{const H=F.get("platform");return Object.keys(Ge).filter(Y=>{const ie=null==H?void 0:H[Y];return"function"==typeof ie?ie(Ke):Ge[Y](Ke)})},Se=Ke=>!!(Pe(Ke,/iPad/i)||Pe(Ke,/Macintosh/i)&&_e(Ke)),q=Ke=>Pe(Ke,/android|sink/i),_e=Ke=>Ue(Ke,"(any-pointer:coarse)"),Ce=Ke=>se(Ke)||Z(Ke),se=Ke=>!!(Ke.cordova||Ke.phonegap||Ke.PhoneGap),Z=Ke=>{const H=Ke.Capacitor;return!(null==H||!H.isNative)},Pe=(Ke,H)=>H.test(Ke.navigator.userAgent),Ue=(Ke,H)=>{var Y;return null===(Y=Ke.matchMedia)||void 0===Y?void 0:Y.call(Ke,H).matches},Ge={ipad:Se,iphone:Ke=>Pe(Ke,/iPhone/i),ios:Ke=>Pe(Ke,/iPhone|iPod/i)||Se(Ke),android:q,phablet:Ke=>{const H=Ke.innerWidth,Y=Ke.innerHeight,ie=Math.min(H,Y),we=Math.max(H,Y);return ie>390&&ie<520&&we>620&&we<800},tablet:Ke=>{const H=Ke.innerWidth,Y=Ke.innerHeight,ie=Math.min(H,Y),we=Math.max(H,Y);return Se(Ke)||(Ke=>q(Ke)&&!Pe(Ke,/mobile/i))(Ke)||ie>460&&ie<820&&we>780&&we<1400},cordova:se,capacitor:Z,electron:Ke=>Pe(Ke,/electron/i),pwa:Ke=>{var H;return!!(null!==(H=Ke.matchMedia)&&void 0!==H&&H.call(Ke,"(display-mode: standalone)").matches||Ke.navigator.standalone)},mobile:_e,mobileweb:Ke=>_e(Ke)&&!Ce(Ke),desktop:Ke=>!_e(Ke),hybrid:Ce};let pt;const Gt=Ke=>Ke&&(0,u.g)(Ke)||pt,Ut=(Ke={})=>{if(typeof window>"u")return;const H=window.document,Y=window,ie=Y.Ionic=Y.Ionic||{},we={};Ke._ael&&(we.ael=Ke._ael),Ke._rel&&(we.rel=Ke._rel),Ke._ce&&(we.ce=Ke._ce),(0,u.a)(we);const ke=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ke=>{try{const H=Ke.sessionStorage.getItem(ge);return null!==H?JSON.parse(H):{}}catch{return{}}})(Y)),{persistConfig:!1}),ie.config),(Ke=>{const H={};return Ke.location.search.slice(1).split("&").map(Y=>Y.split("=")).map(([Y,ie])=>[decodeURIComponent(Y),decodeURIComponent(ie)]).filter(([Y])=>((Ke,H)=>Ke.substr(0,H.length)===H)(Y,"ionic:")).map(([Y,ie])=>[Y.slice(6),ie]).forEach(([Y,ie])=>{H[Y]=ie}),H})(Y)),Ke);F.reset(ke),F.getBoolean("persistConfig")&&((Ke,H)=>{try{Ke.sessionStorage.setItem(ge,JSON.stringify(H))}catch{return}})(Y,ke),K(Y),ie.config=F,ie.mode=pt=F.get("mode",H.documentElement.getAttribute("mode")||(j(Y,"ios")?"ios":"md")),F.set("mode",pt),H.documentElement.setAttribute("mode",pt),H.documentElement.classList.add(pt),F.getBoolean("_testing")&&F.set("animated",!1);const Oe=nt=>{var _t;return null===(_t=nt.tagName)||void 0===_t?void 0:_t.startsWith("ION-")},lt=nt=>["ios","md"].includes(nt);(0,u.c)(nt=>{for(;nt;){const _t=nt.mode||nt.getAttribute("mode");if(_t){if(lt(_t))return _t;Oe(nt)&&console.warn('Invalid ionic mode: "'+_t+'", expected: "ios" or "md"')}nt=nt.parentElement}return pt})}},2411:(wt,Le,P)=>{"use strict";P.r(Le),P.d(Le,{iosTransitionAnimation:()=>re,shadow:()=>Q});var u=P(1774),le=P(8796);P(6225),P(4516);const ye=ue=>document.querySelector(`${ue}.ion-cloned-element`),Q=ue=>ue.shadowRoot||ue,De=ue=>{const Se="ION-TABS"===ue.tagName?ue:ue.querySelector("ion-tabs"),be="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Se){const fe=Se.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=fe?fe.querySelector(be):null}return ue.querySelector(be)},ge=(ue,Se)=>{const be="ION-TABS"===ue.tagName?ue:ue.querySelector("ion-tabs");let fe=[];if(null!=be){const q=be.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=q&&(fe=q.querySelectorAll("ion-buttons"))}else fe=ue.querySelectorAll("ion-buttons");for(const q of fe){const Me=q.closest("ion-header"),Ve=Me&&!Me.classList.contains("header-collapse-condense-inactive"),oe=q.querySelector("ion-back-button"),_e=q.classList.contains("buttons-collapse");if(null!==oe&&("start"===q.slot||""===q.slot)&&(_e&&Ve&&Se||!_e))return oe}return null},j=(ue,Se,be,fe,q,Me)=>{const Ve=Se?`calc(100% - ${Me.right+4}px)`:Me.left-4+"px",oe=Se?"7px":"-7px",_e=Se?"-4px":"4px",ae=Se?"-4px":"4px",Ce=Se?"right":"left",se=Se?"left":"right",ve=be?[{offset:0,opacity:1,transform:`translate3d(${_e}, ${Me.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${oe}, ${q.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${oe}, ${q.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${_e}, ${Me.top-46}px, 0) scale(1)`}],Ge=be?[{offset:0,opacity:1,transform:`translate3d(${ae}, ${Me.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${ae}, ${Me.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${ae}, ${Me.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${ae}, ${Me.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${ae}, ${Me.top-46}px, 0) scale(1)`}],pt=(0,u.c)(),Gt=(0,u.c)(),Ut=ye("ion-back-button"),Ke=Q(Ut).querySelector(".button-text"),H=Q(Ut).querySelector("ion-icon");Ut.text=fe.text,Ut.mode=fe.mode,Ut.icon=fe.icon,Ut.color=fe.color,Ut.disabled=fe.disabled,Ut.style.setProperty("display","block"),Ut.style.setProperty("position","fixed"),Gt.addElement(H),pt.addElement(Ke),pt.beforeStyles({"transform-origin":`${Ce} center`}).beforeAddWrite(()=>{fe.style.setProperty("display","none"),Ut.style.setProperty(Ce,Ve)}).afterAddWrite(()=>{fe.style.setProperty("display",""),Ut.style.setProperty("display","none"),Ut.style.removeProperty(Ce)}).keyframes(ve),Gt.beforeStyles({"transform-origin":`${se} center`}).keyframes(Ge),ue.addAnimation([pt,Gt])},K=(ue,Se,be,fe,q,Me)=>{const Ve=Se?`calc(100% - ${q.right}px)`:`${q.left}px`,oe=Se?"-18px":"18px",_e=Se?"right":"left",se=be?[{offset:0,opacity:0,transform:`translate3d(${oe}, ${Me.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${q.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${q.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${oe}, ${Me.top-4}px, 0) scale(0.5)`}],Z=ye("ion-title"),W=(0,u.c)();Z.innerText=fe.innerText,Z.size=fe.size,Z.color=fe.color,W.addElement(Z),W.beforeStyles({"transform-origin":`${_e} center`,height:"46px",display:"",position:"relative",[_e]:Ve}).beforeAddWrite(()=>{fe.style.setProperty("display","none")}).afterAddWrite(()=>{fe.style.setProperty("display",""),Z.style.setProperty("display","none")}).keyframes(se),ue.addAnimation(W)},re=(ue,Se)=>{var be;try{const fe="cubic-bezier(0.32,0.72,0,1)",q="opacity",Me="transform",Ve="0%",_e="rtl"===ue.ownerDocument.dir,ae=_e?"-99.5%":"99.5%",Ce=_e?"33%":"-33%",se=Se.enteringEl,Z=Se.leavingEl,W="back"===Se.direction,ve=se.querySelector(":scope > ion-content"),Pe=se.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ue=se.querySelectorAll(":scope > ion-header > ion-toolbar"),Ge=(0,u.c)(),pt=(0,u.c)();if(Ge.addElement(se).duration((null!==(be=Se.duration)&&void 0!==be?be:0)||540).easing(Se.easing||fe).fill("both").beforeRemoveClass("ion-page-invisible"),Z&&null!=ue){const H=(0,u.c)();H.addElement(ue),Ge.addAnimation(H)}if(ve||0!==Ue.length||0!==Pe.length?(pt.addElement(ve),pt.addElement(Pe)):pt.addElement(se.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ge.addAnimation(pt),W?pt.beforeClearStyles([q]).fromTo("transform",`translateX(${Ce})`,`translateX(${Ve})`).fromTo(q,.8,1):pt.beforeClearStyles([q]).fromTo("transform",`translateX(${ae})`,`translateX(${Ve})`),ve){const H=Q(ve).querySelector(".transition-effect");if(H){const Y=H.querySelector(".transition-cover"),ie=H.querySelector(".transition-shadow"),we=(0,u.c)(),ke=(0,u.c)(),Oe=(0,u.c)();we.addElement(H).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ke.addElement(Y).beforeClearStyles([q]).fromTo(q,0,.1),Oe.addElement(ie).beforeClearStyles([q]).fromTo(q,.03,.7),we.addAnimation([ke,Oe]),pt.addAnimation([we])}}const Gt=se.querySelector("ion-header.header-collapse-condense"),{forward:Ut,backward:Ke}=((ue,Se,be,fe,q)=>{const Me=ge(fe,be),Ve=De(q),oe=De(fe),_e=ge(q,be),ae=null!==Me&&null!==Ve&&!be,Ce=null!==oe&&null!==_e&&be;if(ae){const se=Ve.getBoundingClientRect(),Z=Me.getBoundingClientRect();K(ue,Se,be,Ve,se,Z),j(ue,Se,be,Me,se,Z)}else if(Ce){const se=oe.getBoundingClientRect(),Z=_e.getBoundingClientRect();K(ue,Se,be,oe,se,Z),j(ue,Se,be,_e,se,Z)}return{forward:ae,backward:Ce}})(Ge,_e,W,se,Z);if(Ue.forEach(H=>{const Y=(0,u.c)();Y.addElement(H),Ge.addAnimation(Y);const ie=(0,u.c)();ie.addElement(H.querySelector("ion-title"));const we=(0,u.c)(),ke=Array.from(H.querySelectorAll("ion-buttons,[menuToggle]")),Oe=H.closest("ion-header"),lt=null==Oe?void 0:Oe.classList.contains("header-collapse-condense-inactive");let nt;nt=ke.filter(W?We=>{const je=We.classList.contains("buttons-collapse");return je&&!lt||!je}:We=>!We.classList.contains("buttons-collapse")),we.addElement(nt);const _t=(0,u.c)();_t.addElement(H.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const It=(0,u.c)();It.addElement(Q(H).querySelector(".toolbar-background"));const Jt=(0,u.c)(),He=H.querySelector("ion-back-button");if(He&&Jt.addElement(He),Y.addAnimation([ie,we,_t,It,Jt]),we.fromTo(q,.01,1),_t.fromTo(q,.01,1),W)lt||ie.fromTo("transform",`translateX(${Ce})`,`translateX(${Ve})`).fromTo(q,.01,1),_t.fromTo("transform",`translateX(${Ce})`,`translateX(${Ve})`),Jt.fromTo(q,.01,1);else if(Gt||ie.fromTo("transform",`translateX(${ae})`,`translateX(${Ve})`).fromTo(q,.01,1),_t.fromTo("transform",`translateX(${ae})`,`translateX(${Ve})`),It.beforeClearStyles([q,"transform"]),(null==Oe?void 0:Oe.translucent)?It.fromTo("transform",_e?"translateX(-100%)":"translateX(100%)","translateX(0px)"):It.fromTo(q,.01,"var(--opacity)"),Ut||Jt.fromTo(q,.01,1),He&&!Ut){const je=(0,u.c)();je.addElement(Q(He).querySelector(".button-text")).fromTo("transform",_e?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Y.addAnimation(je)}}),Z){const H=(0,u.c)(),Y=Z.querySelector(":scope > ion-content"),ie=Z.querySelectorAll(":scope > ion-header > ion-toolbar"),we=Z.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Y||0!==ie.length||0!==we.length?(H.addElement(Y),H.addElement(we)):H.addElement(Z.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ge.addAnimation(H),W){H.beforeClearStyles([q]).fromTo("transform",`translateX(${Ve})`,_e?"translateX(-100%)":"translateX(100%)");const ke=(0,le.g)(Z);Ge.afterAddWrite(()=>{"normal"===Ge.getDirection()&&ke.style.setProperty("display","none")})}else H.fromTo("transform",`translateX(${Ve})`,`translateX(${Ce})`).fromTo(q,1,.8);if(Y){const ke=Q(Y).querySelector(".transition-effect");if(ke){const Oe=ke.querySelector(".transition-cover"),lt=ke.querySelector(".transition-shadow"),nt=(0,u.c)(),_t=(0,u.c)(),It=(0,u.c)();nt.addElement(ke).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),_t.addElement(Oe).beforeClearStyles([q]).fromTo(q,.1,0),It.addElement(lt).beforeClearStyles([q]).fromTo(q,.7,.03),nt.addAnimation([_t,It]),H.addAnimation([nt])}}ie.forEach(ke=>{const Oe=(0,u.c)();Oe.addElement(ke);const lt=(0,u.c)();lt.addElement(ke.querySelector("ion-title"));const nt=(0,u.c)(),_t=ke.querySelectorAll("ion-buttons,[menuToggle]"),It=ke.closest("ion-header"),Jt=null==It?void 0:It.classList.contains("header-collapse-condense-inactive"),He=Array.from(_t).filter(_n=>{const ln=_n.classList.contains("buttons-collapse");return ln&&!Jt||!ln});nt.addElement(He);const We=(0,u.c)(),je=ke.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");je.length>0&&We.addElement(je);const ut=(0,u.c)();ut.addElement(Q(ke).querySelector(".toolbar-background"));const Mt=(0,u.c)(),mn=ke.querySelector("ion-back-button");if(mn&&Mt.addElement(mn),Oe.addAnimation([lt,nt,We,Mt,ut]),Ge.addAnimation(Oe),Mt.fromTo(q,.99,0),nt.fromTo(q,.99,0),We.fromTo(q,.99,0),W){if(Jt||lt.fromTo("transform",`translateX(${Ve})`,_e?"translateX(-100%)":"translateX(100%)").fromTo(q,.99,0),We.fromTo("transform",`translateX(${Ve})`,_e?"translateX(-100%)":"translateX(100%)"),ut.beforeClearStyles([q,"transform"]),(null==It?void 0:It.translucent)?ut.fromTo("transform","translateX(0px)",_e?"translateX(-100%)":"translateX(100%)"):ut.fromTo(q,"var(--opacity)",0),mn&&!Ke){const ln=(0,u.c)();ln.addElement(Q(mn).querySelector(".button-text")).fromTo("transform",`translateX(${Ve})`,`translateX(${(_e?-124:124)+"px"})`),Oe.addAnimation(ln)}}else Jt||lt.fromTo("transform",`translateX(${Ve})`,`translateX(${Ce})`).fromTo(q,.99,0).afterClearStyles([Me,q]),We.fromTo("transform",`translateX(${Ve})`,`translateX(${Ce})`).afterClearStyles([Me,q]),Mt.afterClearStyles([q]),lt.afterClearStyles([q]),nt.afterClearStyles([q])})}return Ge}catch(fe){throw fe}}},1835:(wt,Le,P)=>{"use strict";P.r(Le),P.d(Le,{mdTransitionAnimation:()=>me});var u=P(1774),le=P(8796);P(6225),P(4516);const me=(ye,Q)=>{var De,ge,V;const j="40px",re="back"===Q.direction,Se=Q.leavingEl,be=(0,le.g)(Q.enteringEl),fe=be.querySelector("ion-toolbar"),q=(0,u.c)();if(q.addElement(be).fill("both").beforeRemoveClass("ion-page-invisible"),re?q.duration((null!==(De=Q.duration)&&void 0!==De?De:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):q.duration((null!==(ge=Q.duration)&&void 0!==ge?ge:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${j})`,"translateY(0px)").fromTo("opacity",.01,1),fe){const Me=(0,u.c)();Me.addElement(fe),q.addAnimation(Me)}if(Se&&re){q.duration((null!==(V=Q.duration)&&void 0!==V?V:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Me=(0,u.c)();Me.addElement((0,le.g)(Se)).onFinish(Ve=>{1===Ve&&Me.elements.length>0&&Me.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${j})`).fromTo("opacity",1,0),q.addAnimation(Me)}return q}},4854:(wt,Le,P)=>{"use strict";P.d(Le,{B:()=>nt,G:()=>_t,a:()=>K,b:()=>re,c:()=>fe,d:()=>It,e:()=>Jt,f:()=>Gt,g:()=>Ke,h:()=>ie,i:()=>ke,j:()=>Me,k:()=>Ve,m:()=>Se,n:()=>V,o:()=>ae,q:()=>Ge,s:()=>lt});var u=P(5861),le=P(6225),F=P(4073),de=P(6559),me=P(2124),ye=P(839),Q=P(6710);let De=0,ge=0;const V=new WeakMap,j=He=>({create:We=>oe(He,We),dismiss:(We,je,ut)=>ve(document,We,je,He,ut),getTop:()=>(0,u.Z)(function*(){return Ge(document,He)})()}),K=j("ion-alert"),re=j("ion-action-sheet"),Se=j("ion-modal"),fe=j("ion-popover"),Me=He=>{typeof document<"u"&&W(document);const We=De++;He.overlayIndex=We},Ve=He=>(He.hasAttribute("id")||(He.id="ion-overlay-"+ ++ge),He.id),oe=(He,We)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(He).then(()=>{const je=document.createElement(He);return je.classList.add("overlay-hidden"),Object.assign(je,Object.assign(Object.assign({},We),{hasController:!0})),H(document).appendChild(je),new Promise(ut=>(0,ye.c)(je,ut))}):Promise.resolve(),_e='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ae=(He,We)=>{let je=He.querySelector(_e);const ut=null==je?void 0:je.shadowRoot;ut&&(je=ut.querySelector(_e)||je),je?(0,ye.f)(je):We.focus()},se=(He,We)=>{const je=Array.from(He.querySelectorAll(_e));let ut=je.length>0?je[je.length-1]:null;const Mt=null==ut?void 0:ut.shadowRoot;Mt&&(ut=Mt.querySelector(_e)||ut),ut?ut.focus():We.focus()},W=He=>{0===De&&(De=1,He.addEventListener("focus",We=>{((He,We)=>{const je=Ge(We,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),ut=He.target;je&&ut&&!je.classList.contains("ion-disable-focus-trap")&&(je.shadowRoot?(()=>{if(je.contains(ut))je.lastFocus=ut;else{const _n=je.lastFocus;ae(je,je),_n===We.activeElement&&se(je,je),je.lastFocus=We.activeElement}})():(()=>{if(je===ut)je.lastFocus=void 0;else{const _n=(0,ye.g)(je);if(!_n.contains(ut))return;const ln=_n.querySelector(".ion-overlay-wrapper");if(!ln)return;if(ln.contains(ut)||ut===_n.querySelector("ion-backdrop"))je.lastFocus=ut;else{const cn=je.lastFocus;ae(ln,je),cn===We.activeElement&&se(ln,je),je.lastFocus=We.activeElement}}})())})(We,He)},!0),He.addEventListener("ionBackButton",We=>{const je=Ge(He);null!=je&&je.backdropDismiss&&We.detail.register(me.OVERLAY_BACK_BUTTON_PRIORITY,()=>je.dismiss(void 0,nt))}),He.addEventListener("keydown",We=>{if("Escape"===We.key){const je=Ge(He);null!=je&&je.backdropDismiss&&je.dismiss(void 0,nt)}}))},ve=(He,We,je,ut,Mt)=>{const mn=Ge(He,ut,Mt);return mn?mn.dismiss(We,je):Promise.reject("overlay does not exist")},Ue=(He,We)=>((He,We)=>(void 0===We&&(We="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(He.querySelectorAll(We)).filter(je=>je.overlayIndex>0)))(He,We).filter(je=>!(He=>He.classList.contains("overlay-hidden"))(je)),Ge=(He,We,je)=>{const ut=Ue(He,We);return void 0===je?ut[ut.length-1]:ut.find(Mt=>Mt.id===je)},pt=(He=!1)=>{const je=H(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");je&&(He?je.setAttribute("aria-hidden","true"):je.removeAttribute("aria-hidden"))},Gt=function(){var He=(0,u.Z)(function*(We,je,ut,Mt,mn){var _n,ln;if(We.presented)return;pt(!0),We.presented=!0,We.willPresent.emit(),null===(_n=We.willPresentShorthand)||void 0===_n||_n.emit();const cn=(0,F.b)(We),In=We.enterAnimation?We.enterAnimation:F.c.get(je,"ios"===cn?ut:Mt);(yield Y(We,In,We.el,mn))&&(We.didPresent.emit(),null===(ln=We.didPresentShorthand)||void 0===ln||ln.emit()),"ION-TOAST"!==We.el.tagName&&Ut(We.el),We.keyboardClose&&(null===document.activeElement||!We.el.contains(document.activeElement))&&We.el.focus()});return function(je,ut,Mt,mn,_n){return He.apply(this,arguments)}}(),Ut=function(){var He=(0,u.Z)(function*(We){let je=document.activeElement;if(!je)return;const ut=null==je?void 0:je.shadowRoot;ut&&(je=ut.querySelector(_e)||je),yield We.onDidDismiss(),je.focus()});return function(je){return He.apply(this,arguments)}}(),Ke=function(){var He=(0,u.Z)(function*(We,je,ut,Mt,mn,_n,ln){var cn,In;if(!We.presented)return!1;void 0!==le.d&&1===Ue(le.d).length&&pt(!1),We.presented=!1;try{We.el.style.setProperty("pointer-events","none"),We.willDismiss.emit({data:je,role:ut}),null===(cn=We.willDismissShorthand)||void 0===cn||cn.emit({data:je,role:ut});const Xn=(0,F.b)(We),Kn=We.leaveAnimation?We.leaveAnimation:F.c.get(Mt,"ios"===Xn?mn:_n);ut!==_t&&(yield Y(We,Kn,We.el,ln)),We.didDismiss.emit({data:je,role:ut}),null===(In=We.didDismissShorthand)||void 0===In||In.emit({data:je,role:ut}),V.delete(We),We.el.classList.add("overlay-hidden"),We.el.style.removeProperty("pointer-events"),void 0!==We.el.lastFocus&&(We.el.lastFocus=void 0)}catch(Xn){console.error(Xn)}return We.el.remove(),!0});return function(je,ut,Mt,mn,_n,ln,cn){return He.apply(this,arguments)}}(),H=He=>He.querySelector("ion-app")||He.body,Y=function(){var He=(0,u.Z)(function*(We,je,ut,Mt){ut.classList.remove("overlay-hidden");const _n=je(We.el,Mt);(!We.animated||!F.c.getBoolean("animated",!0))&&_n.duration(0),We.keyboardClose&&_n.beforeAddWrite(()=>{const cn=ut.ownerDocument.activeElement;null!=cn&&cn.matches("input,ion-input, ion-textarea")&&cn.blur()});const ln=V.get(We)||[];return V.set(We,[...ln,_n]),yield _n.play(),!0});return function(je,ut,Mt,mn){return He.apply(this,arguments)}}(),ie=(He,We)=>{let je;const ut=new Promise(Mt=>je=Mt);return we(He,We,Mt=>{je(Mt.detail)}),ut},we=(He,We,je)=>{const ut=Mt=>{(0,ye.b)(He,We,ut),je(Mt)};(0,ye.a)(He,We,ut)},ke=He=>"cancel"===He||He===nt,Oe=He=>He(),lt=(He,We)=>{if("function"==typeof He)return F.c.get("_zoneGate",Oe)(()=>{try{return He(We)}catch(ut){throw ut}})},nt="backdrop",_t="gesture",It=He=>{let je,We=!1;const ut=(0,de.C)(),Mt=(ln=!1)=>{if(je&&!ln)return{delegate:je,inline:We};const{el:cn,hasController:In,delegate:Xn}=He;return We=null!==cn.parentNode&&!In,je=We?Xn||ut:Xn,{inline:We,delegate:je}};return{attachViewToDom:function(){var ln=(0,u.Z)(function*(cn){const{delegate:In}=Mt(!0);if(In)return yield In.attachViewToDom(He.el,cn);const{hasController:Xn}=He;if(Xn&&void 0!==cn)throw new Error("framework delegate is missing");return null});return function(In){return ln.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:ln}=Mt();ln&&void 0!==He.el&&ln.removeViewFromDom(He.el.parentElement,He.el)}}},Jt=()=>{let He;const We=()=>{He&&(He(),He=void 0)};return{addClickListener:(ut,Mt)=>{We();const mn=void 0!==Mt?document.getElementById(Mt):null;mn?He=((ln,cn)=>{const In=()=>{cn.present()};return ln.addEventListener("click",In),()=>{ln.removeEventListener("click",In)}})(mn,ut):(0,Q.p)(`A trigger element with the ID "${Mt}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,ut)},removeClickListener:We}}},1763:(wt,Le,P)=>{"use strict";var u=P(5879);let le=null;function F(){return le}class me{}const ye=new u.OlP("DocumentToken");let Q=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(ge)},providedIn:"platform"}),e})();const De=new u.OlP("Location Initialized");let ge=(()=>{var n;class e extends Q{constructor(){super(),this._doc=(0,u.f3M)(ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(r){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),e})();function V(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function K(n){return n&&"?"!==n[0]?"?"+n:n}let re=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Se)},providedIn:"root"}),e})();const ue=new u.OlP("appBaseHref");let Se=(()=>{var n;class e extends re{constructor(r,i){var o,c,f;super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=null!==(o=null!==(c=null!=i?i:this._platformLocation.getBaseHrefFromDOM())&&void 0!==c?c:null===(f=(0,u.f3M)(ye).location)||void 0===f?void 0:f.origin)&&void 0!==o?o:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return V(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+K(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,c){const f=this.prepareExternalUrl(o+K(c));this._platformLocation.pushState(r,i,f)}replaceState(r,i,o,c){const f=this.prepareExternalUrl(o+K(c));this._platformLocation.replaceState(r,i,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(Q),u.LFG(ue,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),be=(()=>{var n;class e extends re{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=V(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,c){let f=this.prepareExternalUrl(o+K(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(r,i,f)}replaceState(r,i,o,c){let f=this.prepareExternalUrl(o+K(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(Q),u.LFG(ue,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})(),fe=(()=>{var n;class e{constructor(r){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function oe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(Ve(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){var r;null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+K(i))}normalize(r){return e.stripTrailingSlash(function Me(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ve(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+K(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+K(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){var i,o;null===(i=(o=this._locationStrategy).historyGo)||void 0===i||i.call(o,r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);var o;this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(null===(o=this._urlChangeSubscription)||void 0===o||o.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}}return(n=e).normalizeQueryParams=K,n.joinWithSlash=V,n.stripTrailingSlash=j,n.\u0275fac=function(r){return new(r||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function q(){return new fe((0,u.LFG)(re))}()},providedIn:"root"}),e})();function Ve(n){return n.replace(/\/index.html$/,"")}let ss=(()=>{var n;class e{constructor(r,i){this._viewContainer=r,this._context=new Da,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Sa("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Sa("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Da{constructor(){this.$implicit=null,this.ngIf=null}}function Sa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let ir=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),e})();function Oo(n){return"server"===n}let ni=(()=>{var n;class e{}return(n=e).\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new No((0,u.LFG)(ye),window)}),e})();class No{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Lo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ef extends me{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class hu extends ef{static makeCurrent(){!function de(n){le||(le=n)}(new hu)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cg(){return gc=gc||document.querySelector("base"),gc?gc.getAttribute("href"):null}();return null==t?null:function H_(n){Nd=Nd||document.createElement("a"),Nd.setAttribute("href",n);const e=Nd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Xi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Nd,gc=null,ug=(()=>{var n;class e{build(){return new XMLHttpRequest}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();const Fd=new u.OlP("EventManagerPlugins");let dg=(()=>{var n;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(c=>c.supports(r)),!i)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(Fd),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();class fu{constructor(e){this._doc=e}}const mc="ng-app-id";let hg=(()=>{var n;class e{constructor(r,i,o,c={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=c,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Oo(c),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){var i;const o=this.styleRef;null===(i=o.get(r))||void 0===i||null===(i=i.elements)||void 0===i||i.forEach(c=>c.remove()),o.delete(r)}collectServerRenderedStyles(){var r;const i=null===(r=this.doc.head)||void 0===r?void 0:r.querySelectorAll(`style[${mc}="${this.appId}"]`);if(null!=i&&i.length){const o=new Map;return i.forEach(c=>{null!=c.textContent&&o.set(c.textContent,c)}),o}return null}changeUsageCount(r,i){const o=this.styleRef;if(o.has(r)){const c=o.get(r);return c.usage+=i,c.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const o=this.styleNodesInDOM,c=null==o?void 0:o.get(i);if((null==c?void 0:c.parentNode)===r)return o.delete(i),c.removeAttribute(mc),c;{const f=this.doc.createElement("style");return this.nonce&&f.setAttribute("nonce",this.nonce),f.textContent=i,this.platformIsServer&&f.setAttribute(mc,this.appId),f}}addStyleToHost(r,i){var o;const c=this.getStyleElement(r,i);r.appendChild(c);const f=this.styleRef,m=null===(o=f.get(i))||void 0===o?void 0:o.elements;m?m.push(c):f.set(i,{elements:[c],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(ye),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();const Fa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wo=/%COMP%/g,Js=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function jn(n,e){return e.map(t=>t.replace(wo,n))}let Ua=(()=>{var n;class e{constructor(r,i,o,c,f,m,v,C=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=c,this.doc=f,this.platformId=m,this.ngZone=v,this.nonce=C,this.rendererByCompId=new Map,this.platformIsServer=Oo(m),this.defaultRenderer=new $a(r,f,v,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===u.ifc.ShadowDom&&(i={...i,encapsulation:u.ifc.Emulated});const o=this.getOrCreateRenderer(r,i);return o instanceof gg?o.applyToHost(r):o instanceof bi&&o.applyStyles(),o}getOrCreateRenderer(r,i){const o=this.rendererByCompId;let c=o.get(i.id);if(!c){const f=this.doc,m=this.ngZone,v=this.eventManager,C=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,O=this.platformIsServer;switch(i.encapsulation){case u.ifc.Emulated:c=new gg(v,C,i,this.appId,S,f,m,O);break;case u.ifc.ShadowDom:return new Va(v,C,r,i,f,m,this.nonce,O);default:c=new bi(v,C,i,S,f,m,O)}o.set(i.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(dg),u.LFG(hg),u.LFG(u.AFp),u.LFG(Js),u.LFG(ye),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();class $a{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Fa[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Bd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Bd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new u.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Fa[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Fa[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=F().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Bd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Va extends $a{constructor(e,t,r,i,o,c,f,m){super(e,o,c,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=jn(i.id,i.styles);for(const C of v){const S=document.createElement("style");f&&S.setAttribute("nonce",f),S.textContent=C,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class bi extends $a{constructor(e,t,r,i,o,c,f,m){super(e,o,c,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=m?jn(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class gg extends bi{constructor(e,t,r,i,o,c,f,m){const v=i+"-"+r.id;super(e,t,r,o,c,f,m,v),this.contentAttr=function nf(n){return"_ngcontent-%COMP%".replace(wo,n)}(v),this.hostAttr=function rf(n){return"_nghost-%COMP%".replace(wo,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Il=(()=>{var n;class e extends fu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(ye))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();const mg=["alt","control","meta","shift"],cs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_g={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ud=(()=>{var n;class e extends fu{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,o){const c=e.parseEventName(i),f=e.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(r,c.domEventName,f))}static parseEventName(r){const i=r.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const c=e._normalizeKey(i.pop());let f="",m=i.indexOf("code");if(m>-1&&(i.splice(m,1),f="code."),mg.forEach(C=>{const S=i.indexOf(C);S>-1&&(i.splice(S,1),f+=C+".")}),f+=c,0!=i.length||0===c.length)return null;const v={};return v.domEventName=o,v.fullKey=f,v}static matchEventFullKeyCode(r,i){let o=cs[r.key]||r.key,c="";return i.indexOf("code.")>-1&&(o=r.code,c="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),mg.forEach(f=>{f!==o&&(0,_g[f])(r)&&(c+=f+".")}),c+=o,c===i)}static eventCallback(r,i,o){return c=>{e.matchEventFullKeyCode(c,r)&&o.runGuarded(()=>i(c))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(ye))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();const ai=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function an(){hu.makeCurrent()},multi:!0},{provide:ye,useFactory:function af(){return(0,u.RDi)(document),document},deps:[]}]),lf=new u.OlP(""),Ci=[{provide:u.rWj,useClass:class Ld{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new u.vHH(5103,!1);return o},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const f=function(m){c=c||m,o--,0==o&&r(c)};i.forEach(m=>{m.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],bo=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function sf(){return new u.qLn},deps:[]},{provide:Fd,useClass:Il,multi:!0,deps:[ye,u.R0b,u.Lbi]},{provide:Fd,useClass:Ud,multi:!0,deps:[ye]},Ua,hg,dg,{provide:u.FYo,useExisting:Ua},{provide:class Fs{},useClass:ug,deps:[]},[]];let mu=(()=>{var n;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:u.AFp,useValue:r.appId}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(lf,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...bo,...Ci],imports:[ir,u.hGG]}),e})(),ot=(()=>{var n;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(ye))},n.\u0275prov=u.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function $d(){return new ot((0,u.LFG)(ye))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;var ci=P(5592),As=P(4674),er=P(2459),Wt=P(2096),Ti=P(5619);const{isArray:Cu}=Array,{getPrototypeOf:vc,prototype:Di,keys:Bo}=Object;function sr(n){if(1===n.length){const e=n[0];if(Cu(e))return{args:e,keys:null};if(function Ga(n){return n&&"object"==typeof n&&vc(n)===Di}(e)){const t=Bo(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var to=P(2737),Kt=P(7398);const{isArray:gf}=Array;function za(n){return(0,Kt.U)(e=>function Hd(n,e){return gf(e)?n(...e):n(e)}(n,e))}var Us=P(4564);function no(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var or=P(8251),bl=P(7103);function la(...n){const e=(0,Us.yG)(n),t=(0,Us.jO)(n),{args:r,keys:i}=sr(n);if(0===r.length)return(0,er.D)([],e);const o=new ci.y(function Tu(n,e,t=to.y){return r=>{Cl(e,()=>{const{length:i}=n,o=new Array(i);let c=i,f=i;for(let m=0;m<i;m++)Cl(e,()=>{const v=(0,er.D)(n[m],e);let C=!1;v.subscribe((0,or.x)(r,S=>{o[m]=S,C||(C=!0,f--),f||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>no(i,c):to.y));return t?o.pipe(za(t)):o}function Cl(n,e,t){n?(0,bl.f)(t,n,e):e()}const Wa=(0,P(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qa=P(7537);function Co(...n){return function ca(){return(0,qa.J)(1)}()((0,er.D)(n,(0,Us.yG)(n)))}var yc=P(4829);function Gd(n){return new ci.y(e=>{(0,yc.Xf)(n()).subscribe(e)})}var Du=P(8407);function Ic(n,e){const t=(0,As.m)(n)?n:()=>n,r=i=>i.error(t());return new ci.y(e?i=>e.schedule(r,0,i):r)}var Uo=P(6232),mf=P(7394),Si=P(9360);function _f(){return(0,Si.e)((n,e)=>{let t=null;n._refCount++;const r=(0,or.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Tl extends ci.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Si.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,or.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mf.w0.EMPTY)}return e}refCount(){return _f()(this)}}var $r=P(8645),wr=P(4664);function $s(n){return n<=0?()=>Uo.E:(0,Si.e)((e,t)=>{let r=0;e.subscribe((0,or.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Dl(...n){const e=(0,Us.yG)(n);return(0,Si.e)((t,r)=>{(e?Co(n,t,e):Co(n,t)).subscribe(r)})}function Vi(n,e){return(0,Si.e)((t,r)=>{let i=0;t.subscribe((0,or.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var Ai=P(1631);function Ec(n){return(0,Si.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function vf(n=zd){return(0,Si.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zd(){return new Wa}function Ri(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vi((i,o)=>n(i,o,r)):to.y,$s(1),t?Ec(e):vf(()=>new Wa))}function ua(n,e){return(0,As.m)(e)?(0,Ai.z)(n,e,1):(0,Ai.z)(n,1)}var br=P(9397);function Vs(n){return(0,Si.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,or.x)(t,void 0,void 0,c=>{o=(0,yc.Xf)(n(c,Vs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Rs(n,e){return(0,Si.e)(function wc(n,e,t,r,i){return(o,c)=>{let f=t,m=e,v=0;o.subscribe((0,or.x)(c,C=>{const S=v++;m=f?n(m,C,S):(f=!0,C),r&&c.next(m)},i&&(()=>{f&&c.next(m),c.complete()})))}}(n,e,arguments.length>=2,!0))}function Ya(n){return n<=0?()=>Uo.E:(0,Si.e)((e,t)=>{let r=[];e.subscribe((0,or.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ka(n){return(0,Si.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Cc=P(2420);const vn="primary",Za=Symbol("RouteTitle");class Xa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Sl(n){return new Xa(n)}function $o(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],f=n[o];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ds(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!qd(n[i],e[i]))return!1;return!0}function qd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Cr(n){return n.length>0?n[n.length-1]:null}function ro(n){return function wl(n){return!!n&&(n instanceof ci.y||(0,As.m)(n.lift)&&(0,As.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,er.D)(Promise.resolve(n)):(0,Wt.of)(n)}const da={exact:function Ru(n,e,t){if(!qe(n.segments,e.segments)||!D(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ru(n.children[r],e.children[r],t))return!1;return!0},subset:Rl},Au={exact:function Yd(n,e){return ds(n,e)},subset:function Al(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qd(n[t],e[t]))},ignored:()=>!0};function Eg(n,e,t){return da[t.paths](n.root,e.root,t.matrixParams)&&Au[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Rl(n,e,t){return b(n,e,e.segments,t)}function b(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!qe(i,t)||e.hasChildren()||!D(i,t,r))}if(n.segments.length===t.length){if(!qe(n.segments,t)||!D(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Rl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(qe(n.segments,i)&&D(n.segments,i,r)&&n.children[vn])&&b(n.children[vn],e,o,r)}}function D(n,e,t){return e.every((r,i)=>Au[t](n[i].parameters,r.parameters))}class x{constructor(e=new $([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sl(this.queryParams)),this._queryParamMap}toString(){return yn.serialize(this)}}class ${constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gn(this)}}class pe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Sl(this.parameters)),this._parameterMap}toString(){return hs(this)}}function qe(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vt=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new Ht},providedIn:"root"}),e})();class Ht{parse(e){const t=new xu(e);return new x(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${kr(e.root,!0)}`,r=function Y_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Vo(t)}=${Vo(i)}`).join("&"):`${Vo(t)}=${Vo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Pr(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yn=new Ht;function gn(n){return n.segments.map(e=>hs(e)).join("/")}function kr(n,e){if(!n.hasChildren())return gn(n);if(e){const t=n.children[vn]?kr(n.children[vn],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==vn&&r.push(`${i}:${kr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dt(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===vn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==vn&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===vn?[kr(n.children[vn],!1)]:[`${i}:${kr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[vn]?`${gn(n)}/${t[0]}`:`${gn(n)}/(${t.join("//")})`}}function Vr(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vo(n){return Vr(n).replace(/%3B/gi,";")}function jo(n){return Vr(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ui(n){return decodeURIComponent(n)}function To(n){return ui(n.replace(/\+/g,"%20"))}function hs(n){return`${jo(n.path)}${function xl(n){return Object.keys(n).map(e=>`;${jo(e)}=${jo(n[e])}`).join("")}(n.parameters)}`}const wg=/^[^\/()?;#]+/;function Qa(n){const e=n.match(wg);return e?e[0]:""}const K_=/^[^\/()?;=#]+/,Z_=/^[^=?&#]+/,io=/^[^&#]+/;class xu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $([],{}):new $([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[vn]=new $(e,t)),r}parseSegment(){const e=Qa(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new pe(ui(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function bg(n){const e=n.match(K_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Qa(this.remaining);i&&(r=i,this.capture(r))}e[ui(t)]=ui(r)}parseQueryParam(e){const t=function oI(n){const e=n.match(Z_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Cg(n){const e=n.match(io);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=To(t),o=To(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qa(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=vn);const c=this.parseChildren();t[o]=1===Object.keys(c).length?c[vn]:new $([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function aI(n){return n.segments.length>0?new $([],{[vn]:n}):n}function Tg(n){const e={};for(const r of Object.keys(n.children)){const o=Tg(n.children[r]);if(r===vn&&0===o.segments.length&&o.hasChildren())for(const[c,f]of Object.entries(o.children))e[c]=f;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function X_(n){if(1===n.numberOfChildren&&n.children[vn]){const e=n.children[vn];return new $(n.segments.concat(e.segments),e.children)}return n}(new $(n.segments,e))}function Tc(n){return n instanceof x}function Ml(n){var e;let t;const o=aI(function r(c){const f={};for(const v of c.children){const C=r(v);f[v.outlet]=C}const m=new $(c.url,f);return c===n&&(t=m),m}(n.root));return null!==(e=t)&&void 0!==e?e:o}function Q_(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Mu(i,i,i,t,r);const o=function lI(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Kd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const f={};return Object.entries(o.outlets).forEach(([m,v])=>{f[m]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,o]},[]);return new Kd(t,e,r)}(e);if(o.toRoot())return Mu(i,i,new $([],{}),t,r);const c=function cI(n,e,t){if(n.isAbsolute)return new el(e,!0,0);if(!t)return new el(e,!1,NaN);if(null===t.parent)return new el(t,!0,0);const r=If(n.commands[0])?0:1;return function J_(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new el(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),f=c.processChildren?ku(c.segmentGroup,c.index,o.commands):Xd(c.segmentGroup,c.index,o.commands);return Mu(i,c.segmentGroup,f,t,r)}function If(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ja(n){return"object"==typeof n&&null!=n&&n.outlets}function Mu(n,e,t,r,i){let c,o={};r&&Object.entries(r).forEach(([m,v])=>{o[m]=Array.isArray(v)?v.map(C=>`${C}`):`${v}`}),c=n===e?t:Ef(n,e,t);const f=aI(Tg(c));return new x(f,o,i)}function Ef(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:Ef(o,e,t)}),new $(n.segments,r)}class Kd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&If(r[0]))throw new u.vHH(4003,!1);const i=r.find(Ja);if(i&&i!==Cr(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class el{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Xd(n,e,t){if(n||(n=new $([],{})),0===n.segments.length&&n.hasChildren())return ku(n,e,t);const r=function uI(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const c=n.segments[i],f=t[r];if(Ja(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!wf(m,v,c))return o;r+=2}else{if(!wf(m,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new $(n.segments.slice(0,r.pathIndex),{});return o.children[vn]=new $(n.segments.slice(r.pathIndex),n.children),ku(o,0,i)}return r.match&&0===i.length?new $(n.segments,{}):r.match&&!n.hasChildren()?Dg(n,e,t):r.match?ku(n,0,i):Dg(n,e,t)}function ku(n,e,t){if(0===t.length)return new $(n.segments,{});{const r=function Zd(n){return Ja(n[0])?n[0].outlets:{[vn]:n}}(t),i={};if(Object.keys(r).some(o=>o!==vn)&&n.children[vn]&&1===n.numberOfChildren&&0===n.children[vn].segments.length){const o=ku(n.children[vn],e,t);return new $(n.segments,o.children)}return Object.entries(r).forEach(([o,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[o]=Xd(n.children[o],e,c))}),Object.entries(n.children).forEach(([o,c])=>{void 0===r[o]&&(i[o]=c)}),new $(n.segments,i)}}function Dg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Ja(o)){const m=Pu(o.outlets);return new $(r,m)}if(0===i&&If(t[0])){r.push(new pe(n.segments[e].path,Dc(t[0]))),i++;continue}const c=Ja(o)?o.outlets[vn]:`${o}`,f=i<t.length-1?t[i+1]:null;c&&f&&If(f)?(r.push(new pe(c,Dc(f))),i+=2):(r.push(new pe(c,{})),i++)}return new $(r,{})}function Pu(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Dg(new $([],{}),0,r))}),e}function Dc(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function wf(n,e,t){return n==t.path&&ds(e,t.parameters)}const bf="imperative";class Ho{constructor(e,t){this.id=e,this.url=t}}class Sc extends Ho{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class tl extends Ho{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qd extends Ho{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ou extends Ho{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ac extends Ho{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jd extends Ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ev extends Ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dI extends Ho{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sg extends Ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xC extends Ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tv{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MC{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hI{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eh{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ag{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fI{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pI{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class th{}class nv{constructor(e){this.url=e}}class gI{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kl,this.attachRef=null}}let kl=(()=>{var n;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new gI,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class Rg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Nu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nu(e,this._root).map(t=>t.value)}}function Cf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cf(n,t);if(r)return r}return null}function Nu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Nu(n,t);if(r.length)return r.unshift(e),r}return[]}class js{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Rc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xs extends Rg{constructor(e,t){super(e),this.snapshot=t,xg(this,e)}toString(){return this.snapshot.toString()}}function xc(n,e){const t=function Mc(n,e){const c=new kc([],{},{},"",{},vn,e,null,{});return new Fu("",new js(c,[]))}(0,e),r=new Ti.X([new pe("",{})]),i=new Ti.X({}),o=new Ti.X({}),c=new Ti.X({}),f=new Ti.X(""),m=new ha(r,i,c,f,o,vn,e,t.root);return m.snapshot=t.root,new xs(new js(m,[]),t)}class ha{constructor(e,t,r,i,o,c,f,m){var v,C;this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=c,this.component=f,this._futureSnapshot=m,this.title=null!==(v=null===(C=this.dataSubject)||void 0===C?void 0:C.pipe((0,Kt.U)(S=>S[Za])))&&void 0!==v?v:(0,Wt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Kt.U)(e=>Sl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Kt.U)(e=>Sl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nh(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Lu(n){return n.reduce((e,t)=>{var r;return{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...null===(r=t.routeConfig)||void 0===r?void 0:r.data,...t._resolvedData}}},{params:{},data:{},resolve:{}})}(t.slice(r))}class kc{get title(){var e;return null===(e=this.data)||void 0===e?void 0:e[Za]}constructor(e,t,r,i,o,c,f,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=f,this.routeConfig=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fu extends Rg{constructor(e,t){super(t),this.url=e,xg(this,t)}toString(){return nl(this._root)}}function xg(n,e){e.value._routerState=n,e.children.forEach(t=>xg(n,t))}function nl(n){const e=n.children.length>0?` { ${n.children.map(nl).join(", ")} } `:"";return`${n.value}${e}`}function Tf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ds(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ds(e.params,t.params)||n.paramsSubject.next(t.params),function Wd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ds(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ds(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Df(n,e){const t=ds(n.params,e.params)&&function Re(n,e){return qe(n,e)&&n.every((t,r)=>ds(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Df(n.parent,e.parent))}let Sf=(()=>{var n;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=vn,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(kl),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(rh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){var r;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(r=this.inputBinder)||void 0===r||r.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){var i;return(null===(i=this.parentContexts.getContext(r))||void 0===i?void 0:i.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);null!=r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){var o;this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){var o;if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=r;const c=this.location,m=r.snapshot.component,v=this.parentContexts.getOrCreateContext(this.name).children,C=new mI(r,v,c.injector);this.activated=c.createComponent(m,{index:c.length,injector:C,environmentInjector:null!=i?i:this.environmentInjector}),this.changeDetector.markForCheck(),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),e})();class mI{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ha?this.route:e===kl?this.childContexts:this.parent.get(e,t)}}const rh=new u.OlP("");let Ms=(()=>{var n;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){var i;null===(i=this.outletDataSubscriptions.get(r))||void 0===i||i.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,o=la([i.queryParams,i.params,i.data]).pipe((0,wr.w)(([c,f,m],v)=>(m={...c,...f,...m},0===v?(0,Wt.of)(m):Promise.resolve(m)))).subscribe(c=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const f=(0,u.qFp)(i.component);if(f)for(const{templateName:m}of f.inputs)r.activatedComponentRef.setInput(m,c[m]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,o)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();function Pc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function _I(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Pc(n,r,i);return Pc(n,r)})}(n,e,t);return new js(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Pc(n,f)),c}}const r=function jr(n){return new ha(new Ti.X(n.url),new Ti.X(n.params),new Ti.X(n.queryParams),new Ti.X(n.fragment),new Ti.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Pc(n,o));return new js(r,i)}}const rl="ngNavigationCancelingError";function Rf(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Tc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ih(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ih(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[rl]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Pl(n){return n&&n[rl]}let Mg=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(r,i){1&r&&u._UZ(0,"router-outlet")},dependencies:[Sf],encapsulation:2}),e})();function ce(n){const e=n.children&&n.children.map(ce),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==vn&&(t.component=Mg),t}function Ae(n){return n.outlet||vn}function ft(n){var e;if(!n)return null;if(null!==(e=n.routeConfig)&&void 0!==e&&e._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const r=t.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class Tr{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Tf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Rc(t);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Rc(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Rc(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Rc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fI(o.value.snapshot))}),e.children.length&&this.forwardEvent(new eh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Tf(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Tf(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=ft(i.snapshot);c.attachRef=null,c.route=i,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class so{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ol{constructor(e,t){this.component=e,this.route=t}}function Oc(n,e,t){const r=n._root;return Ll(r,e?e._root:null,t,[r.value])}function Nl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function Ll(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Rc(e);return n.children.forEach(c=>{(function Uu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const m=function iv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qe(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qe(n.url,e.url)||!ds(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Df(n,e)||!ds(n.queryParams,e.queryParams);default:return!Df(n,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new so(r)):(o.data=c.data,o._resolvedData=c._resolvedData),Ll(n,e,o.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Ol(f.outlet.component,c))}else c&&$u(e,f,i),i.canActivateChecks.push(new so(r)),Ll(n,null,o.component?f?f.children:null:t,r,i)})(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,f])=>$u(f,t.getContext(c),i)),i}function $u(n,e,t){const r=Rc(n),i=n.value;Object.entries(r).forEach(([o,c])=>{$u(c,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Ol(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Nc(n){return"function"==typeof n}function OC(n){return n instanceof Wa||"EmptyError"===(null==n?void 0:n.name)}const xf=Symbol("INITIAL_VALUE");function sh(){return(0,wr.w)(n=>la(n.map(e=>e.pipe($s(1),Dl(xf)))).pipe((0,Kt.U)(e=>{for(const t of e)if(!0!==t){if(t===xf)return xf;if(!1===t||t instanceof x)return t}return!0}),Vi(e=>e!==xf),$s(1)))}function EI(n){return(0,Du.z)((0,br.b)(e=>{if(Tc(e))throw Rf(0,e)}),(0,Kt.U)(e=>!0===e))}class Pg{constructor(e){this.segmentGroup=e||null}}class Og{constructor(e){this.urlTree=e}}function Fl(n){return Ic(new Pg(n))}function bI(n){return Ic(new Og(n))}class UC{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Wt.of)(r);if(i.numberOfChildren>1||!i.children[vn])return Ic(new u.vHH(4e3,!1));i=i.children[vn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new x(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const f=o.substring(1);r[i]=t[f]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([f,m])=>{c[f]=this.createSegmentGroup(e,m,r,i)}),new $(o,c)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Ng={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lg(n,e,t,r,i){const o=TI(n,e,t);return o.matched?(r=function rv(n,e){var t;return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),null!==(t=n._injector)&&void 0!==t?t:e}(e,r),function wI(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Wt.of)(!0);const o=i.map(c=>{const f=Nl(c,n);return ro(function II(n){return n&&Nc(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,Wt.of)(o).pipe(sh(),EI())}(r,e,t).pipe((0,Kt.U)(c=>!0===c?o:{...Ng}))):(0,Wt.of)(o)}function TI(n,e,t){var r,i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ng}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const c=(e.matcher||$o)(t,n,e);if(!c)return{...Ng};const f={};Object.entries(null!==(r=c.posParams)&&void 0!==r?r:{}).forEach(([v,C])=>{f[v]=C.path});const m=c.consumed.length>0?{...f,...c.consumed[c.consumed.length-1].parameters}:f;return{matched:!0,consumedSegments:c.consumed,remainingSegments:t.slice(c.consumed.length),parameters:m,positionalParamSegments:null!==(i=c.posParams)&&void 0!==i?i:{}}}function DI(n,e,t,r){return t.length>0&&function $x(n,e,t){return t.some(r=>Fg(n,e,r)&&Ae(r)!==vn)}(n,t,r)?{segmentGroup:new $(e,Ux(r,new $(t,n.children))),slicedSegments:[]}:0===t.length&&function $C(n,e,t){return t.some(r=>Fg(n,e,r))}(n,t,r)?{segmentGroup:new $(n.segments,Bx(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new $(n.segments,n.children),slicedSegments:t}}function Bx(n,e,t,r,i){const o={};for(const c of r)if(Fg(n,t,c)&&!i[Ae(c)]){const f=new $([],{});o[Ae(c)]=f}return{...i,...o}}function Ux(n,e){const t={};t[vn]=e;for(const r of n)if(""===r.path&&Ae(r)!==vn){const i=new $([],{});t[Ae(r)]=i}return t}function Fg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Vx{constructor(e,t,r,i,o,c,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new UC(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=DI(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,vn).pipe(Vs(t=>{if(t instanceof Og)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Pg?this.noMatchError(t):t}),(0,Kt.U)(t=>{const r=new kc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},vn,this.rootComponentType,null,{}),i=new js(r,t),o=new Fu("",i),c=function RC(n,e,t=null,r=null){return Q_(Ml(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(o._root),{state:o,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,vn).pipe(Vs(r=>{throw r instanceof Pg?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=nh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,er.D)(i).pipe(ua(o=>{const c=r.children[o],f=function ct(n,e){const t=n.filter(r=>Ae(r)===e);return t.push(...n.filter(r=>Ae(r)!==e)),t}(t,o);return this.processSegmentGroup(e,f,c,o)}),Rs((o,c)=>(o.push(...c),o)),Ec(null),function Su(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vi((i,o)=>n(i,o,r)):to.y,Ya(1),t?Ec(e):vf(()=>new Wa))}(),(0,Ai.z)(o=>{if(null===o)return Fl(r);const c=VC(o);return function jx(n){n.sort((e,t)=>e.value.outlet===vn?-1:t.value.outlet===vn?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,Wt.of)(c)}))}processSegment(e,t,r,i,o,c){return(0,er.D)(t).pipe(ua(f=>{var m;return this.processSegmentAgainstRoute(null!==(m=f._injector)&&void 0!==m?m:e,t,f,r,i,o,c).pipe(Vs(v=>{if(v instanceof Pg)return(0,Wt.of)(null);throw v}))}),Ri(f=>!!f),Vs(f=>{if(OC(f))return function SI(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?(0,Wt.of)([]):Fl(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,o,c,f){return function uv(n,e,t,r){return!!(Ae(n)===r||r!==vn&&Fg(e,t,n))&&("**"===n.path||TI(e,n,t).matched)}(r,i,o,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,c,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,c):Fl(i):Fl(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bI(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,Ai.z)(c=>{const f=new $(c,{});return this.processSegment(e,t,f,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:C}=TI(t,i,o);if(!f)return Fl(t);const S=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?bI(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,Ai.z)(O=>this.processSegment(e,r,t,O.concat(v),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,c){let f;if("**"===r.path){var m,v;const C=i.length>0?Cr(i).parameters:{},S=new kc(i,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HC(r),Ae(r),null!==(m=null!==(v=r.component)&&void 0!==v?v:r._loadedComponent)&&void 0!==m?m:null,r,ah(r));f=(0,Wt.of)({snapshot:S,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=Lg(t,r,i,e).pipe((0,Kt.U)(({matched:C,consumedSegments:S,remainingSegments:O,parameters:G})=>{var ne,Ne;return C?{snapshot:new kc(S,G,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HC(r),Ae(r),null!==(ne=null!==(Ne=r.component)&&void 0!==Ne?Ne:r._loadedComponent)&&void 0!==ne?ne:null,r,ah(r)),consumedSegments:S,remainingSegments:O}:null}));return f.pipe((0,wr.w)(C=>{var S;return null===C?Fl(t):(e=null!==(S=r._injector)&&void 0!==S?S:e,this.getChildConfig(e,r,i).pipe((0,wr.w)(({routes:O})=>{var G;const ne=null!==(G=r._loadedInjector)&&void 0!==G?G:e,{snapshot:Ne,consumedSegments:Ye,remainingSegments:Ct}=C,{segmentGroup:Pt,slicedSegments:yt}=DI(t,Ye,Ct,O);if(0===yt.length&&Pt.hasChildren())return this.processChildren(ne,O,Pt).pipe((0,Kt.U)(nn=>null===nn?null:[new js(Ne,nn)]));if(0===O.length&&0===yt.length)return(0,Wt.of)([new js(Ne,[])]);const Ft=Ae(r)===o;return this.processSegment(ne,O,Pt,yt,Ft?vn:o,!0).pipe((0,Kt.U)(nn=>[new js(Ne,nn)]))})))}))}getChildConfig(e,t,r){return t.children?(0,Wt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Wt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function BC(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Wt.of)(!0);const o=i.map(c=>{const f=Nl(c,n);return ro(function yI(n){return n&&Nc(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,Wt.of)(o).pipe(sh(),EI())}(e,t,r).pipe((0,Ai.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,br.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function cv(n){return Ic(ih(!1,3))}())):(0,Wt.of)({routes:[],injector:e})}}function g2(n){const e=n.value.routeConfig;return e&&""===e.path}function VC(n){const e=[],t=new Set;for(const r of n){if(!g2(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=VC(r.children);e.push(new js(r.value,i))}return e.filter(r=>!t.has(r))}function HC(n){return n.data||{}}function ah(n){return n.resolve||{}}function YC(n){return"string"==typeof n.title||null===n.title}function RI(n){return(0,wr.w)(e=>{const t=n(e);return t?(0,er.D)(t).pipe((0,Kt.U)(()=>e)):(0,Wt.of)(e)})}const kf=new u.OlP("ROUTES");let xI=(()=>{var n;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return(0,Wt.of)(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=ro(r.loadComponent()).pipe((0,Kt.U)(Pf),(0,br.b)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=c}),Ka(()=>{this.componentLoaders.delete(r)})),o=new Tl(i,()=>new $r.x).pipe(_f());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,Wt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const c=function Hx(n,e,t,r){return ro(n.loadChildren()).pipe((0,Kt.U)(Pf),(0,Ai.z)(i=>i instanceof u.YKP||Array.isArray(i)?(0,Wt.of)(i):(0,er.D)(e.compileModuleAsync(i))),(0,Kt.U)(i=>{r&&r(n);let o,c,f=!1;return Array.isArray(i)?(c=i,!0):(o=i.create(t).injector,c=o.get(kf,[],{optional:!0,self:!0}).flat()),{routes:c.map(ce),injector:o}}))}(i,this.compiler,r,this.onLoadEndListener).pipe(Ka(()=>{this.childrenLoaders.delete(i)})),f=new Tl(c,()=>new $r.x).pipe(_f());return this.childrenLoaders.set(i,f),f}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function Pf(n){return function Vu(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let hv=(()=>{var n;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $r.x,this.transitionAbortSubject=new $r.x,this.configLoader=(0,u.f3M)(xI),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(vt),this.rootContexts=(0,u.f3M)(kl),this.inputBindingEnabled=null!==(0,u.f3M)(rh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Wt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new MC(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new tv(o))}complete(){var r;null===(r=this.transitions)||void 0===r||r.complete()}handleNavigationRequest(r){var i;const o=++this.navigationId;null===(i=this.transitions)||void 0===i||i.next({...this.transitions.value,...r,id:o})}setupNavigations(r,i,o){return this.transitions=new Ti.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:r.urlHandlingStrategy.extract(i),urlAfterRedirects:r.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bf,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vi(c=>0!==c.id),(0,Kt.U)(c=>({...c,extractedUrl:r.urlHandlingStrategy.extract(c.rawUrl)})),(0,wr.w)(c=>{this.currentTransition=c;let f=!1,m=!1;return(0,Wt.of)(c).pipe((0,br.b)(v=>{this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,wr.w)(v=>{var C;const S=v.currentBrowserUrl.toString(),O=!r.navigated||v.extractedUrl.toString()!==S||S!==v.currentUrlTree.toString(),G=null!==(C=v.extras.onSameUrlNavigation)&&void 0!==C?C:r.onSameUrlNavigation;if(!O&&"reload"!==G){const ne="";return this.events.next(new Ou(v.id,this.urlSerializer.serialize(v.rawUrl),ne,0)),v.resolve(null),Uo.E}if(r.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return(0,Wt.of)(v).pipe((0,wr.w)(ne=>{var Ne,Ye;const Ct=null===(Ne=this.transitions)||void 0===Ne?void 0:Ne.getValue();return this.events.next(new Sc(ne.id,this.urlSerializer.serialize(ne.extractedUrl),ne.source,ne.restoredState)),Ct!==(null===(Ye=this.transitions)||void 0===Ye?void 0:Ye.getValue())?Uo.E:Promise.resolve(ne)}),function dv(n,e,t,r,i,o){return(0,Ai.z)(c=>function Mf(n,e,t,r,i,o,c="emptyOnly"){return new Vx(n,e,t,r,i,c,o).recognize()}(n,e,t,r,c.extractedUrl,i,o).pipe((0,Kt.U)(({state:f,tree:m})=>({...c,targetSnapshot:f,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),(0,br.b)(ne=>{c.targetSnapshot=ne.targetSnapshot,c.urlAfterRedirects=ne.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:ne.urlAfterRedirects};const Ne=new Jd(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot);this.events.next(Ne)}));if(O&&r.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){const{id:ne,extractedUrl:Ne,source:Ye,restoredState:Ct,extras:Pt}=v,yt=new Sc(ne,this.urlSerializer.serialize(Ne),Ye,Ct);this.events.next(yt);const Ft=xc(0,this.rootComponentType).snapshot;return this.currentTransition=c={...v,targetSnapshot:Ft,urlAfterRedirects:Ne,extras:{...Pt,skipLocationChange:!1,replaceUrl:!1}},(0,Wt.of)(c)}{const ne="";return this.events.next(new Ou(v.id,this.urlSerializer.serialize(v.extractedUrl),ne,1)),v.resolve(null),Uo.E}}),(0,br.b)(v=>{const C=new ev(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(C)}),(0,Kt.U)(v=>(this.currentTransition=c={...v,guards:Oc(v.targetSnapshot,v.currentSnapshot,this.rootContexts)},c)),function oh(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return 0===c.length&&0===o.length?(0,Wt.of)({...t,guardsResult:!0}):function NC(n,e,t,r){return(0,er.D)(n).pipe((0,Ai.z)(i=>function FC(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,Wt.of)(!0);const c=o.map(f=>{var m;const v=null!==(m=ft(e))&&void 0!==m?m:i,C=Nl(f,v);return ro(function av(n){return n&&Nc(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):v.runInContext(()=>C(n,e,t,r))).pipe(Ri())});return(0,Wt.of)(c).pipe(sh())}(i.component,i.route,t,e,r)),Ri(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Ai.z)(f=>f&&function sv(n){return"boolean"==typeof n}(f)?function LC(n,e,t,r){return(0,er.D)(e).pipe(ua(i=>Co(function p2(n,e){return null!==n&&e&&e(new hI(n)),(0,Wt.of)(!0)}(i.route.parent,r),function Lx(n,e){return null!==n&&e&&e(new Ag(n)),(0,Wt.of)(!0)}(i.route,r),function Fx(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function Bu(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Gd(()=>{const f=c.guards.map(m=>{var v;const C=null!==(v=ft(c.node))&&void 0!==v?v:t,S=Nl(m,C);return ro(function ov(n){return n&&Nc(n.canActivateChild)}(S)?S.canActivateChild(r,n):C.runInContext(()=>S(r,n))).pipe(Ri())});return(0,Wt.of)(f).pipe(sh())}));return(0,Wt.of)(o).pipe(sh())}(n,i.path,t),function lv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Wt.of)(!0);const i=r.map(o=>Gd(()=>{var c;const f=null!==(c=ft(e))&&void 0!==c?c:t,m=Nl(o,f);return ro(function kg(n){return n&&Nc(n.canActivate)}(m)?m.canActivate(e,n):f.runInContext(()=>m(e,n))).pipe(Ri())}));return(0,Wt.of)(i).pipe(sh())}(n,i.route,t))),Ri(i=>!0!==i,!0))}(r,o,n,e):(0,Wt.of)(f)),(0,Kt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,v=>this.events.next(v)),(0,br.b)(v=>{if(c.guardsResult=v.guardsResult,Tc(v.guardsResult))throw Rf(0,v.guardsResult);const C=new dI(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(C)}),Vi(v=>!!v.guardsResult||(this.cancelNavigationTransition(v,"",3),!1)),RI(v=>{if(v.guards.canActivateChecks.length)return(0,Wt.of)(v).pipe((0,br.b)(C=>{const S=new Sg(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(S)}),(0,wr.w)(C=>{let S=!1;return(0,Wt.of)(C).pipe(function AI(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Wt.of)(t);let o=0;return(0,er.D)(i).pipe(ua(c=>function GC(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==(null==i?void 0:i.title)&&!YC(i)&&(o[Za]=i.title),function zC(n,e,t,r){const i=function WC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Wt.of)({});const o={};return(0,er.D)(i).pipe((0,Ai.z)(c=>function qC(n,e,t,r){var i;const o=null!==(i=ft(e))&&void 0!==i?i:r,c=Nl(n,o);return ro(c.resolve?c.resolve(e,t):o.runInContext(()=>c(e,t)))}(n[c],e,t,r).pipe(Ri(),(0,br.b)(f=>{o[c]=f}))),Ya(1),function bc(n){return(0,Kt.U)(()=>n)}(o),Vs(c=>OC(c)?Uo.E:Ic(c)))}(o,n,e,r).pipe((0,Kt.U)(c=>(n._resolvedData=c,n.data=nh(n,t).resolve,i&&YC(i)&&(n.data[Za]=i.title),null)))}(c.route,r,n,e)),(0,br.b)(()=>o++),Ya(1),(0,Ai.z)(c=>o===i.length?(0,Wt.of)(t):Uo.E))})}(r.paramsInheritanceStrategy,this.environmentInjector),(0,br.b)({next:()=>S=!0,complete:()=>{S||this.cancelNavigationTransition(C,"",2)}}))}),(0,br.b)(C=>{const S=new xC(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(S)}))}),RI(v=>{const C=S=>{var O;const G=[];null!==(O=S.routeConfig)&&void 0!==O&&O.loadComponent&&!S.routeConfig._loadedComponent&&G.push(this.configLoader.loadComponent(S.routeConfig).pipe((0,br.b)(ne=>{S.component=ne}),(0,Kt.U)(()=>{})));for(const ne of S.children)G.push(...C(ne));return G};return la(C(v.targetSnapshot.root)).pipe(Ec(),$s(1))}),RI(()=>this.afterPreactivation()),(0,Kt.U)(v=>{const C=function Af(n,e,t){const r=Pc(n,e._root,t?t._root:void 0);return new xs(r,e)}(r.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=c={...v,targetRouterState:C},c}),(0,br.b)(()=>{this.events.next(new th)}),((n,e,t,r)=>(0,Kt.U)(i=>(new Tr(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,r.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),$s(1),(0,br.b)({next:v=>{var C;f=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tl(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),null===(C=r.titleStrategy)||void 0===C||C.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{f=!0}}),function yf(n){return(0,Si.e)((e,t)=>{(0,yc.Xf)(n).subscribe((0,or.x)(t,()=>t.complete(),Cc.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,br.b)(v=>{throw v}))),Ka(()=>{var v;f||m||this.cancelNavigationTransition(c,"",1),(null===(v=this.currentNavigation)||void 0===v?void 0:v.id)===c.id&&(this.currentNavigation=null)}),Vs(v=>{if(m=!0,Pl(v))this.events.next(new Qd(c.id,this.urlSerializer.serialize(c.extractedUrl),v.message,v.cancellationCode)),function fs(n){return Pl(n)&&Tc(n.url)}(v)?this.events.next(new nv(v.url)):c.resolve(!1);else{var C;this.events.next(new Ac(c.id,this.urlSerializer.serialize(c.extractedUrl),v,null!==(C=c.targetSnapshot)&&void 0!==C?C:void 0));try{c.resolve(r.errorHandler(v))}catch(S){c.reject(S)}}return Uo.E}))}))}cancelNavigationTransition(r,i,o){const c=new Qd(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(c),r.resolve(!1)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function Gx(n){return n!==bf}let zx=(()=>{var n;class e{buildTitle(r){let i,o=r.root;for(;void 0!==o;){var c;i=null!==(c=this.getResolvedTitleForRoute(o))&&void 0!==c?c:i,o=o.children.find(f=>f.outlet===vn)}return i}getResolvedTitleForRoute(r){return r.data[Za]}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(m2)},providedIn:"root"}),e})(),m2=(()=>{var n;class e extends zx{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(ot))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Wx=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(KC)},providedIn:"root"}),e})();class _2{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let KC=(()=>{var n;class e extends _2{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const fv=new u.OlP("",{providedIn:"root",factory:()=>({})});let qx=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Yx)},providedIn:"root"}),e})(),Yx=(()=>{var n;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var Bg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Bg||{});function pv(n,e){n.events.pipe(Vi(t=>t instanceof tl||t instanceof Qd||t instanceof Ac||t instanceof Ou),(0,Kt.U)(t=>t instanceof tl||t instanceof Ou?Bg.COMPLETE:t instanceof Qd&&(0===t.code||1===t.code)?Bg.REDIRECTING:Bg.FAILED),Vi(t=>t!==Bg.REDIRECTING),$s(1)).subscribe(()=>{e()})}function Lc(n){throw n}function Ug(n,e,t){return e.parse("/")}const ZC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ji=(()=>{var n;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var r,i;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(r=null===(i=this.location.getState())||void 0===i?void 0:i.\u0275routerPageId)&&void 0!==r?r:this.currentPageId}get events(){return this._events}constructor(){var r,i;this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this._events=new $r.x,this.options=(0,u.f3M)(fv,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||Lc,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ug,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(qx),this.routeReuseStrategy=(0,u.f3M)(Wx),this.titleStrategy=(0,u.f3M)(zx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=null!==(r=null===(i=(0,u.f3M)(kf,{optional:!0}))||void 0===i?void 0:i.flat())&&void 0!==r?r:[],this.navigationTransitions=(0,u.f3M)(hv),this.urlSerializer=(0,u.f3M)(vt),this.location=(0,u.f3M)(fe),this.componentInputBindingEnabled=!!(0,u.f3M)(rh,{optional:!0}),this.eventsSubscription=new mf.w0,this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new x,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xc(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(o=>{this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId},o=>{this.console.warn(`Unhandled Navigation Error: ${o}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(Kx(i)&&this._events.next(i));if(i instanceof Sc)Gx(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(i instanceof Ou)this.rawUrlTree=o.rawUrl;else if(i instanceof Jd){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const c=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(c,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(i instanceof th)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(i instanceof Qd)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(o);else if(i instanceof nv){const c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),f={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Gx(o.source)};this.scheduleNavigation(c,bf,null,f,{resolve:o.resolve,reject:o.reject,promise:o.promise})}i instanceof Ac&&this.restoreHistory(o,!0),i instanceof tl&&(this.navigated=!0),Kx(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),bf,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,o){const c={replaceUrl:!0},f=null!=o&&o.navigationId?o:null;if(o){const v={...o};delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(c.state=v)}const m=this.parseUrl(r);this.scheduleNavigation(m,i,f,c)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(ce),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){const{relativeTo:o,queryParams:c,fragment:f,queryParamsHandling:m,preserveFragment:v}=i,C=v?this.currentUrlTree.fragment:f;let O,S=null;switch(m){case"merge":S={...this.currentUrlTree.queryParams,...c};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=c||null}null!==S&&(S=this.removeEmptyProps(S));try{O=Ml(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),O=this.currentUrlTree.root}return Q_(O,r,S,null!=C?C:null)}navigateByUrl(r,i={skipLocationChange:!1}){const o=Tc(r)?r:this.parseUrl(r),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,bf,null,i)}navigate(r,i={skipLocationChange:!1}){return function v2(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,r)}return i}isActive(r,i){let o;if(o=!0===i?{...ZC}:!1===i?{...XC}:i,Tc(r))return Eg(this.currentUrlTree,r,o);const c=this.parseUrl(r);return Eg(this.currentUrlTree,c,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{const c=r[o];return null!=c&&(i[o]=c),i},{})}scheduleNavigation(r,i,o,c,f){if(this.disposed)return Promise.resolve(!1);let m,v,C;f?(m=f.resolve,v=f.reject,C=f.promise):C=new Promise((O,G)=>{m=O,v=G});const S=this.pendingTasks.add();return pv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:r,extras:c,resolve:m,reject:v,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(O=>Promise.reject(O))}setBrowserUrl(r,i){const o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const f={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",f)}else{const c={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",c)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){var o;const f=this.currentPageId-this.browserPageId;0!==f?this.location.historyGo(f):this.currentUrlTree===(null===(o=this.getCurrentNavigation())||void 0===o?void 0:o.finalUrl)&&0===f&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function Kx(n){return!(n instanceof th||n instanceof nv)}let lh=(()=>{var n;class e{constructor(r,i,o,c,f,m){var v;this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=c,this.el=f,this.locationStrategy=m,this.href=null,this.commands=null,this.onChanges=new $r.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const C=null===(v=f.nativeElement.tagName)||void 0===v?void 0:v.toLowerCase();this.isAnchorElement="a"===C||"area"===C,this.isAnchorElement?this.subscription=r.events.subscribe(S=>{S instanceof tl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,c,f){return!!(null===this.urlTree||this.isAnchorElement&&(0!==r||i||o||c||f||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var r;null===(r=this.subscription)||void 0===r||r.unsubscribe()}updateHref(){var r;this.href=null!==this.urlTree&&this.locationStrategy?null===(r=this.locationStrategy)||void 0===r?void 0:r.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const i=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){const o=this.renderer,c=this.el.nativeElement;null!==i?o.setAttribute(c,r,i):o.removeAttribute(c,r)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(ji),u.Y36(ha),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(re))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&u.NdJ("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&u.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]}),e})();class Zx{}let y2=(()=>{var n;class e{preload(r,i){return i().pipe(Vs(()=>(0,Wt.of)(null)))}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Qx=(()=>{var n;class e{constructor(r,i,o,c,f){this.router=r,this.injector=o,this.preloadingStrategy=c,this.loader=f}setUpPreloading(){this.subscription=this.router.events.pipe(Vi(r=>r instanceof tl),ua(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const o=[];for(const v of i){var c,f;v.providers&&!v._injector&&(v._injector=(0,u.MMx)(v.providers,r,`Route: ${v.path}`));const C=null!==(c=v._injector)&&void 0!==c?c:r,S=null!==(f=v._loadedInjector)&&void 0!==f?f:C;var m;(v.loadChildren&&!v._loadedRoutes&&void 0===v.canLoad||v.loadComponent&&!v._loadedComponent)&&o.push(this.preloadConfig(C,v)),(v.children||v._loadedRoutes)&&o.push(this.processRoutes(S,null!==(m=v.children)&&void 0!==m?m:v._loadedRoutes))}return(0,er.D)(o).pipe((0,qa.J)())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):(0,Wt.of)(null);const c=o.pipe((0,Ai.z)(f=>{var m;return null===f?(0,Wt.of)(void 0):(i._loadedRoutes=f.routes,i._loadedInjector=f.injector,this.processRoutes(null!==(m=f.injector)&&void 0!==m?m:r,f.routes))}));if(i.loadComponent&&!i._loadedComponent){const f=this.loader.loadComponent(i);return(0,er.D)([c,f]).pipe((0,qa.J)())}return c})}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(ji),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(Zx),u.LFG(xI))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const PI=new u.OlP("");let QC=(()=>{var n;class e{constructor(r,i,o,c,f={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=c,this.options=f,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},f.scrollPositionRestoration=f.scrollPositionRestoration||"disabled",f.anchorScrolling=f.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Sc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof tl?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Ou&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof pI&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pI(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){var r,i;null===(r=this.routerEventsSubscription)||void 0===r||r.unsubscribe(),null===(i=this.scrollEventsSubscription)||void 0===i||i.unsubscribe()}}return(n=e).\u0275fac=function(r){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),e})();function fa(n,e){return{\u0275kind:n,\u0275providers:e}}function eT(){const n=(0,u.f3M)(u.zs3);return e=>{var t,r;const i=n.get(u.z2F);if(e!==i.components[0])return;const o=n.get(ji),c=n.get(tT);1===n.get(Vg)&&o.initialNavigation(),null===(t=n.get(rT,null,u.XFs.Optional))||void 0===t||t.setUpPreloading(),null===(r=n.get(PI,null,u.XFs.Optional))||void 0===r||r.init(),o.resetRootComponentType(i.componentTypes[0]),c.closed||(c.next(),c.complete(),c.unsubscribe())}}const tT=new u.OlP("",{factory:()=>new $r.x}),Vg=new u.OlP("",{providedIn:"root",factory:()=>1}),rT=new u.OlP("");function tM(n){return fa(0,[{provide:rT,useExisting:Qx},{provide:Zx,useExisting:n}])}const Of=new u.OlP("ROUTER_FORROOT_GUARD"),iT=[fe,{provide:vt,useClass:Ht},ji,kl,{provide:ha,useFactory:function OI(n){return n.routerState.root},deps:[ji]},xI,[]];function sT(){return new u.PXZ("Router",ji)}let gv=(()=>{var n;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[iT,[],{provide:kf,multi:!0,useValue:r},{provide:Of,useFactory:lT,deps:[[ji,new u.FiY,new u.tp0]]},{provide:fv,useValue:i||{}},null!=i&&i.useHash?{provide:re,useClass:be}:{provide:re,useClass:Se},{provide:PI,useFactory:()=>{const n=(0,u.f3M)(ni),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(fv),r=(0,u.f3M)(hv),i=(0,u.f3M)(vt);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QC(i,r,n,e,t)}},null!=i&&i.preloadingStrategy?tM(i.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:sT},null!=i&&i.initialNavigation?mv(i):[],null!=i&&i.bindToComponentInputs?fa(8,[Ms,{provide:rh,useExisting:Ms}]).\u0275providers:[],[{provide:iM,useFactory:eT},{provide:u.tb,multi:!0,useExisting:iM}]]}}static forChild(r){return{ngModule:e,providers:[{provide:kf,multi:!0,useValue:r}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(Of,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),e})();function lT(n){return"guarded"}function mv(n){return["disabled"===n.initialNavigation?fa(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(ji);return()=>{e.setUpLocationChangeListener()}}},{provide:Vg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fa(2,[{provide:Vg,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(De,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ji),o=e.get(tT);pv(i,()=>{r(!0)}),e.get(hv).afterPreactivation=()=>(r(!0),o.closed?(0,Wt.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const iM=new u.OlP("");var xi=P(6304),Lf=P(3019),_v=P(3093),LI=P(4552);class vv extends $r.x{constructor(e=1/0,t=1/0,r=LI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(e),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!e.closed;c+=r?1:2)e.next(o[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)f=m;f&&r.splice(0,f+1)}}}var il=P(3020);function Hg(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,il.B)({connector:()=>new vv(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yv(n,e){return(0,As.m)(e)?(0,wr.w)(()=>n,e):(0,wr.w)(()=>n)}var FI=P(5137),Zn=P(2793);P(4097);var Te=P(5861),tr=P(4303),es=P(4537),U=P(9058),ps=P(7879);const ju=new Map,Ff={activated:!1,tokenObservers:[]},Bf={initialized:!1,enabled:!1};function Hr(n){return ju.get(n)||Object.assign({},Ff)}function Hu(){return Bf}const dT="https://content-firebaseappcheck.googleapis.com/v1",uM="exchangeDebugToken",jI={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class hM{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function HI(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ks=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fT(n){if(!Hr(n).activated)throw ks.create("use-before-activation",{appName:n.name})}function Uf(n,e){return zI.apply(this,arguments)}function zI(){return(zI=(0,Te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,o)}catch(S){throw ks.create("fetch-network-error",{originalErrorMessage:null==S?void 0:S.message})}if(200!==c.status)throw ks.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(S){throw ks.create("fetch-parse-error",{originalErrorMessage:null==S?void 0:S.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw ks.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),C=Date.now();return{token:f.token,expireTimeMillis:C+v,issuedAtTimeMillis:C}})).apply(this,arguments)}function Wg(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dT}/projects/${t}/apps/${r}:${uM}?key=${i}`,body:{debug_token:e}}}const fM="firebase-app-check-database",gT=1,qg="firebase-app-check-store";let YI=null;function bv(){return(bv=(0,Te.Z)(function*(n,e){const r=(yield function mT(){return YI||(YI=new Promise((n,e)=>{try{const t=indexedDB.open(fM,gT);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ks.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(qg,{keyPath:"compositeKey"})}}catch(t){e(ks.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),YI)}()).transaction(qg,"readwrite"),o=r.objectStore(qg).put({compositeKey:n,value:e});return new Promise((c,f)=>{o.onsuccess=m=>{c()},r.onerror=m=>{var v;f(ks.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Vf=new ps.Yd("@firebase/app-check");function ET(n,e){return(0,U.hl)()?function pM(n,e){return function _T(n,e){return bv.apply(this,arguments)}(function yT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XI(){return Hu().enabled}function QI(){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,Te.Z)(function*(){const n=Hu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wT={error:"UNKNOWN_ERROR"};function mM(n){return U.US.encodeString(JSON.stringify(n),!1)}function Dv(n){return bT.apply(this,arguments)}function bT(){return(bT=(0,Te.Z)(function*(n,e=!1){const t=n.app;fT(t);const r=Hr(t);let o,i=r.token;if(i&&!Gu(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Gu(m)?i=m:yield ET(t,void 0))}if(!e&&i&&Gu(i))return{token:i.token};let f,c=!1;if(XI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Uf(Wg(t,yield QI()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const m=yield r.exchangeTokenPromise;return yield ET(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Hr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Vf.warn(m.message):Vf.error(m),o=m}return i?o?f=Gu(i)?{token:i.token,internalError:o}:CT(o):(f={token:i.token},r.token=i,yield ET(t,i)):f=CT(o),c&&function Bc(n,e){const t=Hr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f})).apply(this,arguments)}function JI(n){return Sv.apply(this,arguments)}function Sv(){return(Sv=(0,Te.Z)(function*(n){const e=n.app;fT(e);const{provider:t}=Hr(e);if(XI()){const r=yield QI(),{token:i}=yield Uf(Wg(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function Av(n,e){const t=Hr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _M(n){const{app:e}=n,t=Hr(e);let r=t.tokenRefresher;r||(r=function eE(n){const{app:e}=n;return new hM((0,Te.Z)(function*(){let r;if(r=Hr(e).token?yield Dv(n,!0):yield Dv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Hr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},jI.RETRIAL_MIN_WAIT,jI.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Gu(n){return n.expireTimeMillis-Date.now()>0}function CT(n){return{token:mM(wT),error:n}}class x2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hr(this.app);for(const t of e)Av(this.app,t.next);return Promise.resolve()}}const Rv="app-check-internal";!function Qg(){(0,tr._registerComponent)(new es.wA("app-check",n=>function vM(n,e){return new x2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Rv).initialize()})),(0,tr._registerComponent)(new es.wA(Rv,n=>function tE(n){return{getToken:e=>Dv(n,e),getLimitedUseToken:()=>JI(n),addTokenListener:e=>function Go(n,e,t,r){const{app:i}=n,o=Hr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Gu(o.token)){const f=o.token;Promise.resolve().then(()=>{t({token:f.token}),_M(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>_M(n))}(n,"INTERNAL",e),removeTokenListener:e=>Av(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,tr.registerVersion)("@firebase/app-check","0.8.0")}();class Gf{constructor(){return(0,Zn.vb)("app-check")}}typeof window<"u"&&window;var em=P(120);const kv=new u.OlP("angularfire2.auth.use-emulator"),Pv=new u.OlP("angularfire2.auth.settings"),bn=new u.OlP("angularfire2.auth.tenant-id"),Ov=new u.OlP("angularfire2.auth.langugage-code"),Nv=new u.OlP("angularfire2.auth.use-device-language"),Wu=new u.OlP("angularfire.auth.persistence"),Lv=(n,e,t,r,i,o,c,f)=>(0,xi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,o&&m.useDeviceLanguage(),c)for(const[v,C]of Object.entries(c))m.settings[v]=C;return f&&m.setPersistence(f),m},[t,r,i,o,c,f]);let tm=(()=>{class n{constructor(t,r,i,o,c,f,m,v,C,S,O,G){const ne=new $r.x,Ne=(0,Wt.of)(void 0).pipe((0,_v.Q)(c.outsideAngular),(0,wr.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8977)))),(0,Kt.U)(()=>(0,xi.on)(t,o,r)),(0,Kt.U)(Ye=>Lv(Ye,o,f,v,C,S,m,O)),Hg({bufferSize:1,refCount:!1}));if(Oo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Wt.of)(null);else{Ne.pipe(Ri()).subscribe();const Ct=Ne.pipe((0,wr.w)(Ft=>Ft.getRedirectResult().then(nn=>nn,()=>null)),Zn.iC,Hg({bufferSize:1,refCount:!1})),Pt=Ne.pipe((0,wr.w)(Ft=>new ci.y(nn=>({unsubscribe:o.runOutsideAngular(()=>Ft.onAuthStateChanged(Rn=>nn.next(Rn),Rn=>nn.error(Rn),()=>nn.complete()))})))),yt=Ne.pipe((0,wr.w)(Ft=>new ci.y(nn=>({unsubscribe:o.runOutsideAngular(()=>Ft.onIdTokenChanged(Rn=>nn.next(Rn),Rn=>nn.error(Rn),()=>nn.complete()))}))));this.authState=Ct.pipe(yv(Pt),(0,FI.R)(c.outsideAngular),(0,_v.Q)(c.insideAngular)),this.user=Ct.pipe(yv(yt),(0,FI.R)(c.outsideAngular),(0,_v.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,wr.w)(Ft=>Ft?(0,er.D)(Ft.getIdToken()):(0,Wt.of)(null))),this.idTokenResult=this.user.pipe((0,wr.w)(Ft=>Ft?(0,er.D)(Ft.getIdTokenResult()):(0,Wt.of)(null))),this.credential=(0,Lf.T)(Ct,ne,this.authState.pipe(Vi(Ft=>!Ft))).pipe((0,Kt.U)(Ft=>null!=Ft&&Ft.user?Ft:null),(0,FI.R)(c.outsideAngular),(0,_v.Q)(c.insideAngular))}return(0,xi.pX)(this,Ne,o,{spy:{apply:(Ye,Ct,Pt)=>{(Ye.startsWith("signIn")||Ye.startsWith("createUser"))&&Pt.then(yt=>ne.next(yt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xi.Dh),u.LFG(xi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Zn.HU),u.LFG(kv,8),u.LFG(Pv,8),u.LFG(bn,8),u.LFG(Ov,8),u.LFG(Nv,8),u.LFG(Wu,8),u.LFG(Gf,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Fv=(()=>{class n{constructor(){em.Z.registerVersion("angularfire",Zn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[tm]}),n})();var qu=P(6321);class nm{constructor(e,t){this._delegate=e,this.firebase=t,(0,tr._addComponent)(e,new es.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,tr.deleteApp)(this._delegate)))}_getService(e,t=tr._DEFAULT_ENTRY_NAME){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=tr._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,tr._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,tr._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Bv=new U.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),LT=function Uv(){const n=function aE(n){const e={},t={__esModule:!0,initializeApp:function o(v,C={}){const S=tr.initializeApp(v,C);if((0,U.r3)(e,S.name))return e[S.name];const O=new n(S,t);return e[S.name]=O,O},app:i,registerVersion:tr.registerVersion,setLogLevel:tr.setLogLevel,onLog:tr.onLog,apps:null,SDK_VERSION:tr.SDK_VERSION,INTERNAL:{registerComponent:function f(v){const C=v.name,S=C.replace("-compat","");if(tr._registerComponent(v)&&"PUBLIC"===v.type){const O=(G=i())=>{if("function"!=typeof G[S])throw Bv.create("invalid-app-argument",{appName:C});return G[S]()};void 0!==v.serviceProps&&(0,U.ZB)(O,v.serviceProps),t[S]=O,n.prototype[S]=function(...G){return this._getService.bind(this,C).apply(this,v.multipleInstances?G:[])}}return"PUBLIC"===v.type?t[S]:null},removeApp:function r(v){delete e[v]},useAsService:function m(v,C){return"serverAuth"===C?null:C},modularAPIs:tr}};function i(v){if(!(0,U.r3)(e,v=v||tr._DEFAULT_ENTRY_NAME))throw Bv.create("no-app",{appName:v});return e[v]}return t.default=t,Object.defineProperty(t,"apps",{get:function c(){return Object.keys(e).map(v=>e[v])}}),i.App=n,t}(nm);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Uv,extendNamespace:function e(t){(0,U.ZB)(n,t)},createSubscribe:U.ne,ErrorFactory:U.LL,deepExtend:U.ZB}),n}(),$v=new ps.Yd("@firebase/app-compat");if((0,U.jU)()&&void 0!==self.firebase){$v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&$v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const FT=LT;!function kM(n){(0,tr.registerVersion)("@firebase/app-compat","0.2.19",n)}();const BT="firebasestorage.googleapis.com",UT="storageBucket";class Gr extends U.ZR{constructor(e,t,r=0){super(lE(e),`Firebase Storage: ${t} (${lE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var zr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(zr||{});function lE(n){return"storage/"+n}function oo(){return new Gr(zr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function jT(){return new Gr(zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HT(){return new Gr(zr.CANCELED,"User canceled the upload/download.")}function zT(){return new Gr(zr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zf(n){return new Gr(zr.INVALID_ARGUMENT,n)}function WT(){return new Gr(zr.APP_DELETED,"The Firebase app was deleted.")}function qT(n){return new Gr(zr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Do(n,e){return new Gr(zr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function uh(n){throw new Gr(zr.INTERNAL_ERROR,"Internal error: "+n)}class Hs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hs.makeFromUrl(e,t)}catch{return new Hs(e,"")}if(""===r.path)return r;throw function GT(n){return new Gr(zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ft){Ft.path_=decodeURIComponent(Ft.path)}const S=t.replace(/[.]/g,"\\."),yt=[{regex:f,indices:{bucket:1,path:3},postModify:function o(Ft){"/"===Ft.path.charAt(Ft.path.length-1)&&(Ft.path_=Ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===BT?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ft=0;Ft<yt.length;Ft++){const nn=yt[Ft],Rn=nn.regex.exec(e);if(Rn){let ea=Rn[nn.indices.path];ea||(ea=""),r=new Hs(Rn[nn.indices.bucket],ea),nn.postModify(r);break}}if(null==r)throw function FM(n){return new Gr(zr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class YT{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hE(n){return"string"==typeof n||n instanceof String}function fE(n){return jv()&&n instanceof Blob}function jv(){return typeof Blob<"u"&&!(0,U.UG)()}function Hv(n,e,t,r){if(r<e)throw zf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw zf(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ul(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Gv(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var So=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(So||{});function XT(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class jM{constructor(e,t,r,i,o,c,f,m,v,C,S,O=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=C,this.connectionFactory_=S,this.retry=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,ne)=>{this.resolve_=G,this.reject_=ne,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function ZT(n){return void 0!==n}(m)?o():o(m)}catch(m){c(m)}else if(null!==f){const m=oo();m.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,m):m)}else c(i.canceled?this.appDelete_?WT():HT():jT())};this.canceled_?t(0,new Wf(!1,null,!0)):this.backoffId_=function VM(n,e,t){let r=1,i=null,o=null,c=!1,f=0;function m(){return 2===f}let v=!1;function C(...Ye){v||(v=!0,e.apply(null,Ye))}function S(Ye){i=setTimeout(()=>{i=null,n(G,m())},Ye)}function O(){o&&clearTimeout(o)}function G(Ye,...Ct){if(v)return void O();if(Ye)return O(),void C.call(null,Ye,...Ct);if(m()||c)return O(),void C.call(null,Ye,...Ct);let yt;r<64&&(r*=2),1===f?(f=2,yt=0):yt=1e3*(r+Math.random()),S(yt)}let ne=!1;function Ne(Ye){ne||(ne=!0,O(),!v&&(null!==i?(Ye||(f=2),clearTimeout(i),S(0)):Ye||(f=1)))}return S(0),o=setTimeout(()=>{c=!0,Ne(!0)},t),Ne}((r,i)=>{if(i)return void r(!1,new Wf(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===So.NO_ERROR,m=o.getStatus();if(!f||XT(m,this.additionalRetryCodes_)&&this.retry){const C=o.getErrorCode()===So.ABORT;return void r(!1,new Wf(!1,null,C))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new Wf(v,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function KT(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Wf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Wv(...n){const e=function JT(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(jv())return new Blob(n);throw new Gr(zr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ao={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qv{constructor(e,t){this.data=e,this.contentType=t||null}}function pE(n,e){switch(n){case Ao.RAW:return new qv(eD(e));case Ao.BASE64:case Ao.BASE64URL:return new qv(gE(n,e));case Ao.DATA_URL:return new qv(function WM(n){const e=new qf(n);return e.base64?gE(Ao.BASE64,e.rest):function tD(n){let e;try{e=decodeURIComponent(n)}catch{throw Do(Ao.DATA_URL,"Malformed data URL.")}return eD(e)}(e.rest)}(e),function nD(n){return new qf(n).contentType}(e))}throw oo()}function eD(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function gE(n,e){switch(n){case Ao.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw Do(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ao.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Do(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function zM(n){if(typeof atob>"u")throw function $M(n){return new Gr(zr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Do(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class qf{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Do(Ao.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function rD(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class $l{constructor(e,t){let r=0,i="";fE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(fE(this.data_)){const i=function F2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new $l(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $l(r,!0)}}static getBlob(...e){if(jv()){const t=e.map(r=>r instanceof $l?r.data_:r);return new $l(Wv.apply(null,t))}{const t=e.map(c=>hE(c)?pE(Ao.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[o++]=c[f]}),new $l(i,!0)}}uploadData(){return this.data_}}function mE(n){let e;try{e=JSON.parse(n)}catch{return null}return function dE(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function iD(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function YM(n,e){return e}class ao{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||YM}}let Yv=null;function sm(){if(Yv)return Yv;const n=[];n.push(new ao("bucket")),n.push(new ao("generation")),n.push(new ao("metageneration")),n.push(new ao("name","fullPath",!0));const t=new ao("name");t.xform=function e(o,c){return function KM(n){return!hE(n)||n.length<2?n:iD(n)}(c)},n.push(t);const i=new ao("size");return i.xform=function r(o,c){return void 0!==c?Number(c):c},n.push(i),n.push(new ao("timeCreated")),n.push(new ao("updated")),n.push(new ao("md5Hash",null,!0)),n.push(new ao("cacheControl",null,!0)),n.push(new ao("contentDisposition",null,!0)),n.push(new ao("contentEncoding",null,!0)),n.push(new ao("contentLanguage",null,!0)),n.push(new ao("contentType",null,!0)),n.push(new ao("metadata","customMetadata",!0)),Yv=n,Yv}function Kv(n,e,t){const r=mE(e);return null===r?null:function sD(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return function ZM(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Hs(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function Yf(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const oD="prefixes",aD="items";class Vl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function jl(n){if(!n)throw oo()}function Zv(n,e){return function t(r,i){const o=Kv(n,i,e);return jl(null!==o),o}}function Kf(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function cE(){return new Gr(zr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function L2(){return new Gr(zr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function LM(n){return new Gr(zr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function VT(n){return new Gr(zr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Xv(n){const e=Kf(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function NM(n){return new Gr(zr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function _E(n,e,t){const i=Ul(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Vl(i,"GET",Zv(n,t),c);return f.errorHandler=Xv(e),f}function uD(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const f=Ul(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,C=new Vl(f,"GET",function lD(n,e){return function t(r,i){const o=function JM(n,e,t){const r=mE(t);return null===r?null:function QM(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[oD])for(const i of t[oD]){const o=i.replace(/\/$/,""),c=n._makeStorageReference(new Hs(e,o));r.prefixes.push(c)}if(t[aD])for(const i of t[aD]){const o=n._makeStorageReference(new Hs(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return jl(null!==o),o}}(n,e.bucket),v);return C.urlParams=o,C.errorHandler=Kf(e),C}function dD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function vE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Yu{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function ms(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{jl(!1)}return jl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Zf={STATE_CHANGED:"state_changed"},Hi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ku(n){switch(n){case"running":case"pausing":case"canceling":return Hi.RUNNING;case"paused":return Hi.PAUSED;case"success":return Hi.SUCCESS;case"canceled":return Hi.CANCELED;default:return Hi.ERROR}}class Xf{constructor(e,t,r){if(function Vv(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function ol(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let hh=null;class Qf{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=So.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=So.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=So.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw uh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Jf extends Qf{initXhr(){this.xhr_.responseType="text"}}function Gs(){return hh?hh():new Jf}class IE{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=sm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(zr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(XT(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=jT()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(zr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function dh(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c=dD(e,r,i),f={name:c.fullPath},m=Ul(o,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=Yf(c,t),ne=new Vl(m,"POST",function G(Ne){let Ye;ms(Ne);try{Ye=Ne.getResponseHeader("X-Goog-Upload-URL")}catch{jl(!1)}return jl(hE(Ye)),Ye},n.maxUploadRetryTime);return ne.urlParams=f,ne.headers=C,ne.body=S,ne.errorHandler=Kf(e),ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Gs,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Jv(n,e,t,r){const m=new Vl(t,"POST",function o(v){const C=ms(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{jl(!1)}S||jl(!1);const O=Number(S);return jl(!isNaN(O)),new Yu(O,r.size(),"final"===C)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Kf(e),m}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Gs,t,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Yu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=function yE(n,e,t,r,i,o,c,f){const m=new Yu(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function uE(){return new Gr(zr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let C=v;i>0&&(C=Math.min(C,i));const S=m.current;let G="";G=0===C?"finalize":v===C?"upload, finalize":"upload";const ne={"X-Goog-Upload-Command":G,"X-Goog-Upload-Offset":`${m.current}`},Ne=r.slice(S,S+C);if(null===Ne)throw zT();const yt=new Vl(t,"POST",function Ye(Ft,nn){const Rn=ms(Ft,["active","final"]),Ni=m.current+C,ea=r.size();let Ed;return Ed="final"===Rn?Zv(e,o)(Ft,nn):null,new Yu(Ni,ea,"final"===Rn,Ed)},e.maxUploadRetryTime);return yt.headers=ne,yt.body=Ne.uploadData(),yt.progressCallback=f||null,yt.errorHandler=Kf(n),yt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(c,Gs,i,o,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=_E(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Gs,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function sl(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let yt="";for(let Ft=0;Ft<2;Ft++)yt+=Math.random().toString().slice(2);return yt}();c["Content-Type"]="multipart/related; boundary="+m;const v=dD(e,r,i),C=Yf(v,t),G=$l.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===G)throw zT();const ne={name:v.fullPath},Ne=Ul(o,n.host,n._protocol),Ct=n.maxUploadRetryTime,Pt=new Vl(Ne,"POST",Zv(n,t),Ct);return Pt.urlParams=ne,Pt.headers=c,Pt.body=G.uploadData(),Pt.errorHandler=Kf(e),Pt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Gs,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=HT(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ku(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new Xf(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ku(this._state)){case Hi.SUCCESS:ol(this._resolve.bind(null,this.snapshot))();break;case Hi.CANCELED:case Hi.ERROR:ol(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ku(this._state)){case Hi.RUNNING:case Hi.PAUSED:e.next&&ol(e.next.bind(e,this.snapshot))();break;case Hi.SUCCESS:e.complete&&ol(e.complete.bind(e))();break;default:e.error&&ol(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Zu{constructor(e,t){this._service=e,this._location=t instanceof Hs?t:Hs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zu(e,t)}get root(){const e=new Hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iD(this._location.path)}get storage(){return this._service}get parent(){const e=function im(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Hs(this._location.bucket,e);return new Zu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw qT(e)}}function ik(n,e,t){return bE.apply(this,arguments)}function bE(){return(bE=(0,Te.Z)(function*(n,e,t){const i=yield vD(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield ik(n,e,i.nextPageToken))})).apply(this,arguments)}function vD(n,e){null!=e&&"number"==typeof e.maxResults&&Hv("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=uD(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Gs)}function $2(n){n._throwIfRoot("getDownloadURL");const e=function Qv(n,e,t){const i=Ul(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Vl(i,"GET",function cD(n,e){return function t(r,i){const o=Kv(n,i,e);return jl(null!==o),function XM(n,e,t,r){const i=mE(e);if(null===i||!hE(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(v=>{const S=n.fullPath;return Ul("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+Gv({alt:"media",token:v})})[0]}(o,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=Xv(e),f}(n.storage,n._location,sm());return n.storage.makeRequestWithTokens(e,Gs).then(t=>{if(null===t)throw function UM(){return new Gr(zr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function yD(n,e){const t=function qM(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Hs(n._location.bucket,t);return new Zu(n.storage,r)}function ep(n,e){if(n instanceof fh){const t=n;if(null==t._bucket)throw function BM(){return new Gr(zr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+UT+"' property when initializing the app?")}();const r=new Zu(t,t._bucket);return null!=e?ep(r,e):r}return void 0!==e?yD(n,e):n}function TE(n,e){if(e&&function ak(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof fh)return function CE(n,e){return new Zu(n,e)}(n,e);throw zf("To use ref(service, url), the first argument must be a Storage instance.")}return ep(n,e)}function om(n,e){const t=null==e?void 0:e[UT];return null==t?null:Hs.makeFromBucketSpec(t,n)}class fh{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=BT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Hs.makeFromBucketSpec(i,this._host):om(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Hs.makeFromBucketSpec(this._url,e):om(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zu(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new YT(WT());{const c=function rm(n,e,t,r,i,o,c=!0){const f=Gv(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function GM(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function HM(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function QT(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(v,o),function zv(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new jM(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Te.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const DE="@firebase/storage";function ny(n,e){return TE(n=(0,U.m9)(n),e)}function bD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new fh(t,r,i,e,tr.SDK_VERSION)}!function CD(){(0,tr._registerComponent)(new es.wA("storage",bD,"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(DE,"0.11.2",""),(0,tr.registerVersion)(DE,"0.11.2","esm2017")}();class ry{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class TD{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ry(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ry(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?c=>t(new ry(c,this,this._ref)):{next:t.next?c=>t.next(new ry(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class DD{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Uc(e,this._service))}get items(){return this._delegate.items.map(e=>new Uc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Uc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function dk(n,e){return yD(n,e)}(this._delegate,e);return new Uc(t,this.storage)}get root(){return new Uc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Uc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new TD(function lk(n,e,t){return function wE(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new IE(n,new $l(e),t)}(n=(0,U.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ao.RAW,r){this._throwIfRoot("putString");const i=pE(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new TD(new IE(this._delegate,new $l(i.data,!0),o),this)}listAll(){return function G2(n){return function B2(n){const e={prefixes:[],items:[]};return ik(n,e).then(()=>e)}(n=(0,U.m9)(n))}(this._delegate).then(e=>new DD(e,this.storage))}list(e){return function ty(n,e){return vD(n=(0,U.m9)(n),e)}(this._delegate,e||void 0).then(t=>new DD(t,this.storage))}getMetadata(){return function SE(n){return function U2(n){n._throwIfRoot("getMetadata");const e=_E(n.storage,n._location,sm());return n.storage.makeRequestWithTokens(e,Gs)}(n=(0,U.m9)(n))}(this._delegate)}updateMetadata(e){return function ey(n,e){return function sk(n,e){n._throwIfRoot("updateMetadata");const t=function tk(n,e,t,r){const o=Ul(e.fullServerUrl(),n.host,n._protocol),f=Yf(t,r),v=n.maxOperationRetryTime,C=new Vl(o,"PATCH",Zv(n,r),v);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=f,C.errorHandler=Xv(e),C}(n.storage,n._location,e,sm());return n.storage.makeRequestWithTokens(t,Gs)}(n=(0,U.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ck(n){return $2(n=(0,U.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function uk(n){return function ok(n){n._throwIfRoot("deleteObject");const e=function nk(n,e){const r=Ul(e.fullServerUrl(),n.host,n._protocol),f=new Vl(r,"DELETE",function c(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Xv(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Gs)}(n=(0,U.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw qT(e)}}class iy{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sy(e))throw zf("ref() expected a child path but got a URL, use refFromURL instead.");return new Uc(ny(this._delegate,e),this)}refFromURL(e){if(!sy(e))throw zf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hs.makeFromUrl(e,this._delegate.host)}catch{throw zf("refFromUrl() expected a valid full URL but got an invalid one.")}return new Uc(ny(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function wD(n,e,t,r={}){!function ID(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,U.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function sy(n){return/^[A-Za-z]+:\/\//.test(n)}function AE(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new iy(t,r)}function AD(n){const e=function gk(n){return new ci.y(e=>{const t=c=>e.next(c);t(n.snapshot);const o=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){o()}}).pipe(function oE(n,e=qu.z){return(0,Si.e)((t,r)=>{let i=null,o=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=o;o=null,r.next(v)}};function m(){const v=c+n,C=e.now();if(C<v)return i=this.schedule(void 0,v-C),void r.add(i);f()}t.subscribe((0,or.x)(r,v=>{o=v,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Kt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ly(n){return{getDownloadURL:()=>(0,Wt.of)(void 0).pipe(Zn.fc,(0,wr.w)(()=>n.getDownloadURL()),Zn.iC),getMetadata:()=>(0,Wt.of)(void 0).pipe(Zn.fc,(0,wr.w)(()=>n.getMetadata()),Zn.iC),delete:()=>(0,er.D)(n.delete()),child:e=>ly(n.child(e)),updateMetadata:e=>(0,er.D)(n.updateMetadata(e)),put:(e,t)=>AD(n.put(e,t)),putString:(e,t,r)=>AD(n.putString(e,t,r)),list:e=>(0,er.D)(n.list(e)),listAll:()=>(0,er.D)(n.listAll())}}!function SD(n){const e={TaskState:Hi,TaskEvent:Zf,StringFormat:Ao,Storage:iy,Reference:Uc};n.INTERNAL.registerComponent(new es.wA("storage-compat",AE,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(FT);const RE=new u.OlP("angularfire2.storageBucket"),xE=new u.OlP("angularfire2.storage.maxUploadRetryTime"),ME=new u.OlP("angularfire2.storage.maxOperationRetryTime"),RD=new u.OlP("angularfire2.storage.use-emulator");let mk=(()=>{class n{constructor(t,r,i,o,c,f,m,v,C,S){const O=(0,xi.on)(t,c,r);this.storage=(0,xi.cc)(`${O.name}.storage.${i}`,"AngularFireStorage",O.name,()=>{const G=c.runOutsideAngular(()=>O.storage(i||void 0)),ne=C;return ne&&G.useEmulator(...ne),m&&G.setMaxUploadRetryTime(m),v&&G.setMaxOperationRetryTime(v),G},[m,v])}ref(t){return ly(this.storage.ref(t))}refFromURL(t){return ly(this.storage.refFromURL(t))}upload(t,r,i){return ly(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xi.Dh),u.LFG(xi.xv,8),u.LFG(RE,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Zn.HU),u.LFG(xE,8),u.LFG(ME,8),u.LFG(RD,8),u.LFG(Gf,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),kE=(()=>{class n{constructor(){em.Z.registerVersion("angularfire",Zn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[mk],imports:[xD]}),n})();function cy(){return(0,Si.e)((n,e)=>{let t,r=!1;n.subscribe((0,or.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var Lt,am=P(3997),MD=(P(8977),P(3399)),$c=P(7592),kD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pa={},PE=PE||{},Cn=kD||self;function lm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ph(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var uy="closure_uid_"+(1e9*Math.random()>>>0),PD=0;function OD(n,e,t){return n.call.apply(n.bind,arguments)}function ND(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ps(n,e,t){return(Ps=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?OD:ND).apply(null,arguments)}function cm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ts(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Vc(){this.s=this.s,this.o=this.o}Vc.prototype.s=!1,Vc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function OE(n){Object.prototype.hasOwnProperty.call(n,uy)&&n[uy]||(n[uy]=++PD)}(this)},Vc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jc=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function NE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function LD(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(lm(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let c=0;c<o;c++)n[i+c]=r[c]}else n.push(r)}}function _s(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_s.prototype.h=function(){this.defaultPrevented=!0};var gh=function(){if(!Cn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Cn.addEventListener("test",()=>{},e),Cn.removeEventListener("test",()=>{},e)}catch{}return n}();function mh(n){return/^[\s\xa0]*$/.test(n)}function hy(){var n=Cn.navigator;return n&&(n=n.userAgent)?n:""}function ga(n){return-1!=hy().indexOf(n)}function FD(n){return FD[" "](n),n}FD[" "]=function(){};var BE,n,vk=ga("Opera"),np=ga("Trident")||ga("MSIE"),LE=ga("Edge"),FE=LE||np,Gi=ga("Gecko")&&!(-1!=hy().toLowerCase().indexOf("webkit")&&!ga("Edge"))&&!(ga("Trident")||ga("MSIE"))&&!ga("Edge"),BD=-1!=hy().toLowerCase().indexOf("webkit")&&!ga("Edge");function UD(){var n=Cn.document;return n?n.documentMode:void 0}e:{var fy="",UE=(n=hy(),Gi?/rv:([^\);]+)(\)|;)/.exec(n):LE?/Edge\/([\d\.]+)/.exec(n):np?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):BD?/WebKit\/(\S+)/.exec(n):vk?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(UE&&(fy=UE?UE[1]:""),np){var py=UD();if(null!=py&&py>parseFloat(fy)){BE=String(py);break e}}BE=fy}var yk=Cn.document&&np&&(UD()||parseInt(BE,10))||void 0;function um(n,e){if(_s.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Gi){e:{try{FD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$D[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&um.$.h.call(this)}}ts(um,_s);var $D={2:"touch",3:"pen",4:"mouse"};um.prototype.h=function(){um.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var dm="closure_listenable_"+(1e6*Math.random()|0),VD=0;function Y2(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++VD,this.fa=this.ia=!1}function hm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function fm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function jD(n){const e={};for(const t in n)e[t]=n[t];return e}const HD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function al(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<HD.length;o++)t=HD[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ro(n){this.src=n,this.g={},this.h=0}function Wo(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=jc(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(hm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function my(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}Ro.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=my(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new Y2(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var _y="closure_lm_"+(1e6*Math.random()|0),$E={};function GD(n,e,t,r,i){if(r&&r.once)return vy(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)GD(n,e[o],t,r,i);return null}return t=Iy(t),n&&n[dm]?n.O(e,t,ph(r)?!!r.capture:!!r,i):zD(n,e,t,!1,r,i)}function zD(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var c=ph(i)?!!i.capture:!!i,f=HE(n);if(f||(n[_y]=f=new Ro(n)),(t=f.add(e,t,r,c,o)).proxy)return t;if(r=function Ik(){const e=Ek;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)gh||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(jE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vy(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)vy(n,e[o],t,r,i);return null}return t=Iy(t),n&&n[dm]?n.P(e,t,ph(r)?!!r.capture:!!r,i):zD(n,e,t,!0,r,i)}function rp(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rp(n,e[o],t,r,i);else r=ph(r)?!!r.capture:!!r,t=Iy(t),n&&n[dm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=my(o=n.g[e],t,r,i))&&(hm(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=HE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=my(e,t,r,i)),(t=-1<n?e[n]:null)&&VE(t))}function VE(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[dm])Wo(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=HE(e))?(Wo(t,n),0==t.h&&(t.src=null,e[_y]=null)):hm(n)}}}function jE(n){return n in $E?$E[n]:$E[n]="on"+n}function Ek(n,e){if(n.fa)n=!0;else{e=new um(e,this);var t=n.listener,r=n.la||n.src;n.ia&&VE(n),n=t.call(r,e)}return n}function HE(n){return(n=n[_y])instanceof Ro?n:null}var yy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Iy(n){return"function"==typeof n?n:(n[yy]||(n[yy]=function(e){return n.handleEvent(e)}),n[yy])}function Mi(){Vc.call(this),this.i=new Ro(this),this.S=this,this.J=null}function Os(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new _s(e,n);else if(e instanceof _s)e.target=e.target||n;else{var i=e;al(e=new _s(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var c=e.g=t[o];i=pm(c,r,!0,e)&&i}if(i=pm(c=e.g=n,r,!0,e)&&i,i=pm(c,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=pm(c=e.g=t[o],r,!1,e)&&i}function pm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.fa&&c.capture==t){var f=c.listener,m=c.la||c.src;c.ia&&Wo(n.i,c),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ts(Mi,Vc),Mi.prototype[dm]=!0,Mi.prototype.removeEventListener=function(n,e,t,r){rp(this,n,e,t,r)},Mi.prototype.N=function(){if(Mi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hm(t[r]);delete n.g[e],n.h--}}this.J=null},Mi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Mi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ey=Cn.JSON.stringify;function wk(){var n=by;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wy=new class WD{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new GE,n=>n.reset());class GE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function YD(n){Cn.setTimeout(()=>{throw n},0)}let ip,sp=!1,by=new class bk{constructor(){this.h=this.g=null}add(e,t){const r=wy.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},zE=()=>{const n=Cn.Promise.resolve(void 0);ip=()=>{n.then(KD)}};var KD=()=>{for(var n;n=wk();){try{n.h.call(n.g)}catch(t){YD(t)}var e=wy;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}sp=!1};function gm(n,e){Mi.call(this),this.h=n||1,this.g=e||Cn,this.j=Ps(this.qb,this),this.l=Date.now()}function WE(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function qE(n,e,t){if("function"==typeof n)t&&(n=Ps(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ps(n.handleEvent,n)}return 2147483647<Number(e)?-1:Cn.setTimeout(n,e||0)}function ZD(n){n.g=qE(()=>{n.g=null,n.i&&(n.i=!1,ZD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ts(gm,Mi),(Lt=gm.prototype).ga=!1,Lt.T=null,Lt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Os(this,"tick"),this.ga&&(WE(this),this.start()))}},Lt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Lt.N=function(){gm.$.N.call(this),WE(this),delete this.g};class Ck extends Vc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZD(this)}N(){super.N(),this.g&&(Cn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mm(n){Vc.call(this),this.h=n,this.g={}}ts(mm,Vc);var XD=[];function QD(n,e,t,r){Array.isArray(t)||(t&&(XD[0]=t.toString()),t=XD);for(var i=0;i<t.length;i++){var o=GD(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function JD(n){fm(n.g,function(e,t){this.g.hasOwnProperty(t)&&VE(e)},n),n.g={}}function Cy(){this.g=!0}function op(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ak(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return Ey(t)}catch{return e}}(n,t)+(r?" "+r:"")})}mm.prototype.N=function(){mm.$.N.call(this),JD(this)},mm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cy.prototype.Ea=function(){this.g=!1},Cy.prototype.info=function(){};var vh={},eS=null;function Ty(){return eS=eS||new Mi}function tS(n){_s.call(this,vh.Ta,n)}function ap(n){const e=Ty();Os(e,new tS(e))}function YE(n,e){_s.call(this,vh.STAT_EVENT,n),this.stat=e}function zs(n){const e=Ty();Os(e,new YE(e,n))}function KE(n,e){_s.call(this,vh.Ua,n),this.size=e}function lp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Cn.setTimeout(function(){n()},e)}vh.Ta="serverreachability",ts(tS,_s),vh.STAT_EVENT="statevent",ts(YE,_s),vh.Ua="timingevent",ts(KE,_s);var _m={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ZE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dy(){}function QE(){}Dy.prototype.h=null;var ew,cp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Hc(){_s.call(this,"d")}function JE(){_s.call(this,"c")}function Gc(){}function Sy(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new mm(this),this.P=K2,this.V=new gm(n=FE?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ay}function Ay(){this.i=null,this.g="",this.h=!1}ts(Hc,_s),ts(JE,_s),ts(Gc,Dy),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},ew=new Gc;var K2=45e3,Ry={},vm={};function nS(n,e,t){n.L=1,n.v=ky(zl(e)),n.s=t,n.S=!0,yh(n,null)}function yh(n,e){n.G=Date.now(),Gl(n),n.A=zl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),rw(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Ay,n.g=BS(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Ck(Ps(n.Pa,n,n.g),n.O)),QD(n.U,n.g,"readystatechange",n.nb),e=n.I?jD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),ap(),function Tk(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",f=o.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var C=v[0];v=v[1];var S=C.split("_");c=2<=S.length&&"type"==S[1]?c+(C+"=")+v+"&":c+(C+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function rS(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function iS(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Rk(n,t),i==vm){4==e&&(n.o=4,zs(14),r=!1),op(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ry){n.o=4,zs(15),op(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}op(n.j,n.m,i,null),oS(n,i)}rS(n)&&i!=vm&&i!=Ry&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),hw(e),e.M=!0,zs(11))):(op(n.j,n.m,t,"[Invalid Chunked Response]"),zi(n),Xu(n))}function Rk(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?vm:(t=Number(e.substring(t,r)),isNaN(t)?Ry:(r+=1)+t>e.length?vm:(e=e.slice(r,r+t),n.C=r+t,e))}function Gl(n){n.Y=Date.now()+n.P,sS(n,n.P)}function sS(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lp(Ps(n.lb,n),e)}function Ih(n){n.B&&(Cn.clearTimeout(n.B),n.B=null)}function Xu(n){0==n.l.H||n.J||OS(n.l,n)}function zi(n){Ih(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,WE(n.V),JD(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function oS(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||vS(t.i,n)))if(!n.K&&vS(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Rm(t),Fy(t)}dw(t),zs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=lp(Ps(t.ib,t),6e3));if(1>=Pk(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else td(t,11)}else if((n.K||t.g==n)&&Rm(t),!mh(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const C=v[3];null!=C&&(t.ra=C,t.l.info("VER="+t.ra));const S=v[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const O=v[5];null!=O&&"number"==typeof O&&0<O&&(t.L=r=1.5*O,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ne=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var o=r.i;o.g||-1==ne.indexOf("spdy")&&-1==ne.indexOf("quic")&&-1==ne.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(yS(o,o.h),o.h=null))}if(r.F){const Ne=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.Da=Ne,pr(r.I,r.F,Ne))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=FS(r,r.J?r.pa:null,r.Y),c.K){Ok(r.i,c);var f=c,m=r.L;m&&f.setTimeout(m),f.B&&(Ih(f),Gl(f)),r.g=c}else PS(r);0<t.j.length&&By(t)}else"stop"!=v[0]&&"close"!=v[0]||td(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?td(t,7):Sm(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}ap()}catch{}}function cS(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function lS(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(lm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function aS(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(lm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(Lt=Sy.prototype).setTimeout=function(n){this.P=n},Lt.nb=function(n){n=n.target;const e=this.M;e&&3==ma(n)?e.l():this.Pa(n)},Lt.Pa=function(n){try{if(n==this.g)e:{const C=ma(this.g);var e=this.g.Ia();if(this.g.da(),!(3>C)&&(3!=C||FE||this.g&&(this.h.h||this.g.ja()||AS(this.g)))){this.J||4!=C||7==e||ap(),Ih(this);var t=this.g.da();this.ca=t;t:if(rS(this)){var r=AS(this.g);n="";var i=r.length,o=4==ma(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),Xu(this);var c="";break t}this.h.i=new Cn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function Dk(n,e,t,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.W,C,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mh(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,zs(12),zi(this),Xu(this);break e}op(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oS(this,t)}this.S?(iS(this,C,c),FE&&this.i&&3==C&&(QD(this.U,this.V,"tick",this.mb),this.V.start())):(op(this.j,this.m,c,null),oS(this,c)),4==C&&zi(this),this.i&&!this.J&&(4==C?OS(this.l,this):(this.i=!1,Gl(this)))}else(function RS(n){const e={};n=(n.g&&2<=ma(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(mh(n[r]))continue;var t=qD(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function Hl(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,zs(12)):(this.o=0,zs(13)),zi(this),Xu(this)}}}catch{}},Lt.mb=function(){if(this.g){var n=ma(this.g),e=this.g.ja();this.C<e.length&&(Ih(this),iS(this,n,e),this.i&&4!=n&&Gl(this))}},Lt.cancel=function(){this.J=!0,zi(this)},Lt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Sk(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ap(),zs(17)),zi(this),this.o=2,Xu(this)):sS(this,this.Y-n)};var tw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Qu){this.h=n.h,xy(this,n.j),this.s=n.s,this.g=n.g,My(this,n.m),this.l=n.l;var e=n.i,t=new zc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),dS(this,t),this.o=n.o}else n&&(e=String(n).match(tw))?(this.h=!1,xy(this,e[1]||"",!0),this.s=ym(e[2]||""),this.g=ym(e[3]||"",!0),My(this,e[4]),this.l=ym(e[5]||"",!0),dS(this,e[6]||"",!0),this.o=ym(e[7]||"")):(this.h=!1,this.i=new zc(null,this.h))}function zl(n){return new Qu(n)}function xy(n,e,t){n.j=t?ym(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function My(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dS(n,e,t){e instanceof zc?(n.i=e,function mS(n,e){e&&!n.j&&(Ju(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(pS(this,r),rw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Im(e,xk)),n.i=new zc(e,n.h))}function pr(n,e,t){n.i.set(e,t)}function ky(n){return pr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ym(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Im(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Py),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Py(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Im(e,nw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Im(e,nw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Im(t,"/"==t.charAt(0)?fS:hS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Im(t,Em)),n.join("")};var nw=/[#\/\?@]/g,hS=/[#\?:]/g,fS=/[#\?]/g,xk=/[#\?@]/g,Em=/#/g;function zc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ju(n){n.g||(n.g=new Map,n.h=0,n.i&&function uS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function pS(n,e){Ju(n),e=Eh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gS(n,e){return Ju(n),e=Eh(n,e),n.g.has(e)}function rw(n,e,t){pS(n,e),0<t.length&&(n.i=null,n.g.set(Eh(n,e),NE(t)),n.h+=t.length)}function Eh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function iw(n){this.l=n||kk,n=Cn.PerformanceNavigationTiming?0<(n=Cn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Cn.g&&Cn.g.Ka&&Cn.g.Ka()&&Cn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Lt=zc.prototype).add=function(n,e){Ju(this),this.i=null,n=Eh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Lt.forEach=function(n,e){Ju(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Lt.ta=function(){Ju(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},Lt.Z=function(n){Ju(this);let e=[];if("string"==typeof n)gS(this,n)&&(e=e.concat(this.g.get(Eh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Lt.set=function(n,e){return Ju(this),this.i=null,gS(this,n=Eh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Lt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=o;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var kk=10;function _S(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pk(n){return n.h?1:n.g?n.g.size:0}function vS(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yS(n,e){n.g?n.g.add(e):n.h=e}function Ok(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sw(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return NE(n.i)}iw.prototype.cancel=function(){if(this.i=sw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Oy=class{stringify(n){return Cn.JSON.stringify(n,void 0)}parse(n){return Cn.JSON.parse(n,void 0)}};function Nk(){this.g=new Oy}function Lk(n,e,t){const r=t||"";try{cS(n,function(i,o){let c=i;ph(i)&&(c=Ey(i)),e.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ed(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function wm(n){this.l=n.fc||null,this.j=n.ob||!1}function Ny(n,e){Mi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ow,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ts(wm,Dy),wm.prototype.g=function(){return new Ny(this.l,this.j)},wm.prototype.i=function(n){return function(){return n}}({}),ts(Ny,Mi);var ow=0;function ES(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ly(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bm(n)}function bm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Lt=Ny.prototype).open=function(n,e){if(this.readyState!=ow)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bm(this)},Lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Cn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ly(this)),this.readyState=ow},Lt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bm(this)),this.g&&(this.readyState=3,bm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Cn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ES(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Lt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ly(this):bm(this),3==this.readyState&&ES(this)}},Lt.Za=function(n){this.g&&(this.response=this.responseText=n,Ly(this))},Lt.Ya=function(n){this.g&&(this.response=n,Ly(this))},Lt.ka=function(){this.g&&Ly(this)},Lt.setRequestHeader=function(n,e){this.v.append(n,e)},Lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ny.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var wS=Cn.JSON.parse;function di(n){Mi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bS,this.L=this.M=!1}ts(di,Mi);var bS="",Cm=/^https?$/i,Fk=["POST","PUT"];function TS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aw(n),Tm(n)}function aw(n){n.F||(n.F=!0,Os(n,"complete"),Os(n,"error"))}function DS(n){if(n.h&&typeof PE<"u"&&(!n.C[1]||4!=ma(n)||2!=n.da()))if(n.v&&4==ma(n))qE(n.La,0,n);else if(Os(n,"readystatechange"),4==ma(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(tw)[1]||null;!i&&Cn.self&&Cn.self.location&&(i=Cn.self.location.protocol.slice(0,-1)),r=!Cm.test(i?i.toLowerCase():"")}t=r}if(t)Os(n,"complete"),Os(n,"success");else{n.m=6;try{var o=2<ma(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",aw(n)}}finally{Tm(n)}}}function Tm(n,e){if(n.g){SS(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Os(n,"ready");try{t.onreadystatechange=r}catch{}}}function SS(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Cn.clearTimeout(n.A),n.A=null)}function ma(n){return n.g?n.g.readyState:0}function AS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case bS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lw(n){let e="";return fm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function cw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pr(n,e,t))}function Dm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xS(n){this.Ga=0,this.j=[],this.l=new Cy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dm("baseRetryDelayMs",5e3,n),this.hb=Dm("retryDelaySeedMs",1e4,n),this.eb=Dm("forwardChannelMaxRetries",2,n),this.xa=Dm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new iw(n&&n.concurrentRequestLimit),this.Ja=new Nk,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Sm(n){if(uw(n),3==n.H){var e=n.W++,t=zl(n.I);if(pr(t,"SID",n.K),pr(t,"RID",e),pr(t,"TYPE","terminate"),Am(n,t),(e=new Sy(n,n.l,e)).L=2,e.v=ky(zl(t)),t=!1,Cn.navigator&&Cn.navigator.sendBeacon)try{t=Cn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Cn.Image&&((new Image).src=e.v,t=!0),t||(e.g=BS(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gl(e)}LS(n)}function Fy(n){n.g&&(hw(n),n.g.cancel(),n.g=null)}function uw(n){Fy(n),n.u&&(Cn.clearTimeout(n.u),n.u=null),Rm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Cn.clearTimeout(n.m),n.m=null)}function By(n){if(!_S(n.i)&&!n.m){n.m=!0;var e=n.Na;ip||zE(),sp||(ip(),sp=!0),by.add(e,n),n.C=0}}function MS(n,e){var t;t=e?e.m:n.W++;const r=zl(n.I);pr(r,"SID",n.K),pr(r,"RID",t),pr(r,"AID",n.V),Am(n,r),n.o&&n.s&&cw(r,n.o,n.s),t=new Sy(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=kS(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yS(n.i,t),nS(t,r,e)}function Am(n,e){n.na&&fm(n.na,function(t,r){pr(e,r,t)}),n.h&&cS({},function(t,r){pr(e,r,t)})}function kS(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ps(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const c=["count="+t];-1==o?0<t?(o=i[0].g,c.push("ofs="+o)):o=0:c.push("ofs="+o);let f=!0;for(let m=0;m<t;m++){let v=i[m].g;const C=i[m].map;if(v-=o,0>v)o=Math.max(0,i[m].g-100),f=!1;else try{Lk(C,c,"req"+v+"_")}catch{r&&r(C)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function PS(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;ip||zE(),sp||(ip(),sp=!0),by.add(e,n),n.A=0}}function dw(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=lp(Ps(n.Ma,n),NS(n,n.A)),n.A++,0))}function hw(n){null!=n.B&&(Cn.clearTimeout(n.B),n.B=null)}function fw(n){n.g=new Sy(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=zl(n.wa);pr(e,"RID","rpc"),pr(e,"SID",n.K),pr(e,"AID",n.V),pr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&pr(e,"TO",n.qa),pr(e,"TYPE","xmlhttp"),Am(n,e),n.o&&n.s&&cw(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=ky(zl(e)),t.s=null,t.S=!0,yh(t,n)}function Rm(n){null!=n.v&&(Cn.clearTimeout(n.v),n.v=null)}function OS(n,e){var t=null;if(n.g==e){Rm(n),hw(n),n.g=null;var r=2}else{if(!vS(n.i,e))return;t=e.F,Ok(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Os(r=Ty(),new KE(r,t)),By(n)}else PS(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Bk(n,e){return!(Pk(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=lp(Ps(n.Na,n,e),NS(n,n.C)),n.C++,0)))}(n,e)||2==r&&dw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:td(n,5);break;case 4:td(n,10);break;case 3:td(n,6);break;default:td(n,2)}}function NS(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function td(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ps(n.pb,n);t||(t=new Qu("//www.google.com/images/cleardot.gif"),Cn.location&&"http"==Cn.location.protocol||xy(t,"https"),ky(t)),function IS(n,e){const t=new Cy;if(Cn.Image){const r=new Image;r.onload=cm(ed,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cm(ed,t,r,"TestLoadImage: error",!1,e),r.onabort=cm(ed,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cm(ed,t,r,"TestLoadImage: timeout",!1,e),Cn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zs(2);n.H=0,n.h&&n.h.za(e),LS(n),uw(n)}function LS(n){if(n.H=0,n.ma=[],n.h){const e=sw(n.i);(0!=e.length||0!=n.j.length)&&(LD(n.ma,e),LD(n.ma,n.j),n.i.i.length=0,NE(n.j),n.j.length=0),n.h.ya()}}function FS(n,e,t){var r=t instanceof Qu?zl(t):new Qu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),My(r,r.m);else{var i=Cn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Qu(null);r&&xy(o,r),e&&(o.g=e),i&&My(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&pr(r,t,e),pr(r,"VER",n.ra),Am(n,r),r}function BS(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new di(t&&n.Ha&&!n.va?new wm({ob:!0}):n.va)).Oa(n.J),e}function US(){}function up(){if(np&&!(10<=Number(yk)))throw Error("Environmental error: no available transport.")}function lo(n,e){Mi.call(this),this.g=new xS(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!mh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dp(this)}function pw(n){Hc.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Uy(){JE.call(this),this.status=1}function dp(n){this.g=n}function qo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gw(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],c=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;c=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(c<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((o=(e=t+((c=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=o+((c=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function lr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(Lt=di.prototype).Oa=function(n){this.M=n},Lt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ew.g(),this.C=function XE(n){return n.h||(n.h=n.i())}(this.u?this.u:ew),this.g.onreadystatechange=Ps(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void TS(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Cn.FormData&&n instanceof Cn.FormData,!(0<=jc(Fk,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,c]of t)this.g.setRequestHeader(o,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{SS(this),0<this.B&&((this.L=function CS(n){return np&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ps(this.ua,this)):this.A=qE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){TS(this,o)}},Lt.ua=function(){typeof PE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Os(this,"timeout"),this.abort(8))},Lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Os(this,"complete"),Os(this,"abort"),Tm(this))},Lt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tm(this,!0)),di.$.N.call(this)},Lt.La=function(){this.s||(this.G||this.v||this.l?DS(this):this.kb())},Lt.kb=function(){DS(this)},Lt.isActive=function(){return!!this.g},Lt.da=function(){try{return 2<ma(this)?this.g.status:-1}catch{return-1}},Lt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Lt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),wS(e)}},Lt.Ia=function(){return this.m},Lt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Lt=xS.prototype).ra=8,Lt.H=1,Lt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Sy(this,this.l,n);let o=this.s;if(this.U&&(o?(o=jD(o),al(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=kS(this,i,e),pr(t=zl(this.I),"RID",n),pr(t,"CVER",22),this.F&&pr(t,"X-HTTP-Session-Id",this.F),Am(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(lw(o)))+"&"+e:this.o&&cw(t,this.o,o)),yS(this.i,i),this.bb&&pr(t,"TYPE","init"),this.P?(pr(t,"$req",e),pr(t,"SID","null"),i.aa=!0,nS(i,t,null)):nS(i,t,e),this.H=2}}else 3==this.H&&(n?MS(this,n):0==this.j.length||_S(this.i)||MS(this))},Lt.Ma=function(){if(this.u=null,fw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=lp(Ps(this.jb,this),n)}},Lt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zs(10),Fy(this),fw(this))},Lt.ib=function(){null!=this.v&&(this.v=null,Fy(this),dw(this),zs(19))},Lt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),zs(2)):(this.l.info("Failed to ping google.com"),zs(1))},Lt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Lt=US.prototype).Ba=function(){},Lt.Aa=function(){},Lt.za=function(){},Lt.ya=function(){},Lt.isActive=function(){return!0},Lt.Va=function(){},up.prototype.g=function(n,e){return new lo(n,e)},ts(lo,Mi),lo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;zs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=FS(n,null,n.Y),By(n)},lo.prototype.close=function(){Sm(this.g)},lo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Ey(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&By(e)},lo.prototype.N=function(){this.g.h=null,delete this.j,Sm(this.g),delete this.g,lo.$.N.call(this)},ts(pw,Hc),ts(Uy,JE),ts(dp,US),dp.prototype.Ba=function(){Os(this.g,"a")},dp.prototype.Aa=function(n){Os(this.g,new pw(n))},dp.prototype.za=function(n){Os(this.g,new Uy)},dp.prototype.ya=function(){Os(this.g,"b")},ts(qo,function Uk(){this.blockSize=-1}),qo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},qo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)gw(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){gw(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){gw(this,r),i=0;break}}this.h=i,this.i+=e},qo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var wh={};function $y(n){return-128<=n&&128>n?function q2(n,e){var t=wh;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new lr([0|e],0>e?-1:0)}):new lr([0|n],0>n?-1:0)}function Wl(n){if(isNaN(n)||!isFinite(n))return nd;if(0>n)return vs(Wl(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=xm;return new lr(e,0)}var xm=4294967296,nd=$y(0),mw=$y(1),_w=$y(16777216);function ql(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function _a(n){return-1==n.h}function vs(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new lr(t,~n.h).add(mw)}function hp(n,e){return n.add(vs(e))}function Mm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function fp(n,e){this.g=n,this.h=e}function km(n,e){if(ql(e))throw Error("division by zero");if(ql(n))return new fp(nd,nd);if(_a(n))return e=km(vs(n),e),new fp(vs(e.g),vs(e.h));if(_a(e))return e=km(n,vs(e)),new fp(vs(e.g),e.h);if(30<n.g.length){if(_a(n)||_a(e))throw Error("slowDivide_ only works with positive integers.");for(var t=mw,r=e;0>=r.X(n);)t=vw(t),r=vw(r);var i=pp(t,1),o=pp(r,1);for(r=pp(r,2),t=pp(t,2);!ql(r);){var c=o.add(r);0>=c.X(n)&&(i=i.add(t),o=c),r=pp(r,1),t=pp(t,1)}return e=hp(n,i.R(e)),new fp(i,e)}for(i=nd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(o=Wl(t)).R(e);_a(c)||0<c.X(n);)c=(o=Wl(t-=r)).R(e);ql(o)&&(o=mw),i=i.add(o),n=hp(n,c)}return new fp(i,n)}function vw(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new lr(t,n.h)}function pp(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new lr(i,n.h)}(Lt=lr.prototype).ea=function(){if(_a(this))return-vs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:xm+r)*e,e*=xm}return n},Lt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ql(this))return"0";if(_a(this))return"-"+vs(this).toString(n);for(var e=Wl(Math.pow(n,6)),t=this,r="";;){var i=km(t,e).g,o=((0<(t=hp(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ql(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Lt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Lt.X=function(n){return _a(n=hp(this,n))?-1:ql(n)?0:1},Lt.abs=function(){return _a(this)?vs(this):this},Lt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),c=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(o&=65535)}return new lr(t,-2147483648&t[t.length-1]?-1:0)},Lt.R=function(n){if(ql(this)||ql(n))return nd;if(_a(this))return _a(n)?vs(this).R(vs(n)):vs(vs(this).R(n));if(_a(n))return vs(this.R(vs(n)));if(0>this.X(_w)&&0>n.X(_w))return Wl(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=c*m,Mm(t,2*r+2*i),t[2*r+2*i+1]+=o*m,Mm(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,Mm(t,2*r+2*i+1),t[2*r+2*i+2]+=o*f,Mm(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new lr(t,0)},Lt.gb=function(n){return km(this,n).h},Lt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new lr(t,this.h&n.h)},Lt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new lr(t,this.h|n.h)},Lt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new lr(t,this.h^n.h)},up.prototype.createWebChannel=up.prototype.g,lo.prototype.send=lo.prototype.u,lo.prototype.open=lo.prototype.m,lo.prototype.close=lo.prototype.close,_m.NO_ERROR=0,_m.TIMEOUT=8,_m.HTTP_ERROR=6,ZE.COMPLETE="complete",QE.EventType=cp,cp.OPEN="a",cp.CLOSE="b",cp.ERROR="c",cp.MESSAGE="d",Mi.prototype.listen=Mi.prototype.O,di.prototype.listenOnce=di.prototype.P,di.prototype.getLastError=di.prototype.Sa,di.prototype.getLastErrorCode=di.prototype.Ia,di.prototype.getStatus=di.prototype.da,di.prototype.getResponseJson=di.prototype.Wa,di.prototype.getResponseText=di.prototype.ja,di.prototype.send=di.prototype.ha,di.prototype.setWithCredentials=di.prototype.Oa,qo.prototype.digest=qo.prototype.l,qo.prototype.reset=qo.prototype.reset,qo.prototype.update=qo.prototype.j,lr.prototype.add=lr.prototype.add,lr.prototype.multiply=lr.prototype.R,lr.prototype.modulo=lr.prototype.gb,lr.prototype.compare=lr.prototype.X,lr.prototype.toNumber=lr.prototype.ea,lr.prototype.toString=lr.prototype.toString,lr.prototype.getBits=lr.prototype.D,lr.fromNumber=Wl,lr.fromString=function $k(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return vs($k(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Wl(Math.pow(e,8)),r=nd,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+o),e);8>o?(o=Wl(Math.pow(e,o)),r=r.R(o).add(Wl(c))):r=(r=r.R(t)).add(Wl(c))}return r};var Vk=pa.createWebChannelTransport=function(){return new up},jk=pa.getStatEventTarget=function(){return Ty()},yw=pa.ErrorCode=_m,$S=pa.EventType=ZE,Z2=pa.Event=vh,Iw=pa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hk=pa.FetchXmlHttpFactory=wm,Vy=pa.WebChannel=QE,X2=pa.XhrIo=di,Gk=pa.Md5=qo,gp=pa.Integer=lr;const Ew="@firebase/firestore";class ys{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ys.UNAUTHENTICATED=new ys(null),ys.GOOGLE_CREDENTIALS=new ys("google-credentials-uid"),ys.FIRST_PARTY=new ys("first-party-uid"),ys.MOCK_USER=new ys("mock-user");let mp="9.23.0";const rd=new ps.Yd("@firebase/firestore");function ww(){return rd.logLevel}function ht(n,...e){if(rd.logLevel<=ps.in.DEBUG){const t=e.map(bw);rd.debug(`Firestore (${mp}): ${n}`,...t)}}function ki(n,...e){if(rd.logLevel<=ps.in.ERROR){const t=e.map(bw);rd.error(`Firestore (${mp}): ${n}`,...t)}}function va(n,...e){if(rd.logLevel<=ps.in.WARN){const t=e.map(bw);rd.warn(`Firestore (${mp}): ${n}`,...t)}}function bw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Bt(n="Unexpected state"){const e=`FIRESTORE (${mp}) INTERNAL ASSERTION FAILED: `+n;throw ki(e),new Error(e)}function Zt(n,e){n||Bt()}function kt(n,e){return n}const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ns{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ys.UNAUTHENTICATED))}shutdown(){}}class J2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wk{constructor(e){this.t=e,this.currentUser=ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ns,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable((0,Te.Z)(function*(){yield v.promise,yield o(r.currentUser)}))},m=v=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ns)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt("string"==typeof r.accessToken),new jS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zt(null===e||"string"==typeof e),new ys(e)}}class qk{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ys.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Yk{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qk(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ys.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kk{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.T;return this.T=o.token,ht("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zt("string"==typeof t.token),this.T=t.token,new HS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Zk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Hy{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Zk(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Tn(n,e){return n<e?-1:n>e?1:0}function Pm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function GS(n){return n+"\0"}class Qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new at(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new at(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new at(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new at(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tn(this.nanoseconds,e.nanoseconds):Tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new Qr(0,0))}static max(){return new Yt(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Om{constructor(e,t,r){void 0===t?t=0:t>e.length&&Bt(),void 0===r?r=e.length-t:r>e.length-t&&Bt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Om.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Om?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wn extends Om{construct(e,t,r){return new Wn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new at(ze.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Wn(t)}static emptyPath(){return new Wn([])}}const Xk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends Om{construct(e,t,r){return new Or(e,t,r)}static isValidIdentifier(e){return Xk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new at(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new at(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new at(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(o(),i++)}if(o(),c)throw new at(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class At{constructor(e){this.path=e}static fromPath(e){return new At(Wn.fromString(e))}static fromName(e){return new At(Wn.fromString(e).popFirst(5))}static empty(){return new At(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Wn(e.slice()))}}class Gy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function zy(n){return n.fields.find(e=>2===e.kind)}function Yl(n){return n.fields.filter(e=>2!==e.kind)}Gy.UNKNOWN_ID=-1;class Wy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nm(0,Ws.min())}}function WS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Yt.fromTimestamp(1e9===r?new Qr(t+1,0):new Qr(t,r));return new Ws(i,At.empty(),e)}function Cw(n){return new Ws(n.readTime,n.key,-1)}class Ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ws(Yt.min(),At.empty(),-1)}static max(){return new Ws(Yt.max(),At.empty(),-1)}}function Tw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=At.comparator(n.documentKey,e.documentKey),0!==t?t:Tn(n.largestBatchId,e.largestBatchId))}const qS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wc(n){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,Te.Z)(function*(n){if(n.code!==ze.FAILED_PRECONDITION||n.message!==qS)throw n;ht("LocalStore","Unexpectedly lost primary lease")}),Lm.apply(this,arguments)}class Be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Be((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Be?t:Be.resolve(t)}catch(t){return Be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Be.reject(t)}static resolve(e){return new Be((t,r)=>{t(e)})}static reject(e){return new Be((t,r)=>{r(e)})}static waitFor(e){return new Be((t,r)=>{let i=0,o=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++o,c&&o===i&&t()},m=>r(m))}),c=!0,o===i&&t()})}static or(e){let t=Be.resolve(!1);for(const r of e)t=t.next(i=>i?Be.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new Be((r,i)=>{const o=e.length,c=new Array(o);let f=0;for(let m=0;m<o;m++){const v=m;t(e[v]).next(C=>{c[v]=C,++f,f===o&&r(c)},C=>i(C))}})}static doWhile(e,t){return new Be((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class qy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ns,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Fm(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Bm(r.target.error);this.v.reject(new Fm(e,i))}}static open(e,t,r,i){try{return new qy(t,e.transaction(i,r))}catch(o){throw new Fm(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ht("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sw(t)}}class ya{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ya.S((0,U.z$)())&&ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ht("SimpleDb","Removing database:",e),qc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,U.hl)())return!1;if(ya.C())return!0;const e=(0,U.z$)(),t=ya.S(e),r=0<t&&t<10,i=ya.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Te.Z)(function*(){return t.db||(ht("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new Fm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new at(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new at(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Fm(e,f))},o.onupgradeneeded=c=>{ht("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,o.transaction,c.oldVersion,t.version).next(()=>{ht("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,Te.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{o.db=yield o.$(e);const m=qy.open(o.db,e,c?"readonly":"readwrite",r),v=i(m).next(C=>(m.P(),C)).catch(C=>(m.abort(C),Be.reject(C))).toPromise();return v.catch(()=>{}),yield m.R,v}catch(m){const v=m,C="FirebaseError"!==v.name&&f<3;if(ht("SimpleDb","Transaction failed with error:",v.message,"Retrying:",C),o.close(),!C)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class YS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return qc(this.L.delete())}}class Fm extends at{constructor(e,t){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function id(n){return"IndexedDbTransactionError"===n.name}class Sw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ht("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ht("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qc(r)}add(e){return ht("SimpleDb","ADD",this.store.name,e,e),qc(this.store.add(e))}get(e){return qc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ht("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ht("SimpleDb","DELETE",this.store.name,e),qc(this.store.delete(e))}count(){return ht("SimpleDb","COUNT",this.store.name),qc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(c,f)=>{o.push(f)}).next(()=>o)}{const i=this.store.getAll(r.range);return new Be((o,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{o(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Be((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){ht("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new Be((r,i)=>{t.onerror=o=>{const c=Bm(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new Be((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const m=new YS(f),v=t(f.primaryKey,f.value,m);if(v instanceof Be){const C=v.catch(S=>(m.done(),Be.reject(S)));r.push(C)}m.isDone?i():null===m.K?f.continue():f.continue(m.K)}}).next(()=>Be.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qc(n){return new Be((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Bm(r.target.error);t(i)}})}let Aw=!1;function Bm(n){const e=ya.S((0,U.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new at("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Aw||(Aw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Rw{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ht("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Te.Z)(function*(){t.task=null;try{ht("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){id(r)?ht("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Wc(r)}yield t.et(6e4)}))}}class Jk{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return Be.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ht("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,o)).next(f=>(ht("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=Cw(o);Tw(c,r)>0&&(r=c)}),new Ws(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Yo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Um(n){return null==n}function $m(n){return 0===n&&1/n==-1/0}function xw(n){return"number"==typeof n&&Number.isInteger(n)&&!$m(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Is(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Mw(e)),e=KS(n.get(t),e);return Mw(e)}function KS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function Mw(n){return n+"\x01\x01"}function ll(n){const e=n.length;if(Zt(e>=2),2===e)return Zt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf("\x01",o);switch((c<0||c>t)&&Bt(),n.charAt(c+1)){case"\x01":const f=n.substring(o,c);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:Bt()}o=c+2}return new Wn(r)}const kw=["userId","batchId"];function Yy(n,e){return[n,Is(e)]}function Pw(n,e,t){return[n,Is(e),t]}const ZS={},eP=["prefixPath","collectionGroup","readTime","documentId"],XS=["prefixPath","collectionGroup","documentId"],tP=["collectionGroup","readTime","prefixPath","documentId"],co=["canonicalId","targetId"],_p=["targetId","path"],nP=["path","targetId"],rP=["collectionId","parent"],eB=["indexId","uid"],tB=["uid","sequenceNumber"],QS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ow=["indexId","uid","orderedDocumentKey"],nB=["userId","collectionPath","documentId"],rB=["userId","collectionPath","largestBatchId"],iB=["userId","collectionGroup","largestBatchId"],vp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iP=[...vp,"documentOverlays"],Ky=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],JS=Ky,eA=[...JS,"indexConfiguration","indexState","indexEntries"];class Nw extends Dw{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Es(n,e){const t=kt(n);return ya.M(t.ht,e)}function tA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dr{constructor(e,t){this.comparator=e,this.root=t||rs.EMPTY}insert(e,t){return new Dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rs{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=null!=r?r:rs.RED,this.left=null!=i?i:rs.EMPTY,this.right=null!=o?o:rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new rs(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return rs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1,rs.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new rs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wr{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fw(this.data.getIterator())}getIteratorFrom(e){return new Fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wr(this.comparator);return t.data=e,t}}class Fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yp(n){return n.hasNext()?n.getNext():void 0}class uo{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new uo([])}unionWith(e){let t=new Wr(Or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new uo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ch extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ch("Invalid base64 string: "+i):i}}(e);return new Wi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wi.EMPTY_BYTE_STRING=new Wi("");const Bw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Th(n){if(Zt(!!n),"string"==typeof n){let e=0;const t=Bw.exec(n);if(Zt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hi(n.seconds),nanos:hi(n.nanos)}}function hi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sd(n){return"string"==typeof n?Wi.fromBase64String(n):Wi.fromUint8Array(n)}function Zy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xy(n){const e=n.mapValue.fields.__previous_value__;return Zy(e)?Xy(e):e}function Vm(n){const e=Th(n.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}class nA{constructor(e,t,r,i,o,c,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v}}class Yc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}const od={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jm={nullValue:"NULL_VALUE"};function Kc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zy(n)?4:aP(n)?9007199254740991:10:Bt()}function Zl(n,e){if(n===e)return!0;const t=Kc(n);if(t!==Kc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vm(n).isEqual(Vm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Th(r.timestampValue),c=Th(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,sd(n.bytesValue).isEqual(sd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return hi(r.geoPointValue.latitude)===hi(i.geoPointValue.latitude)&&hi(r.geoPointValue.longitude)===hi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return hi(r.integerValue)===hi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=hi(r.doubleValue),c=hi(i.doubleValue);return o===c?$m(o)===$m(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Pm(n.arrayValue.values||[],e.arrayValue.values||[],Zl);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(tA(o)!==tA(c))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(void 0===c[f]||!Zl(o[f],c[f])))return!1;return!0}(n,e);default:return Bt()}var i}function Hm(n,e){return void 0!==(n.values||[]).find(t=>Zl(t,e))}function Zc(n,e){if(n===e)return 0;const t=Kc(n),r=Kc(e);if(t!==r)return Tn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tn(n.booleanValue,e.booleanValue);case 2:return function(i,o){const c=hi(i.integerValue||i.doubleValue),f=hi(o.integerValue||o.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return rA(n.timestampValue,e.timestampValue);case 4:return rA(Vm(n),Vm(e));case 5:return Tn(n.stringValue,e.stringValue);case 6:return function(i,o){const c=sd(i),f=sd(o);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),f=o.split("/");for(let m=0;m<c.length&&m<f.length;m++){const v=Tn(c[m],f[m]);if(0!==v)return v}return Tn(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Tn(hi(i.latitude),hi(o.latitude));return 0!==c?c:Tn(hi(i.longitude),hi(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const c=i.values||[],f=o.values||[];for(let m=0;m<c.length&&m<f.length;++m){const v=Zc(c[m],f[m]);if(v)return v}return Tn(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===od.mapValue&&o===od.mapValue)return 0;if(i===od.mapValue)return 1;if(o===od.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),m=o.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let C=0;C<f.length&&C<v.length;++C){const S=Tn(f[C],v[C]);if(0!==S)return S;const O=Zc(c[f[C]],m[v[C]]);if(0!==O)return O}return Tn(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Bt()}}function rA(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tn(n,e);const t=Th(n),r=Th(e),i=Tn(t.seconds,r.seconds);return 0!==i?i:Tn(t.nanos,r.nanos)}function Dh(n){return Qy(n)}function Qy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Th(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sd(n.bytesValue).toBase64():"referenceValue"in n?At.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=Qy(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const f of i)c?c=!1:o+=",",o+=`${f}:${Qy(r.fields[f])}`;return o+"}"}(n.mapValue):Bt();var e}function ad(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Uw(n){return!!n&&"integerValue"in n}function zm(n){return!!n&&"arrayValue"in n}function oP(n){return!!n&&"nullValue"in n}function $w(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vw(n){return!!n&&"mapValue"in n}function Jy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aP(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sB(n){return"nullValue"in n?jm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ad(Yc.empty(),At.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Bt()}function oB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ad(Yc.empty(),At.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?od:Bt()}function lP(n,e){const t=Zc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cP(n,e){const t=Zc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qs{constructor(e){this.value=e}static empty(){return new qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jy(t)}setAll(e){let t=Or.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Jy(c):i.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Vw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Kl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new qs(Jy(this.value))}}function uP(n){const e=[];return Kl(n.fields,(t,r)=>{const i=new Or([t]);if(Vw(r)){const o=uP(r.mapValue).fields;if(0===o.length)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new uo(e)}class Sr{constructor(e,t,r,i,o,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Sr(e,0,Yt.min(),Yt.min(),Yt.min(),qs.empty(),0)}static newFoundDocument(e,t,r,i){return new Sr(e,1,t,Yt.min(),r,i,0)}static newNoDocument(e,t){return new Sr(e,2,t,Yt.min(),Yt.min(),qs.empty(),0)}static newUnknownDocument(e,t){return new Sr(e,3,t,Yt.min(),Yt.min(),qs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xl{constructor(e,t){this.position=e,this.inclusive=t}}function jw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(r=o.field.isKeyField()?At.comparator(At.fromName(c.referenceValue),t.key):Zc(c,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function iA(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zl(n.position[t],e.position[t]))return!1;return!0}class Xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function dP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class hP{}class Hn extends hP{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new fP(e,t,r):"array-contains"===t?new mP(e,r):"in"===t?new cA(e,r):"not-in"===t?new zw(e,r):"array-contains-any"===t?new _P(e,r):new Hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new pP(e,r):new gP(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zc(t,this.value)):null!==t&&Kc(this.value)===Kc(t)&&this.matchesComparison(Zc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gr extends hP{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new gr(e,t)}matches(e){return Sh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Sh(n){return"and"===n.op}function Hw(n){return"or"===n.op}function Gw(n){return sA(n)&&Sh(n)}function sA(n){for(const e of n.filters)if(e instanceof gr)return!1;return!0}function oA(n){if(n instanceof Hn)return n.field.canonicalString()+n.op.toString()+Dh(n.value);if(Gw(n))return n.filters.map(e=>oA(e)).join(",");{const e=n.filters.map(t=>oA(t)).join(",");return`${n.op}(${e})`}}function aA(n,e){return n instanceof Hn?(t=n,(r=e)instanceof Hn&&t.op===r.op&&t.field.isEqual(r.field)&&Zl(t.value,r.value)):n instanceof gr?function(t,r){return r instanceof gr&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,c)=>i&&aA(o,r.filters[c]),!0)}(n,e):void Bt();var t,r}function Ip(n,e){const t=n.filters.concat(e);return gr.create(t,n.op)}function Wm(n){return n instanceof Hn?`${(e=n).field.canonicalString()} ${e.op} ${Dh(e.value)}`:n instanceof gr?function(e){return e.op.toString()+" {"+e.getFilters().map(Wm).join(" ,")+"}"}(n):"Filter";var e}class fP extends Hn{constructor(e,t,r){super(e,t,r),this.key=At.fromName(r.referenceValue)}matches(e){const t=At.comparator(e.key,this.key);return this.matchesComparison(t)}}class pP extends Hn{constructor(e,t){super(e,"in",t),this.keys=lA(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gP extends Hn{constructor(e,t){super(e,"not-in",t),this.keys=lA(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lA(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>At.fromName(r.referenceValue))}class mP extends Hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zm(t)&&Hm(t.arrayValue,this.value)}}class cA extends Hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hm(this.value.arrayValue,t)}}class zw extends Hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hm(this.value.arrayValue,t)}}class _P extends Hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hm(this.value.arrayValue,r))}}class vP{constructor(e,t=null,r=[],i=[],o=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=f,this.dt=null}}function Ww(n,e=null,t=[],r=[],i=null,o=null,c=null){return new vP(n,e,t,r,i,o,c)}function Ah(n){const e=kt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>oA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Um(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dh(r)).join(",")),e.dt=t}return e.dt}function qm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iA(n.startAt,e.startAt)&&iA(n.endAt,e.endAt)}function e0(n){return At.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function t0(n,e){return n.filters.filter(t=>t instanceof Hn&&t.field.isEqual(e))}function uA(n,e,t){let r=jm,i=!0;for(const o of t0(n,e)){let c=jm,f=!0;switch(o.op){case"<":case"<=":c=sB(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,f=!1;break;case"!=":case"not-in":c=jm}lP({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];lP({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function dA(n,e,t){let r=od,i=!0;for(const o of t0(n,e)){let c=od,f=!0;switch(o.op){case">=":case">":c=oB(o.value),f=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,f=!1;break;case"!=":case"not-in":c=od}cP({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];cP({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ql{constructor(e,t=null,r=[],i=[],o=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=m,this.wt=null,this._t=null}}function n0(n,e,t,r,i,o,c,f){return new Ql(n,e,t,r,i,o,c,f)}function Ep(n){return new Ql(n)}function hA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function r0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ym(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function fA(n){return null!==n.collectionGroup}function qi(n){const e=kt(n);if(null===e.wt){e.wt=[];const t=Ym(e),r=r0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Xc(t)),e.wt.push(new Xc(Or.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Xc(Or.keyField(),o))}}}return e.wt}function Ys(n){const e=kt(n);if(!e._t)if("F"===e.limitType)e._t=Ww(e.path,e.collectionGroup,qi(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of qi(e))t.push(new Xc(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Xl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Xl(e.startAt.position,e.startAt.inclusive):null;e._t=Ww(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function s0(n,e){e.getFirstInequalityField(),Ym(n);const t=n.filters.concat([e]);return new Ql(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function o0(n,e,t){return new Ql(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wp(n,e){return qm(Ys(n),Ys(e))&&n.limitType===e.limitType}function pA(n){return`${Ah(Ys(n))}|lt:${n.limitType}`}function Km(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Wm(r)).join(", ")}]`),Um(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dh(r)).join(",")),`Target(${t})`}(Ys(n))}; limitType=${n.limitType})`}function Ia(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):At.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of qi(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,c){const f=jw(i,o,c);return i.inclusive?f<=0:f<0}(t.startAt,qi(t),r)||t.endAt&&!function(i,o,c){const f=jw(i,o,c);return i.inclusive?f>=0:f>0}(t.endAt,qi(t),r)));var t,r}function qw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function a0(n){return(e,t)=>{let r=!1;for(const i of qi(n)){const o=Yw(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Yw(n,e,t){const r=n.field.isKeyField()?At.comparator(e.key,t.key):function(i,o,c){const f=o.data.field(i),m=c.data.field(i);return null!==f&&null!==m?Zc(f,m):Bt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Bt()}}class Qc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Lw(this.inner)}size(){return this.innerSize}}const aB=new Dr(At.comparator);function ho(){return aB}const gA=new Dr(At.comparator);function Zm(...n){let e=gA;for(const t of n)e=e.insert(t.key,t);return e}function mA(n){let e=gA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jl(){return l0()}function Kw(){return l0()}function l0(){return new Qc(n=>n.toString(),(n,e)=>n.isEqual(e))}const _A=new Dr(At.comparator),yP=new Wr(At.comparator);function kn(...n){let e=yP;for(const t of n)e=e.add(t);return e}const lB=new Wr(Tn);function Xm(){return lB}function Zw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$m(e)?"-0":e}}function Xw(n){return{integerValue:""+n}}function vA(n,e){return xw(e)?Xw(e):Zw(n,e)}class Qm{constructor(){this._=void 0}}function yA(n,e,t){return n instanceof Rh?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Zy(i)&&(i=Xy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof ld?IA(n,e):n instanceof xh?IP(n,e):function(r,i){const o=Jm(r,i),c=EA(o)+EA(r.gt);return Uw(o)&&Uw(r.gt)?Xw(c):Zw(r.serializer,c)}(n,e)}function bp(n,e,t){return n instanceof ld?IA(n,e):n instanceof xh?IP(n,e):t}function Jm(n,e){return n instanceof Mh?Uw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Rh extends Qm{}class ld extends Qm{constructor(e){super(),this.elements=e}}function IA(n,e){const t=wA(e);for(const r of n.elements)t.some(i=>Zl(i,r))||t.push(r);return{arrayValue:{values:t}}}class xh extends Qm{constructor(e){super(),this.elements=e}}function IP(n,e){let t=wA(e);for(const r of n.elements)t=t.filter(i=>!Zl(i,r));return{arrayValue:{values:t}}}class Mh extends Qm{constructor(e,t){super(),this.serializer=e,this.gt=t}}function EA(n){return hi(n.integerValue||n.doubleValue)}function wA(n){return zm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class e_{constructor(e,t){this.field=e,this.transform=t}}class uB{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function c0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class u0{}function bA(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new kh(n.key,Nr.none()):new t_(n.key,n.data,Nr.none());{const t=n.data,r=qs.empty();let i=new Wr(Or.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);null===c&&o.length>1&&(o=o.popLast(),c=t.field(o)),null===c?r.delete(o):r.set(o,c),i=i.add(o)}return new Jc(n.key,r,new uo(i.toArray()),Nr.none())}}function dB(n,e,t){n instanceof t_?function(r,i,o){const c=r.value.clone(),f=CA(r.fieldTransforms,i,o.transformResults);c.setAll(f),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Jc?function(r,i,o){if(!c0(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=CA(r.fieldTransforms,i,o.transformResults),f=i.data;f.setAll(n_(r)),f.setAll(c),i.convertToFoundDocument(o.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function d0(n,e,t,r){return n instanceof t_?function(i,o,c,f){if(!c0(i.precondition,o))return c;const m=i.value.clone(),v=TA(i.fieldTransforms,f,o);return m.setAll(v),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jc?function(i,o,c,f){if(!c0(i.precondition,o))return c;const m=TA(i.fieldTransforms,f,o),v=o.data;return v.setAll(n_(i)),v.setAll(m),o.convertToFoundDocument(o.version,v).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,c0(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function hB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Jm(r.transform,i||null);null!=o&&(null===t&&(t=qs.empty()),t.set(r.field,o))}return t||null}function EP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Pm(t,r,(i,o)=>function cB(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ld&&r instanceof ld||t instanceof xh&&r instanceof xh?Pm(t.elements,r.elements,Zl):t instanceof Mh&&r instanceof Mh?Zl(t.gt,r.gt):t instanceof Rh&&r instanceof Rh);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class t_ extends u0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jc extends u0{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function n_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CA(n,e,t){const r=new Map;Zt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,f=e.data.field(o.field);r.set(o.field,bp(c,f,t[i]))}return r}function TA(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,yA(o,c,e))}return r}class kh extends u0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eu extends u0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&dB(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=d0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=d0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Kw();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=t.has(i.key)?null:f;const m=bA(c,f);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(Yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kn())}isEqual(e){return this.batchId===e.batchId&&Pm(this.mutations,e.mutations,(t,r)=>EP(t,r))&&Pm(this.baseMutations,e.baseMutations,(t,r)=>EP(t,r))}}class r_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Zt(e.mutations.length===r.length);let i=_A;const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new r_(e,t,r,i)}}class i_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qw{constructor(e,t){this.count=e,this.unchangedNames=t}}var fi,Bn;function bP(n){switch(n){default:return Bt();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function CP(n){if(void 0===n)return ki("GRPC error has no .code"),ze.UNKNOWN;switch(n){case fi.OK:return ze.OK;case fi.CANCELLED:return ze.CANCELLED;case fi.UNKNOWN:return ze.UNKNOWN;case fi.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case fi.INTERNAL:return ze.INTERNAL;case fi.UNAVAILABLE:return ze.UNAVAILABLE;case fi.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case fi.NOT_FOUND:return ze.NOT_FOUND;case fi.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case fi.ABORTED:return ze.ABORTED;case fi.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case fi.DATA_LOSS:return ze.DATA_LOSS;default:return Bt()}}(Bn=fi||(fi={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";class DA{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return s_}static getOrCreateInstance(){return null===s_&&(s_=new DA),s_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let s_=null;function SA(){return new TextEncoder}const TP=new gp([4294967295,4294967295],0);function AA(n){const e=SA().encode(n),t=new Gk;return t.update(e),new Uint8Array(t.digest())}function RA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gp([t,r],0),new gp([i,o],0)]}class f0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cp(`Invalid padding: ${t}`);if(r<0)throw new Cp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Cp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Cp(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=gp.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(gp.fromNumber(r)));return 1===i.compare(TP)&&(i=new gp([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=AA(e),[r,i]=RA(t);for(let o=0;o<this.hashCount;o++){const c=this.Et(r,i,o);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new f0(o,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=AA(e),[r,i]=RA(t);for(let o=0;o<this.hashCount;o++){const c=this.Et(r,i,o);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Cp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,o_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tp(Yt.min(),i,new Dr(Tn),ho(),kn())}}class o_{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new o_(r,t,kn(),kn(),kn())}}class p0{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class Jw{constructor(e,t){this.targetId=e,this.Vt=t}}class g0{constructor(e,t,r=Wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class DP{constructor(){this.St=0,this.Dt=MA(),this.Ct=Wi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=kn(),t=kn(),r=kn();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Bt()}}),new o_(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=MA()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class xA{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ho(),this.zt=m0(),this.Wt=new Dr(Tn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Bt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const c=o.target;if(e0(c))if(0===i){const f=new At(c.path);this.Yt(r,f,Sr.newNoDocument(f,Yt.min()))}else Zt(1===i);else{const f=this.ie(r);if(f!==i){const m=this.re(e,f);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=DA.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,C,S){var O,G,ne,Ne,Ye,Ct;const Pt={localCacheCount:C,existenceFilterCount:S.count},yt=S.unchangedNames;return yt&&(Pt.bloomFilter={applied:0===v,hashCount:null!==(O=null==yt?void 0:yt.hashCount)&&void 0!==O?O:0,bitmapLength:null!==(Ne=null===(ne=null===(G=null==yt?void 0:yt.bits)||void 0===G?void 0:G.bitmap)||void 0===ne?void 0:ne.length)&&void 0!==Ne?Ne:0,padding:null!==(Ct=null===(Ye=null==yt?void 0:yt.bits)||void 0===Ye?void 0:Ye.padding)&&void 0!==Ct?Ct:0}),Pt}(m,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:c=0},hashCount:f=0}=r;let m,v;try{m=sd(o).toUint8Array()}catch(C){if(C instanceof Ch)return va("Decoding the base64 bloom filter in existence filter failed ("+C.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw C}try{v=new f0(m,c,f)}catch(C){return va(C instanceof Cp?"BloomFilter error: ":"Applying bloom filter failed: ",C),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.vt(f)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,c)=>{const f=this.se(c);if(f){if(o.current&&e0(f.target)){const m=new At(f.target.path);null!==this.jt.get(m)||this.ae(c,m)||this.Yt(c,m,Sr.newNoDocument(m,e))}o.Mt&&(t.set(c,o.Ot()),o.Ft())}});let r=kn();this.zt.forEach((o,c)=>{let f=!0;c.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(o))}),this.jt.forEach((o,c)=>c.setReadTime(e));const i=new Tp(e,t,this.Wt,this.jt,r);return this.jt=ho(),this.zt=m0(),this.Wt=new Dr(Tn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new DP,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Wr(Tn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ht("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new DP),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function m0(){return new Dr(At.comparator)}function MA(){return new Dr(At.comparator)}const SP={asc:"ASCENDING",desc:"DESCENDING"},fB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pB={and:"AND",or:"OR"};class AP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eb(n,e){return n.useProto3Json||Um(e)?e:{value:e}}function Dp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PA(n,e){return Dp(n,e.toTimestamp())}function pi(n){return Zt(!!n),Yt.fromTimestamp(function(e){const t=Th(e);return new Qr(t.seconds,t.nanos)}(n))}function tb(n,e){return(t=n,new Wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nb(n){const e=Wn.fromString(n);return Zt(BA(e)),e}function Sp(n,e){return tb(n.databaseId,e.path)}function tu(n,e){const t=nb(e);if(t.get(1)!==n.databaseId.projectId)throw new at(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new at(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new At(ib(t))}function rb(n,e){return tb(n.databaseId,e)}function _0(n){const e=nb(n);return 4===e.length?Wn.emptyPath():ib(e)}function Ap(n){return new Wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ib(n){return Zt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function OA(n,e,t){return{name:Sp(n,e),fields:t.value.mapValue.fields}}function a_(n,e,t){const r=tu(n,e.name),i=pi(e.updateTime),o=e.createTime?pi(e.createTime):Yt.min(),c=new qs({mapValue:{fields:e.fields}}),f=Sr.newFoundDocument(r,i,o,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Rp(n,e){let t;if(e instanceof t_)t={update:OA(n,e.key,e.value)};else if(e instanceof kh)t={delete:Sp(n,e.key)};else if(e instanceof Jc)t={update:OA(n,e.key,e.data),updateMask:vB(e.fieldMask)};else{if(!(e instanceof eu))return Bt();t={verify:Sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Rh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ld)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof xh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Mh)return{fieldPath:o.field.canonicalString(),increment:c.gt};throw Bt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:PA(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Bt()),t;var i}function v0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Nr.updateTime(pi(i.updateTime)):void 0!==i.exists?Nr.exists(i.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,c){let f=null;"setToServerValue"in c?(Zt("REQUEST_TIME"===c.setToServerValue),f=new Rh):"appendMissingElements"in c?f=new ld(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new xh(c.removeAllFromArray.values||[]):"increment"in c?f=new Mh(o,c.increment):Bt();const m=Or.fromServerFormat(c.fieldPath);return new e_(m,f)}(n,i)):[];var i;if(e.update){const i=tu(n,e.update.name),o=new qs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new uo((e.updateMask.fieldPaths||[]).map(v=>Or.fromServerFormat(v)));return new Jc(i,o,c,t,r)}return new t_(i,o,t,r)}if(e.delete){const i=tu(n,e.delete);return new kh(i,t)}if(e.verify){const i=tu(n,e.verify);return new eu(i,t)}return Bt()}function NA(n,e){return{documents:[rb(n,e.path)]}}function LA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=rb(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=rb(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return OP(gr.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(m){if(0!==m.length)return m.map(v=>{return{field:Ph((C=v).field),direction:kP(C.dir)};var C})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=eb(n,e.limit);var f,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function FA(n){let e=_0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Zt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let o=[];t.where&&(o=function(C){const S=MP(C);return S instanceof gr&&Gw(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new Xc(l_((S=C).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(C){let S;return S="object"==typeof C?C.value:C,Um(S)?null:S}(t.limit));let m=null;var C;t.startAt&&(m=new Xl((C=t.startAt).values||[],!!C.before));let v=null;return t.endAt&&(v=function(C){return new Xl(C.values||[],!C.before)}(t.endAt)),n0(e,i,c,o,f,"F",m,v)}function MP(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=l_(e.unaryFilter.field);return Hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=l_(e.unaryFilter.field);return Hn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=l_(e.unaryFilter.field);return Hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=l_(e.unaryFilter.field);return Hn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(n):void 0!==n.fieldFilter?Hn.create(l_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return gr.create(e.compositeFilter.filters.map(t=>MP(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Bt()}}(e.compositeFilter.op))}(n):Bt();var e}function kP(n){return SP[n]}function PP(n){return fB[n]}function _B(n){return pB[n]}function Ph(n){return{fieldPath:n.canonicalString()}}function l_(n){return Or.fromServerFormat(n.fieldPath)}function OP(n){return n instanceof Hn?function(e){if("=="===e.op){if($w(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NAN"}};if(oP(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($w(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NOT_NAN"}};if(oP(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ph(e.field),op:PP(e.op),value:e.value}}}(n):n instanceof gr?function(e){const t=e.getFilters().map(r=>OP(r));return 1===t.length?t[0]:{compositeFilter:{op:_B(e.op),filters:t}}}(n):Bt()}function vB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BA(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class cd{constructor(e,t,r,i,o=Yt.min(),c=Yt.min(),f=Wi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new cd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class NP{constructor(e){this.fe=e}}function LP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:y0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sp(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Dp(i,o.version.toTimestamp()),createTime:Dp(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Oh(e.version)};else{if(!e.isUnknownDocument())return Bt();r.unknownDocument={path:t.path.toArray(),version:Oh(e.version)}}var i,o;return r}function y0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Oh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xp(n){const e=new Qr(n.seconds,n.nanoseconds);return Yt.fromTimestamp(e)}function s(n,e){const t=(e.baseMutations||[]).map(o=>v0(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>v0(n.fe,o)),i=Qr.fromMillis(e.localWriteTimeMs);return new h0(e.batchId,i,t,r)}function a(n){const e=xp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xp(n.lastLimboFreeSnapshotVersion):Yt.min();let r;var i;return void 0!==n.query.documents?(Zt(1===(i=n.query).documents.length),r=Ys(Ep(_0(i.documents[0])))):r=Ys(FA(n.query)),new cd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wi.fromBase64String(n.resumeToken))}function l(n,e){const t=Oh(e.snapshotVersion),r=Oh(e.lastLimboFreeSnapshotVersion);let i;i=e0(e.target)?NA(n.fe,e.target):LA(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ah(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function d(n){const e=FA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?o0(e,e.limit,"L"):e}function h(n,e){return new i_(e.largestBatchId,v0(n.fe,e.overlayMutation))}function g(n,e){const t=e.path.lastSegment();return[n,Is(e.path.popLast()),t]}function y(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Oh(r.readTime),documentKey:Is(r.documentKey.path),largestBatchId:r.largestBatchId}}class w{getBundleMetadata(e,t){return T(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:xp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return T(e).put({bundleId:(r=t).id,createTime:Oh(pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return A(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:d(i.bundledQuery),readTime:xp(i.readTime)};var i})}saveNamedQuery(e,t){return A(e).put({name:(r=t).name,readTime:Oh(pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function T(n){return Es(n,"bundles")}function A(n){return Es(n,"namedQueries")}class M{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new M(e,t.uid||"")}getOverlay(e,t){return B(e).get(g(this.userId,t)).next(r=>r?h(this.serializer,r):null)}getOverlays(e,t){const r=Jl();return Be.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const f=new i_(t,c);i.push(this.we(e,f))}),Be.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Is(c.getCollectionPath())));const o=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(B(e).J("collectionPathOverlayIndex",f))}),Be.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Jl(),o=Is(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return B(e).j("collectionPathOverlayIndex",c).next(f=>{for(const m of f){const v=h(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Jl();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return B(e).X({index:"collectionGroupOverlayIndex",range:f},(m,v,C)=>{const S=h(this.serializer,v);o.size()<i||S.largestBatchId===c?(o.set(S.getKey(),S),c=S.largestBatchId):C.done()}).next(()=>o)}we(e,t){return B(e).put(function(r,i,o){const[c,f,m]=g(i,o.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Rp(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function B(n){return Es(n,"documentOverlays")}class ee{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(hi(e.integerValue));else if("doubleValue"in e){const r=hi(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),$m(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(sd(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?aP(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Bt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),At.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Ee(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Je(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=Ee(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}ee.Ve=new ee;class dt{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=Je(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=Je(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class bt{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class zt{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class rt{constructor(){this.je=new dt,this.ze=new bt(this.je),this.We=new zt(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class sn{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sn(this.indexId,this.documentKey,this.arrayValue,r)}}function Dn(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Gn(n.arrayValue,e.arrayValue),0!==t?t:(t=Gn(n.directionalValue,e.directionalValue),0!==t?t:At.comparator(n.documentKey,e.documentKey)))}function Gn(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ea{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Zt(e.collectionGroup===this.collectionId);const t=zy(e);if(void 0!==t&&!this.en(t))return!1;const r=Yl(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[o];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++o}for(;o<r.length;++o)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Mp(n){var e,t;if(Zt(n instanceof Hn||n instanceof gr),n instanceof Hn){if(n instanceof cA){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Hn.create(n.field,"==",o)))||[];return gr.create(i,"or")}return n}const r=n.filters.map(i=>Mp(i));return gr.create(r,n.op)}function ud(n){if(0===n.getFilters().length)return[];const e=sb(Mp(n));return Zt(UA(e)),dd(e)||c_(e)?[e]:e.getFilters()}function dd(n){return n instanceof Hn}function c_(n){return n instanceof gr&&Gw(n)}function UA(n){return dd(n)||c_(n)||function(e){if(e instanceof gr&&Hw(e)){for(const t of e.getFilters())if(!dd(t)&&!c_(t))return!1;return!0}return!1}(n)}function sb(n){if(Zt(n instanceof Hn||n instanceof gr),n instanceof Hn)return n;if(1===n.filters.length)return sb(n.filters[0]);const e=n.filters.map(r=>sb(r));let t=gr.create(e,n.op);return t=$A(t),UA(t)?t:(Zt(t instanceof gr),Zt(Sh(t)),Zt(t.filters.length>1),t.filters.reduce((r,i)=>FP(r,i)))}function FP(n,e){let t;return Zt(n instanceof Hn||n instanceof gr),Zt(e instanceof Hn||e instanceof gr),t=n instanceof Hn?e instanceof Hn?gr.create([n,e],"and"):IB(n,e):e instanceof Hn?IB(e,n):function(r,i){if(Zt(r.filters.length>0&&i.filters.length>0),Sh(r)&&Sh(i))return Ip(r,i.getFilters());const o=Hw(r)?r:i,c=Hw(r)?i:r,f=o.filters.map(m=>FP(m,c));return gr.create(f,"or")}(n,e),$A(t)}function IB(n,e){if(Sh(e))return Ip(e,n.getFilters());{const t=e.filters.map(r=>FP(n,r));return gr.create(t,"or")}}function $A(n){if(Zt(n instanceof Hn||n instanceof gr),n instanceof Hn)return n;const e=n.getFilters();if(1===e.length)return $A(e[0]);if(sA(n))return n;const t=e.map(i=>$A(i)),r=[];return t.forEach(i=>{i instanceof Hn?r.push(i):i instanceof gr&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:gr.create(r,n.op)}class E6{constructor(){this.rn=new BP}addToCollectionParentIndex(e,t){return this.rn.add(t),Be.resolve()}getCollectionParents(e,t){return Be.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Be.resolve()}deleteFieldIndex(e,t){return Be.resolve()}getDocumentsMatchingTarget(e,t){return Be.resolve(null)}getIndexType(e,t){return Be.resolve(0)}getFieldIndexes(e,t){return Be.resolve([])}getNextCollectionGroupToUpdate(e){return Be.resolve(null)}getMinOffset(e,t){return Be.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return Be.resolve(Ws.min())}updateCollectionGroup(e,t,r){return Be.resolve()}updateIndexEntries(e,t){return Be.resolve()}}class BP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wr(Wn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wr(Wn.comparator)).toArray()}}const VA=new Uint8Array(0);class w6{constructor(e,t){this.user=e,this.databaseId=t,this.on=new BP,this.un=new Qc(r=>Ah(r),(r,i)=>qm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:Is(i)};return EB(e).put(o)}return Be.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[GS(t),""],!1,!0);return EB(e).j(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(ll(c.parent))}return r})}addFieldIndex(e,t){const r=jA(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const o=r.add(i);if(t.indexState){const c=ab(e);return o.next(f=>{c.put(y(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=jA(e),i=ab(e),o=ob(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ob(e);let i=!0;const o=new Map;return Be.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),o.set(c,f)})).next(()=>{if(i){let c=kn();const f=[];return Be.forEach(o,(m,v)=>{var C;ht("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(yt=>`${yt.fieldPath}:${yt.kind}`).join(",")}`} to execute ${Ah(t)}`);const S=function(yt,Ft){const nn=zy(Ft);if(void 0===nn)return null;for(const Rn of t0(yt,nn.fieldPath))switch(Rn.op){case"array-contains-any":return Rn.value.arrayValue.values||[];case"array-contains":return[Rn.value]}return null}(v,m),O=function(yt,Ft){const nn=new Map;for(const Rn of Yl(Ft))for(const Ni of t0(yt,Rn.fieldPath))switch(Ni.op){case"==":case"in":nn.set(Rn.fieldPath.canonicalString(),Ni.value);break;case"not-in":case"!=":return nn.set(Rn.fieldPath.canonicalString(),Ni.value),Array.from(nn.values())}return null}(v,m),G=function(yt,Ft){const nn=[];let Rn=!0;for(const Ni of Yl(Ft)){const ea=0===Ni.kind?uA(yt,Ni.fieldPath,yt.startAt):dA(yt,Ni.fieldPath,yt.startAt);nn.push(ea.value),Rn&&(Rn=ea.inclusive)}return new Xl(nn,Rn)}(v,m),ne=function(yt,Ft){const nn=[];let Rn=!0;for(const Ni of Yl(Ft)){const ea=0===Ni.kind?dA(yt,Ni.fieldPath,yt.endAt):uA(yt,Ni.fieldPath,yt.endAt);nn.push(ea.value),Rn&&(Rn=ea.inclusive)}return new Xl(nn,Rn)}(v,m),Ne=this.hn(m,v,G),Ye=this.hn(m,v,ne),Ct=this.ln(m,v,O),Pt=this.fn(m.indexId,S,Ne,G.inclusive,Ye,ne.inclusive,Ct);return Be.forEach(Pt,yt=>r.H(yt,t.limit).next(Ft=>{Ft.forEach(nn=>{const Rn=At.fromSegments(nn.documentKey);c.has(Rn)||(c=c.add(Rn),f.push(Rn))})}))}).next(()=>f)}return Be.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:ud(gr.create(e.filters,"and")).map(r=>Ww(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,c,f){const m=(null!=t?t.length:1)*Math.max(r.length,o.length),v=m/(null!=t?t.length:1),C=[];for(let S=0;S<m;++S){const O=t?this.dn(t[S/v]):VA,G=this.wn(e,O,r[S%v],i),ne=this._n(e,O,o[S%v],c),Ne=f.map(Ye=>this.wn(e,O,Ye,!0));C.push(...this.createRange(G,ne,Ne))}return C}wn(e,t,r,i){const o=new sn(e,At.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new sn(e,At.empty(),t,r);return i?o.Je():o}an(e,t){const r=new Ea(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const f of o)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return Be.forEach(i,o=>this.an(e,o).next(c=>{c?0!==r&&c.fields.length<function(f){let m=new Wr(Or.comparator),v=!1;for(const C of f.filters)for(const S of C.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field));for(const C of f.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new rt;for(const i of Yl(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const c=r.He(i.kind);ee.Ve._e(o,c)}return r.Qe()}dn(e){const t=new rt;return ee.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new rt;return ee.Ve._e(ad(this.databaseId,t),r.He(function(i){const o=Yl(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new rt);let o=0;for(const c of Yl(e)){const f=r[o++];for(const m of i)if(this.yn(t,c.fieldPath)&&zm(f))i=this.pn(i,c,f);else{const v=m.He(c.kind);ee.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const f of i){const m=new rt;m.seed(f.Qe()),ee.Ve._e(c,m.He(t.kind)),o.push(m)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof Hn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jA(e),i=ab(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const c=[];return Be.forEach(o,f=>i.get([f.indexId,this.uid]).next(m=>{c.push(function(v,C){const S=C?new Nm(C.sequenceNumber,new Ws(xp(C.readTime),new At(ll(C.documentKey)),C.largestBatchId)):Nm.empty(),O=v.fields.map(([G,ne])=>new Wy(Or.fromServerFormat(G),ne));return new Gy(v.indexId,v.collectionGroup,O,S)}(f,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Tn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=jA(e),o=ab(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>Be.forEach(f,m=>o.put(y(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return Be.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?Be.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Be.forEach(f,m=>this.En(e,i,m).next(v=>{const C=this.An(o,m);return v.isEqual(C)?Be.resolve():this.vn(e,o,m,v,C)}))))})}Rn(e,t,r,i){return ob(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return ob(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=ob(e);let o=new Wr(Dn);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{o=o.add(new sn(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>o)}An(e,t){let r=new Wr(Dn);const i=this.mn(t,e);if(null==i)return r;const o=zy(t);if(null!=o){const c=e.data.field(o.fieldPath);if(zm(c))for(const f of c.arrayValue.values||[])r=r.add(new sn(t.indexId,e.key,this.dn(f),i))}else r=r.add(new sn(t.indexId,e.key,VA,i));return r}vn(e,t,r,i,o){ht("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,m,v,C,S){const O=f.getIterator(),G=m.getIterator();let ne=yp(O),Ne=yp(G);for(;ne||Ne;){let Ye=!1,Ct=!1;if(ne&&Ne){const Pt=v(ne,Ne);Pt<0?Ct=!0:Pt>0&&(Ye=!0)}else null!=ne?Ct=!0:Ye=!0;Ye?(C(Ne),Ne=yp(G)):Ct?(S(ne),ne=yp(O)):(ne=yp(O),Ne=yp(G))}}(i,o,Dn,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),Be.waitFor(c)}Tn(e){let t=1;return ab(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Dn(c,f)).filter((c,f,m)=>!f||0!==Dn(c,m[f-1]));const i=[];i.push(e);for(const c of r){const f=Dn(c,e),m=Dn(c,t);if(0===f)i[0]=e.Je();else if(f>0&&m<0)i.push(c),i.push(c.Je());else if(m>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,VA,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,VA,[]]))}return o}bn(e,t){return Dn(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wB)}getMinOffset(e,t){return Be.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||Bt())).next(wB)}}function EB(n){return Es(n,"collectionParents")}function ob(n){return Es(n,"indexEntries")}function jA(n){return Es(n,"indexConfiguration")}function ab(n){return Es(n,"indexState")}function wB(n){Zt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Tw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ws(e.readTime,e.documentKey,t)}const bB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function CB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.X({range:c},(C,S,O)=>(f++,O.delete()));o.push(m.next(()=>{Zt(1===f)}));const v=[];for(const C of t.mutations){const S=Pw(e,C.key.path,t.batchId);o.push(i.delete(S)),v.push(C.key)}return Be.waitFor(o).next(()=>v)}function HA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Bt();e=n.noDocument}return JSON.stringify(e).length}xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(41943040,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);class GA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Zt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new GA(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kp(e).X({index:"userMutationsIndex",range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=I0(e),c=kp(e);return c.add({}).next(f=>{Zt("number"==typeof f);const m=new h0(f,t,r,i),v=function(O,G,ne){const Ne=ne.baseMutations.map(Ct=>Rp(O.fe,Ct)),Ye=ne.mutations.map(Ct=>Rp(O.fe,Ct));return{userId:G,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:Ne,mutations:Ye}}(this.serializer,this.userId,m),C=[];let S=new Wr((O,G)=>Tn(O.canonicalString(),G.canonicalString()));for(const O of i){const G=Pw(this.userId,O.key.path,f);S=S.add(O.key.path.popLast()),C.push(c.put(v)),C.push(o.put(G,ZS))}return S.forEach(O=>{C.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.Vn[f]=m.keys()}),Be.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return kp(e).get(t).next(r=>r?(Zt(r.userId===this.userId),s(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?Be.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return kp(e).X({index:"userMutationsIndex",range:i},(c,f,m)=>{f.userId===this.userId&&(Zt(f.batchId>=r),o=s(this.serializer,f)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return kp(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kp(e).j("userMutationsIndex",t).next(r=>r.map(i=>s(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return I0(e).X({range:i},(c,f,m)=>{const[v,C,S]=c,O=ll(C);if(v===this.userId&&t.path.isEqual(O))return kp(e).get(S).next(G=>{if(!G)throw Bt();Zt(G.userId===this.userId),o.push(s(this.serializer,G))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wr(Tn);const i=[];return t.forEach(o=>{const c=Yy(this.userId,o.path),f=IDBKeyRange.lowerBound(c),m=I0(e).X({range:f},(v,C,S)=>{const[O,G,ne]=v,Ne=ll(G);O===this.userId&&o.path.isEqual(Ne)?r=r.add(ne):S.done()});i.push(m)}),Be.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Yy(this.userId,r),c=IDBKeyRange.lowerBound(o);let f=new Wr(Tn);return I0(e).X({range:c},(m,v,C)=>{const[S,O,G]=m,ne=ll(O);S===this.userId&&r.isPrefixOf(ne)?ne.length===i&&(f=f.add(G)):C.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(kp(e).get(o).next(c=>{if(null===c)throw Bt();Zt(c.userId===this.userId),r.push(s(this.serializer,c))}))}),Be.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return CB(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Be.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Be.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return I0(e).X({range:r},(o,c,f)=>{if(o[0]===this.userId){const m=ll(o[1]);i.push(m)}else f.done()}).next(()=>{Zt(0===i.length)})})}containsKey(e,t){return TB(e,this.userId,t)}xn(e){return DB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function TB(n,e,t){const r=Yy(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return I0(n).X({range:o,Y:!0},(f,m,v)=>{const[C,S,O]=f;C===e&&S===i&&(c=!0),v.done()}).next(()=>c)}function kp(n){return Es(n,"mutations")}function I0(n){return Es(n,"documentMutations")}function DB(n){return Es(n,"mutationQueues")}class u_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new u_(0)}static Mn(){return new u_(-1)}}class b6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new u_(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Yt.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>E0(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Zt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return E0(e).X((c,f)=>{const m=a(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>Be.waitFor(o)).next(()=>i)}forEachTarget(e,t){return E0(e).X((r,i)=>{const o=a(i);t(o)})}$n(e){return SB(e).get("targetGlobalKey").next(t=>(Zt(null!==t),t))}On(e,t){return SB(e).put("targetGlobalKey",t)}Fn(e,t){return E0(e).put(l(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ah(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return E0(e).X({range:i,index:"queryTargetsIndex"},(c,f,m)=>{const v=a(f);qm(t,v.target)&&(o=v,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Pp(e);return t.forEach(c=>{const f=Is(c.path);i.push(o.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),Be.waitFor(i)}removeMatchingKeys(e,t,r){const i=Pp(e);return Be.forEach(t,o=>{const c=Is(o.path);return Be.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Pp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Pp(e);let o=kn();return i.X({range:r,Y:!0},(c,f,m)=>{const v=ll(c[1]),C=new At(v);o=o.add(C)}).next(()=>o)}containsKey(e,t){const r=Is(t.path),i=IDBKeyRange.bound([r],[GS(r)],!1,!0);let o=0;return Pp(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],m,v)=>{0!==c&&(o++,v.done())}).next(()=>o>0)}le(e,t){return E0(e).get(t).next(r=>r?a(r):null)}}function E0(n){return Es(n,"targets")}function SB(n){return Es(n,"targetGlobal")}function Pp(n){return Es(n,"targetDocuments")}function AB([n,e],[t,r]){const i=Tn(n,t);return 0===i?Tn(e,r):i}class C6{constructor(e){this.Ln=e,this.buffer=new Wr(AB),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();AB(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ht("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Te.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){id(r)?ht("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Wc(r)}yield t.Qn(3e5)}))}}class T6{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Be.resolve(Yo.ct);const r=new C6(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),Be.resolve(bB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bB):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,c,f,m,v;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(o=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),ww()<=ps.in.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${o} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-C}ms`),Be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:S})))}}class D6{constructor(e,t){this.db=e,this.garbageCollector=function xB(n,e){return new T6(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return zA(e,r)}removeReference(e,t,r){return zA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zA(e,t)}Xn(e,t){return function(r,i){let o=!1;return DB(r).Z(c=>TB(r,c,i).next(f=>(f&&(o=!0),Be.resolve(!f)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(c,f)=>{if(f<=t){const m=this.Xn(e,c).next(v=>{if(!v)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Yt.min()),Pp(e).delete([0,Is(c.path)])))});i.push(m)}}).next(()=>Be.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zA(e,t)}Yn(e,t){const r=Pp(e);let i,o=Yo.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:m,sequenceNumber:v})=>{0===c?(o!==Yo.ct&&t(new At(ll(i)),o),o=v,i=m):o=Yo.ct}).next(()=>{o!==Yo.ct&&t(new At(ll(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zA(n,e){return Pp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Is(e.path),sequenceNumber:r}));var r}class MB{constructor(){this.changes=new Qc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Be.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class S6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return d_(e).put(r)}removeEntry(e,t,r){return d_(e).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],y0(o),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Sr.newInvalidDocument(t);return d_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lb(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:Sr.newInvalidDocument(t)};return d_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lb(t))},(i,o)=>{r={document:this.ts(t,o),size:HA(o)}}).next(()=>r)}getEntries(e,t){let r=ho();return this.ns(e,t,(i,o)=>{const c=this.ts(i,o);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=ho(),i=new Dr(At.comparator);return this.ns(e,t,(o,c)=>{const f=this.ts(o,c);r=r.insert(o,f),i=i.insert(o,HA(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return Be.resolve();let i=new Wr(NB);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(lb(i.first()),lb(i.last())),c=i.getIterator();let f=c.getNext();return d_(e).X({index:"documentKeyIndex",range:o},(m,v,C)=>{const S=At.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&NB(f,S)<0;)r(f,null),f=c.getNext();f&&f.isEqual(S)&&(r(f,v),f=c.hasNext()?c.getNext():null),f?C.G(lb(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),y0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return d_(e).j(IDBKeyRange.bound(c,f,!0)).next(m=>{let v=ho();for(const C of m){const S=this.ts(At.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);S.isFoundDocument()&&(Ia(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let o=ho();const c=OB(t,r),f=OB(t,Ws.max());return d_(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(m,v,C)=>{const S=this.ts(At.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);o=o.insert(S.key,S),o.size===i&&C.done()}).next(()=>o)}newChangeBuffer(e){return new A6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PB(e).get("remoteDocumentGlobalKey").next(t=>(Zt(!!t),t))}Zn(e,t){return PB(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function yB(n,e){let t;if(e.document)t=a_(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=At.fromSegments(e.noDocument.path),i=xp(e.noDocument.readTime);t=Sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bt();{const r=At.fromSegments(e.unknownDocument.path),i=xp(e.unknownDocument.version);t=Sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qr(r[0],r[1]);return Yt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Yt.min()))return r}return Sr.newInvalidDocument(e)}}function kB(n){return new S6(n)}class A6 extends MB{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Qc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Wr((o,c)=>Tn(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const f=this.us.get(o);if(t.push(this.os.removeEntry(e,o,f.readTime)),c.isValidDocument()){const m=LP(this.os.serializer,c);i=i.add(o.path.popLast());const v=HA(m);r+=v-f.size,t.push(this.os.addEntry(e,o,m))}else if(r-=f.size,this.trackRemovals){const m=LP(this.os.serializer,c.convertToNoDocument(Yt.min()));t.push(this.os.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),Be.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,c)=>{this.us.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function PB(n){return Es(n,"remoteDocumentGlobal")}function d_(n){return Es(n,"remoteDocumentsV14")}function lb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OB(n,e){const t=e.documentKey.path.toArray();return[n,y0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function NB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Tn(t[o],r[o]),i)return i;return i=Tn(t.length,r.length),i||(i=Tn(t[t.length-2],r[r.length-2]),i||Tn(t[t.length-1],r[r.length-1]))}class R6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class LB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&d0(r.mutation,i,uo.empty(),Qr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kn()){const i=Jl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=Zm();return o.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Jl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kn()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let o=ho();const c=l0(),f=l0();return t.forEach((m,v)=>{const C=r.get(v.key);i.has(v.key)&&(void 0===C||C.mutation instanceof Jc)?o=o.insert(v.key,v):void 0!==C?(c.set(v.key,C.mutation.getFieldMask()),d0(C.mutation,v,C.mutation.getFieldMask(),Qr.now())):c.set(v.key,uo.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((v,C)=>c.set(v,C)),t.forEach((v,C)=>{var S;return f.set(v,new R6(C,null!==(S=c.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=l0();let i=new Dr((c,f)=>c-f),o=kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let C=r.get(m)||uo.empty();C=f.applyToLocalView(v,C),r.set(m,C);const S=(i.get(f.batchId)||kn()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,C=m.value,S=Kw();C.forEach(O=>{if(!o.has(O)){const G=bA(t.get(O),r.get(O));null!==G&&S.set(O,G),o=o.add(O)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,S))}return Be.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return At.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Be.resolve(Jl());let f=-1,m=o;return c.next(v=>Be.forEach(v,(C,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),o.get(C)?Be.resolve():this.remoteDocumentCache.getEntry(e,C).next(O=>{m=m.insert(C,O)}))).next(()=>this.populateOverlays(e,v,o)).next(()=>this.computeViews(e,m,v,kn())).next(C=>({batchId:f,changes:mA(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new At(t)).next(r=>{let i=Zm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Zm();return this.indexManager.getCollectionParents(e,i).next(c=>Be.forEach(c,f=>{const m=(v=t,C=f.child(i),new Ql(C,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,C;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((C,S)=>{o=o.insert(C,S)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((f,m)=>{const v=m.getKey();null===o.get(v)&&(o=o.insert(v,Sr.newInvalidDocument(v)))});let c=Zm();return o.forEach((f,m)=>{const v=i.get(f);void 0!==v&&d0(v.mutation,m,uo.empty(),Qr.now()),Ia(t,m)&&(c=c.insert(f,m))}),c})}}class x6{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Be.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:pi(r.createTime)}),Be.resolve()}getNamedQuery(e,t){return Be.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:d(r.bundledQuery),readTime:pi(r.readTime)}),Be.resolve();var r}}class M6{constructor(){this.overlays=new Dr(At.comparator),this.ls=new Map}getOverlay(e,t){return Be.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jl();return Be.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),Be.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),Be.resolve()}getOverlaysForCollection(e,t,r){const i=Jl(),o=t.length+1,c=new At(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Be.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Dr((v,C)=>v-C);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let C=o.get(v.largestBatchId);null===C&&(C=Jl(),o=o.insert(v.largestBatchId,C)),C.set(v.getKey(),v)}}const f=Jl(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,C)=>f.set(v,C)),!(f.size()>=i)););return Be.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new i_(t,r));let o=this.ls.get(t);void 0===o&&(o=kn(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class UP{constructor(){this.fs=new Wr(Ks.ds),this.ws=new Wr(Ks._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ks(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ks(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new At(new Wn([])),r=new Ks(t,e),i=new Ks(t,e+1),o=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),o.push(c.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new At(new Wn([])),r=new Ks(t,e),i=new Ks(t,e+1);let o=kn();return this.ws.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Ks(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ks{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return At.comparator(e.key,t.key)||Tn(e.As,t.As)}static _s(e,t){return Tn(e.As,t.As)||At.comparator(e.key,t.key)}}class k6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Wr(Ks.ds)}checkEmpty(e){return Be.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const c=new h0(o,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new Ks(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Be.resolve(c)}lookupMutationBatch(e,t){return Be.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return Be.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Be.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ks(t,0),i=new Ks(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);o.push(f)}),Be.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wr(Tn);return t.forEach(i=>{const o=new Ks(i,0),c=new Ks(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,c],f=>{r=r.add(f.As)})}),Be.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;At.isDocumentKey(o)||(o=o.child(""));const c=new Ks(new At(o),0);let f=new Wr(Tn);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.As)),!0)},c),Be.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Zt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Be.forEach(t.mutations,i=>{const o=new Ks(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ks(t,0),i=this.Rs.firstAfterOrEqual(r);return Be.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Be.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class P6{constructor(e){this.Ds=e,this.docs=new Dr(At.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Be.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(t))}getEntries(e,t){let r=ho();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sr.newInvalidDocument(i))}),Be.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ho();const c=t.path,f=new At(c.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:C}}=m.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Tw(Cw(C),r)<=0||(i.has(C.key)||Ia(t,C))&&(o=o.insert(C.key,C.mutableCopy()))}return Be.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Bt()}Cs(e,t){return Be.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new O6(this)}getSize(e){return Be.resolve(this.size)}}class O6 extends MB{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Be.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class N6{constructor(e){this.persistence=e,this.xs=new Qc(t=>Ah(t),qm),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new UP,this.targetCount=0,this.Ms=u_.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),Be.resolve()}getLastRemoteSnapshotVersion(e){return Be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Be.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),Be.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new u_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Be.resolve()}updateTargetData(e,t){return this.Fn(t),Be.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Be.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Be.waitFor(o).next(()=>i)}getTargetCount(e){return Be.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return Be.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),Be.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),Be.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Be.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return Be.resolve(r)}containsKey(e,t){return Be.resolve(this.ks.containsKey(t))}}class $P{constructor(e,t){this.$s={},this.overlays={},this.Os=new Yo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new N6(this),this.indexManager=new E6,this.remoteDocumentCache=new P6(r=>this.referenceDelegate.Ls(r)),this.serializer=new NP(t),this.qs=new x6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new k6(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ht("MemoryPersistence","Starting transaction:",e);const i=new L6(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return Be.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class L6 extends Dw{constructor(e){super(),this.currentSequenceNumber=e}}class WA{constructor(e){this.persistence=e,this.Qs=new UP,this.js=null}static zs(e){return new WA(e)}get Ws(){if(this.js)return this.js;throw Bt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),Be.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),Be.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Be.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.Ws,r=>{const i=At.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,Yt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Be.or([()=>Be.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class F6{constructor(e){this.serializer=e}O(e,t,r,i){const o=new qy("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kw,{unique:!0}),f.createObjectStore("documentMutations"),FB(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=Be.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),FB(e)),c=c.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,m){return m.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kw,{unique:!0});const C=m.store("mutations"),S=v.map(O=>C.put(O));return Be.waitFor(S)})}(e,o))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(o))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(o))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,o))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(o))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:nB});m.createIndex("collectionPathOverlayIndex",rB,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",iB,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:eP});m.createIndex("documentKeyIndex",XS),m.createIndex("collectionGroupIndex",tP)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,o))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:eB}).createIndex("sequenceNumberIndex",tB,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:QS}).createIndex("documentKeyIndex",Ow,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=HA(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>Be.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>Be.forEach(f,m=>{Zt(m.userId===o.userId);const v=s(this.serializer,m);return CB(e,o.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((c,f)=>{const m=new Wn(c),v=[0,Is(m)];o.push(t.get(v).next(C=>C?Be.resolve():t.put({targetId:0,path:Is(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Be.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:rP});const r=t.store("collectionParents"),i=new BP,o=c=>{if(i.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:Is(m)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const m=new Wn(c);return o(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,m],v)=>{const C=ll(f);return o(C.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=a(i),c=l(this.serializer,o);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,c)=>{const f=t.store("remoteDocumentsV14"),m=(v=c,v.document?new At(Wn.fromString(v.document.name).popFirst(5)):v.noDocument?At.fromSegments(v.noDocument.path):v.unknownDocument?At.fromSegments(v.unknownDocument.path):Bt()).path.toArray();var v;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(C))}).next(()=>Be.waitFor(i))}si(e,t){const r=t.store("mutations"),i=kB(this.serializer),o=new $P(WA.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(m=>{var v;let C=null!==(v=f.get(m.userId))&&void 0!==v?v:kn();s(this.serializer,m).keys().forEach(S=>C=C.add(S)),f.set(m.userId,C)}),Be.forEach(f,(m,v)=>{const C=new ys(v),S=M.de(this.serializer,C),O=o.getIndexManager(C),G=GA.de(C,this.serializer,O,o.referenceDelegate);return new LB(i,G,S,O).recalculateAndSaveOverlaysForDocumentKeys(new Nw(t,Yo.ct),m).next()})})}}function FB(n){n.createObjectStore("targetDocuments",{keyPath:_p}).createIndex("documentTargetsIndex",nP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",co,{unique:!0}),n.createObjectStore("targetGlobal")}const VP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jP{constructor(e,t,r,i,o,c,f,m,v,C,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=c,this.document=f,this.ri=v,this.oi=C,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=O=>Promise.resolve(),!jP.D())throw new at(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new D6(this,i),this.di=t+"main",this.serializer=new NP(m),this.wi=new ya(this.di,this.ui,new F6(this.serializer)),this.Bs=new b6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kB(this.serializer),this.qs=new w,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===C&&ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new at(ze.FAILED_PRECONDITION,VP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Yo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(id(e))return ht("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ht("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return cb(e).get("owner").next(t=>Be.resolve(this.Ri(t)))}Pi(e){return YA(e).delete(this.clientId)}bi(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Es(r,"clientMetadata");return i.j().next(o=>{const c=e.Si(o,18e5),f=o.filter(m=>-1===c.indexOf(m));return Be.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Be.resolve(!0):cb(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new at(ze.FAILED_PRECONDITION,VP);return!1}}return!(!this.networkEnabled||!this.inForeground)||YA(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ht("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Nw(t,Yo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>YA(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return GA.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new w6(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return M.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ht("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(c=this.ui)?eA:14===c?JS:13===c?Ky:12===c?iP:11===c?vp:void Bt();var c;let f;return this.wi.runTransaction(e,i,o,m=>(f=new Nw(m,this.Os?this.Os.next():Yo.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new at(ze.FAILED_PRECONDITION,qS);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Oi(e){return cb(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new at(ze.FAILED_PRECONDITION,VP)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cb(e).put("owner",t)}static D(){return ya.D()}Ai(e){const t=cb(e);return t.get("owner").next(r=>this.Ri(r)?(ht("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Be.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ki(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,U.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ht("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ki("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ki("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cb(n){return Es(n,"owner")}function YA(n){return Es(n,"clientMetadata")}function HP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class GP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=kn(),i=kn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new GP(e,t.fromCache,r,i)}}class BB{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(hA(t))return Be.resolve(null);let r=Ys(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=o0(t,null,"F"),r=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=kn(...o);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,f);return this.zi(t,v,c,m.readTime)?this.Ki(e,o0(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return hA(t)||i.isEqual(Yt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const c=this.ji(t,o);return this.zi(t,c,r,i)?this.Qi(e,t):(ww()<=ps.in.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Km(t)),this.Wi(e,c,t,WS(i,-1)))})}ji(e,t){let r=new Wr(a0(e));return t.forEach((i,o)=>{Ia(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return ww()<=ps.in.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",Km(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ws.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}class B6{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Dr(Tn),this.Yi=new Qc(o=>Ah(o),qm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LB(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function UB(n,e,t,r){return new B6(n,e,t,r)}function $B(n,e){return zP.apply(this,arguments)}function zP(){return zP=(0,Te.Z)(function*(n,e){const t=kt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],f=[];let m=kn();for(const v of i){c.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}for(const v of o){f.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:c,addedBatchIds:f}))})})}),zP.apply(this,arguments)}function VB(n){const e=kt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function jB(n,e,t){let r=kn(),i=kn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=ho();return t.forEach((f,m)=>{const v=o.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Yt.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):ht("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{nr:c,sr:i}})}function V6(n,e){const t=kt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function w0(n,e){const t=kt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,Be.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new cd(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function b0(n,e,t){return WP.apply(this,arguments)}function WP(){return WP=(0,Te.Z)(function*(n,e,t){const r=kt(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!id(c))throw c;ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),WP.apply(this,arguments)}function KA(n,e,t){const r=kt(n);let i=Yt.min(),o=kn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,m,v){const C=kt(f),S=C.Yi.get(v);return void 0!==S?Be.resolve(C.Ji.get(S)):C.Bs.getTargetData(m,v)}(r,c,Ys(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(m=>{o=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:Yt.min(),t?o:kn())).next(f=>(zB(r,qw(e),f),{documents:f,ir:o})))}function HB(n,e){const t=kt(n),r=kt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(c=>c?c.target:null))}function GB(n,e){const t=kt(n),r=t.Xi.get(e)||Yt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,WS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zB(t,e,i),i))}function zB(n,e,t){let r=n.Xi.get(e)||Yt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function qP(){return qP=(0,Te.Z)(function*(n,e,t,r){const i=kt(n);let o=kn(),c=ho();for(const v of t){const C=e.rr(v.metadata.name);v.document&&(o=o.add(C));const S=e.ur(v);S.setReadTime(e.cr(v.metadata.readTime)),c=c.insert(C,S)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield w0(i,(v=r,Ys(Ep(Wn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>jB(v,f,c).next(C=>(f.apply(v),C)).next(C=>i.Bs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Bs.addMatchingKeys(v,o,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,C.nr,C.sr)).next(()=>C.nr)))}),qP.apply(this,arguments)}function H6(n,e){return YP.apply(this,arguments)}function YP(){return YP=(0,Te.Z)(function*(n,e,t=kn()){const r=yield w0(n,Ys(d(e.bundledQuery))),i=kt(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=pi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(o,e);const f=r.withResumeToken(Wi.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(o,f).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),YP.apply(this,arguments)}function WB(n,e){return`firestore_clients_${n}_${e}`}function qB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function KP(n,e){return`firestore_targets_${n}_${e}`}class ZA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new at(i.error.code,i.error.message))),c?new ZA(e,t,i.state,o):(ki("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ub{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new at(r.error.code,r.error.message))),o?new ub(e,r.state,i):(ki("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Xm();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=xw(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new XA(e,o):(ki("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ZP{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ZP(t.clientId,t.onlineState):(ki("SharedClientState",`Failed to parse online state: ${e}`),null)}}class XP{constructor(){this.activeTargetIds=Xm()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QP{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Dr(Tn),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=WB(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new XP),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(WB(e.persistenceKey,i));if(o){const c=XA.ar(i,o);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(KP(this.persistenceKey,e));if(r){const i=ub.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(KP(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ht("SharedClientState","READ",e,t),t}setItem(e,t){ht("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ht("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ht("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let c=Yo.ct;if(null!=o)try{const f=JSON.parse(o);Zt("number"==typeof f),c=f}catch(f){ki("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Yo.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new ZA(this.currentUser,e,t,r),o=qB(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=qB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=KP(this.persistenceKey,e),o=new ub(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return XA.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return ZA.ar(new ys(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return ub.ar(i,t)}br(e){return ZP.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ht("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),c=[],f=[];return o.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{o.has(m)||f.push(m)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Xm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class YB{constructor(){this.Hr=new XP,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new XP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class G6{Yr(e){}shutdown(){}}class KB{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let QA=null;function JP(){return null===QA?QA=268435456+Math.round(2147483648*Math.random()):QA++,"0x"+QA.toString(16)}const z6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W6{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Mo="WebChannelConnection";class q6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const c=JP(),f=this.To(e,t);ht("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const m={};return this.Eo(m,i,o),this.Ao(e,f,m,r).then(v=>(ht("RestConnection",`Received RPC '${e}' ${c}: `,v),v),v=>{throw va("RestConnection",`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,o,c){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${z6[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=JP();return new Promise((c,f)=>{const m=new X2;m.setWithCredentials(!0),m.listenOnce($S.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case yw.NO_ERROR:const C=m.getResponseJson();ht(Mo,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(C)),c(C);break;case yw.TIMEOUT:ht(Mo,`RPC '${e}' ${o} timed out`),f(new at(ze.DEADLINE_EXCEEDED,"Request time out"));break;case yw.HTTP_ERROR:const S=m.getStatus();if(ht(Mo,`RPC '${e}' ${o} failed with status:`,S,"response text:",m.getResponseText()),S>0){let O=m.getResponseJson();Array.isArray(O)&&(O=O[0]);const G=null==O?void 0:O.error;if(G&&G.status&&G.message){const ne=function(Ne){const Ye=Ne.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(Ye)>=0?Ye:ze.UNKNOWN}(G.status);f(new at(ne,G.message))}else f(new at(ze.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new at(ze.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{ht(Mo,`RPC '${e}' ${o} completed.`)}});const v=JSON.stringify(i);ht(Mo,`RPC '${e}' ${o} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=JP(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Vk(),f=jk(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new Hk({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const C=o.join("");ht(Mo,`Creating RPC '${e}' stream ${i}: ${C}`,m);const S=c.createWebChannel(C,m);let O=!1,G=!1;const ne=new W6({ro:Ye=>{G?ht(Mo,`Not sending because RPC '${e}' stream ${i} is closed:`,Ye):(O||(ht(Mo,`Opening RPC '${e}' stream ${i} transport.`),S.open(),O=!0),ht(Mo,`RPC '${e}' stream ${i} sending:`,Ye),S.send(Ye))},oo:()=>S.close()}),Ne=(Ye,Ct,Pt)=>{Ye.listen(Ct,yt=>{try{Pt(yt)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return Ne(S,Vy.EventType.OPEN,()=>{G||ht(Mo,`RPC '${e}' stream ${i} transport opened.`)}),Ne(S,Vy.EventType.CLOSE,()=>{G||(G=!0,ht(Mo,`RPC '${e}' stream ${i} transport closed`),ne.wo())}),Ne(S,Vy.EventType.ERROR,Ye=>{G||(G=!0,va(Mo,`RPC '${e}' stream ${i} transport errored:`,Ye),ne.wo(new at(ze.UNAVAILABLE,"The operation could not be completed")))}),Ne(S,Vy.EventType.MESSAGE,Ye=>{var Ct;if(!G){const Pt=Ye.data[0];Zt(!!Pt);const Ft=Pt.error||(null===(Ct=Pt[0])||void 0===Ct?void 0:Ct.error);if(Ft){ht(Mo,`RPC '${e}' stream ${i} received error:`,Ft);const nn=Ft.status;let Rn=function(ea){const Ed=fi[ea];if(void 0!==Ed)return CP(Ed)}(nn),Ni=Ft.message;void 0===Rn&&(Rn=ze.INTERNAL,Ni="Unknown error status: "+nn+" with message "+Ft.message),G=!0,ne.wo(new at(Rn,Ni)),S.close()}else ht(Mo,`RPC '${e}' stream ${i} received:`,Pt),ne._o(Pt)}}),Ne(f,Z2.STAT_EVENT,Ye=>{Ye.stat===Iw.PROXY?ht(Mo,`RPC '${e}' stream ${i} detected buffering proxy`):Ye.stat===Iw.NOPROXY&&ht(Mo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{ne.fo()},0),ne}}function ZB(){return typeof window<"u"?window:null}function JA(){return typeof document<"u"?document:null}function db(n){return new AP(n,!0)}class eO{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&ht("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class XB{constructor(e,t,r,i,o,c,f,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new eO(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Te.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Te.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ze.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ze.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new at(ze.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Te.Z)(function*(){e.state=0,e.start()}))}tu(e){return ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Y6 extends XB{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function xP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:Bt(),i=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(Zt(void 0===v||"string"==typeof v),Wi.fromBase64String(v||"")):(Zt(void 0===v||v instanceof Uint8Array),Wi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(m){const v=void 0===m.code?ze.UNKNOWN:CP(m.code);return new at(v,m.message||"")}(c);t=new g0(r,i,o,f||null)}else if("documentChange"in e){const r=e.documentChange,i=tu(n,r.document.name),o=pi(r.document.updateTime),c=r.document.createTime?pi(r.document.createTime):Yt.min(),f=new qs({mapValue:{fields:r.document.fields}}),m=Sr.newFoundDocument(i,o,c,f);t=new p0(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=tu(n,r.document),o=r.readTime?pi(r.readTime):Yt.min(),c=Sr.newNoDocument(i,o);t=new p0([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=tu(n,r.document);t=new p0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Bt();{const r=e.filter,{count:i=0,unchangedNames:o}=r,c=new Qw(i,o);t=new Jw(r.targetId,c)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Yt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Yt.min():o.readTime?pi(o.readTime):Yt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Ap(this.serializer),t.addTarget=function(i,o){let c;const f=o.target;if(c=e0(f)?{documents:NA(i,f)}:{query:LA(i,f)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=kA(i,o.resumeToken);const m=eb(i,o.expectedCount);null!==m&&(c.expectedCount=m)}else if(o.snapshotVersion.compareTo(Yt.min())>0){c.readTime=Dp(i,o.snapshotVersion.toTimestamp());const m=eb(i,o.expectedCount);null!==m&&(c.expectedCount=m)}return c}(this.serializer,e);const r=function mB(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Ap(this.serializer),t.removeTarget=e,this.Wo(t)}}class K6 extends XB{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function gB(n,e){return n&&n.length>0?(Zt(void 0!==e),n.map(t=>function(r,i){let o=pi(r.updateTime?r.updateTime:i);return o.isEqual(Yt.min())&&(o=pi(i)),new uB(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.cu(r,t)}return Zt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ap(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Rp(this.serializer,r))};this.Wo(t)}}class Z6 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new at(ze.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new at(ze.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.vo(e,t,r,o,c,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new at(ze.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class Q6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ki(t),this.mu=!1):ht("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class J6{constructor(e,t,r,i,o){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(f=>{r.enqueueAndForget((0,Te.Z)(function*(){var m;Op(c)&&(ht("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Te.Z)(function*(v){const C=kt(v);C.vu.add(4),yield C0(C),C.bu.set("Unknown"),C.vu.delete(4),yield hb(C)}),function(v){return m.apply(this,arguments)})(c))}))}),this.bu=new Q6(r,i)}}function hb(n){return nO.apply(this,arguments)}function nO(){return nO=(0,Te.Z)(function*(n){if(Op(n))for(const e of n.Ru)yield e(!0)}),nO.apply(this,arguments)}function C0(n){return rO.apply(this,arguments)}function rO(){return rO=(0,Te.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),rO.apply(this,arguments)}function eR(n,e){const t=kt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),oO(t)?sO(t):D0(t).Ko()&&iO(t,e))}function fb(n,e){const t=kt(n),r=D0(t);t.Au.delete(e),r.Ko()&&QB(t,e),0===t.Au.size&&(r.Ko()?r.jo():Op(t)&&t.bu.set("Unknown"))}function iO(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}D0(n).su(e)}function QB(n,e){n.Vu.qt(e),D0(n).iu(e)}function sO(n){n.Vu=new xA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),D0(n).start(),n.bu.gu()}function oO(n){return Op(n)&&!D0(n).Uo()&&n.Au.size>0}function Op(n){return 0===kt(n).vu.size}function JB(n){n.Vu=void 0}function e4(n){return aO.apply(this,arguments)}function aO(){return aO=(0,Te.Z)(function*(n){n.Au.forEach((e,t)=>{iO(n,e)})}),aO.apply(this,arguments)}function t4(n,e){return lO.apply(this,arguments)}function lO(){return lO=(0,Te.Z)(function*(n,e){JB(n),oO(n)?(n.bu.Iu(e),sO(n)):n.bu.set("Unknown")}),lO.apply(this,arguments)}function n4(n,e,t){return cO.apply(this,arguments)}function cO(){return cO=(0,Te.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof g0&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,o){const c=o.cause;for(const f of o.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tR(n,r)}else if(e instanceof p0?n.Vu.Ht(e):e instanceof Jw?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Yt.min()))try{const r=yield VB(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const c=i.Vu.ce(o);return c.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(f.resumeToken,o))}}),c.targetMismatches.forEach((f,m)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(Wi.EMPTY_BYTE_STRING,v.snapshotVersion)),QB(i,f);const C=new cd(v.target,f,m,v.sequenceNumber);iO(i,C)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ht("RemoteStore","Failed to raise snapshot:",r),yield tR(n,r)}var r}),cO.apply(this,arguments)}function tR(n,e,t){return uO.apply(this,arguments)}function uO(){return uO=(0,Te.Z)(function*(n,e,t){if(!id(e))throw e;n.vu.add(1),yield C0(n),n.bu.set("Offline"),t||(t=()=>VB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){ht("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield hb(n)}))}),uO.apply(this,arguments)}function eU(n,e){return e().catch(t=>tR(n,t,e))}function T0(n){return dO.apply(this,arguments)}function dO(){return dO=(0,Te.Z)(function*(n){const e=kt(n),t=Np(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;r4(e);)try{const i=yield V6(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,i4(e,i)}catch(i){yield tR(e,i)}tU(e)&&nU(e)}),dO.apply(this,arguments)}function r4(n){return Op(n)&&n.Eu.length<10}function i4(n,e){n.Eu.push(e);const t=Np(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function tU(n){return Op(n)&&!Np(n).Uo()&&n.Eu.length>0}function nU(n){Np(n).start()}function s4(n){return hO.apply(this,arguments)}function hO(){return hO=(0,Te.Z)(function*(n){Np(n).hu()}),hO.apply(this,arguments)}function o4(n){return fO.apply(this,arguments)}function fO(){return fO=(0,Te.Z)(function*(n){const e=Np(n);for(const t of n.Eu)e.uu(t.mutations)}),fO.apply(this,arguments)}function a4(n,e,t){return pO.apply(this,arguments)}function pO(){return pO=(0,Te.Z)(function*(n,e,t){const r=n.Eu.shift(),i=r_.from(r,e,t);yield eU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield T0(n)}),pO.apply(this,arguments)}function l4(n,e){return gO.apply(this,arguments)}function gO(){return gO=(0,Te.Z)(function*(n,e){var t;e&&Np(n).ou&&(yield(t=(0,Te.Z)(function*(r,i){if(bP(o=i.code)&&o!==ze.ABORTED){const c=r.Eu.shift();Np(r).Qo(),yield eU(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield T0(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),tU(n)&&nU(n)}),gO.apply(this,arguments)}function rU(n,e){return mO.apply(this,arguments)}function mO(){return mO=(0,Te.Z)(function*(n,e){const t=kt(n);t.asyncQueue.verifyOperationInProgress(),ht("RemoteStore","RemoteStore received new credentials");const r=Op(t);t.vu.add(3),yield C0(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield hb(t)}),mO.apply(this,arguments)}function _O(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,Te.Z)(function*(n,e){const t=kt(n);e?(t.vu.delete(2),yield hb(t)):e||(t.vu.add(2),yield C0(t),t.bu.set("Unknown"))}),vO.apply(this,arguments)}function D0(n){return n.Su||(n.Su=function(e,t,r){const i=kt(e);return i.fu(),new Y6(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:e4.bind(null,n),ao:t4.bind(null,n),nu:n4.bind(null,n)}),n.Ru.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Su.Qo(),oO(n)?sO(n):n.bu.set("Unknown")):(yield n.Su.stop(),JB(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Np(n){return n.Du||(n.Du=function(e,t,r){const i=kt(e);return i.fu(),new K6(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:s4.bind(null,n),ao:l4.bind(null,n),au:o4.bind(null,n),cu:a4.bind(null,n)}),n.Ru.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Du.Qo(),yield T0(n)):(yield n.Du.stop(),n.Eu.length>0&&(ht("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class yO{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,f=new yO(e,t,c,i,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new at(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S0(n,e){if(ki("AsyncQueue",`${e}: ${n}`),id(n))return new at(ze.UNAVAILABLE,`${e}: ${n}`);throw n}class A0{constructor(e){this.comparator=e?(t,r)=>e(t,r)||At.comparator(t.key,r.key):(t,r)=>At.comparator(t.key,r.key),this.keyedMap=Zm(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new A0(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof A0)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new A0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class iU{constructor(){this.Cu=new Dr(At.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Bt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class R0{constructor(e,t,r,i,o,c,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new R0(e,t,A0.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class c4{constructor(){this.Nu=void 0,this.listeners=[]}}class u4{constructor(){this.queries=new Qc(e=>pA(e),wp),this.onlineState="Unknown",this.ku=new Set}}function IO(n,e){return EO.apply(this,arguments)}function EO(){return EO=(0,Te.Z)(function*(n,e){const t=kt(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new c4),i)try{o.Nu=yield t.onListen(r)}catch(c){const f=S0(c,`Initialization of query '${Km(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&CO(t)}),EO.apply(this,arguments)}function wO(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,Te.Z)(function*(n,e){const t=kt(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),bO.apply(this,arguments)}function d4(n,e){const t=kt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&CO(t)}function h4(n,e,t){const r=kt(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function CO(n){n.ku.forEach(e=>{e.next()})}class TO{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new R0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=R0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class f4{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class sU{constructor(e){this.serializer=e}rr(e){return tu(this.serializer,e)}ur(e){return e.metadata.exists?a_(this.serializer,e.document,!1):Sr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return pi(e)}}class p4{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=oU(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Wn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new sU(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||kn()).add(o);t.set(c,f)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function j6(n,e,t,r){return qP.apply(this,arguments)}(e.localStore,new sU(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield H6(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function oU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class aU{constructor(e){this.key=e}}class lU{constructor(e){this.key=e}}class cU{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=kn(),this.mutatedKeys=kn(),this.tc=a0(e),this.ec=new A0(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new iU,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const O=i.get(C),G=Ia(this.query,S)?S:null,ne=!!O&&this.mutatedKeys.has(O.key),Ne=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ye=!1;O&&G?O.data.isEqual(G.data)?ne!==Ne&&(r.track({type:3,doc:G}),Ye=!0):this.rc(O,G)||(r.track({type:2,doc:G}),Ye=!0,(m&&this.tc(G,m)>0||v&&this.tc(G,v)<0)&&(f=!0)):!O&&G?(r.track({type:0,doc:G}),Ye=!0):O&&!G&&(r.track({type:1,doc:O}),Ye=!0,(m||v)&&(f=!0)),Ye&&(G?(c=c.add(G),o=Ne?o.add(C):o.delete(C)):(c=c.delete(C),o=o.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),o=o.delete(C.key),r.track({type:1,doc:C})}return{ec:c,ic:r,zi:f,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((v,C)=>function(S,O){const G=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return G(S)-G(O)}(v.type,C.type)||this.tc(v.doc,C.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,m=f!==this.Xu;return this.Xu=f,0!==o.length||m?{snapshot:new R0(this.query,e.ec,i,o,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new iU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=kn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new lU(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new aU(r))}),t}hc(e){this.Yu=e.ir,this.Zu=kn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return R0.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class g4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class m4{constructor(e){this.key=e,this.fc=!1}}class _4{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Qc(f=>pA(f),wp),this._c=new Map,this.mc=new Set,this.gc=new Dr(At.comparator),this.yc=new Map,this.Ic=new UP,this.Tc={},this.Ec=new Map,this.Ac=u_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function v4(n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,Te.Z)(function*(n,e){const t=KO(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const c=yield w0(t.localStore,Ys(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield SO(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&eR(t.remoteStore,c)}return i}),DO.apply(this,arguments)}function SO(n,e,t,r,i){return AO.apply(this,arguments)}function AO(){return AO=(0,Te.Z)(function*(n,e,t,r,i){n.Rc=(S,O,G)=>{return(ne=(0,Te.Z)(function*(Ne,Ye,Ct,Pt){let yt=Ye.view.sc(Ct);yt.zi&&(yt=yield KA(Ne.localStore,Ye.query,!1).then(({documents:Rn})=>Ye.view.sc(Rn,yt)));const Ft=Pt&&Pt.targetChanges.get(Ye.targetId),nn=Ye.view.applyChanges(yt,Ne.isPrimaryClient,Ft);return BO(Ne,Ye.targetId,nn.cc),nn.snapshot}),function(Ne,Ye,Ct,Pt){return ne.apply(this,arguments)})(n,S,O,G);var ne};const o=yield KA(n.localStore,e,!0),c=new cU(e,o.ir),f=c.sc(o.documents),m=o_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=c.applyChanges(f,n.isPrimaryClient,m);BO(n,t,v.cc);const C=new g4(e,t,c);return n.wc.set(e,C),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),AO.apply(this,arguments)}function y4(n,e){return RO.apply(this,arguments)}function RO(){return RO=(0,Te.Z)(function*(n,e){const t=kt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!wp(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield b0(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),fb(t.remoteStore,r.targetId),x0(t,r.targetId)}).catch(Wc))):(x0(t,r.targetId),yield b0(t.localStore,r.targetId,!0))}),RO.apply(this,arguments)}function xO(){return xO=(0,Te.Z)(function*(n,e,t){const r=ZO(n);try{const i=yield function(o,c){const f=kt(o),m=Qr.now(),v=c.reduce((O,G)=>O.add(G.key),kn());let C,S;return f.persistence.runTransaction("Locally write mutations","readwrite",O=>{let G=ho(),ne=kn();return f.Zi.getEntries(O,v).next(Ne=>{G=Ne,G.forEach((Ye,Ct)=>{Ct.isValidDocument()||(ne=ne.add(Ye))})}).next(()=>f.localDocuments.getOverlayedDocuments(O,G)).next(Ne=>{C=Ne;const Ye=[];for(const Ct of c){const Pt=hB(Ct,C.get(Ct.key).overlayedDocument);null!=Pt&&Ye.push(new Jc(Ct.key,Pt,uP(Pt.value.mapValue),Nr.exists(!0)))}return f.mutationQueue.addMutationBatch(O,m,Ye,c)}).next(Ne=>{S=Ne;const Ye=Ne.applyToLocalDocumentSet(C,ne);return f.documentOverlayCache.saveOverlays(O,Ne.batchId,Ye)})}).then(()=>({batchId:S.batchId,changes:mA(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,f){let m=o.Tc[o.currentUser.toKey()];m||(m=new Dr(Tn)),m=m.insert(c,f),o.Tc[o.currentUser.toKey()]=m}(r,i.batchId,t),yield Nh(r,i.changes),yield T0(r.remoteStore)}catch(i){const o=S0(i,"Failed to persist write");t.reject(o)}}),xO.apply(this,arguments)}function uU(n,e){return MO.apply(this,arguments)}function MO(){return MO=(0,Te.Z)(function*(n,e){const t=kt(n);try{const r=yield function $6(n,e){const t=kt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((C,S)=>{const O=i.get(S);if(!O)return;f.push(t.Bs.removeMatchingKeys(o,C.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(o,C.addedDocuments,S)));let G=O.withSequenceNumber(o.currentSequenceNumber);var ne,Ne,Ye;null!==e.targetMismatches.get(S)?G=G.withResumeToken(Wi.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):C.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(C.resumeToken,r)),i=i.insert(S,G),Ne=G,Ye=C,(0===(ne=O).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Ye.addedDocuments.size+Ye.modifiedDocuments.size+Ye.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(o,G))});let m=ho(),v=kn();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,C))}),f.push(jB(o,c,e.documentUpdates).next(C=>{m=C.nr,v=C.sr})),!r.isEqual(Yt.min())){const C=t.Bs.getLastRemoteSnapshotVersion(o).next(S=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(C)}return Be.waitFor(f).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,v)).next(()=>m)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.yc.get(o);c&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Zt(c.fc):i.removedDocuments.size>0&&(Zt(c.fc),c.fc=!1))}),yield Nh(t,r,e)}catch(r){yield Wc(r)}}),MO.apply(this,arguments)}function dU(n,e,t){const r=kt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(o,c){const f=kt(o);f.onlineState=c;let m=!1;f.queries.forEach((v,C)=>{for(const S of C.listeners)S.Mu(c)&&(m=!0)}),m&&CO(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function E4(n,e,t){return kO.apply(this,arguments)}function kO(){return kO=(0,Te.Z)(function*(n,e,t){const r=kt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let c=new Dr(At.comparator);c=c.insert(o,Sr.newNoDocument(o,Yt.min()));const f=kn().add(o),m=new Tp(Yt.min(),new Map,new Dr(Tn),c,f);yield uU(r,m),r.gc=r.gc.remove(o),r.yc.delete(e),UO(r)}else yield b0(r.localStore,e,!1).then(()=>x0(r,e,t)).catch(Wc)}),kO.apply(this,arguments)}function w4(n,e){return PO.apply(this,arguments)}function PO(){return PO=(0,Te.Z)(function*(n,e){const t=kt(n),r=e.batch.batchId;try{const i=yield function U6(n,e){const t=kt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,m,v){const C=m.batch,S=C.keys();let O=Be.resolve();return S.forEach(G=>{O=O.next(()=>v.getEntry(f,G)).next(ne=>{const Ne=m.docVersions.get(G);Zt(null!==Ne),ne.version.compareTo(Ne)<0&&(C.applyToRemoteDocument(ne,m),ne.isValidDocument()&&(ne.setReadTime(m.commitVersion),v.addEntry(ne)))})}),O.next(()=>c.mutationQueue.removeMutationBatch(f,C))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=kn();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);FO(t,r,null),LO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Nh(t,i)}catch(i){yield Wc(i)}}),PO.apply(this,arguments)}function b4(n,e,t){return OO.apply(this,arguments)}function OO(){return OO=(0,Te.Z)(function*(n,e,t){const r=kt(n);try{const i=yield function(o,c){const f=kt(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,c).next(C=>(Zt(null!==C),v=C.keys(),f.mutationQueue.removeMutationBatch(m,C))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);FO(r,e,t),LO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Nh(r,i)}catch(i){yield Wc(i)}}),OO.apply(this,arguments)}function NO(){return NO=(0,Te.Z)(function*(n,e){const t=kt(n);Op(t.remoteStore)||ht("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=kt(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=S0(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),NO.apply(this,arguments)}function LO(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function FO(n,e,t){const r=kt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function x0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||hU(n,r)})}function hU(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(fb(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),UO(n))}function BO(n,e,t){for(const r of t)r instanceof aU?(n.Ic.addReference(r.key,e),T4(n,r)):r instanceof lU?(ht("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||hU(n,r.key)):Bt()}function T4(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ht("SyncEngine","New document in limbo: "+t),n.mc.add(r),UO(n))}function UO(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new At(Wn.fromString(e)),r=n.Ac.next();n.yc.set(r,new m4(t)),n.gc=n.gc.insert(t,r),eR(n.remoteStore,new cd(Ys(Ep(t.path)),r,"TargetPurposeLimboResolution",Yo.ct))}}function Nh(n,e,t){return $O.apply(this,arguments)}function $O(){return $O=(0,Te.Z)(function*(n,e,t){const r=kt(n),i=[],o=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,m)=>{c.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,null!=v&&v.fromCache?"not-current":"current"),v){i.push(v);const C=GP.Li(m.targetId,v);o.push(C)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,Te.Z)(function*(m,v){const C=kt(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Be.forEach(v,O=>Be.forEach(O.Fi,G=>C.persistence.referenceDelegate.addReference(S,O.targetId,G)).next(()=>Be.forEach(O.Bi,G=>C.persistence.referenceDelegate.removeReference(S,O.targetId,G)))))}catch(S){if(!id(S))throw S;ht("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const O=S.targetId;if(!S.fromCache){const G=C.Ji.get(O),Ne=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);C.Ji=C.Ji.insert(O,Ne)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,o))}),$O.apply(this,arguments)}function D4(n,e){return VO.apply(this,arguments)}function VO(){return VO=(0,Te.Z)(function*(n,e){const t=kt(n);if(!t.currentUser.isEqual(e)){ht("SyncEngine","User change. New user:",e.toKey());const r=yield $B(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new at(ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nh(t,r.er)}var i}),VO.apply(this,arguments)}function S4(n,e){const t=kt(n),r=t.yc.get(e);if(r&&r.fc)return kn().add(r.key);{let i=kn();const o=t._c.get(e);if(!o)return i;for(const c of o){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function A4(n,e){return jO.apply(this,arguments)}function jO(){return jO=(0,Te.Z)(function*(n,e){const t=kt(n),r=yield KA(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&BO(t,e.targetId,i.cc),i}),jO.apply(this,arguments)}function R4(n,e){return HO.apply(this,arguments)}function HO(){return HO=(0,Te.Z)(function*(n,e){const t=kt(n);return GB(t.localStore,e).then(r=>Nh(t,r))}),HO.apply(this,arguments)}function x4(n,e,t,r){return GO.apply(this,arguments)}function GO(){return GO=(0,Te.Z)(function*(n,e,t,r){const i=kt(n),o=yield function(c,f){const m=kt(c),v=kt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>v.Sn(C,f).next(S=>S?m.localDocuments.getDocuments(C,S):Be.resolve(null)))}(i.localStore,e);var f;null!==o?("pending"===t?yield T0(i.remoteStore):"acknowledged"===t||"rejected"===t?(FO(i,e,r||null),LO(i,e),f=e,kt(kt(i.localStore).mutationQueue).Cn(f)):Bt(),yield Nh(i,o)):ht("SyncEngine","Cannot apply mutation batch with id: "+e)}),GO.apply(this,arguments)}function zO(){return zO=(0,Te.Z)(function*(n,e){const t=kt(n);if(KO(t),ZO(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield fU(t,r.toArray());t.vc=!0,yield _O(t.remoteStore,!0);for(const o of i)eR(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(x0(t,c),b0(t.localStore,c,!0))),fb(t.remoteStore,c)}),yield i,yield fU(t,r),function(o){const c=kt(o);c.yc.forEach((f,m)=>{fb(c.remoteStore,m)}),c.Ic.Ts(),c.yc=new Map,c.gc=new Dr(At.comparator)}(t),t.vc=!1,yield _O(t.remoteStore,!1)}}),zO.apply(this,arguments)}function fU(n,e,t){return WO.apply(this,arguments)}function WO(){return WO=(0,Te.Z)(function*(n,e,t){const r=kt(n),i=[],o=[];for(const c of e){let f;const m=r._c.get(c);if(m&&0!==m.length){f=yield w0(r.localStore,Ys(m[0]));for(const v of m){const C=r.wc.get(v),S=yield A4(r,C);S.snapshot&&o.push(S.snapshot)}}else{const v=yield HB(r.localStore,c);f=yield w0(r.localStore,v),yield SO(r,pU(v),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(o),i}),WO.apply(this,arguments)}function pU(n){return n0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function k4(n){const e=kt(n);return kt(kt(e.localStore).persistence).$i()}function P4(n,e,t,r){return qO.apply(this,arguments)}function qO(){return qO=(0,Te.Z)(function*(n,e,t,r){const i=kt(n);if(i.vc)return void ht("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const c=yield GB(i.localStore,qw(o[0])),f=Tp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Wi.EMPTY_BYTE_STRING);yield Nh(i,c,f);break}case"rejected":yield b0(i.localStore,e,!0),x0(i,e,r);break;default:Bt()}}),qO.apply(this,arguments)}function O4(n,e,t){return YO.apply(this,arguments)}function YO(){return YO=(0,Te.Z)(function*(n,e,t){const r=KO(n);if(r.vc){for(const i of e){if(r._c.has(i)){ht("SyncEngine","Adding an already active target "+i);continue}const o=yield HB(r.localStore,i),c=yield w0(r.localStore,o);yield SO(r,pU(o),c.targetId,!1,c.resumeToken),eR(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield b0(r.localStore,i,!1).then(()=>{fb(r.remoteStore,i),x0(r,i)}).catch(Wc))}}),YO.apply(this,arguments)}function KO(n){const e=kt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E4.bind(null,e),e.dc.nu=d4.bind(null,e.eventManager),e.dc.Pc=h4.bind(null,e.eventManager),e}function ZO(n){const e=kt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b4.bind(null,e),e}class pb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.serializer=db(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return UB(this.persistence,new BB,e.initialUser,this.serializer)}createPersistence(e){return new $P(WA.zs,this.serializer)}createSharedClientState(e){return new YB}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class XO extends pb{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield ZO(r.Vc.syncEngine),yield T0(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return UB(this.persistence,new BB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new RB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Jk(t,this.persistence);return new Rw(e.asyncQueue,r)}createPersistence(e){const t=HP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xo.withCacheSize(this.cacheSizeBytes):xo.DEFAULT;return new jP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ZB(),JA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new YB}}class gU extends XO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof QP&&(r.sharedClientState.syncEngine={jr:x4.bind(null,i),zr:P4.bind(null,i),Wr:O4.bind(null,i),$i:k4.bind(null,i),Qr:R4.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,Te.Z)(function*(c){yield function M4(n,e){return zO.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ZB();if(!QP.D(t))throw new at(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class M0{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>dU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=D4.bind(null,r.syncEngine),yield _O(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new u4}createDatastore(e){const t=db(e.databaseInfo.databaseId),r=new q6(e.databaseInfo);return new Z6(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=f=>dU(this.syncEngine,f,0),c=KB.D()?new KB:new G6,new J6(t,r,i,o,c);var t,r,i,o,c}createSyncEngine(e,t){return function(r,i,o,c,f,m,v){const C=new _4(r,i,o,c,f,m);return v&&(C.vc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=kt(t);ht("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield C0(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function mU(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class nR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class F4{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ns,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new f4(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Te.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class B4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new at(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(o,c){const f=kt(o),m=Ap(f.serializer)+"/documents",v={documents:c.map(G=>Sp(f.serializer,G))},C=yield f.vo("BatchGetDocuments",m,v,c.length),S=new Map;C.forEach(G=>{const ne=function RP(n,e){return"found"in e?function(t,r){Zt(!!r.found);const i=tu(t,r.found.name),o=pi(r.found.updateTime),c=r.found.createTime?pi(r.found.createTime):Yt.min(),f=new qs({mapValue:{fields:r.found.fields}});return Sr.newFoundDocument(i,o,c,f)}(n,e):"missing"in e?function(t,r){Zt(!!r.missing),Zt(!!r.readTime);const i=tu(t,r.missing),o=pi(r.readTime);return Sr.newNoDocument(i,o)}(n,e):Bt()}(f.serializer,G);S.set(ne.key.toString(),ne)});const O=[];return c.forEach(G=>{const ne=S.get(G.toString());Zt(!!ne),O.push(ne)}),O}),function(o,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=At.fromPath(i);e.mutations.push(new eu(o,e.precondition(o)))}),yield(r=(0,Te.Z)(function*(i,o){const c=kt(i),f=Ap(c.serializer)+"/documents",m={writes:o.map(v=>Rp(c.serializer,v))};yield c.Io("Commit",f,m)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bt();t=Yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new at(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yt.min())?Nr.exists(!1):Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yt.min()))throw new at(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class U4{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new eO(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Te.Z)(function*(){const t=new B4(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Um(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bP(t)}return!1}}class $4{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ys.UNAUTHENTICATED,this.clientId=Hy.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(f){ht("FirestoreClient","Received user=",f.uid),yield o.authCredentialListener(f),o.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ht("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new at(ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=S0(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function rR(n,e){return QO.apply(this,arguments)}function QO(){return QO=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ht("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(o){r.isEqual(o)||(yield $B(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QO.apply(this,arguments)}function JO(n,e){return eN.apply(this,arguments)}function eN(){return eN=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield tN(n);ht("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>rU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>rU(e.remoteStore,o)),n._onlineComponents=e}),eN.apply(this,arguments)}function _U(n){return"FirebaseError"===n.name?n.code===ze.FAILED_PRECONDITION||n.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function tN(n){return nN.apply(this,arguments)}function nN(){return nN=(0,Te.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rR(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!_U(t))throw t;va("Error using user provided cache. Falling back to memory cache: "+t),yield rR(n,new pb)}}else ht("FirestoreClient","Using default OfflineComponentProvider"),yield rR(n,new pb);return n._offlineComponents}),nN.apply(this,arguments)}function iR(n){return rN.apply(this,arguments)}function rN(){return rN=(0,Te.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht("FirestoreClient","Using user provided OnlineComponentProvider"),yield JO(n,n._uninitializedComponentsProvider._online)):(ht("FirestoreClient","Using default OnlineComponentProvider"),yield JO(n,new M0))),n._onlineComponents}),rN.apply(this,arguments)}function vU(n){return tN(n).then(e=>e.persistence)}function sR(n){return tN(n).then(e=>e.localStore)}function yU(n){return iR(n).then(e=>e.remoteStore)}function iN(n){return iR(n).then(e=>e.syncEngine)}function k0(n){return sN.apply(this,arguments)}function sN(){return sN=(0,Te.Z)(function*(n){const e=yield iR(n),t=e.eventManager;return t.onListen=v4.bind(null,e.syncEngine),t.onUnlisten=y4.bind(null,e.syncEngine),t}),sN.apply(this,arguments)}function EU(n,e,t={}){const r=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,c,f,m){const v=new nR({next:S=>{o.enqueueAndForget(()=>wO(i,C));const O=S.docs.has(c);!O&&S.fromCache?m.reject(new at(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&f&&"server"===f.source?m.reject(new at(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new TO(Ep(c.path),v,{includeMetadataChanges:!0,Ku:!0});return IO(i,C)}(yield k0(n),n.asyncQueue,e,t,r)})),r.promise}function wU(n,e,t={}){const r=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,c,f,m){const v=new nR({next:S=>{o.enqueueAndForget(()=>wO(i,C)),S.fromCache&&"server"===f.source?m.reject(new at(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new TO(c,v,{includeMetadataChanges:!0,Ku:!0});return IO(i,C)}(yield k0(n),n.asyncQueue,e,t,r)})),r.promise}function bU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const CU=new Map;function oN(n,e,t){if(!t)throw new at(ze.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TU(n,e,t,r){if(!0===e&&!0===r)throw new at(ze.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DU(n){if(!At.isDocumentKey(n))throw new at(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SU(n){if(At.isDocumentKey(n))throw new at(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oR(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Bt()}function qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new at(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=oR(n);throw new at(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AU(n,e){if(e<=0)throw new at(ze.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new at(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new at(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=bU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new at(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new at(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new at(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new at(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new at(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Q2;switch(t.type){case"firstParty":return new Yk(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new at(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=CU.get(e);t&&(ht("ComponentProvider","Removing Datastore"),CU.delete(e),t.terminate())}(this),Promise.resolve()}}class Jr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jr(this.firestore,e,this._key)}}class fo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class hd extends fo{constructor(e,t,r){super(e,t,Ep(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jr(this.firestore,null,new At(e))}withConverter(e){return new hd(this.firestore,e,this._path)}}function MU(n,e,...t){if(n=(0,U.m9)(n),oN("collection","path",e),n instanceof gb){const r=Wn.fromString(e,...t);return SU(r),new hd(n,null,r)}{if(!(n instanceof Jr||n instanceof hd))throw new at(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wn.fromString(e,...t));return SU(r),new hd(n.firestore,null,r)}}function aR(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=Hy.A()),oN("doc","path",e),n instanceof gb){const r=Wn.fromString(e,...t);return DU(r),new Jr(n,null,new At(r))}{if(!(n instanceof Jr||n instanceof hd))throw new at(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wn.fromString(e,...t));return DU(r),new Jr(n.firestore,n instanceof hd?n.converter:null,new At(r))}}function kU(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),(n instanceof Jr||n instanceof hd)&&(e instanceof Jr||e instanceof hd)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function aN(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),n instanceof fo&&e instanceof fo&&n.firestore===e.firestore&&wp(n._query,e._query)&&n.converter===e.converter}class Z4{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new eO(this,"async_queue_retry"),this.Xc=()=>{const t=JA();t&&ht("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=JA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=JA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ns;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Te.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!id(t))throw t;ht("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ki("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=yO.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&Bt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function lN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class X4{constructor(){this._progressObserver={},this._taskCompletionResolver=new ns,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ei extends gb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Z4,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||PU(this),this._firestoreClient.terminate()}}function is(n){return n._firestoreClient||PU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function PU(n){var e,t,r;const i=n._freezeSettings(),o=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nA(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,bU(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new $4(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function OU(n,e,t){const r=new ns;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield rR(n,t),yield JO(n,e),r.resolve()}catch(i){const o=i;if(!_U(o))throw o;va("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function NU(n){if(n._initialized||n._terminated)throw new at(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fd(Wi.fromBase64String(e))}catch(t){throw new at(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fd(Wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new at(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class h_{constructor(e){this._methodName=e}}class lR{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new at(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new at(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tn(this._lat,e._lat)||Tn(this._long,e._long)}}const lG=/^__.*__$/;class cG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jc(e,this.data,this.fieldMask,t,this.fieldTransforms):new t_(e,this.data,t,this.fieldTransforms)}}class LU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class cR{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new cR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return hR(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(FU(this.ca)&&lG.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class uG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||db(e)}ya(e,t,r,i=!1){return new cR({ca:e,methodName:t,ga:r,path:Or.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f_(n){const e=n._freezeSettings(),t=db(n._databaseId);return new uG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uR(n,e,t,r,i,o={}){const c=n.ya(o.merge||o.mergeFields?2:0,e,t,i);hN("Data must be an object, but it was:",c,r);const f=$U(r,c);let m,v;if(o.merge)m=new uo(c.fieldMask),v=c.fieldTransforms;else if(o.mergeFields){const C=[];for(const S of o.mergeFields){const O=vb(e,S,t);if(!c.contains(O))throw new at(ze.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);jU(C,O)||C.push(O)}m=new uo(C),v=c.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=c.fieldTransforms;return new cG(new qs(f),m,v)}class _b extends h_{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _b}}function BU(n,e,t){return new cR({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cN extends h_{_toFieldTransform(e){return new e_(e.path,new Rh)}isEqual(e){return e instanceof cN}}class dG extends h_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=BU(this,e,!0),r=this.pa.map(o=>p_(o,t)),i=new ld(r);return new e_(e.path,i)}isEqual(e){return this===e}}class hG extends h_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=BU(this,e,!0),r=this.pa.map(o=>p_(o,t)),i=new xh(r);return new e_(e.path,i)}isEqual(e){return this===e}}class fG extends h_{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Mh(e.serializer,vA(e.serializer,this.Ia));return new e_(e.path,t)}isEqual(e){return this===e}}function uN(n,e,t,r){const i=n.ya(1,e,t);hN("Data must be an object, but it was:",i,r);const o=[],c=qs.empty();Kl(r,(m,v)=>{const C=dR(e,m,t);v=(0,U.m9)(v);const S=i.da(C);if(v instanceof _b)o.push(C);else{const O=p_(v,S);null!=O&&(o.push(C),c.set(C,O))}});const f=new uo(o);return new LU(c,f,i.fieldTransforms)}function dN(n,e,t,r,i,o){const c=n.ya(1,e,t),f=[vb(e,r,t)],m=[i];if(o.length%2!=0)throw new at(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<o.length;O+=2)f.push(vb(e,o[O])),m.push(o[O+1]);const v=[],C=qs.empty();for(let O=f.length-1;O>=0;--O)if(!jU(v,f[O])){const G=f[O];let ne=m[O];ne=(0,U.m9)(ne);const Ne=c.da(G);if(ne instanceof _b)v.push(G);else{const Ye=p_(ne,Ne);null!=Ye&&(v.push(G),C.set(G,Ye))}}const S=new uo(v);return new LU(C,S,c.fieldTransforms)}function UU(n,e,t,r=!1){return p_(t,n.ya(r?4:3,e))}function p_(n,e){if(VU(n=(0,U.m9)(n)))return hN("Unsupported field value:",e,n),$U(n,e);if(n instanceof h_)return function(t,r){if(!FU(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const c of t){let f=p_(c,r.wa(o));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vA(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qr.fromDate(t);return{timestampValue:Dp(r.serializer,i)}}if(t instanceof Qr){const i=new Qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Dp(r.serializer,i)}}if(t instanceof lR)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fd)return{bytesValue:kA(r.serializer,t._byteString)};if(t instanceof Jr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${oR(t)}`)}(n,e)}function $U(n,e){const t={};return Lw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kl(n,(r,i)=>{const o=p_(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function VU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qr||n instanceof lR||n instanceof fd||n instanceof Jr||n instanceof h_)}function hN(n,e,t){if(!VU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=oR(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function vb(n,e,t){if((e=(0,U.m9)(e))instanceof Lh)return e._internalPath;if("string"==typeof e)return dR(n,e);throw hR("Field path arguments must be of type string or ",n,!1,void 0,t)}const pG=new RegExp("[~\\*/\\[\\]]");function dR(n,e,t){if(e.search(pG)>=0)throw hR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lh(...e.split("."))._internalPath}catch{throw hR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hR(n,e,t,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new at(ze.INVALID_ARGUMENT,f+n+m)}function jU(n,e){return n.some(t=>t.isEqual(e))}class yb{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Jr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fR("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gG extends yb{data(){return super.data()}}function fR(n,e){return"string"==typeof e?dR(n,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}function HU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new at(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fN{}class Ib extends fN{}function Lp(n,e,...t){let r=[];e instanceof fN&&r.push(e),r=r.concat(t),function(i){const o=i.filter(f=>f instanceof P0).length,c=i.filter(f=>f instanceof Eb).length;if(o>1||o>0&&c>0)throw new at(ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Eb extends Ib{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Eb(e,t,r)}_apply(e){const t=this._parse(e);return qU(e._query,t),new fo(e.firestore,e.converter,s0(e._query,t))}_parse(e){const t=f_(e.firestore);return function(i,o,c,f,m,v,C){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new at(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){WU(C,v);const O=[];for(const G of C)O.push(zU(f,i,G));S={arrayValue:{values:O}}}else S=zU(f,i,C)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||WU(C,v),S=UU(c,"where",C,"in"===v||"not-in"===v);return Hn.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class P0 extends fN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new P0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const c=i.getFlattenedFilters();for(const f of c)qU(o,f),o=s0(o,f)}(e._query,t),new fo(e.firestore,e.converter,s0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pN extends Ib{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pN(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new at(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new at(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Xc(i,o);return function(f,m){if(null===r0(f)){const v=Ym(f);null!==v&&YU(0,v,m.field)}}(r,c),c}(e._query,this._field,this._direction);return new fo(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Ql(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class pR extends Ib{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new pR(e,t,r)}_apply(e){return new fo(e.firestore,e.converter,o0(e._query,this._limit,this._limitType))}}class gR extends Ib{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gR(e,t,r)}_apply(e){const t=GU(e,this.type,this._docOrFields,this._inclusive);return new fo(e.firestore,e.converter,(i=t,new Ql((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class mR extends Ib{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mR(e,t,r)}_apply(e){const t=GU(e,this.type,this._docOrFields,this._inclusive);return new fo(e.firestore,e.converter,(i=t,new Ql((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function GU(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof yb)return function(i,o,c,f,m){if(!f)throw new at(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const C of qi(i))if(C.field.isKeyField())v.push(ad(o,f.key));else{const S=f.data.field(C.field);if(Zy(S))throw new at(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const O=C.field.canonicalString();throw new at(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}v.push(S)}return new Xl(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=f_(n.firestore);return function(o,c,f,m,v,C){const S=o.explicitOrderBy;if(v.length>S.length)throw new at(ze.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let G=0;G<v.length;G++){const ne=v[G];if(S[G].field.isKeyField()){if("string"!=typeof ne)throw new at(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof ne}`);if(!fA(o)&&-1!==ne.indexOf("/"))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${ne}' contains a slash.`);const Ne=o.path.child(Wn.fromString(ne));if(!At.isDocumentKey(Ne))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Ye=new At(Ne);O.push(ad(c,Ye))}else{const Ne=UU(f,m,ne);O.push(Ne)}}return new Xl(O,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function zU(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new at(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fA(e)&&-1!==t.indexOf("/"))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wn.fromString(t));if(!At.isDocumentKey(r))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ad(n,new At(r))}if(t instanceof Jr)return ad(n,t._key);throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oR(t)}.`)}function WU(n,e){if(!Array.isArray(n)||0===n.length)throw new at(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qU(n,e){if(e.isInequality()){const r=Ym(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new at(ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=r0(n);null!==o&&YU(0,i,o)}const t=function(r,i){for(const o of r)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new at(ze.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function YU(n,e,t){if(!t.isEqual(e))throw new at(ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class gN{convertValue(e,t="none"){switch(Kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Kl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new lR(hi(e.latitude),hi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vm(e));default:return null}}convertTimestamp(e){const t=Th(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wn.fromString(e);Zt(BA(r));const i=new Yc(r.get(1),r.get(3)),o=new At(r.popFirst(5));return i.isEqual(t)||ki(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function _R(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class CG extends gN{constructor(e){super(),this.firestore=e}convertBytes(e){return new fd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jr(this.firestore,null,t)}}class g_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fh extends yb{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fR("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wb extends Fh{data(e={}){return super.data(e)}}class Fp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new g_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wb(this._firestore,this._userDataWriter,r.key,r,new g_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new at(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new wb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new g_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new wb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new g_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==c.type&&(m=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),v=o.indexOf(c.doc.key)),{type:DG(c.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}function ZU(n,e){return n instanceof Fh&&e instanceof Fh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fp&&e instanceof Fp&&n._firestore===e._firestore&&aN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bp extends gN{constructor(e){super(),this.firestore=e}convertBytes(e){return new fd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jr(this.firestore,null,t)}}function XU(n,e,t){n=qn(n,Jr);const r=qn(n.firestore,ei),i=_R(n.converter,e,t);return O0(r,[uR(f_(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Nr.none())])}function QU(n,e,t,...r){n=qn(n,Jr);const i=qn(n.firestore,ei),o=f_(i);let c;return c="string"==typeof(e=(0,U.m9)(e))||e instanceof Lh?dN(o,"updateDoc",n._key,e,t,r):uN(o,"updateDoc",n._key,e),O0(i,[c.toMutation(n._key,Nr.exists(!0))])}function JU(n,...e){var t,r,i;n=(0,U.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||lN(e[c])||(o=e[c],c++);const f={includeMetadataChanges:o.includeMetadataChanges};if(lN(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,C;if(n instanceof Jr)v=qn(n.firestore,ei),C=Ep(n._key.path),m={next:S=>{e[c]&&e[c](mN(v,n,S))},error:e[c+1],complete:e[c+2]};else{const S=qn(n,fo);v=qn(S.firestore,ei),C=S._query;const O=new Bp(v);m={next:G=>{e[c]&&e[c](new Fp(v,O,S,G))},error:e[c+1],complete:e[c+2]},HU(n._query)}return function(S,O,G,ne){const Ne=new nR(ne),Ye=new TO(O,Ne,G);return S.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return IO(yield k0(S),Ye)})),()=>{Ne.Dc(),S.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return wO(yield k0(S),Ye)}))}}(is(v),C,f,m)}function O0(n,e){return function(t,r){const i=new ns;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function I4(n,e,t){return xO.apply(this,arguments)}(yield iN(t),r,i)})),i.promise}(is(n),e)}function mN(n,e,t){const r=t.docs.get(e._key),i=new Bp(n);return new Fh(n,i,e._key,r,new g_(t.hasPendingWrites,t.fromCache),e.converter)}const GG={maxAttempts:5};class e${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=f_(e)}set(e,t,r){this._verifyNotCommitted();const i=Up(e,this._firestore),o=_R(i.converter,t,r),c=uR(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Up(e,this._firestore);let c;return c="string"==typeof(t=(0,U.m9)(t))||t instanceof Lh?dN(this._dataReader,"WriteBatch.update",o._key,t,r,i):uN(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Up(e,this._firestore);return this._mutations=this._mutations.concat(new kh(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new at(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Up(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new at(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=f_(e)}get(e){const t=Up(e,this._firestore),r=new CG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Bt();const o=i[0];if(o.isFoundDocument())return new yb(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new yb(this._firestore,r,t._key,null,t.converter);throw Bt()})}set(e,t,r){const i=Up(e,this._firestore),o=_R(i.converter,t,r),c=uR(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const o=Up(e,this._firestore);let c;return c="string"==typeof(t=(0,U.m9)(t))||t instanceof Lh?dN(this._dataReader,"Transaction.update",o._key,t,r,i):uN(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=Up(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Up(e,this._firestore),r=new Bp(this._firestore);return super.get(e).then(i=>new Fh(this._firestore,r,t._key,i._document,new g_(!1,!1),t.converter))}}function _N(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new at("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function n$(){if(typeof Uint8Array>"u")throw new at("unimplemented","Uint8Arrays are not available in this environment.")}function r$(){if(!function sP(){return typeof atob<"u"}())throw new at("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){mp=$c.SDK_VERSION,(0,$c._registerComponent)(new es.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),c=new ei(new Wk(t.getProvider("auth-internal")),new Kk(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new at(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(f.options.projectId,m)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,$c.registerVersion)(Ew,"3.13.0",n),(0,$c.registerVersion)(Ew,"3.13.0","esm2017")}();class bb{constructor(e){this._delegate=e}static fromBase64String(e){return r$(),new bb(fd.fromBase64String(e))}static fromUint8Array(e){return n$(),new bb(fd.fromUint8Array(e))}toBase64(){return r$(),this._delegate.toBase64()}toUint8Array(){return n$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vN(n){return function ez(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class tz{enableIndexedDbPersistence(e,t){return function J4(n,e){NU(n=qn(n,ei));const t=is(n);if(t._uninitializedComponentsProvider)throw new at(ze.FAILED_PRECONDITION,"SDK cache is already specified.");va("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new M0;return OU(t,i,new XO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eG(n){NU(n=qn(n,ei));const e=is(n);if(e._uninitializedComponentsProvider)throw new at(ze.FAILED_PRECONDITION,"SDK cache is already specified.");va("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new M0;return OU(e,r,new gU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tG(n){if(n._initialized&&!n._terminated)throw new at(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ns;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!ya.D())return Promise.resolve();const i=r+"main";yield ya.delete(i)}),function(r){return t.apply(this,arguments)})(HP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class i${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&va("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xU(n,e,t,r={}){var i;const o=(n=qn(n,gb))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==c&&va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:c,ssl:!1})),r.mockUserToken){let f,m;if("string"==typeof r.mockUserToken)f=r.mockUserToken,m=ys.MOCK_USER;else{f=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new at(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ys(v)}n._authCredentials=new J2(new jS(f,m))}}(this._delegate,e,t,r)}enableNetwork(){return function rG(n){return function V4(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield vU(n),t=yield yU(n);return e.setNetworkEnabled(!0),function(r){const i=kt(r);return i.vu.delete(0),hb(i)}(t)}))}(is(n=qn(n,ei)))}(this._delegate)}disableNetwork(){return function iG(n){return function j4(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield vU(n),t=yield yU(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const o=kt(i);o.vu.add(0),yield C0(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(is(n=qn(n,ei)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nG(n){return function(e){const t=new ns;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function C4(n,e){return NO.apply(this,arguments)}(yield iN(e),t)})),t.promise}(is(n=qn(n,ei)))}(this._delegate)}onSnapshotsInSync(e){return function NG(n,e){return function z4(n,e){const t=new nR(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield k0(n),i=t,kt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield k0(n),i=t,void kt(r).ku.delete(i);var r,i}))}}(is(n=qn(n,ei)),lN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new at("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new N0(this,MU(this._delegate,e))}catch(t){throw Ko(t,"collection()","Firestore.collection()")}}doc(e){try{return new ec(this,aR(this._delegate,e))}catch(t){throw Ko(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zo(this,function K4(n,e){if(n=qn(n,gb),oN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new at(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fo(n,null,(t=e,new Ql(Wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ko(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WG(n,e,t){n=qn(n,ei);const r=Object.assign(Object.assign({},GG),t);return function(i){if(i.maxAttempts<1)throw new at(ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,c){const f=new ns;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const m=yield function IU(n){return iR(n).then(e=>e.datastore)}(i);new U4(i.asyncQueue,m,c,o,f).run()})),f.promise}(is(n),i=>e(new zG(n,i)),r)}(this._delegate,t=>e(new s$(this,t)))}batch(){return is(this._delegate),new o$(new e$(this._delegate,e=>O0(this._delegate,e)))}loadBundle(e){return function sG(n,e){const t=is(n=qn(n,ei)),r=new X4;return function W4(n,e,t,r){const i=function(o,c){let f;return f="string"==typeof o?SA().encode(o):o,m=function(m,v){if(m instanceof Uint8Array)return mU(m,v);if(m instanceof ArrayBuffer)return mU(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new F4(m,c);var m}(t,db(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function N4(n,e,t){const r=kt(n);var i;(i=(0,Te.Z)(function*(o,c,f){try{const m=yield c.getMetadata();if(yield function(O,G){const ne=kt(O),Ne=pi(G.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",Ye=>ne.qs.getBundleMetadata(Ye,G.id)).then(Ye=>!!Ye&&Ye.createTime.compareTo(Ne)>=0)}(o.localStore,m))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(O=m).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);f._updateProgress(oU(m));const v=new p4(m,o.localStore,c.serializer);let C=yield c.bc();for(;C;){const O=yield v.zu(C);O&&f._updateProgress(O),C=yield c.bc()}const S=yield v.complete();return yield Nh(o,S.Ju,void 0),yield function(O,G){const ne=kt(O);return ne.persistence.runTransaction("Save bundle","readwrite",Ne=>ne.qs.saveBundleMetadata(Ne,G))}(o.localStore,m),f._completeWith(S.progress),Promise.resolve(S.Hu)}catch(m){return va("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var O}),function(o,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield iN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oG(n,e){return function q4(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=kt(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield sR(n),e)}))}(is(n=qn(n,ei)),e).then(t=>t?new fo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Zo(this,t):null)}}class vR extends gN{constructor(e){super(),this.firestore=e}convertBytes(e){return new bb(new fd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ec.forKey(t,this.firestore,null)}}class s${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vR(e)}get(e){const t=__(e);return this._delegate.get(t).then(r=>new Cb(this._firestore,new Fh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=__(e);return r?(_N("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=__(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=__(e);return this._delegate.delete(t),this}}class o${constructor(e){this._delegate=e}set(e,t,r){const i=__(e);return r?(_N("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=__(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=__(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class m_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new wb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=m_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new m_(e,new vR(e),t),i.set(t,o)),o}}m_.INSTANCES=new WeakMap;class ec{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vR(e)}static forPath(e,t,r){if(e.length%2!=0)throw new at("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ec(t,new Jr(t._delegate,r,new At(e)))}static forKey(e,t,r){return new ec(t,new Jr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new N0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new N0(this.firestore,MU(this._delegate,e))}catch(t){throw Ko(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,U.m9)(e))instanceof Jr&&kU(this._delegate,e)}set(e,t){t=_N("DocumentReference.set",t);try{return t?XU(this._delegate,e,t):XU(this._delegate,e)}catch(r){throw Ko(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?QU(this._delegate,e):QU(this._delegate,e,t,...r)}catch(i){throw Ko(i,"updateDoc()","DocumentReference.update()")}}delete(){return function PG(n){return O0(qn(n.firestore,ei),[new kh(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=a$(e),r=l$(e,i=>new Cb(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return JU(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function AG(n){n=qn(n,Jr);const e=qn(n.firestore,ei),t=is(e),r=new Bp(e);return function H4(n,e){const t=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,o,c){try{const f=yield function(m,v){const C=kt(m);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,v))}(i,o);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new at(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=S0(f,`Failed to get document '${o} from cache`);c.reject(m)}}),function(i,o,c){return r.apply(this,arguments)})(yield sR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Fh(e,r,n._key,i,new g_(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function RG(n){n=qn(n,Jr);const e=qn(n.firestore,ei);return EU(is(e),n._key,{source:"server"}).then(t=>mN(e,n,t))}(this._delegate):function SG(n){n=qn(n,Jr);const e=qn(n.firestore,ei);return EU(is(e),n._key).then(t=>mN(e,n,t))}(this._delegate),t.then(r=>new Cb(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ec(this.firestore,this._delegate.withConverter(e?m_.getInstance(this.firestore,e):null))}}function Ko(n,e,t){return n.message=n.message.replace(e,t),n}function a$(n){for(const e of n)if("object"==typeof e&&!vN(e))return e;return{}}function l$(n,e){var t,r;let i;return i=vN(n[0])?n[0]:vN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Cb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ec(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ZU(this._delegate,e._delegate)}}class Tb extends Cb{data(e){const t=this._delegate.data(e);return function VS(n,e){n||Bt()}(void 0!==t),t}}class Zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vR(e)}where(e,t,r){try{return new Zo(this.firestore,Lp(this._delegate,function mG(n,e,t){const r=e,i=fR("where",n);return Eb._create(i,r,t)}(e,t,r)))}catch(i){throw Ko(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zo(this.firestore,Lp(this._delegate,function _G(n,e="asc"){const t=e,r=fR("orderBy",n);return pN._create(r,t)}(e,t)))}catch(r){throw Ko(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zo(this.firestore,Lp(this._delegate,function vG(n){return AU("limit",n),pR._create("limit",n,"F")}(e)))}catch(t){throw Ko(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Zo(this.firestore,Lp(this._delegate,function yG(n){return AU("limitToLast",n),pR._create("limitToLast",n,"L")}(e)))}catch(t){throw Ko(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zo(this.firestore,Lp(this._delegate,function IG(...n){return gR._create("startAt",n,!0)}(...e)))}catch(t){throw Ko(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zo(this.firestore,Lp(this._delegate,function EG(...n){return gR._create("startAfter",n,!1)}(...e)))}catch(t){throw Ko(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zo(this.firestore,Lp(this._delegate,function wG(...n){return mR._create("endBefore",n,!1)}(...e)))}catch(t){throw Ko(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zo(this.firestore,Lp(this._delegate,function bG(...n){return mR._create("endAt",n,!0)}(...e)))}catch(t){throw Ko(t,"endAt()","Query.endAt()")}}isEqual(e){return aN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function MG(n){n=qn(n,fo);const e=qn(n.firestore,ei),t=is(e),r=new Bp(e);return function G4(n,e){const t=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,o,c){try{const f=yield KA(i,o,!0),m=new cU(o,f.ir),v=m.sc(f.documents),C=m.applyChanges(v,!1);c.resolve(C.snapshot)}catch(f){const m=S0(f,`Failed to execute query '${o} against cache`);c.reject(m)}}),function(i,o,c){return r.apply(this,arguments)})(yield sR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Fp(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function kG(n){n=qn(n,fo);const e=qn(n.firestore,ei),t=is(e),r=new Bp(e);return wU(t,n._query,{source:"server"}).then(i=>new Fp(e,r,n,i))}(this._delegate):function xG(n){n=qn(n,fo);const e=qn(n.firestore,ei),t=is(e),r=new Bp(e);return HU(n._query),wU(t,n._query).then(i=>new Fp(e,r,n,i))}(this._delegate),t.then(r=>new yN(this.firestore,new Fp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=a$(e),r=l$(e,i=>new yN(this.firestore,new Fp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return JU(this._delegate,t,r)}withConverter(e){return new Zo(this.firestore,this._delegate.withConverter(e?m_.getInstance(this.firestore,e):null))}}class rz{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Tb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new rz(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Tb(this._firestore,r))})}isEqual(e){return ZU(this._delegate,e._delegate)}}class N0 extends Zo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ec(this.firestore,e):null}doc(e){try{return new ec(this.firestore,void 0===e?aR(this._delegate):aR(this._delegate,e))}catch(t){throw Ko(t,"doc()","CollectionReference.doc()")}}add(e){return function OG(n,e){const t=qn(n.firestore,ei),r=aR(n),i=_R(n.converter,e);return O0(t,[uR(f_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ec(this.firestore,t))}isEqual(e){return kU(this._delegate,e._delegate)}withConverter(e){return new N0(this.firestore,this._delegate.withConverter(e?m_.getInstance(this.firestore,e):null))}}function __(n){return qn(n,Jr)}class IN{constructor(...e){this._delegate=new Lh(...e)}static documentId(){return new IN(Or.keyField().canonicalString())}isEqual(e){return(e=(0,U.m9)(e))instanceof Lh&&this._delegate._internalPath.isEqual(e._internalPath)}}class v_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YG(){return new cN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new v_(e)}static delete(){const e=function qG(){return new _b("deleteField")}();return e._methodName="FieldValue.delete",new v_(e)}static arrayUnion(...e){const t=function KG(...n){return new dG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new v_(t)}static arrayRemove(...e){const t=function ZG(...n){return new hG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new v_(t)}static increment(e){const t=function XG(n){return new fG("increment",n)}(e);return t._methodName="FieldValue.increment",new v_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iz={Firestore:i$,GeoPoint:lR,Timestamp:Qr,Blob:bb,Transaction:s$,WriteBatch:o$,DocumentReference:ec,DocumentSnapshot:Cb,Query:Zo,QueryDocumentSnapshot:Tb,QuerySnapshot:yN,CollectionReference:N0,FieldPath:IN,FieldValue:v_,setLogLevel:function nz(n){!function zk(n){rd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function c$(n,e){return function az(n,e=qu.z){return new ci.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function EN(n,e){return c$(n,e).pipe((0,Kt.U)(t=>({payload:t,type:"query"})))}function yR(n,e){return EN(n,e).pipe(Dl(void 0),cy(),(0,Kt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const m=i.find(C=>C.doc.ref.isEqual(c.ref)),v=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),o}))}function u$(n,e,t){return yR(n,t).pipe(Rs((r,i)=>function cz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function uz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),(0,am.x)(),(0,Kt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function wN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function d$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function oz(n){(function sz(n,e){n.INTERNAL.registerComponent(new es.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},iz)))})(n,(e,t)=>new i$(e,t,new tz)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(MD.Z);class h${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=yR(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Kt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Dl(void 0),cy(),Vi(([r,i])=>i.length>0||!r),(0,Kt.U)(([r,i])=>i),Zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d$(e);return u$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return EN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Kt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Zn.iC)}get(e){return(0,er.D)(this.query.get(e)).pipe(Zn.iC)}add(e){return this.ref.add(e)}doc(e){return new f$(this.ref.doc(e),this.afs)}}class f${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=m$(r,t);return new h$(i,o,this.afs)}snapshotChanges(){return function lz(n,e){return c$(n,e).pipe(Dl(void 0),cy(),(0,Kt.U)(([t,r])=>r.exists?null!=t&&t.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Kt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,er.D)(this.ref.get(e)).pipe(Zn.iC)}}class dz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?yR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Kt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Vi(t=>t.length>0),Zn.iC):yR(this.query,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d$(e);return u$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return EN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Kt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Zn.iC)}get(e){return(0,er.D)(this.query.get(e)).pipe(Zn.iC)}}const p$=new u.OlP("angularfire2.enableFirestorePersistence"),g$=new u.OlP("angularfire2.firestore.persistenceSettings"),hz=new u.OlP("angularfire2.firestore.settings"),fz=new u.OlP("angularfire2.firestore.use-emulator");function m$(n,e=(t=>t)){return{query:e(n),ref:n}}let _$=(()=>{class n{constructor(t,r,i,o,c,f,m,v,C,S,O,G,ne,Ne,Ye,Ct,Pt){this.schedulers=m;const yt=(0,xi.on)(t,f,r),Ft=C;S&&Lv(yt,f,O,ne,Ne,Ye,G,Ct),[this.firestore,this.persistenceEnabled$]=(0,xi.cc)(`${yt.name}.firestore`,"AngularFirestore",yt.name,()=>{const nn=f.runOutsideAngular(()=>yt.firestore());if(o&&nn.settings(o),Ft&&nn.useEmulator(...Ft),i&&!Oo(c)){const Rn=()=>{try{return(0,er.D)(nn.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Ni){return typeof console<"u"&&console.warn(Ni),(0,Wt.of)(!1)}};return[nn,f.runOutsideAngular(Rn)]}return[nn,(0,Wt.of)(!1)]},[o,Ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:c}=m$(i,r),f=this.schedulers.ngZone.run(()=>o);return new h$(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),o=this.firestore.collectionGroup(t);return new dz(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new f$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xi.Dh),u.LFG(xi.xv,8),u.LFG(p$,8),u.LFG(hz,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Zn.HU),u.LFG(g$,8),u.LFG(fz,8),u.LFG(tm,8),u.LFG(kv,8),u.LFG(Pv,8),u.LFG(bn,8),u.LFG(Ov,8),u.LFG(Nv,8),u.LFG(Wu,8),u.LFG(Gf,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pz=(()=>{class n{constructor(){em.Z.registerVersion("angularfire",Zn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:p$,useValue:!0},{provide:g$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[_$]}),n})();const v$="@firebase/database";let bN="";function I$(n){bN=n}class _z{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const E$=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _z(e)}}catch{}return new vz},y_=E$("localStorage"),CN=E$("sessionStorage"),L0=new ps.Yd("@firebase/database"),w$=function(){let n=1;return function(){return n++}}(),b$=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},Db=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Db.apply(null,r):e+="object"==typeof r?(0,U.Wl)(r):r,e+=" "}return e};let I_=null,C$=!0;const T$=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(L0.logLevel=ps.in.VERBOSE,I_=L0.log.bind(L0),e&&CN.set("logging_enabled",!0)):"function"==typeof n?I_=n:(I_=null,CN.remove("logging_enabled"))},Zs=function(...n){if(!0===C$&&(C$=!1,null===I_&&!0===CN.get("logging_enabled")&&T$(!0)),I_){const e=Db.apply(null,n);I_(e)}},Sb=function(n){return function(...e){Zs(n,...e)}},TN=function(...n){const e="FIREBASE INTERNAL ERROR: "+Db(...n);L0.error(e)},pd=function(...n){const e=`FIREBASE FATAL ERROR: ${Db(...n)}`;throw L0.error(e),new Error(e)},ko=function(...n){const e="FIREBASE WARNING: "+Db(...n);L0.warn(e)},IR=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$p="[MIN_NAME]",Bh="[MAX_NAME]",E_=function(n,e){if(n===e)return 0;if(n===$p||e===Bh)return-1;if(e===$p||n===Bh)return 1;{const t=A$(n),r=A$(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Ez=function(n,e){return n===e?0:n<e?-1:1},Ab=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Wl)(e))},DN=function(n){if("object"!=typeof n||null===n)return(0,U.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Wl)(e[r]),t+=":",t+=DN(n[e[r]]);return t+="}",t},D$=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Xs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const S$=function(n){(0,U.hu)(!IR(n),"Invalid JSON number");const r=1023;let i,o,c,f,m;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();const C=v.join("");let S="";for(m=0;m<64;m+=8){let O=parseInt(C.substr(m,8),2).toString(16);1===O.length&&(O="0"+O),S+=O}return S.toLowerCase()},Tz=new RegExp("^-?(0*)\\d{1,10}$"),A$=function(n){if(Tz.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},F0=function(n){try{n()}catch(e){setTimeout(()=>{throw ko("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Rb=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Rz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ko(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Zs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ko(e)}}let xb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const P$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,L$="websocket",F$="long_polling";class AN{constructor(e,t,r,i,o=!1,c="",f=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=y_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&y_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function B$(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===L$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==F$)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Mz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Xs(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class kz{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const RN={},xN={};function MN(n){const e=n.toString();return RN[e]||(RN[e]=new kz),RN[e]}class Oz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&F0(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Vp{constructor(e,t,r,i,o,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sb(e),this.stats_=MN(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),B$(t,F$,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Oz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new kN((...o)=>{const[c,f,m,v,C]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&P$.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vp.forceAllow_=!0}static forceDisallow(){Vp.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!Vp.forceAllow_&&(Vp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=D$(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class kN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=w$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=kN.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Zs("frame writing exception"),f.stack&&Zs(f.stack),Zs(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Zs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let wR=null;typeof MozWebSocket<"u"?wR=MozWebSocket:typeof WebSocket<"u"&&(wR=WebSocket);let B0=(()=>{class n{constructor(t,r,i,o,c,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sb(this.connId),this.stats_=MN(r),this.connURL=n.connectionURL_(r,f,m,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){const f={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&P$.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),o&&(f.ac=o),c&&(f.p=c),B$(t,L$,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,y_.set("previous_websocket_failure",!0);try{let i;if((0,U.Yr)()){i={headers:{"User-Agent":`Firebase/5/${bN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new wR(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==wR&&!n.forceDisallow_}static previouslyFailed(){return y_.isInMemoryStorage||!0===y_.get("previous_websocket_failure")}markConnectionHealthy(){y_.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=D$(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),z$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Vp,B0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=B0&&B0.isAvailable();let i=r&&!B0.previouslyFailed();if(t.webSocketOnly&&(r||ko("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[B0];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Q${constructor(e,t,r,i,o,c,f,m,v,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sb("c:"+this.id+":"),this.transportManager_=new z$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Rb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ab("t",e),r=Ab("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ab("t",e),r=Ab("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ab("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?TN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ko("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Rb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(y_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class J${put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class eV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class bR extends eV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bR}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Er{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function cr(){return new Er("")}function Un(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jp(n){return n.pieces_.length-n.pieceNum_}function Lr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Er(n.pieces_,e)}function ON(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Mb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function rV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Er(e,0)}function gi(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Er)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Er(t,0)}function $n(n){return n.pieceNum_>=n.pieces_.length}function Xo(n,e){const t=Un(n),r=Un(e);if(null===t)return e;if(t===r)return Xo(Lr(n),Lr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function nW(n,e){const t=Mb(n,0),r=Mb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=E_(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function NN(n,e){if(jp(n)!==jp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function tc(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jp(n)>jp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class rW{constructor(e,t){this.errorPrefix_=t,this.parts_=Mb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);iV(this)}}function iV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+w_(n))}function w_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class LN extends eV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new LN}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kb=1e3;let TR,b_=(()=>{class n extends J${constructor(t,r,i,o,c,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Sb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&bR.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_((0,U.Wl)(c)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new U.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const v=m.d,C=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,o),t.onComplete&&t.onComplete(C,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ko(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,f=o.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const c={p:t};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):TN("Unrecognized action received from server: "+(0,U.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const C=function(){v?v.close():(m=!0,o())};t.realtime_={close:C,sendRequest:function(G){(0,U.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(G)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[G,ne]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);m?Zs("getToken() completed but was canceled"):(Zs("getToken() completed. Creating connection."),t.authToken_=G&&G.accessToken,t.appCheckToken_=ne&&ne.token,v=new Q$(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Ne=>{ko(Ne+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(G){t.log_("Failed to get token: "+G),m||(t.repoInfo_.nodeAdmin&&ko(G),C())}}})()}interrupt(t){Zs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>DN(c)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Er(t).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Zs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Zs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+bN.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=bR.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Vn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Vn(e,t)}}class CR{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Vn($p,e),i=new Vn($p,t);return 0!==this.compare(r,i)}minPost(){return Vn.MIN}}class aV extends CR{static get __EMPTY_NODE(){return TR}static set __EMPTY_NODE(e){TR=e}compare(e,t){return E_(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Vn.MIN}maxPost(){return new Vn(Bh,TR)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Vn(e,TR)}toString(){return".key"}}const gd=new aV;class DR{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let BN,nu=(()=>{class n{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=o?o:wa.EMPTY_NODE,this.right=null!=c?c:wa.EMPTY_NODE}copy(t,r,i,o,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const c=i(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return wa.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return wa.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class wa{constructor(e,t=wa.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new wa(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,nu.BLACK,null,null))}remove(e){return new wa(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new DR(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new DR(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new DR(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new DR(this.root_,null,this.comparator_,!0,e)}}function dW(n,e){return E_(n.name,e.name)}function FN(n,e){return E_(n,e)}wa.EMPTY_NODE=new class uW{copy(e,t,r,i,o){return this}insert(e,t,r){return new nu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const lV=function(n){return"number"==typeof n?"number:"+S$(n):"string:"+n},cV=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===BN||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===BN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let uV,dV,hV,U0=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),cV(this.priorityNode_)}static set __childrenNodeConstructor(t){uV=t}static get __childrenNodeConstructor(){return uV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $n(t)?this:".priority"===Un(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Un(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===jp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Lr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+lV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?S$(this.value_):this.value_,this.lazyHash_=b$(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(o>=0,"Unknown leaf type: "+r),(0,U.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const qr=new class gW extends CR{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?E_(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Vn.MIN}maxPost(){return new Vn(Bh,new U0("[PRIORITY-POST]",hV))}makePost(e,t){const r=dV(e);return new Vn(t,new U0("[PRIORITY-POST]",r))}toString(){return".priority"}},mW=Math.log(2);class _W{constructor(e){this.count=parseInt(Math.log(e+1)/mW,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const SR=function(n,e,t,r){n.sort(e);const i=function(m,v){const C=v-m;let S,O;if(0===C)return null;if(1===C)return S=n[m],O=t?t(S):S,new nu(O,S.node,nu.BLACK,null,null);{const G=parseInt(C/2,10)+m,ne=i(m,G),Ne=i(G+1,v);return S=n[G],O=t?t(S):S,new nu(O,S.node,nu.BLACK,ne,Ne)}},f=function(m){let v=null,C=null,S=n.length;const O=function(ne,Ne){const Ye=S-ne,Ct=S;S-=ne;const Pt=i(Ye+1,Ct),yt=n[Ye],Ft=t?t(yt):yt;G(new nu(Ft,yt.node,Ne,null,Pt))},G=function(ne){v?(v.left=ne,v=ne):(C=ne,v=ne)};for(let ne=0;ne<m.count;++ne){const Ne=m.nextBitIsOne(),Ye=Math.pow(2,m.count-(ne+1));Ne?O(Ye,nu.BLACK):(O(Ye,nu.BLACK),O(Ye,nu.RED))}return C}(new _W(n.length));return new wa(r||e,f)};let UN;const $0={};class Uh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)($0&&qr,"ChildrenNode.ts has not been loaded"),UN=UN||new Uh({".priority":$0},{".priority":qr}),UN}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof wa?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==gd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Vn.Wrap);let f,c=o.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=o.getNext();f=i?SR(r,e.getCompare()):$0;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const C=Object.assign({},this.indexes_);return C[m]=f,new Uh(C,v)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,o)=>{const c=(0,U.DV)(this.indexSet_,o);if((0,U.hu)(c,"Missing index implementation for "+o),i===$0){if(c.isDefinedOn(e.node)){const f=[],m=t.getIterator(Vn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),SR(f,c.getCompare())}return $0}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new Vn(e.name,f))),m.insert(e,e.node)}});return new Uh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===$0)return i;{const o=t.get(e.name);return o?i.remove(new Vn(e.name,o)):i}});return new Uh(r,this.indexSet_)}}let Pb,Nn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&cV(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pb||(Pb=new n(new wa(FN),null,Uh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Pb:r}}getChild(t){const r=Un(t);return null===r?this:this.getImmediateChild(r).getChild(Lr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Vn(t,r);let o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=o.isEmpty()?Pb:this.priorityNode_;return new n(o,f,c)}}updateChild(t,r){const i=Un(t);if(null===i)return r;{(0,U.hu)(".priority"!==Un(t)||1===jp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Lr(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(qr,(f,m)=>{r[f]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):c=!1}),!t&&c&&o<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+lV(this.getPriority().val())+":"),this.forEachChild(qr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":b$(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new Vn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Vn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Vn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Vn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Vn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ob?-1:0}withIndex(t){if(t===gd||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===gd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(qr),o=r.getIterator(qr);let c=i.getNext(),f=o.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=o.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===gd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ob=new class vW extends Nn{constructor(){super(new wa(FN),Nn.EMPTY_NODE,Uh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Nn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Vn,{MIN:{value:new Vn($p,Nn.EMPTY_NODE)},MAX:{value:new Vn(Bh,Ob)}}),aV.__EMPTY_NODE=Nn.EMPTY_NODE,U0.__childrenNodeConstructor=Nn,function hW(n){BN=n}(Ob),function pW(n){hV=n}(Ob);const yW=!0;function Pi(n,e=null){if(null===n)return Nn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new U0(n,Pi(e));if(n instanceof Array||!yW){let t=Nn.EMPTY_NODE;return Xs(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const o=Pi(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Pi(e))}{const t=[];let r=!1;if(Xs(n,(c,f)=>{if("."!==c.substring(0,1)){const m=Pi(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Vn(c,m)))}}),0===t.length)return Nn.EMPTY_NODE;const o=SR(t,dW,c=>c.name,FN);if(r){const c=SR(t,qr.getCompare());return new Nn(o,Pi(e),new Uh({".priority":c},{".priority":qr}))}return new Nn(o,Pi(e),Uh.Default)}}!function fW(n){dV=n}(Pi);class $N extends CR{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!$n(e)&&".priority"!==Un(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?E_(e.name,t.name):o}makePost(e,t){const r=Pi(e),i=Nn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Vn(t,i)}maxPost(){const e=Nn.EMPTY_NODE.updateChild(this.indexPath_,Ob);return new Vn(Bh,e)}toString(){return Mb(this.indexPath_,0).join("/")}}const VN=new class IW extends CR{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?E_(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Vn.MIN}maxPost(){return Vn.MAX}makePost(e,t){const r=Pi(e);return new Vn(t,r)}toString(){return".value"}};function fV(n){return{type:"value",snapshotNode:n}}function V0(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Nb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Lb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class jN{constructor(e){this.index_=e}updateChild(e,t,r,i,o,c){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Nb(t,f)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(V0(t,r)):c.trackChildChange(Lb(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(qr,(i,o)=>{t.hasChild(i)||r.trackChildChange(Nb(i,o))}),t.isLeafNode()||t.forEachChild(qr,(i,o)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(o)||r.trackChildChange(Lb(i,o,c))}else r.trackChildChange(V0(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Nn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Fb{constructor(e){this.indexedFilter_=new jN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fb.getStartPost_(e),this.endPost_=Fb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,c){return this.matches(new Vn(t,r))||(r=Nn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Nn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Nn.EMPTY_NODE);const o=this;return t.forEachChild(qr,(c,f)=>{o.matches(new Vn(c,f))||(i=i.updateImmediateChild(c,Nn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class wW{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Fb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,c){return this.rangedFilter_.matches(new Vn(t,r))||(r=Nn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,c):this.fullLimitUpdateChild_(e,t,r,o,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Nn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Nn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const f=o.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),c++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(Nn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;o.hasNext();){const f=o.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:i=i.updateImmediateChild(f.name,Nn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let c;if(this.reverse_){const S=this.index_.getCompare();c=(O,G)=>S(G,O)}else c=this.index_.getCompare();const f=e;(0,U.hu)(f.numChildren()===this.limit_,"");const m=new Vn(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=O&&(O.name===t||f.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const G=null==O?1:c(O,m);if(C&&!r.isEmpty()&&G>=0)return null!=o&&o.trackChildChange(Lb(t,r,S)),f.updateImmediateChild(t,r);{null!=o&&o.trackChildChange(Nb(t,S));const Ne=f.updateImmediateChild(t,Nn.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=o&&o.trackChildChange(V0(O.name,O.node)),Ne.updateImmediateChild(O.name,O.node)):Ne}}return r.isEmpty()?e:C&&c(v,m)>=0?(null!=o&&(o.trackChildChange(Nb(v.name,v.node)),o.trackChildChange(V0(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Nn.EMPTY_NODE)):e}}class AR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$p}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qr}copy(){const e=new AR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function HN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function GN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function RR(n,e){const t=n.copy();return t.index_=e,t}function pV(n){const e={};if(n.isDefault())return e;let t;if(n.index_===qr?t="$priority":n.index_===VN?t="$value":n.index_===gd?t="$key":((0,U.hu)(n.index_ instanceof $N,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,U.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,U.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function gV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==qr&&(e.i=n.index_.toString()),e}class xR extends J${constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Sb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=xR.getListenId_(e,r),f={};this.listens_[c]=f;const m=pV(e._queryParams);this.restRequest_(o+".json",m,(v,C)=>{let S=C;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(o,S,!1,r),(0,U.DV)(this.listens_,c)===f){let O;O=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(O,null)}})}unlisten(e,t){const r=xR.getListenId_(e,t);delete this.listens_[r]}get(e){const t=pV(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(o,c)=>{let f=c;404===o&&(f=null,o=null),null===o?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,U.cI)(f.responseText)}catch{ko("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&ko("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class AW{constructor(){this.rootNode_=Nn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function MR(){return{value:null,children:new Map}}function j0(n,e,t){if($n(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Un(e);n.children.has(r)||n.children.set(r,MR()),j0(n.children.get(r),e=Lr(e),t)}}function zN(n,e){if($n(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(qr,(r,i)=>{j0(n,new Er(r),i)}),zN(n,e)}}if(n.children.size>0){const t=Un(e);return e=Lr(e),n.children.has(t)&&zN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function WN(n,e,t){null!==n.value?t(e,n.value):function RW(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{WN(i,new Er(e.toString()+"/"+r),t)})}class xW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Xs(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class PW{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xW(e);const r=1e4+2e4*Math.random();Rb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Xs(e,(i,o)=>{o>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Rb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var md=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(md||{});function KN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kR{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=md.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($n(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Er(e));return new kR(cr(),t,this.revert)}}return(0,U.hu)(Un(this.path)===e,"operationForChild called for unrelated child."),new kR(Lr(this.path),this.affectedTree,this.revert)}}class Bb{constructor(e,t){this.source=e,this.path=t,this.type=md.LISTEN_COMPLETE}operationForChild(e){return $n(this.path)?new Bb(this.source,cr()):new Bb(this.source,Lr(this.path))}}class C_{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=md.OVERWRITE}operationForChild(e){return $n(this.path)?new C_(this.source,cr(),this.snap.getImmediateChild(e)):new C_(this.source,Lr(this.path),this.snap)}}class H0{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=md.MERGE}operationForChild(e){if($n(this.path)){const t=this.children.subtree(new Er(e));return t.isEmpty()?null:t.value?new C_(this.source,cr(),t.value):new H0(this.source,cr(),t)}return(0,U.hu)(Un(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new H0(this.source,Lr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($n(e))return this.isFullyInitialized()&&!this.filtered_;const t=Un(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class OW{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ub(n,e,t,r,i,o){const c=r.filter(f=>f.type===t);c.sort((f,m)=>function FW(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new Vn(e.childName,e.snapshotNode),i=new Vn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),c.forEach(f=>{const m=function LW(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,o);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function PR(n,e){return{eventCache:n,serverCache:e}}function $b(n,e,t,r){return PR(new Hp(e,t,r),n.serverCache)}function _V(n,e,t,r){return PR(n.eventCache,new Hp(e,t,r))}function OR(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function T_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let ZN;class Yr{constructor(e,t=(()=>(ZN||(ZN=new wa(Ez)),ZN))()){this.value=e,this.children=t}static fromObject(e){let t=new Yr(null);return Xs(e,(r,i)=>{t=t.set(new Er(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:cr(),value:this.value};if($n(e))return null;{const r=Un(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Lr(e),t);return null!=o?{path:gi(new Er(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($n(e))return this;{const t=Un(e),r=this.children.get(t);return null!==r?r.subtree(Lr(e)):new Yr(null)}}set(e,t){if($n(e))return new Yr(t,this.children);{const r=Un(e),o=(this.children.get(r)||new Yr(null)).set(Lr(e),t),c=this.children.insert(r,o);return new Yr(this.value,c)}}remove(e){if($n(e))return this.children.isEmpty()?new Yr(null):new Yr(null,this.children);{const t=Un(e),r=this.children.get(t);if(r){const i=r.remove(Lr(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Yr(null):new Yr(this.value,o)}return this}}get(e){if($n(e))return this.value;{const t=Un(e),r=this.children.get(t);return r?r.get(Lr(e)):null}}setTree(e,t){if($n(e))return t;{const r=Un(e),o=(this.children.get(r)||new Yr(null)).setTree(Lr(e),t);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Yr(this.value,c)}}fold(e){return this.fold_(cr(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(gi(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,cr(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if($n(e))return null;{const o=Un(e),c=this.children.get(o);return c?c.findOnPath_(Lr(e),gi(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,cr(),t)}foreachOnPath_(e,t,r){if($n(e))return this;{this.value&&r(t,this.value);const i=Un(e),o=this.children.get(i);return o?o.foreachOnPath_(Lr(e),gi(t,i),r):new Yr(null)}}foreach(e){this.foreach_(cr(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(gi(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ru{constructor(e){this.writeTree_=e}static empty(){return new ru(new Yr(null))}}function Vb(n,e,t){if($n(e))return new ru(new Yr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const c=Xo(i,e);return o=o.updateChild(c,t),new ru(n.writeTree_.set(i,o))}{const i=new Yr(t),o=n.writeTree_.setTree(e,i);return new ru(o)}}}function XN(n,e,t){let r=n;return Xs(t,(i,o)=>{r=Vb(r,gi(e,i),o)}),r}function vV(n,e){if($n(e))return ru.empty();{const t=n.writeTree_.setTree(e,new Yr(null));return new ru(t)}}function QN(n,e){return null!=D_(n,e)}function D_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Xo(t.path,e)):null}function yV(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(qr,(r,i)=>{e.push(new Vn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Vn(r,i.value))}),e}function Gp(n,e){if($n(e))return n;{const t=D_(n,e);return new ru(null!=t?new Yr(t):n.writeTree_.subtree(e))}}function JN(n){return n.writeTree_.isEmpty()}function G0(n,e){return IV(cr(),n.writeTree_,e)}function IV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,U.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=IV(gi(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(gi(n,".priority"),r)),t}}function NR(n,e){return TV(e,n)}function HW(n,e){if(n.snap)return tc(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&tc(gi(n.path,t),e))return!0;return!1}function zW(n){return n.visible}function EV(n,e,t){let r=ru.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const c=o.path;let f;if(o.snap)tc(t,c)?(f=Xo(t,c),r=Vb(r,f,o.snap)):tc(c,t)&&(f=Xo(c,t),r=Vb(r,cr(),o.snap.getChild(f)));else{if(!o.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(tc(t,c))f=Xo(t,c),r=XN(r,f,o.children);else if(tc(c,t))if(f=Xo(c,t),$n(f))r=XN(r,cr(),o.children);else{const m=(0,U.DV)(o.children,Un(f));if(m){const v=m.getChild(Lr(f));r=Vb(r,cr(),v)}}}}}return r}function wV(n,e,t,r,i){if(r||i){const o=Gp(n.visibleWrites,e);return!i&&JN(o)?t:i||null!=t||QN(o,cr())?G0(EV(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(tc(v.path,e)||tc(e,v.path))},e),t||Nn.EMPTY_NODE):null}{const o=D_(n.visibleWrites,e);if(null!=o)return o;{const c=Gp(n.visibleWrites,e);return JN(c)?t:null!=t||QN(c,cr())?G0(c,t||Nn.EMPTY_NODE):null}}}function LR(n,e,t,r){return wV(n.writeTree,n.treePath,e,t,r)}function e1(n,e){return function WW(n,e,t){let r=Nn.EMPTY_NODE;const i=D_(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(qr,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){const o=Gp(n.visibleWrites,e);return t.forEachChild(qr,(c,f)=>{const m=G0(Gp(o,new Er(c)),f);r=r.updateImmediateChild(c,m)}),yV(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return yV(Gp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function bV(n,e,t,r){return function qW(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=gi(e,t);if(QN(n.visibleWrites,o))return null;{const c=Gp(n.visibleWrites,o);return JN(c)?i.getChild(t):G0(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function FR(n,e){return function KW(n,e){return D_(n.visibleWrites,e)}(n.writeTree,gi(n.treePath,e))}function t1(n,e,t){return function YW(n,e,t,r){const i=gi(e,t),o=D_(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?G0(Gp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function CV(n,e){return TV(gi(n.treePath,e),n.writeTree)}function TV(n,e){return{treePath:n,writeTree:e}}class JW{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,Lb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,Nb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,V0(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Lb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const DV=new class eq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class n1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Hp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return t1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:T_(this.viewCache_),o=function QW(n,e,t,r,i,o){return function ZW(n,e,t,r,i,o,c){let f;const m=Gp(n.visibleWrites,e),v=D_(m,cr());if(null!=v)f=v;else{if(null==t)return[];f=G0(m,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const C=[],S=c.getCompare(),O=o?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let G=O.getNext();for(;G&&C.length<i;)0!==S(G,r)&&C.push(G),G=O.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function SV(n,e,t,r,i,o){const c=e.eventCache;if(null!=FR(r,t))return e;{let f,m;if($n(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=T_(e),S=e1(r,v instanceof Nn?v:Nn.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const v=LR(r,T_(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const v=Un(t);if(".priority"===v){(0,U.hu)(1===jp(t),"Can't have a priority with additional path components");const C=c.getNode();m=e.serverCache.getNode();const S=bV(r,t,C,m);f=null!=S?n.filter.updatePriority(C,S):c.getNode()}else{const C=Lr(t);let S;if(c.isCompleteForChild(v)){m=e.serverCache.getNode();const O=bV(r,t,c.getNode(),m);S=null!=O?c.getNode().getImmediateChild(v).updateChild(C,O):c.getNode().getImmediateChild(v)}else S=t1(r,v,e.serverCache);f=null!=S?n.filter.updateChild(c.getNode(),v,S,C,i,o):c.getNode()}}return $b(e,f,c.isFullyInitialized()||$n(t),n.filter.filtersNodes())}}function BR(n,e,t,r,i,o,c,f){const m=e.serverCache;let v;const C=c?n.filter:n.filter.getIndexedFilter();if($n(t))v=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const G=m.getNode().updateChild(t,r);v=C.updateFullNode(m.getNode(),G,null)}else{const G=Un(t);if(!m.isCompleteForPath(t)&&jp(t)>1)return e;const ne=Lr(t),Ye=m.getNode().getImmediateChild(G).updateChild(ne,r);v=".priority"===G?C.updatePriority(m.getNode(),Ye):C.updateChild(m.getNode(),G,Ye,ne,DV,null)}const S=_V(e,v,m.isFullyInitialized()||$n(t),C.filtersNodes());return SV(n,S,t,i,new n1(i,S,o),f)}function r1(n,e,t,r,i,o,c){const f=e.eventCache;let m,v;const C=new n1(i,e,o);if($n(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=$b(e,v,!0,n.filter.filtersNodes());else{const S=Un(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=$b(e,v,f.isFullyInitialized(),f.isFiltered());else{const O=Lr(t),G=f.getNode().getImmediateChild(S);let ne;if($n(O))ne=r;else{const Ne=C.getCompleteChild(S);ne=null!=Ne?".priority"===ON(O)&&Ne.getChild(rV(O)).isEmpty()?Ne:Ne.updateChild(O,r):Nn.EMPTY_NODE}m=G.equals(ne)?e:$b(e,n.filter.updateChild(f.getNode(),S,ne,O,C,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function AV(n,e){return n.eventCache.isCompleteForChild(e)}function RV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function i1(n,e,t,r,i,o,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=$n(t)?r:new Yr(null).setTree(t,r);const C=e.serverCache.getNode();return v.children.inorderTraversal((S,O)=>{if(C.hasChild(S)){const ne=RV(0,e.serverCache.getNode().getImmediateChild(S),O);m=BR(n,m,new Er(S),ne,i,o,c,f)}}),v.children.inorderTraversal((S,O)=>{const G=!e.serverCache.isCompleteForChild(S)&&null===O.value;if(!C.hasChild(S)&&!G){const Ne=RV(0,e.serverCache.getNode().getImmediateChild(S),O);m=BR(n,m,new Er(S),Ne,i,o,c,f)}}),m}class cq{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new jN(r.getIndex()),o=function bW(n){return n.loadsAllData()?new jN(n.getIndex()):n.hasLimit()?new wW(n):new Fb(n)}(r);this.processor_=function tq(n){return{filter:n}}(o);const c=t.serverCache,f=t.eventCache,m=i.updateFullNode(Nn.EMPTY_NODE,c.getNode(),null),v=o.updateFullNode(Nn.EMPTY_NODE,f.getNode(),null),C=new Hp(m,c.isFullyInitialized(),i.filtersNodes()),S=new Hp(v,f.isFullyInitialized(),o.filtersNodes());this.viewCache_=PR(S,C),this.eventGenerator_=new OW(this.query_)}get query(){return this.query_}}function hq(n,e){const t=T_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$n(e)&&!t.getImmediateChild(Un(e)).isEmpty())?t.getChild(e):null}function xV(n){return 0===n.eventRegistrations_.length}function MV(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function kV(n,e,t,r){e.type===md.MERGE&&null!==e.source.queryId&&((0,U.hu)(T_(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(OR(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function rq(n,e,t,r,i){const o=new JW;let c,f;if(t.type===md.OVERWRITE){const v=t;v.source.fromUser?c=r1(n,e,v.path,v.snap,r,i,o):((0,U.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!$n(v.path),c=BR(n,e,v.path,v.snap,r,i,f,o))}else if(t.type===md.MERGE){const v=t;v.source.fromUser?c=function sq(n,e,t,r,i,o,c){let f=e;return r.foreach((m,v)=>{const C=gi(t,m);AV(e,Un(C))&&(f=r1(n,f,C,v,i,o,c))}),r.foreach((m,v)=>{const C=gi(t,m);AV(e,Un(C))||(f=r1(n,f,C,v,i,o,c))}),f}(n,e,v.path,v.children,r,i,o):((0,U.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),c=i1(n,e,v.path,v.children,r,i,f,o))}else if(t.type===md.ACK_USER_WRITE){const v=t;c=v.revert?function lq(n,e,t,r,i,o){let c;if(null!=FR(r,t))return e;{const f=new n1(r,e,i),m=e.eventCache.getNode();let v;if($n(t)||".priority"===Un(t)){let C;if(e.serverCache.isFullyInitialized())C=LR(r,T_(e));else{const S=e.serverCache.getNode();(0,U.hu)(S instanceof Nn,"serverChildren would be complete if leaf node"),C=e1(r,S)}v=n.filter.updateFullNode(m,C,o)}else{const C=Un(t);let S=t1(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=m.getImmediateChild(C)),v=null!=S?n.filter.updateChild(m,C,S,Lr(t),f,o):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Nn.EMPTY_NODE,Lr(t),f,o):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=LR(r,T_(e)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,o)))}return c=e.serverCache.isFullyInitialized()||null!=FR(r,cr()),$b(e,v,c,n.filter.filtersNodes())}}(n,e,v.path,r,i,o):function oq(n,e,t,r,i,o,c){if(null!=FR(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if($n(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return BR(n,e,t,m.getNode().getChild(t),i,o,f,c);if($n(t)){let v=new Yr(null);return m.getNode().forEachChild(gd,(C,S)=>{v=v.set(new Er(C),S)}),i1(n,e,t,v,i,o,f,c)}return e}{let v=new Yr(null);return r.foreach((C,S)=>{const O=gi(t,C);m.isCompleteForPath(O)&&(v=v.set(C,m.getNode().getChild(O)))}),i1(n,e,t,v,i,o,f,c)}}(n,e,v.path,v.affectedTree,r,i,o)}else{if(t.type!==md.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);c=function aq(n,e,t,r,i){const o=e.serverCache;return SV(n,_V(e,o.getNode(),o.isFullyInitialized()||$n(t),o.isFiltered()),t,r,DV,i)}(n,e,t.path,r,o)}const m=o.getChanges();return function iq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=OR(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(fV(OR(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function nq(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,U.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,PV(n,o.changes,o.viewCache.eventCache.getNode(),null)}function PV(n,e,t,r){return function NW(n,e,t,r){const i=[],o=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function EW(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Ub(n,i,"child_removed",e,r,t),Ub(n,i,"child_added",e,r,t),Ub(n,i,"child_moved",o,r,t),Ub(n,i,"child_changed",e,r,t),Ub(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let UR,VR;class OV{constructor(){this.views=new Map}}function s1(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,U.hu)(null!=o,"SyncTree gave us an op for an invalid query."),kV(o,e,t,r)}{let o=[];for(const c of n.views.values())o=o.concat(kV(c,e,t,r));return o}}function NV(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let f=LR(t,i?r:null),m=!1;f?m=!0:r instanceof Nn?(f=e1(t,r),m=!1):(f=Nn.EMPTY_NODE,m=!1);const v=PR(new Hp(f,m,!1),new Hp(r,i,!1));return new cq(e,v)}return c}function LV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zp(n,e){let t=null;for(const r of n.views.values())t=t||hq(r,e);return t}function FV(n,e){return e._queryParams.loadsAllData()?$R(n):n.views.get(e._queryIdentifier)}function BV(n,e){return null!=FV(n,e)}function Wp(n){return null!=$R(n)}function $R(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let wq=1;class UV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yr(null),this.pendingWriteTree_=function XW(){return{visibleWrites:ru.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function o1(n,e,t,r,i){return function UW(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Vb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?z0(n,new C_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function qp(n,e,t=!1){const r=function VW(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function jW(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&HW(f,r.path)?i=!1:tc(r.path,f.path)&&(o=!0)),c--}return!!i&&(o?(function GW(n){n.visibleWrites=EV(n.allWrites,zW,cr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=vV(n.visibleWrites,r.path):Xs(r.children,m=>{n.visibleWrites=vV(n.visibleWrites,gi(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let o=new Yr(null);return null!=r.snap?o=o.set(cr(),!0):Xs(r.children,c=>{o=o.set(new Er(c),!0)}),z0(n,new kR(r.path,o,t))}return[]}function jb(n,e,t){return z0(n,new C_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function jR(n,e,t,r,i=!1){const o=e._path,c=n.syncPointTree_.get(o);let f=[];if(c&&("default"===e._queryIdentifier||BV(c,e))){const m=function yq(n,e,t,r){const i=e._queryIdentifier,o=[];let c=[];const f=Wp(n);if("default"===i)for(const[m,v]of n.views.entries())c=c.concat(MV(v,t,r)),xV(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||o.push(v.query));else{const m=n.views.get(i);m&&(c=c.concat(MV(m,t,r)),xV(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||o.push(m.query)))}return f&&!Wp(n)&&o.push(new(function mq(){return(0,U.hu)(UR,"Reference.ts has not been loaded"),UR}())(e._repo,e._path)),{removed:o,events:c}}(c,e,t,r);(function _q(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const v=m.removed;if(f=m.events,!i){const C=-1!==v.findIndex(O=>O._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(O,G)=>Wp(G));if(C&&!S){const O=n.syncPointTree_.subtree(o);if(!O.isEmpty()){const G=function Rq(n){return n.fold((e,t,r)=>{if(t&&Wp(t))return[$R(t)];{let i=[];return t&&(i=LV(t)),Xs(r,(o,c)=>{i=i.concat(c)}),i}})}(O);for(let ne=0;ne<G.length;++ne){const Ne=G[ne],Ye=Ne.query,Ct=HV(n,Ne);n.listenProvider_.startListening(Gb(Ye),Hb(n,Ye),Ct.hashFn,Ct.onComplete)}}}!S&&v.length>0&&!r&&(C?n.listenProvider_.stopListening(Gb(e),null):v.forEach(O=>{const G=n.queryToTagMap.get(GR(O));n.listenProvider_.stopListening(Gb(O),G)}))}!function xq(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=GR(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,v)}return f}function $V(n,e,t,r){const i=l1(n,r);if(null!=i){const o=c1(i),c=o.path,f=o.queryId,m=Xo(c,e);return u1(n,c,new C_(KN(f),m,t))}return[]}function a1(n,e,t,r=!1){const i=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(i,(O,G)=>{const ne=Xo(O,i);o=o||zp(G,ne),c=c||Wp(G)});let m,f=n.syncPointTree_.get(i);f?(c=c||Wp(f),o=o||zp(f,cr())):(f=new OV,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=o?m=!0:(m=!1,o=Nn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((G,ne)=>{const Ne=zp(ne,cr());Ne&&(o=o.updateImmediateChild(G,Ne))}));const v=BV(f,e);if(!v&&!e._queryParams.loadsAllData()){const O=GR(e);(0,U.hu)(!n.queryToTagMap.has(O),"View does not exist, but we have a tag");const G=function Mq(){return wq++}();n.queryToTagMap.set(O,G),n.tagToQueryMap.set(G,O)}let S=function vq(n,e,t,r,i,o){const c=NV(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function fq(n,e){n.eventRegistrations_.push(e)}(c,t),function pq(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(qr,(o,c)=>{r.push(V0(o,c))}),t.isFullyInitialized()&&r.push(fV(t.getNode())),PV(n,r,t.getNode(),e)}(c,t)}(f,e,t,NR(n.pendingWriteTree_,i),o,m);if(!v&&!c&&!r){const O=FV(f,e);S=S.concat(function kq(n,e,t){const r=e._path,i=Hb(n,e),o=HV(n,t),c=n.listenProvider_.startListening(Gb(e),i,o.hashFn,o.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!Wp(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,C,S)=>{if(!$n(v)&&C&&Wp(C))return[$R(C).query];{let O=[];return C&&(O=O.concat(LV(C).map(G=>G.query))),Xs(S,(G,ne)=>{O=O.concat(ne)}),O}});for(let v=0;v<m.length;++v){const C=m[v];n.listenProvider_.stopListening(Gb(C),Hb(n,C))}}return c}(n,e,O))}return S}function HR(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,f)=>{const v=zp(f,Xo(c,e));if(v)return v});return wV(i,e,o,t,!0)}function z0(n,e){return VV(e,n.syncPointTree_,null,NR(n.pendingWriteTree_,cr()))}function VV(n,e,t,r){if($n(n.path))return jV(n,e,t,r);{const i=e.get(cr());null==t&&null!=i&&(t=zp(i,cr()));let o=[];const c=Un(n.path),f=n.operationForChild(c),m=e.children.get(c);if(m&&f){const v=t?t.getImmediateChild(c):null,C=CV(r,c);o=o.concat(VV(f,m,v,C))}return i&&(o=o.concat(s1(i,n,r,t))),o}}function jV(n,e,t,r){const i=e.get(cr());null==t&&null!=i&&(t=zp(i,cr()));let o=[];return e.children.inorderTraversal((c,f)=>{const m=t?t.getImmediateChild(c):null,v=CV(r,c),C=n.operationForChild(c);C&&(o=o.concat(jV(C,f,m,v)))}),i&&(o=o.concat(s1(i,n,r,t))),o}function HV(n,e){const t=e.query,r=Hb(n,t);return{hashFn:()=>(function uq(n){return n.viewCache_.serverCache.getNode()}(e)||Nn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Dq(n,e,t){const r=l1(n,t);if(r){const i=c1(r),o=i.path,c=i.queryId,f=Xo(o,e);return u1(n,o,new Bb(KN(c),f))}return[]}(n,t._path,r):function Tq(n,e){return z0(n,new Bb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function Cz(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return jR(n,t,null,o)}}}}function Hb(n,e){const t=GR(e);return n.queryToTagMap.get(t)}function GR(n){return n._path.toString()+"$"+n._queryIdentifier}function l1(n,e){return n.tagToQueryMap.get(e)}function c1(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Er(n.substr(0,e))}}function u1(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),s1(r,t,NR(n.pendingWriteTree_,e),null)}function Gb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Eq(){return(0,U.hu)(VR,"Reference.ts has not been loaded"),VR}())(n._repo,n._path):n}class d1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new d1(t)}node(){return this.node_}}class h1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gi(this.path_,e);return new h1(this.syncTree_,t)}node(){return HR(this.syncTree_,this.path_)}}const Pq=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},GV=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Oq(n[".sv"],e,t):"object"==typeof n[".sv"]?Nq(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Oq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,U.hu)(!1,"Unexpected server value: "+n)},Nq=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},zV=function(n,e,t,r){return p1(e,new h1(t,n),r)},f1=function(n,e,t){return p1(n,new d1(e),t)};function p1(n,e,t){const r=n.getPriority().val(),i=GV(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,f=GV(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new U0(f,Pi(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new U0(i))),c.forEachChild(qr,(f,m)=>{const v=p1(m,e.getImmediateChild(f),t);v!==m&&(o=o.updateImmediateChild(f,v))}),o}}class g1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function zR(n,e){let t=e instanceof Er?e:new Er(e),r=n,i=Un(t);for(;null!==i;){const o=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new g1(i,r,o),t=Lr(t),i=Un(t)}return r}function S_(n){return n.node.value}function m1(n,e){n.node.value=e,_1(n)}function WV(n){return n.node.childCount>0}function WR(n,e){Xs(n.node.children,(t,r)=>{e(new g1(t,n,r))})}function qV(n,e,t,r){t&&!r&&e(n),WR(n,i=>{qV(i,e,!0,r)}),t&&r&&e(n)}function zb(n){return new Er(null===n.parent?n.name:zb(n.parent)+"/"+n.name)}function _1(n){null!==n.parent&&function Bq(n,e,t){const r=function Lq(n){return void 0===S_(n)&&!WV(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,_1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,_1(n))}(n.parent,n.name,n)}const Uq=/[\[\].#$\/\u0000-\u001F\u007F]/,$q=/[\[\].#$\u0000-\u001F\u007F]/,v1=10485760,qR=function(n){return"string"==typeof n&&0!==n.length&&!Uq.test(n)},YV=function(n){return"string"==typeof n&&0!==n.length&&!$q.test(n)},Wb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!IR(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},_d=function(n,e,t,r){r&&void 0===e||qb((0,U.gK)(n,"value"),e,t)},qb=function(n,e,t){const r=t instanceof Er?new rW(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+w_(r));if("function"==typeof e)throw new Error(n+"contains a function "+w_(r)+" with contents = "+e.toString());if(IR(e))throw new Error(n+"contains "+e.toString()+" "+w_(r));if("string"==typeof e&&e.length>v1/3&&(0,U.ug)(e)>v1)throw new Error(n+"contains a string greater than "+v1+" utf8 bytes "+w_(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Xs(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!qR(c)))throw new Error(n+" contains an invalid key ("+c+") "+w_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function iW(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),iV(n)})(r,c),qb(n,f,r),function sW(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+w_(r)+" in addition to actual children.")}},KV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Xs(e,(c,f)=>{const m=new Er(c);if(qb(i,f,gi(t,m)),".priority"===ON(m)&&!Wb(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=Mb(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!qR(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(nW);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&tc(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},y1=function(n,e,t){if(!t||void 0!==e){if(IR(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Wb(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Yb=function(n,e,t,r){if(!(r&&void 0===t||qR(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Kb=function(n,e,t,r){if(!(r&&void 0===t||YV(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Hq=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Kb(n,e,t,r)},nc=function(n,e){if(".info"===Un(e))throw new Error(n+" failed = Can't modify data under /.info/")},ZV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!qR(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YV(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Gq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function YR(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!NN(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function XV(n,e,t){YR(n,t),QV(n,r=>NN(r,e))}function cl(n,e,t){YR(n,t),QV(n,r=>tc(r,e)||tc(e,r))}function QV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(zq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function zq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();I_&&Zs("event: "+t.toString()),F0(r)}}}const JV="repo_interrupt",Wq=25;class qq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MR(),this.transactionQueueTree_=new g1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function e3(n){const t=n.infoData_.getNode(new Er(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Zb(n){return Pq({timestamp:e3(n)})}function t3(n,e,t,r,i){n.dataUpdateCount++;const o=new Er(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,U.UI)(t,v=>Pi(v));c=function Sq(n,e,t,r){const i=l1(n,r);if(i){const o=c1(i),c=o.path,f=o.queryId,m=Xo(c,e),v=Yr.fromObject(t);return u1(n,c,new H0(KN(f),m,v))}return[]}(n.serverSyncTree_,o,m,i)}else{const m=Pi(t);c=$V(n.serverSyncTree_,o,m,i)}else if(r){const m=(0,U.UI)(t,v=>Pi(v));c=function Cq(n,e,t){const r=Yr.fromObject(t);return z0(n,new H0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,m)}else{const m=Pi(t);c=jb(n.serverSyncTree_,o,m)}let f=o;c.length>0&&(f=q0(n,o)),cl(n.eventQueue_,f,c)}function n3(n,e){I1(n,"connected",e),!1===e&&function Qq(n){W0(n,"onDisconnectEvents");const e=Zb(n),t=MR();WN(n.onDisconnect_,cr(),(i,o)=>{const c=zV(i,o,n.serverSyncTree_,e);j0(t,i,c)});let r=[];WN(t,cr(),(i,o)=>{r=r.concat(jb(n.serverSyncTree_,i,o));const c=C1(n,i);q0(n,c)}),n.onDisconnect_=MR(),cl(n.eventQueue_,cr(),r)}(n)}function I1(n,e,t){const r=new Er("/.info/"+e),i=Pi(t);n.infoData_.updateSnapshot(r,i);const o=jb(n.infoSyncTree_,r,i);cl(n.eventQueue_,r,o)}function KR(n){return n.nextWriteId_++}function E1(n,e,t,r,i){W0(n,"set",{path:e.toString(),value:t,priority:r});const o=Zb(n),c=Pi(t,r),f=HR(n.serverSyncTree_,e),m=f1(c,f,o),v=KR(n),C=o1(n.serverSyncTree_,e,m,v,!0);YR(n.eventQueue_,C),n.server_.put(e.toString(),c.val(!0),(O,G)=>{const ne="ok"===O;ne||ko("set at "+e+" failed: "+O);const Ne=qp(n.serverSyncTree_,v,!ne);cl(n.eventQueue_,e,Ne),Yp(0,i,O,G)});const S=C1(n,e);q0(n,S),cl(n.eventQueue_,S,[])}function Jq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&zN(n.onDisconnect_,e),Yp(0,t,r,i)})}function r3(n,e,t,r){const i=Pi(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,c)=>{"ok"===o&&j0(n.onDisconnect_,e,i),Yp(0,r,o,c)})}function w1(n,e,t){let r;r=".info"===Un(e._path)?jR(n.infoSyncTree_,e,t):jR(n.serverSyncTree_,e,t),XV(n.eventQueue_,e._path,r)}function i3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(JV)}function W0(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Zs(t,...e)}function Yp(n,e,t,r){e&&F0(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,e(c)}})}function b1(n,e,t){return HR(n.serverSyncTree_,e,t)||Nn.EMPTY_NODE}function ZR(n,e=n.transactionQueueTree_){if(e||XR(n,e),S_(e)){const t=o3(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function s5(n,e,t){const r=t.map(v=>v.currentWriteId),i=b1(n,e,r);let o=i;const c=i.hash();for(let v=0;v<t.length;v++){const C=t[v];(0,U.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Xo(e,C.path);o=o.updateChild(S,C.currentOutputSnapshotRaw)}const f=o.val(!0),m=e;n.server_.put(m.toString(),f,v=>{W0(n,"transaction put response",{path:m.toString(),status:v});let C=[];if("ok"===v){const S=[];for(let O=0;O<t.length;O++)t[O].status=2,C=C.concat(qp(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&S.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();XR(n,zR(n.transactionQueueTree_,e)),ZR(n,n.transactionQueueTree_),cl(n.eventQueue_,e,C);for(let O=0;O<S.length;O++)F0(S[O])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ko("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}q0(n,e)}},c)}(n,zb(e),t)}else WV(e)&&WR(e,t=>{ZR(n,t)})}function q0(n,e){const t=s3(n,e),r=zb(t);return function o5(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=Xo(t,m.path);let S,C=!1;if((0,U.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,S=m.abortReason,i=i.concat(qp(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=Wq)C=!0,S="maxretry",i=i.concat(qp(n.serverSyncTree_,m.currentWriteId,!0));else{const O=b1(n,m.path,c);m.currentInputSnapshot=O;const G=e[f].update(O.val());if(void 0!==G){qb("transaction failed: Data returned ",G,m.path);let ne=Pi(G);"object"==typeof G&&null!=G&&(0,U.r3)(G,".priority")||(ne=ne.updatePriority(O.getPriority()));const Ye=m.currentWriteId,Ct=Zb(n),Pt=f1(ne,O,Ct);m.currentOutputSnapshotRaw=ne,m.currentOutputSnapshotResolved=Pt,m.currentWriteId=KR(n),c.splice(c.indexOf(Ye),1),i=i.concat(o1(n.serverSyncTree_,m.path,Pt,m.currentWriteId,m.applyLocally)),i=i.concat(qp(n.serverSyncTree_,Ye,!0))}else C=!0,S="nodata",i=i.concat(qp(n.serverSyncTree_,m.currentWriteId,!0))}cl(n.eventQueue_,t,i),i=[],C&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}XR(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)F0(r[f]);ZR(n,n.transactionQueueTree_)}(n,o3(n,t),r),r}function s3(n,e){let t,r=n.transactionQueueTree_;for(t=Un(e);null!==t&&void 0===S_(r);)r=zR(r,t),t=Un(e=Lr(e));return r}function o3(n,e){const t=[];return a3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function a3(n,e,t){const r=S_(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);WR(e,i=>{a3(n,i,t)})}function XR(n,e){const t=S_(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,m1(e,t.length>0?t:void 0)}WR(e,r=>{XR(n,r)})}function C1(n,e){const t=zb(s3(n,e)),r=zR(n.transactionQueueTree_,e);return function Fq(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{T1(n,i)}),T1(n,r),qV(r,i=>{T1(n,i)}),t}function T1(n,e){const t=S_(e);if(t){const r=[];let i=[],o=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,U.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):((0,U.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(qp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?m1(e,void 0):t.length=o+1,cl(n.eventQueue_,zb(e),i);for(let c=0;c<r.length;c++)F0(r[c])}}const D1=function(n,e){const t=c5(n),r=t.namespace;return"firebase.com"===t.domain&&pd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&pd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ko("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new AN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Er(t.pathString)}},c5=function(n){let e="",t="",r="",i="",o="",c=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function a5(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,S)));const O=function l5(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ko(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(c="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const G=e.slice(0,v);if("localhost"===G.toLowerCase())t="localhost";else if(G.split(".").length<=2)t=G;else{const ne=e.indexOf(".");r=e.substring(0,ne).toLowerCase(),t=e.substring(ne+1),o=r}"ns"in O&&(o=O.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:o}},l3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",u5=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=l3.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=l3.charAt(e[i]);return(0,U.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class c3{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class u3{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class S1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class d3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return Jq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){nc("OnDisconnect.remove",this._path);const e=new U.BH;return r3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){nc("OnDisconnect.set",this._path),_d("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return r3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){nc("OnDisconnect.setWithPriority",this._path),_d("OnDisconnect.setWithPriority",e,this._path,!1),y1("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function e5(n,e,t,r,i){const o=Pi(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(c,f)=>{"ok"===c&&j0(n.onDisconnect_,e,o),Yp(0,i,c,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){nc("OnDisconnect.update",this._path),KV("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function t5(n,e,t,r){if((0,U.xb)(t))return Zs("onDisconnect().update() called with empty data.  Don't do anything."),void Yp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&Xs(t,(c,f)=>{const m=Pi(f);j0(n.onDisconnect_,gi(e,c),m)}),Yp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ba{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return $n(this._path)?null:ON(this._path)}get ref(){return new rc(this._repo,this._path)}get _queryIdentifier(){const e=gV(this._queryParams),t=DN(e);return"{}"===t?"default":t}get _queryObject(){return gV(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof ba))return!1;const t=this._repo===e._repo,r=NN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function tW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function QR(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Kp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===gd){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==$p)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Bh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===qr){if(null!=e&&!Wb(e)||null!=t&&!Wb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof $N||n.getIndex()===VN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function JR(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class rc extends ba{constructor(e,t){super(e,t,new AR,!1)}get parent(){const e=rV(this._path);return null===e?null:new rc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class A_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Er(e),r=R_(this.ref,e);return new A_(this._node.getChild(t),r,qr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new A_(i,R_(this.ref,r),qr)))}hasChild(e){const t=new Er(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function h3(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?R_(n._root,e):n._root}function f3(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=D1(e,n._repo.repoInfo_.nodeAdmin);ZV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&pd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),h3(n,t.path.toString())}function R_(n,e){return null===Un((n=(0,U.m9)(n))._path)?Hq("child","path",e,!1):Kb("child","path",e,!1),new rc(n._repo,gi(n._path,e))}function A1(n,e){n=(0,U.m9)(n),nc("set",n._path),_d("set",e,n._path,!1);const t=new U.BH;return E1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function g5(n,e){KV("update",e,n._path,!1);const t=new U.BH;return function Xq(n,e,t,r){W0(n,"update",{path:e.toString(),value:t});let i=!0;const o=Zb(n),c={};if(Xs(t,(f,m)=>{i=!1,c[f]=zV(gi(e,f),Pi(m),n.serverSyncTree_,o)}),i)Zs("update() called with empty data.  Don't do anything."),Yp(0,r,"ok",void 0);else{const f=KR(n),m=function bq(n,e,t,r){!function $W(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=XN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Yr.fromObject(t);return z0(n,new H0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,f);YR(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,C)=>{const S="ok"===v;S||ko("update at "+e+" failed: "+v);const O=qp(n.serverSyncTree_,f,!S),G=O.length>0?q0(n,e):e;cl(n.eventQueue_,G,O),Yp(0,r,v,C)}),Xs(t,v=>{const C=C1(n,gi(e,v));q0(n,C)}),cl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function m5(n){n=(0,U.m9)(n);const e=new S1(()=>{}),t=new Xb(e);return function Zq(n,e,t){const r=function Aq(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,C)=>{const S=Xo(v,t);r=r||zp(C,S)});let i=n.syncPointTree_.get(t);i?r=r||zp(i,cr()):(i=new OV,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,c=o?new Hp(r,!0,!1):null;return function dq(n){return OR(n.viewCache_)}(NV(i,e,NR(n.pendingWriteTree_,e._path),o?c.getNode():Nn.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=Pi(i).withIndex(e._queryParams.getIndex());let c;if(a1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=jb(n.serverSyncTree_,e._path,o);else{const f=Hb(n.serverSyncTree_,e);c=$V(n.serverSyncTree_,e._path,o,f)}return cl(n.eventQueue_,e._path,c),jR(n.serverSyncTree_,e,t,null,!0),o},i=>(W0(n,"get for query "+(0,U.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new A_(r,new rc(n._repo,n._path),n._queryParams.getIndex()))}class Xb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new c3("value",this,new A_(e.snapshotNode,new rc(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new u3(this,e,t):null}matches(e){return e instanceof Xb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ex{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new u3(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=R_(new rc(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new c3(e.type,this,new A_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ex&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Qb(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const m=t,v=(C,S)=>{w1(n._repo,n,f),m(C,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const c=new S1(t,o||void 0),f="value"===e?new Xb(c):new ex(e,c);return function n5(n,e,t){let r;r=".info"===Un(e._path)?a1(n.infoSyncTree_,e,t):a1(n.serverSyncTree_,e,t),XV(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>w1(n._repo,n,f)}function R1(n,e,t,r){return Qb(n,"value",e,t,r)}function p3(n,e,t,r){return Qb(n,"child_added",e,t,r)}function g3(n,e,t,r){return Qb(n,"child_changed",e,t,r)}function m3(n,e,t,r){return Qb(n,"child_moved",e,t,r)}function _3(n,e,t,r){return Qb(n,"child_removed",e,t,r)}function v3(n,e,t){let r=null;const i=t?new S1(t):null;"value"===e?r=new Xb(i):e&&(r=new ex(e,i)),w1(n._repo,n,r)}class iu{}class y3 extends iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_d("endAt",this._value,e._path,!0);const t=GN(e._queryParams,this._value,this._key);if(JR(t),Kp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ba(e._repo,e._path,t,e._orderByCalled)}}class v5 extends iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_d("endBefore",this._value,e._path,!1);const t=function SW(n,e,t){let r;return r=GN(n,e,n.index_===gd||t?t:$p),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(JR(t),Kp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ba(e._repo,e._path,t,e._orderByCalled)}}class I3 extends iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_d("startAt",this._value,e._path,!0);const t=HN(e._queryParams,this._value,this._key);if(JR(t),Kp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ba(e._repo,e._path,t,e._orderByCalled)}}class E5 extends iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_d("startAfter",this._value,e._path,!1);const t=function DW(n,e,t){let r;return r=HN(n,e,n.index_===gd||t?t:Bh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(JR(t),Kp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ba(e._repo,e._path,t,e._orderByCalled)}}class b5 extends iu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ba(e._repo,e._path,function CW(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class T5 extends iu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ba(e._repo,e._path,function TW(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class S5 extends iu{constructor(e){super(),this._path=e}_apply(e){QR(e,"orderByChild");const t=new Er(this._path);if($n(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new $N(t),i=RR(e._queryParams,r);return Kp(i),new ba(e._repo,e._path,i,!0)}}class R5 extends iu{_apply(e){QR(e,"orderByKey");const t=RR(e._queryParams,gd);return Kp(t),new ba(e._repo,e._path,t,!0)}}class M5 extends iu{_apply(e){QR(e,"orderByPriority");const t=RR(e._queryParams,qr);return Kp(t),new ba(e._repo,e._path,t,!0)}}class P5 extends iu{_apply(e){QR(e,"orderByValue");const t=RR(e._queryParams,VN);return Kp(t),new ba(e._repo,e._path,t,!0)}}class N5 extends iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(_d("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new y3(this._value,this._key)._apply(new I3(this._value,this._key)._apply(e))}}function su(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function gq(n){(0,U.hu)(!UR,"__referenceConstructor has already been defined"),UR=n})(rc),function Iq(n){(0,U.hu)(!VR,"__referenceConstructor has already been defined"),VR=n}(rc);const x1={};function w3(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||pd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zs("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,c=D1(o,i),f=c.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,o=`http://${v}?ns=${f.namespace}`,c=D1(o,i),f=c.repoInfo):m=!c.repoInfo.secure;const C=i&&m?new xb(xb.OWNER):new xz(n.name,n.options,e);ZV("Invalid Firebase Database URL",c),$n(c.path)||pd("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function $5(n,e,t,r){let i=x1[e.name];i||(i={},x1[e.name]=i);let o=i[n.toURLString()];return o&&pd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new qq(n,false,t,r),i[n.toURLString()]=o,o}(f,n,C,new Rz(n.name,t));return new j5(S,n)}class j5{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Yq(n,e,t){if(n.stats_=MN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new xR(n.repoInfo_,(r,i,o,c)=>{t3(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>n3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new b_(n.repoInfo_,e,(r,i,o,c)=>{t3(n,r,i,o,c)},r=>{n3(n,r)},r=>{!function Kq(n,e){Xs(e,(t,r)=>{I1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Pz(n,e){const t=n.toString();return xN[t]||(xN[t]=e()),xN[t]}(n.repoInfo_,()=>new PW(n.stats_,n.server_)),n.infoData_=new AW,n.infoSyncTree_=new UV({startListening:(r,i,o,c)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=jb(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),I1(n,"connected",!1),n.serverSyncTree_=new UV({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(f,m)=>{const v=c(f,m);cl(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new rc(this._repo,cr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function U5(n,e){const t=x1[e];(!t||t[n.key]!==n)&&pd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),i3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pd("Cannot call "+e+" on a deleted database.")}}function b3(){z$.IS_TRANSPORT_INITIALIZED&&ko("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function H5(){b3(),Vp.forceDisallow()}function G5(){b3(),B0.forceDisallow(),Vp.forceAllow()}function q5(n,e){T$(n,e)}const K5={".sv":"timestamp"};class Q5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}b_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},b_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Y5(n){I$($c.SDK_VERSION),(0,$c._registerComponent)(new es.wA("database",(e,{instanceIdentifier:t})=>w3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$c.registerVersion)(v$,"0.14.4",n),(0,$c.registerVersion)(v$,"0.14.4","esm2017")}();const n9=new ps.Yd("@firebase/database-compat"),T3=function(n){n9.warn("FIREBASE WARNING: "+n)};class s9{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,T3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class o9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Zp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Kb("DataSnapshot.child","path",e,!1),new Zp(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Kb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Zp(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new ul(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class po{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const c=po.getCancelAndContextArgs_("Query.on",r,i),f=(v,C)=>{t.call(c.context,new Zp(this.database,v),C)};f.userCallback=t,f.context=c.context;const m=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(e){case"value":return R1(this._delegate,f,m),t;case"child_added":return p3(this._delegate,f,m),t;case"child_removed":return _3(this._delegate,f,m),t;case"child_changed":return g3(this._delegate,f,m),t;case"child_moved":return m3(this._delegate,f,m),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,v3(this._delegate,e,i)}else v3(this._delegate,e)}get(){return m5(this._delegate).then(e=>new Zp(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const o=po.getCancelAndContextArgs_("Query.once",r,i),c=new U.BH,f=(v,C)=>{const S=new Zp(this.database,v);t&&t.call(o.context,S,C),c.resolve(S)};f.userCallback=t,f.context=o.context;const m=v=>{o.cancel&&o.cancel.call(o.context,v),c.reject(v)};switch(e){case"value":R1(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":p3(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":_3(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":g3(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":m3(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new po(this.database,su(this._delegate,function C5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new b5(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new po(this.database,su(this._delegate,function D5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new T5(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new po(this.database,su(this._delegate,function A5(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Kb("orderByChild","path",n,!1),new S5(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new po(this.database,su(this._delegate,function x5(){return new R5}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new po(this.database,su(this._delegate,function k5(){return new M5}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new po(this.database,su(this._delegate,function O5(){return new P5}()))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new po(this.database,su(this._delegate,function I5(n=null,e){return Yb("startAt","key",e,!0),new I3(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new po(this.database,su(this._delegate,function w5(n,e){return Yb("startAfter","key",e,!0),new E5(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new po(this.database,su(this._delegate,function _5(n,e){return Yb("endAt","key",e,!0),new y3(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new po(this.database,su(this._delegate,function y5(n,e){return Yb("endBefore","key",e,!0),new v5(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new po(this.database,su(this._delegate,function L5(n,e){return Yb("equalTo","key",e,!0),new N5(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof po))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ul(this.database,new rc(this._delegate._repo,this._delegate._path))}}class ul extends po{constructor(e,t){super(e,new ba(t._repo,t._path,new AR,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ul(this.database,R_(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ul(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new ul(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=A1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,T3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nc("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=g5(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function p5(n,e,t){if(nc("setWithPriority",n._path),_d("setWithPriority",e,n._path,!1),y1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return E1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function h5(n){return nc("remove",n._path),A1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function J5(n,e,t){var r;if(n=(0,U.m9)(n),nc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,o=new U.BH,f=R1(n,()=>{});return function i5(n,e,t,r,i,o){W0(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:w$(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=b1(n,e,void 0);c.currentInputSnapshot=f;const m=c.update(f.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{qb("transaction failed: Data returned ",m,c.path),c.status=0;const v=zR(n.transactionQueueTree_,e),C=S_(v)||[];let S;C.push(c),m1(v,C),"object"==typeof m&&null!==m&&(0,U.r3)(m,".priority")?(S=(0,U.DV)(m,".priority"),(0,U.hu)(Wb(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(HR(n.serverSyncTree_,e)||Nn.EMPTY_NODE).getPriority().val();const O=Zb(n),G=Pi(m,S),ne=f1(G,f,O);c.currentOutputSnapshotRaw=G,c.currentOutputSnapshotResolved=ne,c.currentWriteId=KR(n);const Ne=o1(n.serverSyncTree_,e,ne,c.currentWriteId,c.applyLocally);cl(n.eventQueue_,e,Ne),ZR(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,C)=>{let S=null;m?o.reject(m):(S=new A_(C,new rc(n._repo,n._path),qr),o.resolve(new Q5(v,S)))},f,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new o9(o.committed,new Zp(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function f5(n,e){n=(0,U.m9)(n),nc("setPriority",n._path),y1("setPriority",e,!1);const t=new U.BH;return E1(n._repo,gi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function d5(n,e){n=(0,U.m9)(n),nc("push",n._path),_d("push",e,n._path,!0);const t=e3(n._repo),r=u5(t),i=R_(n,r),o=R_(n,r);let c;return c=null!=e?A1(o,e).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new ul(this.database,c));t&&i.then(()=>t(null),c=>t(c));const o=new ul(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return nc("Reference.onDisconnect",this._delegate._path),new s9(new d3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Jb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:H5,forceLongPolling:G5}}useEmulator(e,t,r={}){!function C3(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&pd("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new xb(xb.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);o=new xb(c)}!function B5(n,e,t,r){n.repoInfo_=new AN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof ul){const t=f3(this._delegate,e.toString());return new ul(this,t)}{const t=h3(this._delegate,e);return new ul(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=f3(this._delegate,e);return new ul(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function z5(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),i3(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function W5(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function r5(n){n.persistentConnection_&&n.persistentConnection_.resume(JV)}(n._repo)}(this._delegate)}}Jb.ServerValue={TIMESTAMP:function Z5(){return K5}(),increment:n=>function X5(n){return{".sv":{increment:n}}}(n)};var l9=Object.freeze({__proto__:null,initStandalone:function a9({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){I$(t);const c=new es.zt("auth-internal",new es.H0("database-standalone"));return c.setComponent(new es.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Jb(w3(n,c,void 0,e,o),n),namespace:i}}});const c9=Jb.ServerValue;function D3(n){return null==n}function S3(n){return"function"==typeof n.set}function A3(n,e){return S3(e)?e:n.ref(e)}function R3(n,e){if(function d9(n){return"string"==typeof n}(n))return e.stringCase();if(S3(n))return e.firebaseCase();if(function h9(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function eC(n,e,t="on",r=qu.z){return new ci.y(i=>{let o=null;return o=n[t](e,(c,f)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Kt.U)(i=>{const{snapshot:o,prevKey:c}=i;let f=null;return o.exists()&&(f=o.key),{type:e,payload:o,prevKey:c,key:f}}),(0,il.B)())}function x3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function g9(n,e){const{payload:t,prevKey:r,key:i}=e,o=x3(n,i),c=function p9(n,e){if(D3(e))return 0;{const t=x3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(o>-1){const f=n[o-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(o>-1){const f=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,f),n}return n;default:return n}}function M3(n){return(D3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function k3(n,e,t){return function f9(n,e,t){return eC(n,"value","once",t).pipe((0,wr.w)(r=>{const i=[(0,Wt.of)(r)];return e.forEach(o=>i.push(eC(n,o,"on",t))),(0,Lf.T)(...i).pipe(Rs(g9,[]))}),(0,am.x)())}(n,e=M3(e),t)}function P3(n,e,t){const r=(e=M3(e)).map(i=>eC(n,i,"on",t));return(0,Lf.T)(...r)}function O3(n,e){return function(r,i){return R3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function y9(n){return function(t){return t?R3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function N3(n,e){return function(){return eC(n,"value","on",e)}}!function u9(n){n.INTERNAL.registerComponent(new es.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Jb(i,r)},"PUBLIC").setServiceProps({Reference:ul,Query:po,Database:Jb,DataSnapshot:Zp,enableLogging:q5,INTERNAL:l9,ServerValue:c9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(MD.Z);const w9=new u.OlP("angularfire2.realtimeDatabaseURL"),b9=new u.OlP("angularfire2.database.use-emulator");let C9=(()=>{class n{constructor(t,r,i,o,c,f,m,v,C,S,O,G,ne,Ne,Ye){this.schedulers=f;const Ct=m,Pt=(0,xi.on)(t,c,r);v&&Lv(Pt,c,C,O,G,ne,S,Ne),this.database=(0,xi.cc)(`${Pt.name}.database.${i}`,"AngularFireDatabase",Pt.name,()=>{const yt=c.runOutsideAngular(()=>Pt.database(i||void 0));return Ct&&yt.useEmulator(...Ct),yt},[Ct])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>A3(this.database,t));let o=i;return r&&(o=r(i)),function I9(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:O3(r,"update"),set:O3(r,"set"),push:i=>r.push(i),remove:y9(r),snapshotChanges:i=>k3(n,i,t).pipe(Zn.iC),stateChanges:i=>P3(n,i,t).pipe(Zn.iC),auditTrail:i=>function m9(n,e,t){return function v9(n,e,t){return function _9(n,e){return eC(n,"value","on",e).pipe((0,Kt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function gz(...n){const e=(0,Us.jO)(n);return(0,Si.e)((t,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,yc.Xf)(n[m]).subscribe((0,or.x)(r,v=>{o[m]=v,!f&&!c[m]&&(c[m]=!0,(f=c.every(to.y))&&(c=null))},Cc.Z));t.subscribe((0,or.x)(r,m=>{if(f){const v=[m,...o];r.next(e?e(...v):v)}}))})}(e),(0,Kt.U)(([i,o])=>{const c=i.lastKeyToLoad,f=o.map(m=>m.key);return{actions:o,lastKeyToLoad:c,loadedKeys:f}}),function mz(n){return(0,Si.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,or.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Kt.U)(i=>i.actions))}(n,P3(n,e).pipe(Rs((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(Zn.iC),valueChanges:(i,o)=>k3(n,i,t).pipe((0,Kt.U)(f=>f.map(m=>o&&o.idField?Object.assign(Object.assign({},m.payload.val()),{[o.idField]:m.key}):m.payload.val())),Zn.iC)}}(o,this)}object(t){return function E9(n,e){return{query:n,snapshotChanges:()=>N3(n,e.schedulers.outsideAngular)().pipe(Zn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>N3(n,e.schedulers.outsideAngular)().pipe(Zn.iC,(0,Kt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>A3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xi.Dh),u.LFG(xi.xv,8),u.LFG(w9,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Zn.HU),u.LFG(b9,8),u.LFG(tm,8),u.LFG(kv,8),u.LFG(Pv,8),u.LFG(bn,8),u.LFG(Ov,8),u.LFG(Nv,8),u.LFG(Wu,8),u.LFG(Gf,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),T9=(()=>{class n{constructor(){em.Z.registerVersion("angularfire",Zn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[C9]}),n})(),L3=(()=>{var n;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),e})(),x_=(()=>{var n;class e extends L3{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),e})();const Qo=new u.OlP("NgValueAccessor"),A9={provide:Qo,useExisting:(0,u.Gpc)(()=>M1),multi:!0},x9=new u.OlP("CompositionEventMode");let M1=(()=>{var n;class e extends L3{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function R9(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(x9,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&u.NdJ("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[u._Bn([A9]),u.qOj]}),e})();function Xp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function B3(n){return null!=n&&"number"==typeof n.length}const Qs=new u.OlP("NgValidators"),Qp=new u.OlP("NgAsyncValidators"),M9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vd{static min(e){return U3(e)}static max(e){return $3(e)}static required(e){return function V3(n){return Xp(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function j3(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function H3(n){return Xp(n.value)||M9.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function G3(n){return e=>Xp(e.value)||!B3(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function z3(n){return e=>B3(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function W3(n){if(!n)return tx;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Xp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Q3(e)}static composeAsync(e){return J3(e)}}function U3(n){return e=>{if(Xp(e.value)||Xp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function $3(n){return e=>{if(Xp(e.value)||Xp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function tx(n){return null}function q3(n){return null!=n}function Y3(n){return(0,u.QGY)(n)?(0,er.D)(n):n}function K3(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Z3(n,e){return e.map(t=>t(n))}function X3(n){return n.map(e=>function k9(n){return!n.validate}(e)?e:t=>e.validate(t))}function Q3(n){if(!n)return null;const e=n.filter(q3);return 0==e.length?null:function(t){return K3(Z3(t,e))}}function k1(n){return null!=n?Q3(X3(n)):null}function J3(n){if(!n)return null;const e=n.filter(q3);return 0==e.length?null:function(t){return function D9(...n){const e=(0,Us.jO)(n),{args:t,keys:r}=sr(n),i=new ci.y(o=>{const{length:c}=t;if(!c)return void o.complete();const f=new Array(c);let m=c,v=c;for(let C=0;C<c;C++){let S=!1;(0,yc.Xf)(t[C]).subscribe((0,or.x)(o,O=>{S||(S=!0,v--),f[C]=O},()=>m--,void 0,()=>{(!m||!S)&&(v||o.next(r?no(r,f):f),o.complete())}))}});return e?i.pipe(za(e)):i}(Z3(t,e).map(Y3)).pipe((0,Kt.U)(K3))}}function P1(n){return null!=n?J3(X3(n)):null}function ej(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tj(n){return n._rawValidators}function nj(n){return n._rawAsyncValidators}function O1(n){return n?Array.isArray(n)?n:[n]:[]}function nx(n,e){return Array.isArray(n)?n.includes(e):n===e}function rj(n,e){const t=O1(e);return O1(n).forEach(i=>{nx(t,i)||t.push(i)}),t}function ij(n,e){return O1(e).filter(t=>!nx(n,t))}class sj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=k1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=P1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Jo extends sj{get formDirective(){return null}get path(){return null}}class $h extends sj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oj{constructor(e){this._cd=e}get isTouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.touched)}get isUntouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.untouched)}get isPristine(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pristine)}get isDirty(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.dirty)}get isValid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.valid)}get isInvalid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.invalid)}get isPending(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}let rx=(()=>{var n;class e extends oj{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36($h,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]}),e})(),ix=(()=>{var n;class e extends oj{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(Jo,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[u.qOj]}),e})();const tC="VALID",ox="INVALID",Y0="PENDING",nC="DISABLED";function F1(n){return(ax(n)?n.validators:n)||null}function B1(n,e){return(ax(e)?e.asyncValidators:n)||null}function ax(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function lj(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")}function cj(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})}class lx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===tC}get invalid(){return this.status===ox}get pending(){return this.status==Y0}get disabled(){return this.status===nC}get enabled(){return this.status!==nC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ij(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ij(e,this._rawAsyncValidators))}hasValidator(e){return nx(this._rawValidators,e)}hasAsyncValidator(e){return nx(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Y0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nC,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tC,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tC||this.status===Y0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nC:tC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Y0,this._hasOwnPendingAsyncValidator=!0;const t=Y3(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?nC:this.errors?ox:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Y0)?Y0:this._anyControlsHaveStatus(ox)?ox:tC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ax(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function L9(n){return Array.isArray(n)?k1(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function F9(n){return Array.isArray(n)?P1(n):n||null}(this._rawAsyncValidators)}}class rC extends lx{constructor(e,t,r){super(F1(t),B1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){cj(this,0,e),Object.keys(e).forEach(r=>{lj(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class uj extends rC{}const M_=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>iC}),iC="always";function sC(n,e,t=iC){var r,i;U1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&(null===(r=(i=e.valueAccessor).setDisabledState)||void 0===r||r.call(i,n.disabled)),function U9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&dj(n,e)})}(n,e),function V9(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&dj(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function B9(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ux(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hx(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function U1(n,e){const t=tj(n);null!==e.validator?n.setValidators(ej(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=nj(n);null!==e.asyncValidator?n.setAsyncValidators(ej(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();dx(e._rawValidators,i),dx(e._rawAsyncValidators,i)}function hx(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=tj(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=nj(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return dx(e._rawValidators,r),dx(e._rawAsyncValidators,r),t}function dj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pj(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const aC=class extends lx{constructor(e=null,t,r){super(F1(t),B1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ax(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gj(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let fx=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),Ej=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),e})();const G1=new u.OlP("NgModelWithFormControlWarning"),t8={provide:Jo,useExisting:(0,u.Gpc)(()=>K0)};let K0=(()=>{var n;class e extends Jo{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const i=this.form.get(r.path);return sC(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){ux(r.control||null,r,!1),function z9(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){var i;return this.submitted=!0,function fj(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(r),"dialog"===(null==r||null===(i=r.target)||void 0===i?void 0:i.method)}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const i=r.control,o=this.form.get(r.path);i!==o&&(ux(i||null,r),(n=>n instanceof aC)(o)&&(sC(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const i=this.form.get(r.path);(function hj(n,e){U1(n,e)})(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const i=this.form.get(r.path);i&&function j9(n,e){return hx(n,e)}(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){U1(this.form,this),this._oldForm&&hx(this._oldForm,this)}_checkFormPresent(){}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(Qs,10),u.Y36(Qp,10),u.Y36(M_,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&u.NdJ("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([t8]),u.qOj,u.TTD]}),e})();const i8={provide:$h,useExisting:(0,u.Gpc)(()=>lC)};let lC=(()=>{var n;class e extends $h{set isDisabled(r){}constructor(r,i,o,c,f){super(),this._ngModelWarningConfig=f,this._added=!1,this.name=null,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function j1(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===M1?t=o:function G9(n){return Object.getPrototypeOf(n.constructor)===x_}(o)?r=o:i=o}),i||r||t||null}(0,c)}ngOnChanges(r){this._added||this._setUpControl(),function V1(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return function cx(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(n=e)._ngModelWarningSentOnce=!1,n.\u0275fac=function(r){return new(r||n)(u.Y36(Jo,13),u.Y36(Qs,10),u.Y36(Qp,10),u.Y36(Qo,10),u.Y36(G1,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([i8]),u.qOj,u.TTD]}),e})();function Rj(n){return"number"==typeof n?n:parseFloat(n)}let k_=(()=>{var n;class e{constructor(){this._validator=tx}ngOnChanges(r){if(this.inputName in r){const i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):tx,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return null!=r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),e})();const d8={provide:Qs,useExisting:(0,u.Gpc)(()=>K1),multi:!0};let K1=(()=>{var n;class e extends k_{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>Rj(r),this.createValidator=r=>$3(r)}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&u.uIk("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[u._Bn([d8]),u.qOj]}),e})();const h8={provide:Qs,useExisting:(0,u.Gpc)(()=>Z1),multi:!0};let Z1=(()=>{var n;class e extends k_{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>Rj(r),this.createValidator=r=>U3(r)}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&u.uIk("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[u._Bn([h8]),u.qOj]}),e})(),Nj=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ej]}),e})();class Lj extends lx{constructor(e,t,r){super(F1(t),B1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){cj(this,0,e),e.forEach((r,i)=>{lj(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){var t;return null!==(t=this.at(e))&&void 0!==t?t:null}}function Fj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Q1=(()=>{var n;class e{constructor(){this.useNonNullable=!1}get nonNullable(){const r=new e;return r.useNonNullable=!0,r}group(r,i=null){const o=this._reduceControls(r);let c={};return Fj(i)?c=i:null!==i&&(c.validators=i.validator,c.asyncValidators=i.asyncValidator),new rC(o,c)}record(r,i=null){const o=this._reduceControls(r);return new uj(o,i)}control(r,i,o){let c={};return this.useNonNullable?(Fj(i)?c=i:(c.validators=i,c.asyncValidators=o),new aC(r,{...c,nonNullable:!0})):new aC(r,i,o)}array(r,i,o){const c=r.map(f=>this._createControl(f));return new Lj(c,i,o)}_reduceControls(r){const i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){return r instanceof aC||r instanceof lx?r:Array.isArray(r)?this.control(r[0],r.length>1?r[1]:null,r.length>2?r[2]:null):this.control(r)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Bj=(()=>{var n;class e{static withConfig(r){var i;return{ngModule:e,providers:[{provide:M_,useValue:null!==(i=r.callSetDisabledState)&&void 0!==i?i:iC}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Nj]}),e})(),y8=(()=>{var n;class e{static withConfig(r){var i,o;return{ngModule:e,providers:[{provide:G1,useValue:null!==(i=r.warnOnNgModelWithFormControl)&&void 0!==i?i:"always"},{provide:M_,useValue:null!==(o=r.callSetDisabledState)&&void 0!==o?o:iC}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Nj]}),e})();var Tt=P(7582),I8=P(4266);const E8=["addListener","removeListener"],w8=["addEventListener","removeEventListener"],b8=["on","off"];function J1(n,e,t,r){if((0,As.m)(t)&&(r=t,t=void 0),r)return J1(n,e,t).pipe(za(r));const[i,o]=function D8(n){return(0,As.m)(n.addEventListener)&&(0,As.m)(n.removeEventListener)}(n)?w8.map(c=>f=>n[c](e,f,t)):function C8(n){return(0,As.m)(n.addListener)&&(0,As.m)(n.removeListener)}(n)?E8.map(Uj(n,e)):function T8(n){return(0,As.m)(n.on)&&(0,As.m)(n.off)}(n)?b8.map(Uj(n,e)):[];if(!i&&(0,I8.z)(n))return(0,Ai.z)(c=>J1(c,e,t))((0,yc.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new ci.y(c=>{const f=(...m)=>c.next(1<m.length?m:m[0]);return i(f),()=>o(f)})}function Uj(n,e){return t=>r=>n[t](e,r)}P(1774);var cC=P(8796),eL=(P(2411),P(1835),P(9203),P(4073)),S8=P(839),A8=P(3365),$j=(P(3299),P(4854)),R8=(P(6225),P(4516));P(619);const M8=eL.i,Nt=["*"],Vj=n=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(n):"function"==typeof requestAnimationFrame?requestAnimationFrame(n):setTimeout(n);let uC=(()=>{class n{constructor(t,r){this.injector=t,this.el=r,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(t){this.el.nativeElement.value=this.lastValue=t,Z0(this.el)}handleValueChange(t,r){t===this.el.nativeElement&&(r!==this.lastValue&&(this.lastValue=r,this.onChange(r)),Z0(this.el))}_handleBlurEvent(t){t===this.el.nativeElement&&(this.onTouched(),Z0(this.el))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.el.nativeElement.disabled=t}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let t;try{t=this.injector.get($h)}catch{}if(!t)return;t.statusChanges&&(this.statusChanges=t.statusChanges.subscribe(()=>Z0(this.el)));const r=t.control;r&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(o=>{if(typeof r[o]<"u"){const c=r[o].bind(r);r[o]=(...f)=>{c(...f),Z0(this.el)}}})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,hostBindings:function(t,r){1&t&&u.NdJ("ionBlur",function(o){return r._handleBlurEvent(o.target)})}}),n})();const Z0=n=>{Vj(()=>{const e=n.nativeElement,t=null!=e.value&&e.value.toString().length>0,r=U8(e);tL(e,r);const i=e.closest("ion-item");i&&tL(i,t?[...r,"item-has-value"]:r)})},U8=n=>{const e=n.classList,t=[];for(let r=0;r<e.length;r++){const i=e.item(r);null!==i&&$8(i,"ng-")&&t.push(`ion-${i.substring(3)}`)}return t},tL=(n,e)=>{const t=n.classList;t.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),t.add(...e)},$8=(n,e)=>n.substring(0,e.length)===e;let px=(()=>{class n extends uC{constructor(t,r){super(t,r)}_handleInputEvent(t){this.handleValueChange(t,t.value)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(t,r){1&t&&u.NdJ("ionInput",function(o){return r._handleInputEvent(o.target)})},features:[u._Bn([{provide:Qo,useExisting:n,multi:!0}]),u.qOj]}),n})();const z8=(n,e)=>{const t=n.prototype;e.forEach(r=>{Object.defineProperty(t,r,{get(){return this.el[r]},set(i){this.z.runOutsideAngular(()=>this.el[r]=i)}})})},W8=(n,e)=>{const t=n.prototype;e.forEach(r=>{t[r]=function(){const i=arguments;return this.z.runOutsideAngular(()=>this.el[r].apply(this.el,i))}})},Yn=(n,e,t)=>{t.forEach(r=>n[r]=J1(e,r))};function Rt(n){return function(t){const{defineCustomElementFn:r,inputs:i,methods:o}=n;return void 0!==r&&r(),i&&z8(t,i),o&&W8(t,o),t}}let jj=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-app"]],ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({})],n),n})(),dC=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,Yn(this,this.el,["ionFocus","ionBlur"])}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],n),n})(),hC=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,Yn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],n),n})(),fC=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["collapse","mode","translucent"]})],n),n})(),gx=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,Yn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],n),n})(),pC=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],n),n})(),gC=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["color","mode","position"]})],n),n})(),mC=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["color","size"]})],n),n})(),_C=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Nt,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,Tt.gn)([Rt({inputs:["color","mode"]})],n),n})(),Hj=(()=>{class n{get(t,r){const i=rL();return i?i.get(t,r):null}getBoolean(t,r){const i=rL();return!!i&&i.getBoolean(t,r)}getNumber(t,r){const i=rL();return i?i.getNumber(t,r):0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gj=new u.OlP("USERCONFIG"),rL=()=>{if(typeof window<"u"){const n=window.Ionic;if(null!=n&&n.config)return n.config}return null};let lY=(()=>{class n{constructor(t,r){this.doc=t,this.backButton=new $r.x,this.keyboardDidShow=new $r.x,this.keyboardDidHide=new $r.x,this.pause=new $r.x,this.resume=new $r.x,this.resize=new $r.x,r.run(()=>{var i;let o;this.win=t.defaultView,this.backButton.subscribeWithPriority=function(c,f){return this.subscribe(m=>m.register(c,v=>r.run(()=>f(v))))},X0(this.pause,t,"pause"),X0(this.resume,t,"resume"),X0(this.backButton,t,"ionBackButton"),X0(this.resize,this.win,"resize"),X0(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),X0(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(c=>{o=c}),null!==(i=this.win)&&void 0!==i&&i.cordova?t.addEventListener("deviceready",()=>{o("cordova")},{once:!0}):o("dom")})}is(t){return(0,eL.a)(this.win,t)}platforms(){return(0,eL.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(t){return cY(this.win.location.href,t)}isLandscape(){return!this.isPortrait()}isPortrait(){var t,r;return null===(t=(r=this.win).matchMedia)||void 0===t?void 0:t.call(r,"(orientation: portrait)").matches}testUserAgent(t){const r=this.win.navigator;return!!(null!=r&&r.userAgent&&r.userAgent.indexOf(t)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ye),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cY=(n,e)=>{e=e.replace(/[[\]\\]/g,"\\$&");const r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null},X0=(n,e,t)=>{e&&e.addEventListener(t,r=>{n.next(null!=r?r.detail:void 0)})};let vC=(()=>{class n{constructor(t,r,i,o){this.location=r,this.serializer=i,this.router=o,this.direction=zj,this.animated=Wj,this.guessDirection="forward",this.lastNavId=-1,o&&o.events.subscribe(c=>{if(c instanceof Sc){const f=c.restoredState?c.restoredState.navigationId:c.id;this.guessDirection=f<this.lastNavId?"back":"forward",this.guessAnimation=c.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?c.id:f}}),t.backButton.subscribeWithPriority(0,c=>{this.pop(),c()})}navigateForward(t,r={}){return this.setDirection("forward",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateBack(t,r={}){return this.setDirection("back",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateRoot(t,r={}){return this.setDirection("root",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}back(t={animated:!0,animationDirection:"back"}){return this.setDirection("back",t.animated,t.animationDirection,t.animation),this.location.back()}pop(){var t=this;return(0,Te.Z)(function*(){let r=t.topOutlet;for(;r;){if(yield r.pop())return!0;r=r.parentOutlet}return!1})()}setDirection(t,r,i,o){this.direction=t,this.animated=uY(t,r,i),this.animationBuilder=o}setTopOutlet(t){this.topOutlet=t}consumeTransition(){let r,t="root";const i=this.animationBuilder;return"auto"===this.direction?(t=this.guessDirection,r=this.guessAnimation):(r=this.animated,t=this.direction),this.direction=zj,this.animated=Wj,this.animationBuilder=void 0,{direction:t,animation:r,animationBuilder:i}}navigate(t,r){if(Array.isArray(t))return this.router.navigate(t,r);{const i=this.serializer.parse(t.toString());return void 0!==r.queryParams&&(i.queryParams={...r.queryParams}),void 0!==r.fragment&&(i.fragment=r.fragment),this.router.navigateByUrl(i,r)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lY),u.LFG(fe),u.LFG(vt),u.LFG(ji,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uY=(n,e,t)=>{if(!1!==e){if(void 0!==t)return t;if("forward"===n||"back"===n)return n;if("root"===n&&!0===e)return"forward"}},zj="auto",Wj=void 0;class qj{constructor(e={}){this.data=e}get(e){return this.data[e]}}let mx=(()=>{class n{constructor(){this.zone=(0,u.f3M)(u.R0b),this.applicationRef=(0,u.f3M)(u.z2F)}create(t,r,i){return new dY(t,r,this.applicationRef,this.zone,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class dY{constructor(e,t,r,i,o){this.environmentInjector=e,this.injector=t,this.applicationRef=r,this.zone=i,this.elementReferenceKey=o,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,t,r,i){return this.zone.run(()=>new Promise(o=>{const c={...r};void 0!==this.elementReferenceKey&&(c[this.elementReferenceKey]=e),o(hY(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,t,c,i,this.elementReferenceKey))}))}removeViewFromDom(e,t){return this.zone.run(()=>new Promise(r=>{const i=this.elRefMap.get(t);if(i){i.destroy(),this.elRefMap.delete(t);const o=this.elEventsMap.get(t);o&&(o(),this.elEventsMap.delete(t))}r()}))}}const hY=(n,e,t,r,i,o,c,f,m,v,C)=>{const S=u.zs3.create({providers:pY(m),parent:t}),O=(0,u.LMc)(f,{environmentInjector:e,elementInjector:S}),G=O.instance,ne=O.location.nativeElement;if(m&&(C&&void 0!==G[C]&&console.error(`[Ionic Error]: ${C} is a reserved property when using ${c.tagName.toLowerCase()}. Rename or remove the "${C}" property from ${f.name}.`),Object.assign(G,m)),v)for(const Ye of v)ne.classList.add(Ye);const Ne=Yj(n,G,ne);return c.appendChild(ne),r.attachView(O.hostView),i.set(ne,O),o.set(ne,Ne),ne},fY=[cC.L,cC.a,cC.b,cC.c,cC.d],Yj=(n,e,t)=>n.run(()=>{const r=fY.filter(i=>"function"==typeof e[i]).map(i=>{const o=c=>e[i](c.detail);return t.addEventListener(i,o),()=>t.removeEventListener(i,o)});return()=>r.forEach(i=>i())}),Kj=new u.OlP("NavParamsToken"),pY=n=>[{provide:Kj,useValue:n},{provide:qj,useFactory:gY,deps:[Kj]}],gY=n=>new qj(n),Zj=(n,e)=>((n=n.filter(t=>t.stackId!==e.stackId)).push(e),n),iL=(n,e)=>{const t=n.createUrlTree(["."],{relativeTo:e});return n.serializeUrl(t)},Xj=(n,e)=>!e||n.stackId!==e.stackId,yY=(n,e)=>{if(!n)return;const t=Qj(e);for(let r=0;r<t.length;r++){if(r>=n.length)return t[r];if(t[r]!==n[r])return}},Qj=n=>n.split("/").map(e=>e.trim()).filter(e=>""!==e),Jj=n=>{n&&(n.ref.destroy(),n.unlistenEvents())};class IY{constructor(e,t,r,i,o,c){this.containerEl=t,this.router=r,this.navCtrl=i,this.zone=o,this.location=c,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==e?Qj(e):void 0}createView(e,t){var r;const i=iL(this.router,t),o=null==e||null===(r=e.location)||void 0===r?void 0:r.nativeElement,c=Yj(this.zone,e.instance,o);return{id:this.nextId++,stackId:yY(this.tabsPrefix,i),unlistenEvents:c,element:o,ref:e,url:i}}getExistingView(e){const t=iL(this.router,e),r=this.views.find(i=>i.url===t);return r&&r.ref.changeDetectorRef.reattach(),r}setActive(e){var t,r;const i=this.navCtrl.consumeTransition();let{direction:o,animation:c,animationBuilder:f}=i;const m=this.activeView,v=Xj(e,m);v&&(o="back",c=void 0);const C=this.views.slice();let S;const O=this.router;O.getCurrentNavigation?S=O.getCurrentNavigation():null!==(t=O.navigations)&&void 0!==t&&t.value&&(S=O.navigations.value),null!==(r=S)&&void 0!==r&&null!==(r=r.extras)&&void 0!==r&&r.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const G=this.views.includes(e),ne=this.insertView(e,o);G||e.ref.changeDetectorRef.detectChanges();const Ne=e.animationBuilder;return void 0===f&&"back"===o&&!v&&void 0!==Ne&&(f=Ne),m&&(m.animationBuilder=f),this.zone.runOutsideAngular(()=>this.wait(()=>(m&&m.ref.changeDetectorRef.detach(),e.ref.changeDetectorRef.reattach(),this.transition(e,m,c,this.canGoBack(1),!1,f).then(()=>EY(e,ne,C,this.location,this.zone)).then(()=>({enteringView:e,direction:o,animation:c,tabSwitch:v})))))}canGoBack(e,t=this.getActiveStackId()){return this.getStack(t).length>e}pop(e,t=this.getActiveStackId()){return this.zone.run(()=>{const r=this.getStack(t);if(r.length<=e)return Promise.resolve(!1);const i=r[r.length-e-1];let o=i.url;const c=i.savedData;if(c){var f;const v=c.get("primary");null!=v&&null!==(f=v.route)&&void 0!==f&&null!==(f=f._routerState)&&void 0!==f&&f.snapshot.url&&(o=v.route._routerState.snapshot.url)}const{animationBuilder:m}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(o,{...i.savedExtras,animation:m}).then(()=>!0)})}startBackTransition(){const e=this.activeView;if(e){const t=this.getStack(e.stackId),r=t[t.length-2],i=r.animationBuilder;return this.wait(()=>this.transition(r,e,"back",this.canGoBack(2),!0,i))}return Promise.resolve()}endBackTransition(e){e?(this.skipTransition=!0,this.pop(1)):this.activeView&&eH(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(e){const t=this.getStack(e);return t.length>0?t[t.length-1]:void 0}getRootUrl(e){const t=this.getStack(e);return t.length>0?t[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Jj),this.activeView=void 0,this.views=[]}getStack(e){return this.views.filter(t=>t.stackId===e)}insertView(e,t){return this.activeView=e,this.views=((n,e,t)=>"root"===t?Zj(n,e):"forward"===t?((n,e)=>(n.indexOf(e)>=0?n=n.filter(r=>r.stackId!==e.stackId||r.id<=e.id):n.push(e),n))(n,e):((n,e)=>n.indexOf(e)>=0?n.filter(r=>r.stackId!==e.stackId||r.id<=e.id):Zj(n,e))(n,e))(this.views,e,t),this.views.slice()}transition(e,t,r,i,o,c){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(t===e)return Promise.resolve(!1);const f=e?e.element:void 0,m=t?t.element:void 0,v=this.containerEl;return f&&f!==m&&(f.classList.add("ion-page"),f.classList.add("ion-page-invisible"),f.parentElement!==v&&v.appendChild(f),v.commit)?v.commit(f,m,{duration:void 0===r?0:void 0,direction:r,showGoBack:i,progressAnimation:o,animationBuilder:c}):Promise.resolve(!1)}wait(e){var t=this;return(0,Te.Z)(function*(){void 0!==t.runningTask&&(yield t.runningTask,t.runningTask=void 0);const r=t.runningTask=e();return r.finally(()=>t.runningTask=void 0),r})()}}const EY=(n,e,t,r,i)=>"function"==typeof requestAnimationFrame?new Promise(o=>{requestAnimationFrame(()=>{eH(n,e,t,r,i),o()})}):Promise.resolve(),eH=(n,e,t,r,i)=>{i.run(()=>t.filter(o=>!e.includes(o)).forEach(Jj)),e.forEach(o=>{const f=r.path().split("?")[0].split("#")[0];if(o!==n&&o.url!==f){const m=o.element;m.setAttribute("aria-hidden","true"),m.classList.add("ion-page-hidden"),o.ref.changeDetectorRef.detach()}})};let yC=(()=>{class n{constructor(t,r,i,o,c,f,m,v){this.parentOutlet=v,this.activatedView=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Ti.X(null),this.activated=null,this._activatedRoute=null,this.name=vn,this.stackWillChange=new u.vpe,this.stackDidChange=new u.vpe,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.parentContexts=(0,u.f3M)(kl),this.location=(0,u.f3M)(u.s_b),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(tH,{optional:!0}),this.supportsBindingToComponentInputs=!0,this.config=(0,u.f3M)(Hj),this.navCtrl=(0,u.f3M)(vC),this.nativeEl=o.nativeElement,this.name=t||vn,this.tabsPrefix="true"===r?iL(c,m):void 0,this.stackCtrl=new IY(this.tabsPrefix,this.nativeEl,c,this.navCtrl,f,i),this.parentContexts.onChildOutletCreated(this.name,this)}get activatedComponentRef(){return this.activated}set animation(t){this.nativeEl.animation=t}set animated(t){this.nativeEl.animated=t}set swipeGesture(t){this._swipeGesture=t,this.nativeEl.swipeHandler=t?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:r=>this.stackCtrl.endBackTransition(r)}:void 0}ngOnDestroy(){var t;this.stackCtrl.destroy(),null===(t=this.inputBinder)||void 0===t||t.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const t=this.getContext();null!=t&&t.route&&this.activateWith(t.route,t.injector)}new Promise(t=>(0,S8.c)(this.nativeEl,t)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(t,r){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const r=this.getContext();this.activatedView.savedData=new Map(r.children.contexts);const i=this.activatedView.savedData.get("primary");if(i&&r.route&&(i.route={...r.route}),this.activatedView.savedExtras={},r.route){const o=r.route.snapshot;this.activatedView.savedExtras.queryParams=o.queryParams,this.activatedView.savedExtras.fragment=o.fragment}}const t=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){var i;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;let o,c=this.stackCtrl.getExistingView(t);if(c){o=this.activated=c.ref;const v=c.savedData;v&&(this.getContext().children.contexts=v),this.updateActivatedRouteProxy(o.instance,t)}else{var f;const v=t._futureSnapshot,C=this.parentContexts.getOrCreateContext(this.name).children,S=new Ti.X(null),O=this.createActivatedRouteProxy(S,t),G=new wY(O,C,this.location.injector),ne=null!==(f=v.routeConfig.component)&&void 0!==f?f:v.component;o=this.activated=this.location.createComponent(ne,{index:this.location.length,injector:G,environmentInjector:null!=r?r:this.environmentInjector}),S.next(o.instance),c=this.stackCtrl.createView(this.activated,t),this.proxyMap.set(o.instance,O),this.currentActivatedRoute$.next({component:o.instance,activatedRoute:t})}null===(i=this.inputBinder)||void 0===i||i.bindActivatedRouteToOutletComponent(this),this.activatedView=c,this.navCtrl.setTopOutlet(this);const m=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:c,tabSwitch:Xj(c,m)}),this.stackCtrl.setActive(c).then(v=>{this.activateEvents.emit(o.instance),this.stackDidChange.emit(v)})}canGoBack(t=1,r){return this.stackCtrl.canGoBack(t,r)}pop(t=1,r){return this.stackCtrl.pop(t,r)}getLastUrl(t){const r=this.stackCtrl.getLastUrl(t);return r?r.url:void 0}getLastRouteView(t){return this.stackCtrl.getLastUrl(t)}getRootView(t){return this.stackCtrl.getRootUrl(t)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(t,r){const i=new ha;return i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,i._paramMap=this.proxyObservable(t,"paramMap"),i._queryParamMap=this.proxyObservable(t,"queryParamMap"),i.url=this.proxyObservable(t,"url"),i.params=this.proxyObservable(t,"params"),i.queryParams=this.proxyObservable(t,"queryParams"),i.fragment=this.proxyObservable(t,"fragment"),i.data=this.proxyObservable(t,"data"),i}proxyObservable(t,r){return t.pipe(Vi(i=>!!i),(0,wr.w)(i=>this.currentActivatedRoute$.pipe(Vi(o=>null!==o&&o.component===i),(0,wr.w)(o=>o&&o.activatedRoute[r]),(0,am.x)())))}updateActivatedRouteProxy(t,r){const i=this.proxyMap.get(t);if(!i)throw new Error("Could not find activated route proxy for view");i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,this.currentActivatedRoute$.next({component:t,activatedRoute:r})}}return n.\u0275fac=function(t){return new(t||n)(u.$8M("name"),u.$8M("tabs"),u.Y36(fe),u.Y36(u.SBq),u.Y36(ji),u.Y36(u.R0b),u.Y36(ha),u.Y36(n,12))},n.\u0275dir=u.lG2({type:n,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class wY{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ha?this.route:e===kl?this.childContexts:this.parent.get(e,t)}}const tH=new u.OlP("");let bY=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){var r;null===(r=this.outletDataSubscriptions.get(t))||void 0===r||r.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=la([r.queryParams,r.params,r.data]).pipe((0,wr.w)(([o,c,f],m)=>(f={...o,...c,...f},0===m?(0,Wt.of)(f):Promise.resolve(f)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,u.qFp)(r.component);if(c)for(const{templateName:f}of c.inputs)t.activatedComponentRef.setInput(f,o[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),_x=(()=>{class n{constructor(t,r,i,o,c){this.locationStrategy=t,this.navCtrl=r,this.elementRef=i,this.router=o,this.routerLink=c,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var t;if(null!==(t=this.routerLink)&&void 0!==t&&t.urlTree){const r=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=r}}onClick(t){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(re),u.Y36(vC),u.Y36(u.SBq),u.Y36(ji),u.Y36(lh,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(o){return r.onClick(o)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[u.TTD]}),n})();const xY={provide:Qs,useExisting:(0,u.Gpc)(()=>nH),multi:!0};let nH=(()=>{class n extends K1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("max",r._enabled?r.max:null)},features:[u._Bn([xY]),u.qOj]}),n})();const MY={provide:Qs,useExisting:(0,u.Gpc)(()=>rH),multi:!0};let rH=(()=>{class n extends Z1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("min",r._enabled?r.min:null)},features:[u._Bn([MY]),u.qOj]}),n})();class iH{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,t,r){return this.ctrl.dismiss(e,t,r)}getTop(){return this.ctrl.getTop()}}let kY=(()=>{class n extends iH{constructor(){super($j.m),this.angularDelegate=(0,u.f3M)(mx),this.injector=(0,u.f3M)(u.zs3),this.environmentInjector=(0,u.f3M)(u.lqb)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),PY=(()=>{class n extends iH{constructor(){super($j.c),this.angularDelegate=(0,u.f3M)(mx),this.injector=(0,u.f3M)(u.zs3),this.environmentInjector=(0,u.f3M)(u.lqb)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class OY{shouldDetach(e){return!1}shouldAttach(e){return!1}store(e,t){}retrieve(e){return null}shouldReuseRoute(e,t){if(e.routeConfig!==t.routeConfig)return!1;const r=e.params,i=t.params,o=Object.keys(r),c=Object.keys(i);if(o.length!==c.length)return!1;for(const f of o)if(i[f]!==r[f])return!1;return!0}}const NY=(n,e,t)=>()=>{if(e.defaultView&&typeof window<"u"){(0,A8.s)({...n,_zoneGate:o=>t.run(o)});const i="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function x8(){var n=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&n.push(P.e(6748).then(P.t.bind(P,3342,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var r=new URL("b","http://a");return r.pathname="c%20d","http://a/c%20d"===r.href&&r.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&n.push(P.e(2214).then(P.t.bind(P,2668,23)))}return Promise.all(n)}().then(()=>((n,e)=>{if(!(typeof window>"u"))return M8(),(0,R8.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),e)})(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Vj,jmp:o=>t.runOutsideAngular(o),ael(o,c,f,m){o[i](c,f,m)},rel(o,c,f,m){o.removeEventListener(c,f,m)}}))}};let sH=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Gj,useValue:t},{provide:u.ip1,useFactory:NY,multi:!0,deps:[Gj,ye,u.R0b]},{provide:tH,useFactory:LY,deps:[ji]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[mx,kY,PY],imports:[ir]}),n})();function LY(n){return null!=n&&n.componentInputBindingEnabled?new bY:null}const FY=function cH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},uH=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vx=new ps.Yd("@firebase/auth");function yx(n,...e){vx.logLevel<=ps.in.ERROR&&vx.error(`Auth (${tr.SDK_VERSION}): ${n}`,...e)}function Ca(n,...e){throw sL(n,...e)}function yd(n,...e){return sL(n,...e)}function sL(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return uH.create(n,...e)}function xt(n,e,...t){if(!n)throw sL(e,...t)}function Id(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yx(e),new Error(e)}function Jp(n,e){n||Id(e)}function hH(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class EC{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jp(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function UY(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function oL(){return"http:"===hH()||"https:"===hH()}()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class fH{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Id("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Id("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Id("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const VY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},jY=new EC(3e4,6e4);function mi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Oi(n,e,t,r){return lL.apply(this,arguments)}function lL(){return lL=(0,Te.Z)(function*(n,e,t,r,i={}){return pH(n,i,(0,Te.Z)(function*(){let o={},c={};r&&("GET"===e?c=r:o={body:JSON.stringify(r)});const f=(0,U.xO)(Object.assign({key:n.config.apiKey},c)).slice(1),m=yield n._getAdditionalHeaders();return m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode),fH.fetch()(gH(n,n.config.apiHost,t,f),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},o))}))}),lL.apply(this,arguments)}function pH(n,e,t){return cL.apply(this,arguments)}function cL(){return cL=(0,Te.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},VY),e);try{const i=new HY(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=yield o.json();if("needConfirmation"in c)throw wC(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[m,v]=f.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===m)throw wC(n,"credential-already-in-use",c);if("EMAIL_EXISTS"===m)throw wC(n,"email-already-in-use",c);if("USER_DISABLED"===m)throw wC(n,"user-disabled",c);const C=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw function dH(n,e,t){const r=Object.assign(Object.assign({},FY()),{[e]:t});return new U.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,C,v);Ca(n,C)}}catch(i){if(i instanceof U.ZR)throw i;Ca(n,"network-request-failed",{message:String(i)})}}),cL.apply(this,arguments)}function uL(){return uL=(0,Te.Z)(function*(n,e,t,r,i={}){const o=yield Oi(n,e,t,r,i);return"mfaPendingCredential"in o&&Ca(n,"multi-factor-auth-required",{_serverResponse:o}),o}),uL.apply(this,arguments)}function gH(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function aL(n,e){Jp(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class HY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yd(this.auth,"network-request-failed")),jY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wC(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=yd(n,e,r);return i.customData._tokenResponse=t,i}function fL(){return fL=(0,Te.Z)(function*(n,e){return Oi(n,"POST","/v1/accounts:delete",e)}),fL.apply(this,arguments)}function gL(){return gL=(0,Te.Z)(function*(n,e){return Oi(n,"POST","/v1/accounts:lookup",e)}),gL.apply(this,arguments)}function bC(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mL(){return mL=(0,Te.Z)(function*(n,e=!1){const t=(0,U.m9)(n),r=yield t.getIdToken(e),i=Ix(r);xt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,c=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:bC(_L(i.auth_time)),issuedAtTime:bC(_L(i.iat)),expirationTime:bC(_L(i.exp)),signInProvider:c||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}),mL.apply(this,arguments)}function _L(n){return 1e3*Number(n)}function Ix(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return yx("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,U.tV)(t);return i?JSON.parse(i):(yx("Failed to decode base64 JWT payload"),null)}catch(i){return yx("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function jh(n,e){return vL.apply(this,arguments)}function vL(){return vL=(0,Te.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof U.ZR&&function ZY({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),vL.apply(this,arguments)}class XY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,Te.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,Te.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class _H{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bC(this.lastLoginAt),this.creationTime=bC(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function CC(n){return yL.apply(this,arguments)}function yL(){return yL=(0,Te.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield jh(n,function qY(n,e){return gL.apply(this,arguments)}(t,{idToken:r}));xt(null==i?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const c=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function eK(n){return n.map(e=>{var{providerId:t}=e,r=(0,Tt._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],f=function JY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,c),C=!!n.isAnonymous&&!(n.email&&o.passwordHash||null!=f&&f.length),S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new _H(o.createdAt,o.lastLoginAt),isAnonymous:C};Object.assign(n,S)}),yL.apply(this,arguments)}function IL(){return IL=(0,Te.Z)(function*(n){const e=(0,U.m9)(n);yield CC(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),IL.apply(this,arguments)}function EL(){return EL=(0,Te.Z)(function*(n,e){const t=yield pH(n,{},(0,Te.Z)(function*(){const r=(0,U.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=gH(n,i,"/v1/token",`key=${o}`),f=yield n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",fH.fetch()(c,{method:"POST",headers:f,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),EL.apply(this,arguments)}class TC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xt(e.idToken,"internal-error"),xt(typeof e.idToken<"u","internal-error"),xt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function KY(n){const e=Ix(n);return xt(e,"internal-error"),xt(typeof e.exp<"u","internal-error"),xt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,Te.Z)(function*(){return xt(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,Te.Z)(function*(){const{accessToken:i,refreshToken:o,expiresIn:c}=yield function tK(n,e){return EL.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(c))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new TC;return r&&(xt("string"==typeof r,"internal-error",{appName:e}),c.refreshToken=r),i&&(xt("string"==typeof i,"internal-error",{appName:e}),c.accessToken=i),o&&(xt("number"==typeof o,"internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new TC,this.toJSON())}_performRefresh(){return Id("not implemented")}}function eg(n,e){xt("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class P_{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=(0,Tt._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _H(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,Te.Z)(function*(){const r=yield jh(t,t.stsTokenManager.getToken(t.auth,e));return xt(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function YY(n){return mL.apply(this,arguments)}(this,e)}reload(){return function QY(n){return IL.apply(this,arguments)}(this)}_assign(e){this!==e&&(xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new P_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,Te.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield CC(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,Te.Z)(function*(){const t=yield e.getIdToken();return yield jh(e,function zY(n,e){return fL.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,c,f,m,v,C;const S=null!==(r=t.displayName)&&void 0!==r?r:void 0,O=null!==(i=t.email)&&void 0!==i?i:void 0,G=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,ne=null!==(c=t.photoURL)&&void 0!==c?c:void 0,Ne=null!==(f=t.tenantId)&&void 0!==f?f:void 0,Ye=null!==(m=t._redirectEventId)&&void 0!==m?m:void 0,Ct=null!==(v=t.createdAt)&&void 0!==v?v:void 0,Pt=null!==(C=t.lastLoginAt)&&void 0!==C?C:void 0,{uid:yt,emailVerified:Ft,isAnonymous:nn,providerData:Rn,stsTokenManager:Ni}=t;xt(yt&&Ni,e,"internal-error");const ea=TC.fromJSON(this.name,Ni);xt("string"==typeof yt,e,"internal-error"),eg(S,e.name),eg(O,e.name),xt("boolean"==typeof Ft,e,"internal-error"),xt("boolean"==typeof nn,e,"internal-error"),eg(G,e.name),eg(ne,e.name),eg(Ne,e.name),eg(Ye,e.name),eg(Ct,e.name),eg(Pt,e.name);const Ed=new P_({uid:yt,auth:e,email:O,emailVerified:Ft,displayName:S,isAnonymous:nn,photoURL:ne,phoneNumber:G,tenantId:Ne,stsTokenManager:ea,createdAt:Ct,lastLoginAt:Pt});return Rn&&Array.isArray(Rn)&&(Ed.providerData=Rn.map(SX=>Object.assign({},SX))),Ye&&(Ed._redirectEventId=Ye),Ed}static _fromIdTokenResponse(e,t,r=!1){return(0,Te.Z)(function*(){const i=new TC;i.updateFromServerResponse(t);const o=new P_({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield CC(o),o})()}}const vH=new Map;function Hh(n){Jp(n instanceof Function,"Expected a class definition");let e=vH.get(n);return e?(Jp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vH.set(n,e),e)}const yH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,Te.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,Te.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,Te.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,Te.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Ex(n,e,t){return`firebase:${n}:${e}:${t}`}class J0{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ex(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ex("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,Te.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?P_._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,Te.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,Te.Z)(function*(){if(!t.length)return new J0(Hh(yH),e,r);const i=(yield Promise.all(t.map(function(){var v=(0,Te.Z)(function*(C){if(yield C._isAvailable())return C});return function(C){return v.apply(this,arguments)}}()))).filter(v=>v);let o=i[0]||Hh(yH);const c=Ex(r,e.config.apiKey,e.name);let f=null;for(const v of t)try{const C=yield v._get(c);if(C){const S=P_._fromJSON(e,C);v!==o&&(f=S),o=v;break}}catch{}const m=i.filter(v=>v._shouldAllowMigration);return o._shouldAllowMigration&&m.length?(o=m[0],f&&(yield o._set(c,f.toJSON())),yield Promise.all(t.map(function(){var v=(0,Te.Z)(function*(C){if(C!==o)try{yield C._remove(c)}catch{}});return function(C){return v.apply(this,arguments)}}())),new J0(o,e,r)):new J0(o,e,r)})()}}function IH(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function bH(n=(0,U.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function EH(n=(0,U.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function TH(n=(0,U.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function DH(n=(0,U.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function wL(n=(0,U.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function wH(n=(0,U.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function CH(n=(0,U.z$)()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function SH(n,e=[]){let t;switch(n){case"Browser":t=IH((0,U.z$)());break;case"Worker":t=`${IH((0,U.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tr.SDK_VERSION}/${r}`}class iK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,f)=>{try{c(e(o))}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,Te.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null==i?void 0:i.message})}})()}}function bL(){return bL=(0,Te.Z)(function*(n,e={}){return Oi(n,"GET","/v2/passwordPolicy",mi(n,e))}),bL.apply(this,arguments)}class aK{constructor(e){var t,r,i,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=c.minPasswordLength)&&void 0!==t?t:6,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),void 0!==c.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),void 0!==c.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),void 0!==c.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),void 0!==c.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=null===(t=m.meetsMinPasswordLength)||void 0===t||t),m.isValid&&(m.isValid=null===(r=m.meetsMaxPasswordLength)||void 0===r||r),m.isValid&&(m.isValid=null===(i=m.containsLowercaseLetter)||void 0===i||i),m.isValid&&(m.isValid=null===(o=m.containsUppercaseLetter)||void 0===o||o),m.isValid&&(m.isValid=null===(c=m.containsNumericCharacter)||void 0===c||c),m.isValid&&(m.isValid=null===(f=m.containsNonAlphanumericCharacter)||void 0===f||f),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class lK{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AH(this),this.idTokenSubscription=new AH(this),this.beforeStateQueue=new iK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Hh(t)),this._initializationPromise=this.queue((0,Te.Z)(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield J0.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,Te.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,Te.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,c=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const f=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,m=null==o?void 0:o._redirectEventId,v=yield t.tryRedirectSignIn(e);(!f||f===m)&&null!=v&&v.user&&(o=v.user,c=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{yield t.beforeStateQueue.runMiddleware(o)}catch(f){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(f))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return xt(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return(0,Te.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,Te.Z)(function*(){try{yield CC(e)}catch(r){if("auth/network-request-failed"!==(null==r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function $Y(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,Te.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,Te.Z)(function*(){const r=e?(0,U.m9)(e):null;return r&&xt(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,Te.Z)(function*(){if(!r._deleted)return e&&xt(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,Te.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,Te.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,Te.Z)(function*(){yield t.assertedPersistence.setPersistence(Hh(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,Te.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,Te.Z)(function*(){const t=yield function sK(n){return bL.apply(this,arguments)}(e),r=new aK(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new U.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,Te.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,Te.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&Hh(e)||t._popupRedirectResolver;xt(r,t,"argument-error"),t.redirectPersistenceManager=yield J0.create(t,[Hh(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,Te.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,Te.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,Te.Z)(function*(){if(e===t.currentUser)return t.queue((0,Te.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),"function"==typeof t){const m=e.addObserver(t,r,i);return()=>{c=!0,m()}}{const m=e.addObserver(t);return()=>{c=!0,m()}}}directlySetCurrentUser(e){var t=this;return(0,Te.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,Te.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return null!=r&&r.error&&function BY(n,...e){vx.logLevel<=ps.in.WARN&&vx.warn(`Auth (${tr.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),null==r?void 0:r.token})()}}class AH{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,U.ne)(t=>this.observer=t)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class yK{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Id("not implemented")}_getIdTokenResponse(e){return Id("not implemented")}_linkToIdToken(e,t){return Id("not implemented")}_getReauthenticationResolver(e){return Id("not implemented")}}function Gh(n,e){return jL.apply(this,arguments)}function jL(){return jL=(0,Te.Z)(function*(n,e){return function Vh(n,e,t,r){return uL.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",mi(n,e))}),jL.apply(this,arguments)}class eI extends yK{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ca("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=(0,Tt._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new eI(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){return Gh(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Gh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,U.xO)(t)}return e}}class ng{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class LH extends ng{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let PK=(()=>{class n extends LH{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return eI._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();(function RH(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new EC(3e4,6e4),new EC(2e3,1e4),new EC(3e4,6e4),new EC(5e3,15e3),encodeURIComponent("fac");var o6="@firebase/auth";class oX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,Te.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((null==r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function lX(n){(0,tr._registerComponent)(new es.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;xt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SH(n)},v=new lK(r,i,o,m);return function gK(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Hh);null!=e&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,tr._registerComponent)(new es.wA("auth-internal",e=>{const t=function ws(n){return(0,U.m9)(n)}(e.getProvider("auth").getImmediate());return new oX(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,tr.registerVersion)(o6,"1.3.0",function aX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,tr.registerVersion)(o6,"1.3.0","esm2017")}("Browser");let nI=(()=>{var n;class e{constructor(r,i,o,c){this.afs=r,this.afAuth=i,this.router=o,this.ngZone=c,this.afAuth.authState.subscribe(f=>{f?(this.userData=f,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(r,i){return this.afAuth.signInWithEmailAndPassword(r,i).then(o=>{this.SetUserData(o.user),this.afAuth.authState.subscribe(c=>{c&&this.router.navigate(["dashboard"])})}).catch(o=>{window.alert(o.message)})}SignUp(r,i){return this.afAuth.createUserWithEmailAndPassword(r,i).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(r=>r.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(r){return this.afAuth.sendPasswordResetEmail(r).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const r=JSON.parse(localStorage.getItem("user"));return null!==r&&!1!==r.emailVerified}GoogleAuth(){return this.AuthLogin(new PK).then(r=>{this.router.navigate(["dashboard"])})}AuthLogin(r){return this.afAuth.signInWithPopup(r).then(i=>{this.router.navigate(["dashboard"]),this.SetUserData(i.user)}).catch(i=>{window.alert(i)})}SetUserData(r){return this.afs.doc(`users/${r.uid}`).set({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(_$),u.LFG(tm),u.LFG(ji),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const hX=function(){return["/forgot-password"]},fX=function(){return["/register-user"]};let pX=(()=>{var n;class e{constructor(r,i){this.authService=r,this.formBuilder=i,this.submitForm=()=>{var o,c;return this.ionicForm.valid?(this.authService.SignIn(null===(o=this.ionicForm.get("userName"))||void 0===o?void 0:o.value,null===(c=this.ionicForm.get("userPassword"))||void 0===c?void 0:c.value),!1):console.log("Please provide all the required values!")}}ngOnInit(){this.ionicForm=this.formBuilder.group({userName:["",[vd.required,vd.minLength(2)]],userPassword:["",[vd.required,vd.minLength(2)]]})}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(nI),u.Y36(Q1))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-in"]],decls:22,vars:6,consts:[[3,"translucent"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],["label","Email","placeholder","Enter email address","formControlName","userName"],["label","Password","type","password","formControlName","userPassword"],["expand","block","type","submit"],[3,"routerLink"]],template:function(r,i){1&r&&(u.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),u._uU(3," Sign In "),u.qZA()()(),u.TgZ(4,"ion-content",1)(5,"form",2),u.NdJ("ngSubmit",function(){return i.submitForm()}),u.TgZ(6,"ion-item"),u._UZ(7,"ion-input",3),u.qZA(),u.TgZ(8,"ion-item"),u._UZ(9,"ion-input",4),u.qZA(),u.TgZ(10,"ion-button",5),u._uU(11,"Log in"),u.qZA()(),u.TgZ(12,"ion-item")(13,"ion-label"),u._uU(14," or "),u.qZA(),u.TgZ(15,"ion-button",6),u._uU(16,"Forgot Password?"),u.qZA()(),u.TgZ(17,"ion-item")(18,"ion-label"),u._uU(19," Don't have an account? "),u.qZA(),u.TgZ(20,"ion-button",6),u._uU(21,"Sign up"),u.qZA()()()),2&r&&(u.Q6J("translucent",!0),u.xp6(5),u.Q6J("formGroup",i.ionicForm),u.xp6(10),u.Q6J("routerLink",u.DdM(4,hX)),u.xp6(5),u.Q6J("routerLink",u.DdM(5,fX)))},dependencies:[dC,hC,fC,gx,pC,gC,mC,_C,px,_x,fx,rx,ix,K0,lC,lh]}),e})();const gX=function(){return["/sign-in"]};let mX=(()=>{var n;class e{constructor(r,i){this.authService=r,this.formBuilder=i,this.submitForm=()=>{var o,c;return this.ionicForm.valid?(this.authService.SignUp(null===(o=this.ionicForm.get("userName"))||void 0===o?void 0:o.value,null===(c=this.ionicForm.get("userPassword"))||void 0===c?void 0:c.value),!1):console.log("Please provide all the required values!")}}ngOnInit(){this.ionicForm=this.formBuilder.group({userName:["",[vd.required,vd.minLength(2)]],userPassword:["",[vd.required,vd.minLength(2)]]})}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(nI),u.Y36(Q1))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:17,vars:4,consts:[[3,"translucent"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],["label","Email","placeholder","Enter email address","formControlName","userName"],["label","Password","type","password","formControlName","userPassword"],["expand","block","type","submit"],[3,"routerLink"]],template:function(r,i){1&r&&(u.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),u._uU(3," Sign Up "),u.qZA()()(),u.TgZ(4,"ion-content",1)(5,"form",2),u.NdJ("ngSubmit",function(){return i.submitForm()}),u.TgZ(6,"ion-item"),u._UZ(7,"ion-input",3),u.qZA(),u.TgZ(8,"ion-item"),u._UZ(9,"ion-input",4),u.qZA(),u.TgZ(10,"ion-button",5),u._uU(11,"Sign Up"),u.qZA()(),u.TgZ(12,"ion-item")(13,"ion-label"),u._uU(14," or Already have an account?"),u.qZA(),u.TgZ(15,"ion-button",6),u._uU(16,"Log In"),u.qZA()()()),2&r&&(u.Q6J("translucent",!0),u.xp6(5),u.Q6J("formGroup",i.ionicForm),u.xp6(10),u.Q6J("routerLink",u.DdM(3,gX)))},dependencies:[dC,hC,fC,gx,pC,gC,mC,_C,px,_x,fx,rx,ix,K0,lC,lh]}),e})();function _X(n,e){if(1&n&&(u.TgZ(0,"div",4)(1,"div",18)(2,"div",19),u._UZ(3,"img",20),u.TgZ(4,"div",21)(5,"h1"),u._uU(6,"Hello: "),u.TgZ(7,"strong"),u._uU(8),u.qZA()(),u.TgZ(9,"p"),u._uU(10,"User ID: "),u.TgZ(11,"strong"),u._uU(12),u.qZA()(),u.TgZ(13,"p"),u._uU(14,"Email: "),u.TgZ(15,"strong"),u._uU(16),u.qZA()(),u.TgZ(17,"p"),u._uU(18,"Email Verified: "),u.TgZ(19,"strong"),u._uU(20),u.qZA()()()()()()),2&n){const t=e.ngIf;u.xp6(3),u.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",u.LSH),u.s9C("alt",t.displayName),u.xp6(5),u.Oqu(t.displayName?t.displayName:"User"),u.xp6(4),u.Oqu(t.uid),u.xp6(4),u.Oqu(t.email),u.xp6(4),u.Oqu(t.emailVerified)}}let vX=(()=>{var n;class e{constructor(r){this.authService=r}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(nI))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(r,i){1&r&&(u.TgZ(0,"nav",0)(1,"a",1),u._UZ(2,"img",2),u.qZA()(),u.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),u._UZ(10,"i",10),u._uU(11,"User Profile "),u.qZA()(),u.TgZ(12,"li",8)(13,"a",11),u.NdJ("click",function(){return i.authService.SignOut()}),u._UZ(14,"i",12),u._uU(15,"Log out "),u.qZA()()()()(),u.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),u._uU(20,"User Profile"),u.qZA()(),u.YNc(21,_X,21,6,"div",17),u.qZA()()()()),2&r&&(u.xp6(21),u.Q6J("ngIf",i.authService.userData))},dependencies:[ss]}),e})();const yX=function(){return["/sign-in"]};let IX=(()=>{var n;class e{constructor(r,i){this.authService=r,this.formBuilder=i,this.submitForm=()=>{var o;return this.ionicForm.valid?(this.authService.ForgotPassword(null===(o=this.ionicForm.get("userName"))||void 0===o?void 0:o.value),!1):console.log("Please provide all the required values!")}}ngOnInit(){this.ionicForm=this.formBuilder.group({userName:["",[vd.required,vd.minLength(2)]]})}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(nI),u.Y36(Q1))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-forgot-password"]],decls:18,vars:4,consts:[[3,"translucent"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],["label","Email","placeholder","Enter email address","formControlName","userName"],["expand","block","type","submit"],[3,"routerLink"]],template:function(r,i){1&r&&(u.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),u._uU(3," Reset Password "),u.qZA()()(),u.TgZ(4,"ion-content",1)(5,"ion-item")(6,"ion-label"),u._uU(7," Please enter your email address to request a password reset. "),u.qZA()(),u.TgZ(8,"form",2),u.NdJ("ngSubmit",function(){return i.submitForm()}),u.TgZ(9,"ion-item"),u._UZ(10,"ion-input",3),u.qZA(),u.TgZ(11,"ion-button",4),u._uU(12,"Reset Password"),u.qZA()(),u.TgZ(13,"ion-item")(14,"ion-label"),u._uU(15," or "),u.qZA(),u.TgZ(16,"ion-button",5),u._uU(17,"Log In"),u.qZA()()()),2&r&&(u.Q6J("translucent",!0),u.xp6(8),u.Q6J("formGroup",i.ionicForm),u.xp6(8),u.Q6J("routerLink",u.DdM(3,yX)))},dependencies:[dC,hC,fC,gx,pC,gC,mC,_C,px,_x,fx,rx,ix,K0,lC,lh]}),e})();function EX(n,e){if(1&n&&(u.TgZ(0,"div")(1,"ion-label"),u._uU(2,"We have sent a confirmation email to "),u.TgZ(3,"strong"),u._uU(4),u.qZA(),u._uU(5,"."),u.qZA()()),2&n){const t=e.ngIf;u.xp6(4),u.Oqu(t.email)}}function wX(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"ion-label"),u._uU(2,"Please check your email and click on the link to verfiy your email address."),u.qZA(),u.TgZ(3,"ion-button",4),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.authService.SendVerificationMail())}),u._uU(4,"Resend Verification Email"),u.qZA()()}}const bX=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:pX},{path:"register-user",component:mX},{path:"dashboard",component:vX,canActivate:[(()=>{var n;class e{constructor(r,i){this.authService=r,this.router=i}canActivate(r,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return(n=e).\u0275fac=function(r){return new(r||n)(u.LFG(nI),u.LFG(ji))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})()]},{path:"forgot-password",component:IX},{path:"verify-email-address",component:(()=>{var n;class e{constructor(r){this.authService=r}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)(u.Y36(nI))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-verify-email"]],decls:12,vars:3,consts:[[3,"translucent"],[1,"ion-padding"],[4,"ngIf"],["href","/sign-in"],["expand","block",3,"click"]],template:function(r,i){1&r&&(u.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),u._uU(3," Thank You for Registering "),u.qZA()()(),u.TgZ(4,"ion-content",1),u.YNc(5,EX,6,1,"div",2),u.YNc(6,wX,5,0,"div",2),u.TgZ(7,"ion-item")(8,"ion-label"),u._uU(9," or Go back to?"),u.qZA(),u.TgZ(10,"ion-button",3),u._uU(11,"Sign in"),u.qZA()()()),2&r&&(u.Q6J("translucent",!0),u.xp6(5),u.Q6J("ngIf",i.authService.userData),u.xp6(1),u.Q6J("ngIf",i.authService.userData))},dependencies:[ss,dC,hC,fC,pC,gC,mC,_C]}),e})()}];let c6=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[gv.forRoot(bX,{preloadingStrategy:y2}),gv]}),e})(),CX=(()=>{var n;class e{constructor(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&(u.TgZ(0,"ion-app"),u._UZ(1,"ion-router-outlet"),u.qZA())},dependencies:[jj,yC]}),e})();const u6_firebaseConfig={apiKey:"AIzaSyD7nNFvY1pCoz_snOytdkbc4ByAziF5_Ws",authDomain:"open-games-team-builder.firebaseapp.com",projectId:"open-games-team-builder",storageBucket:"open-games-team-builder.appspot.com",messagingSenderId:"650661136702",appId:"1:650661136702:web:e3c2f9b01cb3c7a272c46f"};let TX=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[mu,sH,ir,Bj,y8,c6]}),e})(),DX=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[CX]}),n.\u0275inj=u.cJS({providers:[{provide:Wx,useClass:OY}],imports:[mu,sH.forRoot(),c6,xi.hO.initializeApp(u6_firebaseConfig),Fv,pz,kE,T9,ir,Bj,TX]}),e})();(0,u.G48)(),ai().bootstrapModule(DX).catch(n=>console.log(n))},5619:(wt,Le,P)=>{"use strict";P.d(Le,{X:()=>le});var u=P(8645);class le extends u.x{constructor(de){super(),this._value=de}get value(){return this.getValue()}_subscribe(de){const me=super._subscribe(de);return!me.closed&&de.next(this._value),me}getValue(){const{hasError:de,thrownError:me,_value:ye}=this;if(de)throw me;return this._throwIfClosed(),ye}next(de){super.next(this._value=de)}}},5592:(wt,Le,P)=>{"use strict";P.d(Le,{y:()=>De});var u=P(305),le=P(7394),F=P(4850),de=P(8407),me=P(2653),ye=P(4674),Q=P(1441);let De=(()=>{class K{constructor(ue){ue&&(this._subscribe=ue)}lift(ue){const Se=new K;return Se.source=this,Se.operator=ue,Se}subscribe(ue,Se,be){const fe=function j(K){return K&&K instanceof u.Lv||function V(K){return K&&(0,ye.m)(K.next)&&(0,ye.m)(K.error)&&(0,ye.m)(K.complete)}(K)&&(0,le.Nn)(K)}(ue)?ue:new u.Hp(ue,Se,be);return(0,Q.x)(()=>{const{operator:q,source:Me}=this;fe.add(q?q.call(fe,Me):Me?this._subscribe(fe):this._trySubscribe(fe))}),fe}_trySubscribe(ue){try{return this._subscribe(ue)}catch(Se){ue.error(Se)}}forEach(ue,Se){return new(Se=ge(Se))((be,fe)=>{const q=new u.Hp({next:Me=>{try{ue(Me)}catch(Ve){fe(Ve),q.unsubscribe()}},error:fe,complete:be});this.subscribe(q)})}_subscribe(ue){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(ue)}[F.L](){return this}pipe(...ue){return(0,de.U)(ue)(this)}toPromise(ue){return new(ue=ge(ue))((Se,be)=>{let fe;this.subscribe(q=>fe=q,q=>be(q),()=>Se(fe))})}}return K.create=re=>new K(re),K})();function ge(K){var re;return null!==(re=null!=K?K:me.config.Promise)&&void 0!==re?re:Promise}},8645:(wt,Le,P)=>{"use strict";P.d(Le,{x:()=>Q});var u=P(5592),le=P(7394);const de=(0,P(2306).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=P(9039),ye=P(1441);let Q=(()=>{class ge extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new De(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new de}next(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:re,observers:ue}=this;return K||re?le.Lc:(this.currentObservers=null,ue.push(j),new le.w0(()=>{this.currentObservers=null,(0,me.P)(ue,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:re,isStopped:ue}=this;K?j.error(re):ue&&j.complete()}asObservable(){const j=new u.y;return j.source=this,j}}return ge.create=(V,j)=>new De(V,j),ge})();class De extends Q{constructor(V,j){super(),this.destination=V,this.source=j}next(V){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,V)}error(V){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,V)}complete(){var V,j;null===(j=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===j||j.call(V)}_subscribe(V){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(V))&&void 0!==K?K:le.Lc}}},305:(wt,Le,P)=>{"use strict";P.d(Le,{Hp:()=>be,Lv:()=>K});var u=P(4674),le=P(7394),F=P(2653),de=P(3894),me=P(2420);const ye=ge("C",void 0,void 0);function ge(oe,_e,ae){return{kind:oe,value:_e,error:ae}}var V=P(7599),j=P(1441);class K extends le.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,le.Nn)(_e)&&_e.add(this)):this.destination=Ve}static create(_e,ae,Ce){return new be(_e,ae,Ce)}next(_e){this.isStopped?Me(function De(oe){return ge("N",oe,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Me(function Q(oe){return ge("E",void 0,oe)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Me(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const re=Function.prototype.bind;function ue(oe,_e){return re.call(oe,_e)}class Se{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ae}=this;if(ae.next)try{ae.next(_e)}catch(Ce){fe(Ce)}}error(_e){const{partialObserver:ae}=this;if(ae.error)try{ae.error(_e)}catch(Ce){fe(Ce)}else fe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ae){fe(ae)}}}class be extends K{constructor(_e,ae,Ce){let se;if(super(),(0,u.m)(_e)||!_e)se={next:null!=_e?_e:void 0,error:null!=ae?ae:void 0,complete:null!=Ce?Ce:void 0};else{let Z;this&&F.config.useDeprecatedNextContext?(Z=Object.create(_e),Z.unsubscribe=()=>this.unsubscribe(),se={next:_e.next&&ue(_e.next,Z),error:_e.error&&ue(_e.error,Z),complete:_e.complete&&ue(_e.complete,Z)}):se=_e}this.destination=new Se(se)}}function fe(oe){F.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(oe):(0,de.h)(oe)}function Me(oe,_e){const{onStoppedNotification:ae}=F.config;ae&&V.z.setTimeout(()=>ae(oe,_e))}const Ve={closed:!0,next:me.Z,error:function q(oe){throw oe},complete:me.Z}},7394:(wt,Le,P)=>{"use strict";P.d(Le,{Lc:()=>ye,w0:()=>me,Nn:()=>Q});var u=P(4674);const F=(0,P(2306).d)(ge=>function(j){ge(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,re)=>`${re+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var de=P(9039);class me{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const ue of j)ue.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,u.m)(K))try{K()}catch(ue){V=ue instanceof F?ue.errors:[ue]}const{_finalizers:re}=this;if(re){this._finalizers=null;for(const ue of re)try{De(ue)}catch(Se){V=null!=V?V:[],Se instanceof F?V=[...V,...Se.errors]:V.push(Se)}}if(V)throw new F(V)}}add(V){var j;if(V&&V!==this)if(this.closed)De(V);else{if(V instanceof me){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(V)}}_hasParent(V){const{_parentage:j}=this;return j===V||Array.isArray(j)&&j.includes(V)}_addParent(V){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(V),j):j?[j,V]:V}_removeParent(V){const{_parentage:j}=this;j===V?this._parentage=null:Array.isArray(j)&&(0,de.P)(j,V)}remove(V){const{_finalizers:j}=this;j&&(0,de.P)(j,V),V instanceof me&&V._removeParent(this)}}me.EMPTY=(()=>{const ge=new me;return ge.closed=!0,ge})();const ye=me.EMPTY;function Q(ge){return ge instanceof me||ge&&"closed"in ge&&(0,u.m)(ge.remove)&&(0,u.m)(ge.add)&&(0,u.m)(ge.unsubscribe)}function De(ge){(0,u.m)(ge)?ge():ge.unsubscribe()}},2653:(wt,Le,P)=>{"use strict";P.d(Le,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(wt,Le,P)=>{"use strict";P.d(Le,{E:()=>le});const le=new(P(5592).y)(me=>me.complete())},2459:(wt,Le,P)=>{"use strict";P.d(Le,{D:()=>_e});var u=P(4829),le=P(3093),F=P(5137),ye=P(5592),De=P(4971),ge=P(4674),V=P(7103);function K(ae,Ce){if(!ae)throw new Error("Iterable cannot be null");return new ye.y(se=>{(0,V.f)(se,Ce,()=>{const Z=ae[Symbol.asyncIterator]();(0,V.f)(se,Ce,()=>{Z.next().then(W=>{W.done?se.complete():se.next(W.value)})},0,!0)})})}var re=P(8382),ue=P(4026),Se=P(4266),be=P(3664),fe=P(5726),q=P(9853),Me=P(541);function _e(ae,Ce){return Ce?function oe(ae,Ce){if(null!=ae){if((0,re.c)(ae))return function de(ae,Ce){return(0,u.Xf)(ae).pipe((0,F.R)(Ce),(0,le.Q)(Ce))}(ae,Ce);if((0,Se.z)(ae))return function Q(ae,Ce){return new ye.y(se=>{let Z=0;return Ce.schedule(function(){Z===ae.length?se.complete():(se.next(ae[Z++]),se.closed||this.schedule())})})}(ae,Ce);if((0,ue.t)(ae))return function me(ae,Ce){return(0,u.Xf)(ae).pipe((0,F.R)(Ce),(0,le.Q)(Ce))}(ae,Ce);if((0,fe.D)(ae))return K(ae,Ce);if((0,be.T)(ae))return function j(ae,Ce){return new ye.y(se=>{let Z;return(0,V.f)(se,Ce,()=>{Z=ae[De.h](),(0,V.f)(se,Ce,()=>{let W,ve;try{({value:W,done:ve}=Z.next())}catch(Pe){return void se.error(Pe)}ve?se.complete():se.next(W)},0,!0)}),()=>(0,ge.m)(null==Z?void 0:Z.return)&&Z.return()})}(ae,Ce);if((0,Me.L)(ae))return function Ve(ae,Ce){return K((0,Me.Q)(ae),Ce)}(ae,Ce)}throw(0,q.z)(ae)}(ae,Ce):(0,u.Xf)(ae)}},4829:(wt,Le,P)=>{"use strict";P.d(Le,{Xf:()=>re});var u=P(7582),le=P(4266),F=P(4026),de=P(5592),me=P(8382),ye=P(5726),Q=P(9853),De=P(3664),ge=P(541),V=P(4674),j=P(3894),K=P(4850);function re(oe){if(oe instanceof de.y)return oe;if(null!=oe){if((0,me.c)(oe))return function ue(oe){return new de.y(_e=>{const ae=oe[K.L]();if((0,V.m)(ae.subscribe))return ae.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,le.z)(oe))return function Se(oe){return new de.y(_e=>{for(let ae=0;ae<oe.length&&!_e.closed;ae++)_e.next(oe[ae]);_e.complete()})}(oe);if((0,F.t)(oe))return function be(oe){return new de.y(_e=>{oe.then(ae=>{_e.closed||(_e.next(ae),_e.complete())},ae=>_e.error(ae)).then(null,j.h)})}(oe);if((0,ye.D)(oe))return q(oe);if((0,De.T)(oe))return function fe(oe){return new de.y(_e=>{for(const ae of oe)if(_e.next(ae),_e.closed)return;_e.complete()})}(oe);if((0,ge.L)(oe))return function Me(oe){return q((0,ge.Q)(oe))}(oe)}throw(0,Q.z)(oe)}function q(oe){return new de.y(_e=>{(function Ve(oe,_e){var ae,Ce,se,Z;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ae=(0,u.KL)(oe);!(Ce=yield ae.next()).done;)if(_e.next(Ce.value),_e.closed)return}catch(W){se={error:W}}finally{try{Ce&&!Ce.done&&(Z=ae.return)&&(yield Z.call(ae))}finally{if(se)throw se.error}}_e.complete()})})(oe,_e).catch(ae=>_e.error(ae))})}},3019:(wt,Le,P)=>{"use strict";P.d(Le,{T:()=>ye});var u=P(7537),le=P(4829),F=P(6232),de=P(4564),me=P(2459);function ye(...Q){const De=(0,de.yG)(Q),ge=(0,de._6)(Q,1/0),V=Q;return V.length?1===V.length?(0,le.Xf)(V[0]):(0,u.J)(ge)((0,me.D)(V,De)):F.E}},2096:(wt,Le,P)=>{"use strict";P.d(Le,{of:()=>F});var u=P(4564),le=P(2459);function F(...de){const me=(0,u.yG)(de);return(0,le.D)(de,me)}},8251:(wt,Le,P)=>{"use strict";P.d(Le,{x:()=>le});var u=P(305);function le(de,me,ye,Q,De){return new F(de,me,ye,Q,De)}class F extends u.Lv{constructor(me,ye,Q,De,ge,V){super(me),this.onFinalize=ge,this.shouldUnsubscribe=V,this._next=ye?function(j){try{ye(j)}catch(K){me.error(K)}}:super._next,this._error=De?function(j){try{De(j)}catch(K){me.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=Q?function(){try{Q()}catch(j){me.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}}},3997:(wt,Le,P)=>{"use strict";P.d(Le,{x:()=>de});var u=P(2737),le=P(9360),F=P(8251);function de(ye,Q=u.y){return ye=null!=ye?ye:me,(0,le.e)((De,ge)=>{let V,j=!0;De.subscribe((0,F.x)(ge,K=>{const re=Q(K);(j||!ye(V,re))&&(j=!1,V=re,ge.next(K))}))})}function me(ye,Q){return ye===Q}},7398:(wt,Le,P)=>{"use strict";P.d(Le,{U:()=>F});var u=P(9360),le=P(8251);function F(de,me){return(0,u.e)((ye,Q)=>{let De=0;ye.subscribe((0,le.x)(Q,ge=>{Q.next(de.call(me,ge,De++))}))})}},7537:(wt,Le,P)=>{"use strict";P.d(Le,{J:()=>F});var u=P(1631),le=P(2737);function F(de=1/0){return(0,u.z)(le.y,de)}},1631:(wt,Le,P)=>{"use strict";P.d(Le,{z:()=>De});var u=P(7398),le=P(4829),F=P(9360),de=P(7103),me=P(8251),Q=P(4674);function De(ge,V,j=1/0){return(0,Q.m)(V)?De((K,re)=>(0,u.U)((ue,Se)=>V(K,ue,re,Se))((0,le.Xf)(ge(K,re))),j):("number"==typeof V&&(j=V),(0,F.e)((K,re)=>function ye(ge,V,j,K,re,ue,Se,be){const fe=[];let q=0,Me=0,Ve=!1;const oe=()=>{Ve&&!fe.length&&!q&&V.complete()},_e=Ce=>q<K?ae(Ce):fe.push(Ce),ae=Ce=>{ue&&V.next(Ce),q++;let se=!1;(0,le.Xf)(j(Ce,Me++)).subscribe((0,me.x)(V,Z=>{null==re||re(Z),ue?_e(Z):V.next(Z)},()=>{se=!0},void 0,()=>{if(se)try{for(q--;fe.length&&q<K;){const Z=fe.shift();Se?(0,de.f)(V,Se,()=>ae(Z)):ae(Z)}oe()}catch(Z){V.error(Z)}}))};return ge.subscribe((0,me.x)(V,_e,()=>{Ve=!0,oe()})),()=>{null==be||be()}}(K,re,ge,j)))}},3093:(wt,Le,P)=>{"use strict";P.d(Le,{Q:()=>de});var u=P(7103),le=P(9360),F=P(8251);function de(me,ye=0){return(0,le.e)((Q,De)=>{Q.subscribe((0,F.x)(De,ge=>(0,u.f)(De,me,()=>De.next(ge),ye),()=>(0,u.f)(De,me,()=>De.complete(),ye),ge=>(0,u.f)(De,me,()=>De.error(ge),ye)))})}},3020:(wt,Le,P)=>{"use strict";P.d(Le,{B:()=>me});var u=P(4829),le=P(8645),F=P(305),de=P(9360);function me(Q={}){const{connector:De=(()=>new le.x),resetOnError:ge=!0,resetOnComplete:V=!0,resetOnRefCountZero:j=!0}=Q;return K=>{let re,ue,Se,be=0,fe=!1,q=!1;const Me=()=>{null==ue||ue.unsubscribe(),ue=void 0},Ve=()=>{Me(),re=Se=void 0,fe=q=!1},oe=()=>{const _e=re;Ve(),null==_e||_e.unsubscribe()};return(0,de.e)((_e,ae)=>{be++,!q&&!fe&&Me();const Ce=Se=null!=Se?Se:De();ae.add(()=>{be--,0===be&&!q&&!fe&&(ue=ye(oe,j))}),Ce.subscribe(ae),!re&&be>0&&(re=new F.Hp({next:se=>Ce.next(se),error:se=>{q=!0,Me(),ue=ye(Ve,ge,se),Ce.error(se)},complete:()=>{fe=!0,Me(),ue=ye(Ve,V),Ce.complete()}}),(0,u.Xf)(_e).subscribe(re))})(K)}}function ye(Q,De,...ge){if(!0===De)return void Q();if(!1===De)return;const V=new F.Hp({next:()=>{V.unsubscribe(),Q()}});return(0,u.Xf)(De(...ge)).subscribe(V)}},5137:(wt,Le,P)=>{"use strict";P.d(Le,{R:()=>le});var u=P(9360);function le(F,de=0){return(0,u.e)((me,ye)=>{ye.add(F.schedule(()=>me.subscribe(ye),de))})}},4664:(wt,Le,P)=>{"use strict";P.d(Le,{w:()=>de});var u=P(4829),le=P(9360),F=P(8251);function de(me,ye){return(0,le.e)((Q,De)=>{let ge=null,V=0,j=!1;const K=()=>j&&!ge&&De.complete();Q.subscribe((0,F.x)(De,re=>{null==ge||ge.unsubscribe();let ue=0;const Se=V++;(0,u.Xf)(me(re,Se)).subscribe(ge=(0,F.x)(De,be=>De.next(ye?ye(re,be,Se,ue++):be),()=>{ge=null,K()}))},()=>{j=!0,K()}))})}},9397:(wt,Le,P)=>{"use strict";P.d(Le,{b:()=>me});var u=P(4674),le=P(9360),F=P(8251),de=P(2737);function me(ye,Q,De){const ge=(0,u.m)(ye)||Q||De?{next:ye,error:Q,complete:De}:ye;return ge?(0,le.e)((V,j)=>{var K;null===(K=ge.subscribe)||void 0===K||K.call(ge);let re=!0;V.subscribe((0,F.x)(j,ue=>{var Se;null===(Se=ge.next)||void 0===Se||Se.call(ge,ue),j.next(ue)},()=>{var ue;re=!1,null===(ue=ge.complete)||void 0===ue||ue.call(ge),j.complete()},ue=>{var Se;re=!1,null===(Se=ge.error)||void 0===Se||Se.call(ge,ue),j.error(ue)},()=>{var ue,Se;re&&(null===(ue=ge.unsubscribe)||void 0===ue||ue.call(ge)),null===(Se=ge.finalize)||void 0===Se||Se.call(ge)}))}):de.y}},1954:(wt,Le,P)=>{"use strict";P.d(Le,{o:()=>me});var u=P(7394);class le extends u.w0{constructor(Q,De){super()}schedule(Q,De=0){return this}}const F={setInterval(ye,Q,...De){const{delegate:ge}=F;return null!=ge&&ge.setInterval?ge.setInterval(ye,Q,...De):setInterval(ye,Q,...De)},clearInterval(ye){const{delegate:Q}=F;return((null==Q?void 0:Q.clearInterval)||clearInterval)(ye)},delegate:void 0};var de=P(9039);class me extends le{constructor(Q,De){super(Q,De),this.scheduler=Q,this.work=De,this.pending=!1}schedule(Q,De=0){var ge;if(this.closed)return this;this.state=Q;const V=this.id,j=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(j,V,De)),this.pending=!0,this.delay=De,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(j,this.id,De),this}requestAsyncId(Q,De,ge=0){return F.setInterval(Q.flush.bind(Q,this),ge)}recycleAsyncId(Q,De,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return De;null!=De&&F.clearInterval(De)}execute(Q,De){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(Q,De);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Q,De){let V,ge=!1;try{this.work(Q)}catch(j){ge=!0,V=j||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:Q,scheduler:De}=this,{actions:ge}=De;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(ge,this),null!=Q&&(this.id=this.recycleAsyncId(De,Q,null)),this.delay=null,super.unsubscribe()}}}},2631:(wt,Le,P)=>{"use strict";P.d(Le,{v:()=>F});var u=P(4552);class le{constructor(me,ye=le.now){this.schedulerActionCtor=me,this.now=ye}schedule(me,ye=0,Q){return new this.schedulerActionCtor(this,me).schedule(Q,ye)}}le.now=u.l.now;class F extends le{constructor(me,ye=le.now){super(me,ye),this.actions=[],this._active=!1}flush(me){const{actions:ye}=this;if(this._active)return void ye.push(me);let Q;this._active=!0;do{if(Q=me.execute(me.state,me.delay))break}while(me=ye.shift());if(this._active=!1,Q){for(;me=ye.shift();)me.unsubscribe();throw Q}}}},6321:(wt,Le,P)=>{"use strict";P.d(Le,{z:()=>F});var u=P(1954);const F=new(P(2631).v)(u.o)},4552:(wt,Le,P)=>{"use strict";P.d(Le,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},7599:(wt,Le,P)=>{"use strict";P.d(Le,{z:()=>u});const u={setTimeout(le,F,...de){const{delegate:me}=u;return null!=me&&me.setTimeout?me.setTimeout(le,F,...de):setTimeout(le,F,...de)},clearTimeout(le){const{delegate:F}=u;return((null==F?void 0:F.clearTimeout)||clearTimeout)(le)},delegate:void 0}},4971:(wt,Le,P)=>{"use strict";P.d(Le,{h:()=>le});const le=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(wt,Le,P)=>{"use strict";P.d(Le,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(wt,Le,P)=>{"use strict";P.d(Le,{_6:()=>ye,jO:()=>de,yG:()=>me});var u=P(4674);function F(Q){return Q[Q.length-1]}function de(Q){return(0,u.m)(F(Q))?Q.pop():void 0}function me(Q){return function le(Q){return Q&&(0,u.m)(Q.schedule)}(F(Q))?Q.pop():void 0}function ye(Q,De){return"number"==typeof F(Q)?Q.pop():De}},9039:(wt,Le,P)=>{"use strict";function u(le,F){if(le){const de=le.indexOf(F);0<=de&&le.splice(de,1)}}P.d(Le,{P:()=>u})},2306:(wt,Le,P)=>{"use strict";function u(le){const de=le(me=>{Error.call(me),me.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}P.d(Le,{d:()=>u})},1441:(wt,Le,P)=>{"use strict";P.d(Le,{O:()=>de,x:()=>F});var u=P(2653);let le=null;function F(me){if(u.config.useDeprecatedSynchronousErrorHandling){const ye=!le;if(ye&&(le={errorThrown:!1,error:null}),me(),ye){const{errorThrown:Q,error:De}=le;if(le=null,Q)throw De}}else me()}function de(me){u.config.useDeprecatedSynchronousErrorHandling&&le&&(le.errorThrown=!0,le.error=me)}},7103:(wt,Le,P)=>{"use strict";function u(le,F,de,me=0,ye=!1){const Q=F.schedule(function(){de(),ye?le.add(this.schedule(null,me)):this.unsubscribe()},me);if(le.add(Q),!ye)return Q}P.d(Le,{f:()=>u})},2737:(wt,Le,P)=>{"use strict";function u(le){return le}P.d(Le,{y:()=>u})},4266:(wt,Le,P)=>{"use strict";P.d(Le,{z:()=>u});const u=le=>le&&"number"==typeof le.length&&"function"!=typeof le},5726:(wt,Le,P)=>{"use strict";P.d(Le,{D:()=>le});var u=P(4674);function le(F){return Symbol.asyncIterator&&(0,u.m)(null==F?void 0:F[Symbol.asyncIterator])}},4674:(wt,Le,P)=>{"use strict";function u(le){return"function"==typeof le}P.d(Le,{m:()=>u})},8382:(wt,Le,P)=>{"use strict";P.d(Le,{c:()=>F});var u=P(4850),le=P(4674);function F(de){return(0,le.m)(de[u.L])}},3664:(wt,Le,P)=>{"use strict";P.d(Le,{T:()=>F});var u=P(4971),le=P(4674);function F(de){return(0,le.m)(null==de?void 0:de[u.h])}},4026:(wt,Le,P)=>{"use strict";P.d(Le,{t:()=>le});var u=P(4674);function le(F){return(0,u.m)(null==F?void 0:F.then)}},541:(wt,Le,P)=>{"use strict";P.d(Le,{L:()=>de,Q:()=>F});var u=P(7582),le=P(4674);function F(me){return(0,u.FC)(this,arguments,function*(){const Q=me.getReader();try{for(;;){const{value:De,done:ge}=yield(0,u.qq)(Q.read());if(ge)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(De)}}finally{Q.releaseLock()}})}function de(me){return(0,le.m)(null==me?void 0:me.getReader)}},9360:(wt,Le,P)=>{"use strict";P.d(Le,{A:()=>le,e:()=>F});var u=P(4674);function le(de){return(0,u.m)(null==de?void 0:de.lift)}function F(de){return me=>{if(le(me))return me.lift(function(ye){try{return de(ye,this)}catch(Q){this.error(Q)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(wt,Le,P)=>{"use strict";function u(){}P.d(Le,{Z:()=>u})},8407:(wt,Le,P)=>{"use strict";P.d(Le,{U:()=>F,z:()=>le});var u=P(2737);function le(...de){return F(de)}function F(de){return 0===de.length?u.y:1===de.length?de[0]:function(ye){return de.reduce((Q,De)=>De(Q),ye)}}},3894:(wt,Le,P)=>{"use strict";P.d(Le,{h:()=>F});var u=P(2653),le=P(7599);function F(de){le.z.setTimeout(()=>{const{onUnhandledError:me}=u.config;if(!me)throw de;me(de)})}},9853:(wt,Le,P)=>{"use strict";function u(le){return new TypeError(`You provided ${null!==le&&"object"==typeof le?"an invalid object":`'${le}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Le,{z:()=>u})},863:(wt,Le,P)=>{var u={"./ion-accordion_2.entry.js":[8484,8592,8484],"./ion-action-sheet.entry.js":[9882,8592,9882],"./ion-alert.entry.js":[7068,8592,6304],"./ion-app_8.entry.js":[5860,8592,5860],"./ion-avatar_3.entry.js":[3544,3544],"./ion-back-button.entry.js":[505,8592,505],"./ion-backdrop.entry.js":[469,469],"./ion-breadcrumb_2.entry.js":[9857,8592,9857],"./ion-button_2.entry.js":[1372,1372],"./ion-card_5.entry.js":[3150,3150],"./ion-checkbox.entry.js":[7635,8592,7635],"./ion-chip.entry.js":[6673,6673],"./ion-col_3.entry.js":[1315,1315],"./ion-datetime-button.entry.js":[433,7350,433],"./ion-datetime_3.entry.js":[7059,7350,8592,7059],"./ion-fab_3.entry.js":[4087,8592,4087],"./ion-img.entry.js":[1745,1745],"./ion-infinite-scroll_2.entry.js":[9352,8592,9352],"./ion-input.entry.js":[4530,8592,4530],"./ion-item-option_3.entry.js":[8633,8592,8633],"./ion-item_8.entry.js":[5962,8592,5962],"./ion-loading.entry.js":[3483,8592,3483],"./ion-menu_3.entry.js":[2939,8592,8382],"./ion-modal.entry.js":[8577,8592,8577],"./ion-nav_2.entry.js":[5675,8592,5675],"./ion-picker-column-internal.entry.js":[9992,8592,9992],"./ion-picker-internal.entry.js":[9820,9820],"./ion-popover.entry.js":[185,8592,185],"./ion-progress-bar.entry.js":[5454,5454],"./ion-radio_2.entry.js":[4458,8592,4458],"./ion-range.entry.js":[7666,8592,7666],"./ion-refresher_2.entry.js":[7219,8592,7219],"./ion-reorder_2.entry.js":[2975,8592,2975],"./ion-ripple-effect.entry.js":[7465,7465],"./ion-route_4.entry.js":[4764,4764],"./ion-searchbar.entry.js":[3998,8592,3998],"./ion-segment_2.entry.js":[3672,8592,3672],"./ion-select_3.entry.js":[6754,8592,6754],"./ion-spinner.entry.js":[9588,8592,9588],"./ion-split-pane.entry.js":[9793,9793],"./ion-tab-bar_2.entry.js":[4090,8592,4090],"./ion-tab_2.entry.js":[2841,2841],"./ion-text.entry.js":[8811,8811],"./ion-textarea.entry.js":[3734,8592,3734],"./ion-toast.entry.js":[6642,8592,6642],"./ion-toggle.entry.js":[8866,8592,8866]};function le(F){if(!P.o(u,F))return Promise.resolve().then(()=>{var ye=new Error("Cannot find module '"+F+"'");throw ye.code="MODULE_NOT_FOUND",ye});var de=u[F],me=de[0];return Promise.all(de.slice(1).map(P.e)).then(()=>P(me))}le.keys=()=>Object.keys(u),le.id=863,wt.exports=le},5879:(wt,Le,P)=>{"use strict";P.d(Le,{$8M:()=>Ru,$WT:()=>Ts,$Z:()=>Lv,AFp:()=>cM,AaK:()=>K,CHM:()=>eo,CRH:()=>kw,DdM:()=>Ew,EJc:()=>dP,EpF:()=>xD,F$t:()=>Cn,F4k:()=>cy,FYo:()=>bv,FiY:()=>Kd,G48:()=>e_,Gf:()=>Mw,GfV:()=>Vf,GkF:()=>ME,Gpc:()=>Se,HDt:()=>Sh,Hsn:()=>lm,JOm:()=>Fu,KtG:()=>yu,LFG:()=>en,LMc:()=>y0,LSH:()=>Vg,Lbi:()=>UI,Lck:()=>Wl,MMx:()=>ql,NdJ:()=>am,Ojb:()=>S2,OlP:()=>ar,Oqu:()=>wy,P3R:()=>nM,PXZ:()=>Zm,Q6J:()=>iy,QGY:()=>kE,Qsj:()=>vT,R0b:()=>gs,RDi:()=>HC,Rgc:()=>Yt,SBq:()=>Yg,Sil:()=>Gw,Suo:()=>ll,TTD:()=>fu,TgZ:()=>oy,VuI:()=>PP,X6Q:()=>wA,XFs:()=>qt,Xpm:()=>it,Xq5:()=>uD,Xts:()=>Of,Y36:()=>Wu,YKP:()=>$y,YNc:()=>fk,Yjl:()=>Aa,Yz7:()=>He,Z0I:()=>Mt,ZZ4:()=>g0,_Bn:()=>lr,_UZ:()=>AE,_c5:()=>AP,_uU:()=>Ey,aQg:()=>m0,c2e:()=>jw,cJS:()=>je,cg1:()=>Ay,dDg:()=>o0,dqk:()=>En,eFA:()=>_A,eJc:()=>Ow,ekj:()=>fm,eoX:()=>wp,f3M:()=>fn,g9A:()=>uT,h0i:()=>wh,hGG:()=>eb,iGM:()=>KS,ifc:()=>Br,ip1:()=>Sr,jDz:()=>vs,kL8:()=>Ry,lG2:()=>os,lqb:()=>il,lri:()=>Ys,n5z:()=>da,oAB:()=>Mn,oxw:()=>Lt,q4F:()=>IT,qFp:()=>Oh,qLn:()=>Bc,qOj:()=>Kv,qZA:()=>ay,rWj:()=>s0,rg0:()=>Nd,s9C:()=>ph,sBO:()=>c0,s_b:()=>Ws,soG:()=>Xc,tb:()=>Yw,tp0:()=>el,uIk:()=>yE,vHH:()=>oe,vpe:()=>Bl,wAp:()=>yh,xp6:()=>Ov,z2F:()=>bp,zSh:()=>xi,zs3:()=>Go});var u=P(8645),le=P(7394),F=P(5592),de=P(3019),me=P(5619),ye=P(2096),Q=P(3020),De=P(4664),ge=P(3997);function V(s){for(let a in s)if(s[a]===V)return a;throw Error("Could not find renamed property on target object.")}function j(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function K(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(K).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function re(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const ue=V({__forward_ref__:V});function Se(s){return s.__forward_ref__=Se,s.toString=function(){return K(this())},s}function be(s){return fe(s)?s():s}function fe(s){return"function"==typeof s&&s.hasOwnProperty(ue)&&s.__forward_ref__===Se}function q(s){return s&&!!s.\u0275providers}const Ve="https://g.co/ng/security#xss";class oe extends Error{constructor(a,l){super(function _e(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,l)),this.code=a}}function ae(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s,a){throw new oe(-201,!1)}function lt(s,a){null==s&&function nt(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function He(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function je(s){return{providers:s.providers||[],imports:s.imports||[]}}function ut(s){return mn(s,cn)||mn(s,Xn)}function Mt(s){return null!==ut(s)}function mn(s,a){return s.hasOwnProperty(a)?s[a]:null}function ln(s){return s&&(s.hasOwnProperty(In)||s.hasOwnProperty(Kn))?s[In]:null}const cn=V({\u0275prov:V}),In=V({\u0275inj:V}),Xn=V({ngInjectableDef:V}),Kn=V({ngInjectorDef:V});var qt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(qt||{});let Qt;function Fn(s){const a=Qt;return Qt=s,a}function zn(s,a,l){const d=ut(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&qt.Optional?null:void 0!==a?a:void ve(K(s))}const En=globalThis,gt={},Et="__NG_DI_FLAG__",$t="ngTempTokenPath",te=/\n/gm,Ie="__source";let et;function St(s){const a=et;return et=s,a}function hn(s,a=qt.Default){if(void 0===et)throw new oe(-203,!1);return null===et?zn(s,void 0,a):et.get(s,a&qt.Optional?null:void 0,a)}function en(s,a=qt.Default){return(function un(){return Qt}()||hn)(be(s),a)}function fn(s,a=qt.Default){return en(s,mr(a))}function mr(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Pn(s){const a=[];for(let l=0;l<s.length;l++){const d=be(s[l]);if(Array.isArray(d)){if(0===d.length)throw new oe(900,!1);let h,g=qt.Default;for(let y=0;y<d.length;y++){const w=d[y],T=Ns(w);"number"==typeof T?-1===T?h=w.token:g|=T:h=w}a.push(en(h,g))}else a.push(en(d))}return a}function xr(s,a){return s[Et]=a,s.prototype[Et]=a,s}function Ns(s){return s[Et]}function Fi(s){return{toString:s}.toString()}var Mr=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(Mr||{}),Br=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Br||{});const Bi={},An=[],Kr=V({\u0275cmp:V}),Zi=V({\u0275dir:V}),mo=V({\u0275pipe:V}),_o=V({\u0275mod:V}),nr=V({\u0275fac:V}),Xi=V({__NG_ELEMENT_ID__:V}),Jn=V({__NG_ENV_ID__:V});function Ln(s,a,l){let d=s.length;for(;;){const h=s.indexOf(a,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=a.length;if(h+g===d||s.charCodeAt(h+g)<=32)return h}l=h+1}}function vo(s,a,l){let d=0;for(;d<l.length;){const h=l[d];if("number"==typeof h){if(0!==h)break;d++;const g=l[d++],y=l[d++],w=l[d++];s.setAttribute(a,y,w,g)}else{const g=h,y=l[++d];Ui(g)?s.setProperty(a,g,y):s.setAttribute(a,g,y),d++}}return d}function Ta(s){return 3===s||4===s||6===s}function Ui(s){return 64===s.charCodeAt(0)}function Cs(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?l=h:0===l||yo(s,l,h,null,-1===l||2===l?a[++d]:null)}}return s}function yo(s,a,l,d,h){let g=0,y=s.length;if(-1===a)y=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===a){y=-1;break}if(w>a){y=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===l){if(null===d)return void(null!==h&&(s[g+1]=h));if(d===s[g+1])return void(s[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,a),g=y+1),s.splice(g++,0,l),null!==d&&s.splice(g++,0,d),null!==h&&s.splice(g++,0,h)}const ta="ng-template";function hr(s,a,l){let d=0,h=!0;for(;d<s.length;){let g=s[d++];if("string"==typeof g&&h){const y=s[d++];if(l&&"class"===g&&-1!==Ln(y.toLowerCase(),a,0))return!0}else{if(1===g){for(;d<s.length&&"string"==typeof(g=s[d++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(h=!1)}}return!1}function ss(s){return 4===s.type&&s.value!==ta}function Da(s,a,l){return a===(4!==s.type||l?s.value:ta)}function Sa(s,a,l){let d=4;const h=s.attrs||[],g=function z(s){for(let a=0;a<s.length;a++)if(Ta(s[a]))return a;return s.length}(h);let y=!1;for(let w=0;w<a.length;w++){const T=a[w];if("number"!=typeof T){if(!y)if(4&d){if(d=2|1&d,""!==T&&!Da(s,T,l)||""===T&&1===a.length){if(Zr(d))return!1;y=!0}}else{const A=8&d?T:a[++w];if(8&d&&null!==s.attrs){if(!hr(s.attrs,A,l)){if(Zr(d))return!1;y=!0}continue}const B=Io(8&d?"class":T,h,ss(s),l);if(-1===B){if(Zr(d))return!1;y=!0;continue}if(""!==A){let ee;ee=B>g?"":h[B+1].toLowerCase();const Ee=8&d?ee:null;if(Ee&&-1!==Ln(Ee,A,0)||2&d&&A!==ee){if(Zr(d))return!1;y=!0}}}}else{if(!y&&!Zr(d)&&!Zr(T))return!1;if(y&&Zr(T))continue;y=!1,d=T|1&d}}return Zr(d)||y}function Zr(s){return 0==(1&s)}function Io(s,a,l,d){if(null===a)return-1;let h=0;if(d||!l){let g=!1;for(;h<a.length;){const y=a[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let w=a[++h];for(;"string"==typeof w;)w=a[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function J(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function L(s,a,l=!1){for(let d=0;d<a.length;d++)if(Sa(s,a[d],l))return!0;return!1}function Fe(s,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(s.length===d.length){for(let h=0;h<s.length;h++)if(s[h]!==d[h])continue e;return!0}}return!1}function xe(s,a){return s?":not("+a.trim()+")":a}function Xe(s){let a=s[0],l=1,d=2,h="",g=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&d){const w=s[++l];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!Zr(y)&&(a+=xe(g,h),h=""),d=y,g=g||!Zr(d);l++}return""!==h&&(a+=xe(g,h)),a}function it(s){return Fi(()=>{var a;const l=wd(s),d={...l,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:null!==(a=s.signals)&&void 0!==a&&a,data:s.data||{},encapsulation:s.encapsulation||Br.Emulated,styles:s.styles||An,_:null,schemas:s.schemas||null,tView:null,id:""};rg(d);const h=s.dependencies;return d.directiveDefs=sc(h,!1),d.pipeDefs=sc(h,!0),d.id=function Ls(s){let a=0;const l=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of l)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(d),d})}function Xt(s){return pn(s)||rr(s)}function rn(s){return null!==s}function Mn(s){return Fi(()=>({type:s.type,bootstrap:s.bootstrap||An,declarations:s.declarations||An,imports:s.imports||An,exports:s.exports||An,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ur(s,a){if(null==s)return Bi;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=d,a&&(a[h]=g)}return l}function os(s){return Fi(()=>{const a=wd(s);return rg(a),a})}function Aa(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function pn(s){return s[Kr]||null}function rr(s){return s[Zi]||null}function vi(s){return s[mo]||null}function Ts(s){const a=pn(s)||rr(s)||vi(s);return null!==a&&a.standalone}function Qi(s,a){const l=s[_o]||null;if(!l&&!0===a)throw new Error(`Type ${K(s)} does not have '\u0275mod' property.`);return l}function wd(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||Bi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||An,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ur(s.inputs,a),outputs:Ur(s.outputs)}}function rg(s){var a;null===(a=s.features)||void 0===a||a.forEach(l=>l(s))}function sc(s,a){if(!s)return null;const l=a?vi:Xt;return()=>("function"==typeof s?s():s).map(d=>l(d)).filter(rn)}const _r=0,Ot=1,tn=2,vr=3,Ji=4,Ra=5,yi=6,oc=7,ir=8,Po=9,hl=10,on=11,Ii=12,ig=13,Oo=14,yr=15,bd=16,xa=17,ni=18,No=19,Lo=20,na=21,Fs=22,ac=23,ra=24,wn=25,fl=1,au=2,ri=7,ii=9,Ei=11;function si(s){return Array.isArray(s)&&"object"==typeof s[fl]}function $i(s){return Array.isArray(s)&&!0===s[fl]}function lu(s){return 0!=(4&s.flags)}function ka(s){return s.componentOffset>-1}function Ds(s){return 1==(1&s.flags)}function as(s){return!!s.template}function pl(s){return 0!=(512&s[tn])}function Pa(s,a){return s.hasOwnProperty(nr)?s[nr]:null}let Xr=null,Oa=!1;function ls(s){const a=Xr;return Xr=s,a}const Na={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function uc(s){if(!La(s)||s.dirty){if(!s.producerMustRecompute(s)&&!xd(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function dc(s){var a;s.dirty=!0,function Kh(s){if(void 0===s.liveConsumerNode)return;const a=Oa;Oa=!0;try{for(const l of s.liveConsumerNode)l.dirty||dc(l)}finally{Oa=a}}(s),null===(a=s.consumerMarkedDirty)||void 0===a||a.call(s,s)}function Zh(s){return s&&(s.nextProducerIndex=0),ls(s)}function oi(s,a){if(ls(a),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(La(s))for(let l=s.nextProducerIndex;l<s.producerNode.length;l++)hc(s.producerNode[l],s.producerIndexOfThis[l]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function xd(s){sa(s);for(let a=0;a<s.producerNode.length;a++){const l=s.producerNode[a],d=s.producerLastReadVersion[a];if(d!==l.version||(uc(l),d!==l.version))return!0}return!1}function Md(s){if(sa(s),La(s))for(let a=0;a<s.producerNode.length;a++)hc(s.producerNode[a],s.producerIndexOfThis[a]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function hc(s,a){if(function fc(s){var a,l;null!==(a=s.liveConsumerNode)&&void 0!==a||(s.liveConsumerNode=[]),null!==(l=s.liveConsumerIndexOfThis)&&void 0!==l||(s.liveConsumerIndexOfThis=[])}(s),sa(s),1===s.liveConsumerNode.length)for(let d=0;d<s.producerNode.length;d++)hc(s.producerNode[d],s.producerIndexOfThis[d]);const l=s.liveConsumerNode.length-1;if(s.liveConsumerNode[a]=s.liveConsumerNode[l],s.liveConsumerIndexOfThis[a]=s.liveConsumerIndexOfThis[l],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,a<s.liveConsumerNode.length){const d=s.liveConsumerIndexOfThis[a],h=s.liveConsumerNode[a];sa(h),h.producerIndexOfThis[d]=a}}function La(s){var a,l;return s.consumerIsAlwaysLive||(null!==(a=null==s||null===(l=s.liveConsumerNode)||void 0===l?void 0:l.length)&&void 0!==a?a:0)>0}function sa(s){var a,l,d;null!==(a=s.producerNode)&&void 0!==a||(s.producerNode=[]),null!==(l=s.producerIndexOfThis)&&void 0!==l||(s.producerIndexOfThis=[]),null!==(d=s.producerLastReadVersion)&&void 0!==d||(s.producerLastReadVersion=[])}let Jh=null;function Nd(s){const a=ls(null);try{return s()}finally{ls(a)}}const Ld=()=>{},ug=(()=>({...Na,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:Ld}))();class dg{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function fu(){return mc}function mc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Fa),hg}function hg(){const s=Ba(this),a=null==s?void 0:s.current;if(a){const l=s.previous;if(l===Bi)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Fa(s,a,l,d){const h=this.declaredInputs[l],g=Ba(s)||function tf(s,a){return s[wo]=a}(s,{previous:Bi,current:null}),y=g.current||(g.current={}),w=g.previous,T=w[h];y[h]=new dg(T&&T.currentValue,a,w===Bi),s[d]=a}fu.ngInherit=!0;const wo="__ngSimpleChanges__";function Ba(s){return s[wo]||null}const Js=function(s,a,l){};function jn(s){for(;Array.isArray(s);)s=s[_r];return s}function $a(s,a){return jn(a[s])}function wi(s,a){return jn(a[s.index])}function Bd(s,a){return s.data[a]}function bi(s,a){const l=a[s];return si(l)?l:l[_r]}function cs(s,a){return null==a?null:s[a]}function _g(s){s[xa]=0}function Ud(s){1024&s[tn]||(s[tn]|=1024,G_(s,1))}function pu(s){1024&s[tn]&&(s[tn]&=-1025,G_(s,-1))}function G_(s,a){let l=s[vr];if(null===l)return;l[Ra]+=a;let d=l;for(l=l[vr];null!==l&&(1===a&&1===d[Ra]||-1===a&&0===d[Ra]);)l[Ra]+=a,d=l,l=l[vr]}const an={lFrame:wl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ci(){return an.bindingsEnabled}function bo(){return null!==an.skipHydrationRootTNode}function ot(){return an.lFrame.lView}function On(){return an.lFrame.tView}function eo(s){return an.lFrame.contextLView=s,s[ir]}function yu(s){return an.lFrame.contextLView=null,s}function li(){let s=Iu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Iu(){return an.lFrame.currentTNode}function oa(s,a){const l=an.lFrame;l.currentTNode=s,l.isParent=a}function ja(){return an.lFrame.isParent}function Vd(){an.lFrame.isParent=!1}function Ha(){return an.lFrame.bindingIndex++}function Eu(s,a){const l=an.lFrame;l.bindingIndex=l.bindingRootIndex=s,wu(a)}function wu(s){an.lFrame.currentDirectiveIndex=s}function bu(){return an.lFrame.currentQueryIndex}function ff(s){an.lFrame.currentQueryIndex=s}function pf(s){const a=s[Ot];return 2===a.type?a.declTNode:1===a.type?s[yi]:null}function yg(s,a,l){if(l&qt.SkipSelf){let h=a,g=s;for(;!(h=h.parent,null!==h||l&qt.Host||(h=pf(g),null===h||(g=g[Oo],10&h.type))););if(null===h)return!1;a=h,s=g}const d=an.lFrame=As();return d.currentTNode=a,d.lView=s,!0}function ci(s){const a=As(),l=s[Ot];an.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function As(){const s=an.lFrame,a=null===s?null:s.child;return null===a?wl(s):a}function wl(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function er(){const s=an.lFrame;return an.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Wt=er;function Ti(){const s=er();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Di(){return an.lFrame.selectedIndex}function Bo(s){an.lFrame.selectedIndex=s}function sr(){const s=an.lFrame;return Bd(s.tView,s.selectedIndex)}let za=!0;function Us(){return za}function no(s){za=s}function bl(s,a){for(let A=a.directiveStart,M=a.directiveEnd;A<M;A++){const ee=s.data[A].type.prototype,{ngAfterContentInit:Ee,ngAfterContentChecked:Je,ngAfterViewInit:dt,ngAfterViewChecked:bt,ngOnDestroy:zt}=ee;var l,d,h,g,y,w,T;Ee&&(null!==(l=s.contentHooks)&&void 0!==l?l:s.contentHooks=[]).push(-A,Ee),Je&&((null!==(d=s.contentHooks)&&void 0!==d?d:s.contentHooks=[]).push(A,Je),(null!==(h=s.contentCheckHooks)&&void 0!==h?h:s.contentCheckHooks=[]).push(A,Je)),dt&&(null!==(g=s.viewHooks)&&void 0!==g?g:s.viewHooks=[]).push(-A,dt),bt&&((null!==(y=s.viewHooks)&&void 0!==y?y:s.viewHooks=[]).push(A,bt),(null!==(w=s.viewCheckHooks)&&void 0!==w?w:s.viewCheckHooks=[]).push(A,bt)),null!=zt&&(null!==(T=s.destroyHooks)&&void 0!==T?T:s.destroyHooks=[]).push(A,zt)}}function la(s,a,l){Ig(s,a,3,l)}function Tu(s,a,l,d){(3&s[tn])===l&&Ig(s,a,l,d)}function Cl(s,a){let l=s[tn];(3&l)===a&&(l&=8191,l+=1,s[tn]=l)}function Ig(s,a,l,d){const g=null!=d?d:-1,y=a.length-1;let w=0;for(let T=void 0!==d?65535&s[xa]:0;T<y;T++)if("number"==typeof a[T+1]){if(w=a[T],null!=d&&w>=d)break}else a[T]<0&&(s[xa]+=65536),(w<g||-1==g)&&(qa(s,l,a,T),s[xa]=(4294901760&s[xa])+T+2),T++}function Wa(s,a){Js(4,s,a);const l=ls(null);try{a.call(s)}finally{ls(l),Js(5,s,a)}}function qa(s,a,l,d){const h=l[d]<0,g=l[d+1],w=s[h?-l[d]:l[d]];h?s[tn]>>13<s[xa]>>16&&(3&s[tn])===a&&(s[tn]+=8192,Wa(w,g)):Wa(w,g)}const ca=-1;class Co{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Tl(s){return s!==ca}function $r(s){return 32767&s}function $s(s,a){let l=function wr(s){return s>>16}(s),d=a;for(;l>0;)d=d[Oo],l--;return d}let Dl=!0;function Vi(s){const a=Dl;return Dl=s,a}const Ec=255,vf=5;let zd=0;const Ri={};function br(s,a){const l=wc(s,a);if(-1!==l)return l;const d=a[Ot];d.firstCreatePass&&(s.injectorIndex=a.length,Vs(d.data,s),Vs(a,null),Vs(d.blueprint,null));const h=Rs(s,a),g=s.injectorIndex;if(Tl(h)){const y=$r(h),w=$s(h,a),T=w[Ot].data;for(let A=0;A<8;A++)a[g+A]=w[y+A]|T[y+A]}return a[g+8]=h,g}function Vs(s,a){s.push(0,0,0,0,0,0,0,0,a)}function wc(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Rs(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=a;for(;null!==h;){if(d=Yd(h),null===d)return ca;if(l++,h=h[Oo],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return ca}function Ya(s,a,l){!function ua(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Xi)&&(d=l[Xi]),null==d&&(d=l[Xi]=zd++);const h=d&Ec;a.data[s+(h>>vf)]|=1<<h}(s,a,l)}function bc(s,a,l){if(l&qt.Optional||void 0!==s)return s;ve()}function Ka(s,a,l,d){if(l&qt.Optional&&void 0===d&&(d=null),!(l&(qt.Self|qt.Host))){const h=s[Po],g=Fn(void 0);try{return h?h.get(a,d,l&qt.Optional):zn(a,d,l&qt.Optional)}finally{Fn(g)}}return bc(d,0,l)}function Cc(s,a,l,d=qt.Default,h){if(null!==s){if(2048&a[tn]&&!(d&qt.Self)){const y=function Eg(s,a,l,d,h){let g=s,y=a;for(;null!==g&&null!==y&&2048&y[tn]&&!(512&y[tn]);){const w=yf(g,y,l,d|qt.Self,Ri);if(w!==Ri)return w;let T=g.parent;if(!T){const A=y[Lo];if(A){const M=A.get(l,Ri,d);if(M!==Ri)return M}T=Yd(y),y=y[Oo]}g=T}return h}(s,a,l,d,Ri);if(y!==Ri)return y}const g=yf(s,a,l,d,Ri);if(g!==Ri)return g}return Ka(a,l,d,h)}function yf(s,a,l,d,h){const g=function Sl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Xi)?s[Xi]:void 0;return"number"==typeof a?a>=0?a&Ec:ro:a}(l);if("function"==typeof g){if(!yg(a,s,d))return d&qt.Host?bc(h,0,d):Ka(a,l,d,h);try{let y;if(y=g(d),null!=y||d&qt.Optional)return y;ve()}finally{Wt()}}else if("number"==typeof g){let y=null,w=wc(s,a),T=ca,A=d&qt.Host?a[yr][yi]:null;for((-1===w||d&qt.SkipSelf)&&(T=-1===w?Rs(s,a):a[w+8],T!==ca&&Wd(d,!1)?(y=a[Ot],w=$r(T),a=$s(T,a)):w=-1);-1!==w;){const M=a[Ot];if($o(g,w,M.data)){const B=vn(w,a,l,y,d,A);if(B!==Ri)return B}T=a[w+8],T!==ca&&Wd(d,a[Ot].data[w+8]===A)&&$o(g,w,a)?(y=M,w=$r(T),a=$s(T,a)):w=-1}}return h}function vn(s,a,l,d,h,g){const y=a[Ot],w=y.data[s+8],M=Za(w,y,l,null==d?ka(w)&&Dl:d!=y&&0!=(3&w.type),h&qt.Host&&g===w);return null!==M?Xa(a,y,M,w):Ri}function Za(s,a,l,d,h){const g=s.providerIndexes,y=a.data,w=1048575&g,T=s.directiveStart,M=g>>20,ee=h?w+M:s.directiveEnd;for(let Ee=d?w:w+M;Ee<ee;Ee++){const Je=y[Ee];if(Ee<T&&l===Je||Ee>=T&&Je.type===l)return Ee}if(h){const Ee=y[T];if(Ee&&as(Ee)&&Ee.type===l)return T}return null}function Xa(s,a,l,d){let h=s[l];const g=a.data;if(function yc(s){return s instanceof Co}(h)){const y=h;y.resolving&&function se(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new oe(-200,`Circular dependency in DI detected for ${s}${l}`)}(function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ae(s)}(g[l]));const w=Vi(y.canSeeViewProviders);y.resolving=!0;const A=y.injectImpl?Fn(y.injectImpl):null;yg(s,d,qt.Default);try{h=s[l]=y.factory(void 0,g,s,d),a.firstCreatePass&&l>=d.directiveStart&&function or(s,a,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=a.type.prototype;if(d){var y,w;const B=mc(a);(null!==(y=l.preOrderHooks)&&void 0!==y?y:l.preOrderHooks=[]).push(s,B),(null!==(w=l.preOrderCheckHooks)&&void 0!==w?w:l.preOrderCheckHooks=[]).push(s,B)}var T,A,M;h&&(null!==(T=l.preOrderHooks)&&void 0!==T?T:l.preOrderHooks=[]).push(0-s,h),g&&((null!==(A=l.preOrderHooks)&&void 0!==A?A:l.preOrderHooks=[]).push(s,g),(null!==(M=l.preOrderCheckHooks)&&void 0!==M?M:l.preOrderCheckHooks=[]).push(s,g))}(l,g[l],a)}finally{null!==A&&Fn(A),Vi(w),y.resolving=!1,Wt()}}return h}function $o(s,a,l){return!!(l[a+(s>>vf)]&1<<s)}function Wd(s,a){return!(s&qt.Self||s&qt.Host&&a)}class Cr{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return Cc(this._tNode,this._lView,a,mr(d),l)}}function ro(){return new Cr(li(),ot())}function da(s){return Fi(()=>{const a=s.prototype.constructor,l=a[nr]||Au(a),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const g=h[nr]||Au(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Au(s){return fe(s)?()=>{const a=Au(be(s));return a&&a()}:Pa(s)}function Yd(s){const a=s[Ot],l=a.type;return 2===l?a.declTNode:1===l?s[yi]:null}function Ru(s){return function Su(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const g=l[h];if(Ta(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(g===a)return l[h+1];h+=2}}}return null}(li(),s)}const Rl="__parameters__";function $(s,a,l){return Fi(()=>{const d=function x(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(a);function h(...g){if(this instanceof h)return d.apply(this,g),this;const y=new h(...g);return w.annotation=y,w;function w(T,A,M){const B=T.hasOwnProperty(Rl)?T[Rl]:Object.defineProperty(T,Rl,{value:[]})[Rl];for(;B.length<=M;)B.push(null);return(B[M]=B[M]||[]).push(y),T}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function xl(s,a){s.forEach(l=>Array.isArray(l)?xl(l,a):a(l))}function Y_(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function wg(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Qa(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}function io(s,a,l){let d=xu(s,a);return d>=0?s[1|d]=l:(d=~d,function Z_(s,a,l,d){let h=s.length;if(h==a)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function Cg(s,a){const l=xu(s,a);if(l>=0)return s[1|l]}function xu(s,a){return function Tg(s,a,l){let d=0,h=s.length>>l;for(;h!==d;){const g=d+(h-d>>1),y=s[g<<l];if(a===y)return g<<l;y>a?h=g:d=g+1}return~(h<<l)}(s,a,1)}const Kd=xr($("Optional"),8),el=xr($("SkipSelf"),4);function Lu(s){return 128==(128&s.flags)}var Fu=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Fu||{});const xg=/^>|^->|<!--|-->|--!>|<!-$/g,nl=/(<|>)/g,Tf="\u200b$1\u200b";const Sf=new Map;let mI=0;const ih="__ngContext__";function fs(s,a){si(a)?(s[ih]=a[No],function Ms(s){Sf.set(s[No],s)}(a)):s[ih]=a}let ce;function Ae(s,a){return ce(s,a)}function ft(s){const a=s[vr];return $i(a)?a[vr]:a}function Tr(s){return Ol(s[Ii])}function so(s){return Ol(s[Ji])}function Ol(s){for(;null!==s&&!$i(s);)s=s[Ji];return s}function Oc(s,a,l,d,h){if(null!=d){let g,y=!1;$i(d)?g=d:si(d)&&(y=!0,d=d[_r]);const w=jn(d);0===s&&null!==l?null==h?NC(a,l,w):oh(a,l,w,h||null,!0):1===s&&null!==l?oh(a,l,w,h||null,!0):2===s?function cv(s,a,l){const d=lv(s,a);d&&function Lx(s,a,l,d){s.removeChild(a,l,d)}(s,d,a,l)}(a,w,y):3===s&&a.destroyNode(w),null!=g&&function Bx(s,a,l,d,h){const g=l[ri];g!==jn(l)&&Oc(a,s,d,g,h);for(let w=Ei;w<l.length;w++){const T=l[w];Lg(T[Ot],T,s,a,d,g)}}(a,s,g,l,h)}}function Ll(s,a){return s.createComment(function Df(s){return s.replace(xg,a=>a.replace(nl,Tf))}(a))}function Uu(s,a,l){return s.createElement(a,l)}function ov(s,a){const l=s[ii],d=l.indexOf(a);pu(a),l.splice(d,1)}function av(s,a){if(s.length<=Ei)return;const l=Ei+a,d=s[l];if(d){const h=d[bd];null!==h&&h!==s&&ov(h,d),a>0&&(s[l-1][Ji]=d[Ji]);const g=wg(s,Ei+a);!function iv(s,a){Lg(s,a,a[on],2,null,null),a[_r]=null,a[yi]=null}(d[Ot],d);const y=g[ni];null!==y&&y.detachView(g[Ot]),d[vr]=null,d[Ji]=null,d[tn]&=-129}return d}function II(s,a){if(!(256&a[tn])){const l=a[on];a[ac]&&Md(a[ac]),a[ra]&&Md(a[ra]),l.destroyNode&&Lg(s,a,l,3,null,null),function sv(s){let a=s[Ii];if(!a)return PC(s[Ot],s);for(;a;){let l=null;if(si(a))l=a[Ii];else{const d=a[Ei];d&&(l=d)}if(!l){for(;a&&!a[Ji]&&a!==s;)si(a)&&PC(a[Ot],a),a=a[vr];null===a&&(a=s),si(a)&&PC(a[Ot],a),l=a&&a[Ji]}a=l}}(a)}}function PC(s,a){if(!(256&a[tn])){a[tn]&=-129,a[tn]|=256,function OC(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=a[l[d]];if(!(h instanceof Co)){const g=l[d+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const w=h[g[y]],T=g[y+1];Js(4,w,T);try{T.call(w)}finally{Js(5,w,T)}}else{Js(4,h,g);try{g.call(h)}finally{Js(5,h,g)}}}}}(s,a),function Nx(s,a){const l=s.cleanup,d=a[oc];if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const y=l[g+3];y>=0?d[y]():d[-y].unsubscribe(),g+=2}else l[g].call(d[l[g+1]]);null!==d&&(a[oc]=null);const h=a[na];if(null!==h){a[na]=null;for(let g=0;g<h.length;g++)(0,h[g])()}}(s,a),1===a[Ot].type&&a[on].destroy();const l=a[bd];if(null!==l&&$i(a[vr])){l!==a[vr]&&ov(l,a);const d=a[ni];null!==d&&d.detachView(s)}!function Pc(s){Sf.delete(s[No])}(a)}}function xf(s,a,l){return function sh(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[_r];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:g}=s.data[d.directiveStart+h];if(g===Br.None||g===Br.Emulated)return null}return wi(d,l)}}(s,a.parent,l)}function oh(s,a,l,d,h){s.insertBefore(a,l,d,h)}function NC(s,a,l){s.appendChild(a,l)}function LC(s,a,l,d,h){null!==d?oh(s,a,l,d,h):NC(s,a,l)}function lv(s,a){return s.parentNode(a)}function FC(s,a,l){return EI(s,a,l)}let wI,jC,dv,EI=function BC(s,a,l){return 40&s.type?wi(s,l):null};function Og(s,a,l,d){const h=xf(s,d,a),g=a[on],w=FC(d.parent||a[yi],d,a);if(null!=h)if(Array.isArray(l))for(let T=0;T<l.length;T++)LC(g,h,l[T],w,!1);else LC(g,h,l,w,!1);void 0!==wI&&wI(g,d,a,l,h)}function Fl(s,a){if(null!==a){const l=a.type;if(3&l)return wi(a,s);if(4&l)return CI(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return Fl(s,d);{const h=s[a.index];return $i(h)?CI(-1,h):jn(h)}}if(32&l)return Ae(a,s)()||jn(s[a.index]);{const d=bI(s,a);return null!==d?Array.isArray(d)?d[0]:Fl(ft(s[yr]),d):Fl(s,a.next)}}return null}function bI(s,a){return null!==a?s[yr][yi].projection[a.projection]:null}function CI(s,a){const l=Ei+s+1;if(l<a.length){const d=a[l],h=d[Ot].firstChild;if(null!==h)return Fl(d,h)}return a[ri]}function Ng(s,a,l,d,h,g,y){for(;null!=l;){const w=d[l.index],T=l.type;if(y&&0===a&&(w&&fs(jn(w),d),l.flags|=2),32!=(32&l.flags))if(8&T)Ng(s,a,l.child,d,h,g,!1),Oc(a,s,h,w,g);else if(32&T){const A=Ae(l,d);let M;for(;M=A();)Oc(a,s,h,M,g);Oc(a,s,h,w,g)}else 16&T?DI(s,a,d,l,h,g):Oc(a,s,h,w,g);l=y?l.projectionNext:l.next}}function Lg(s,a,l,d,h,g){Ng(l,d,s.firstChild,a,h,g,!1)}function DI(s,a,l,d,h,g){const y=l[yr],T=y[yi].projection[d.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)Oc(a,s,h,T[A],g);else{let A=T;const M=y[vr];Lu(d)&&(A.flags|=128),Ng(s,a,A,M,h,g,!0)}}function $C(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function Fg(s,a,l){const{mergedAttrs:d,classes:h,styles:g}=l;null!==d&&vo(s,a,d),null!==h&&$C(s,a,h),null!==g&&function $x(s,a,l){s.setAttribute(a,"style",l)}(s,a,g)}function HC(s){jC=s}function WC(s){var a;return(null===(a=function AI(){if(void 0===dv&&(dv=null,En.trustedTypes))try{dv=En.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return dv}())||void 0===a?void 0:a.createScriptURL(s))||s}class qC{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ve})`}}function Vu(s){return s instanceof qC?s.changingThisBreaksApplicationSecurity:s}function Pf(s,a){const l=function hv(s){return s instanceof qC&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${Ve})`)}return l===a}const Bg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var $g=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}($g||{});function Vg(s){const a=jg();return a?a.sanitize($g.URL,s)||"":Pf(s,"URL")?Vu(s):function pv(s){return(s=String(s)).match(Bg)?s:"unsafe:"+s}(ae(s))}function nT(s){const a=jg();if(a)return WC(a.sanitize($g.RESOURCE_URL,s)||"");if(Pf(s,"ResourceURL"))return WC(Vu(s));throw new oe(904,!1)}function nM(s,a,l){return function tM(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?nT:Vg}(a,l)(s)}function jg(){const s=ot();return s&&s[hl].sanitizer}class ar{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=He({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Of=new ar("ENVIRONMENT_INITIALIZER"),iT=new ar("INJECTOR",-1),sT=new ar("INJECTOR_DEF_TYPES");class gv{get(a,l=gt){if(l===gt){const d=new Error(`NullInjectorError: No provider for ${K(a)}!`);throw d.name="NullInjectorError",d}return l}}function rM(...s){return{\u0275providers:aT(0,s),\u0275fromNgModule:!0}}function aT(s,...a){const l=[],d=new Set;let h;const g=y=>{l.push(y)};return xl(a,y=>{const w=y;mv(w,g,[],d)&&(h||(h=[]),h.push(w))}),void 0!==h&&lT(h,g),l}function lT(s,a){for(let l=0;l<s.length;l++){const{ngModule:d,providers:h}=s[l];NI(h,g=>{a(g,d)})}}function mv(s,a,l,d){if(!(s=be(s)))return!1;let h=null,g=ln(s);const y=!g&&pn(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const T=s.ngModule;if(g=ln(T),!g)return!1;h=T}const w=d.has(h);if(y){if(w)return!1;if(d.add(h),y.dependencies){const T="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of T)mv(A,a,l,d)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let A;d.add(h);try{xl(g.imports,M=>{mv(M,a,l,d)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&lT(A,a)}if(!w){const A=Pa(h)||(()=>new h);a({provide:h,useFactory:A,deps:An},h),a({provide:sT,useValue:h,multi:!0},h),a({provide:Of,useValue:()=>en(h),multi:!0},h)}const T=g.providers;if(null!=T&&!w){const A=s;NI(T,M=>{a(M,A)})}}}return h!==s&&void 0!==s.providers}function NI(s,a){for(let l of s)q(l)&&(l=l.\u0275providers),Array.isArray(l)?NI(l,a):a(l)}const b2=V({provide:String,useValue:V});function cT(s){return null!==s&&"object"==typeof s&&b2 in s}function Nf(s){return"function"==typeof s}const xi=new ar("Set Injector scope."),Lf={},_v={};let LI;function vv(){return void 0===LI&&(LI=new gv),LI}class il{}class Hg extends il{get destroyed(){return this._destroyed}constructor(a,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gg(a,y=>this.processProvider(y)),this.records.set(iT,Fc(void 0,this)),h.has("environment")&&this.records.set(il,Fc(void 0,this));const g=this.records.get(xi);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(sT.multi,An,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of a)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const l=St(this),d=Fn(void 0);try{return a()}finally{St(l),Fn(d)}}get(a,l=gt,d=qt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(Jn))return a[Jn](this);d=mr(d);const g=St(this),y=Fn(void 0);try{if(!(d&qt.SkipSelf)){let T=this.records.get(a);if(void 0===T){const A=function lM(s){return"function"==typeof s||"object"==typeof s&&s instanceof ar}(a)&&ut(a);T=A&&this.injectableDefInScope(A)?Fc(yv(a),Lf):null,this.records.set(a,T)}if(null!=T)return this.hydrate(a,T)}return(d&qt.Self?vv():this.parent).get(a,l=d&qt.Optional&&l===gt?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[$t]=w[$t]||[]).unshift(K(a)),g)throw w;return function go(s,a,l,d){const h=s[$t];throw a[Ie]&&h.unshift(a[Ie]),s.message=function dl(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=K(a);if(Array.isArray(a))h=a.map(K).join(" -> ");else if("object"==typeof a){let g=[];for(let y in a)if(a.hasOwnProperty(y)){let w=a[y];g.push(y+":"+("string"==typeof w?JSON.stringify(w):K(w)))}h=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(te,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[$t]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{Fn(y),St(g)}}resolveInjectorInitializers(){const a=St(this),l=Fn(void 0);try{const h=this.get(Of.multi,An,qt.Self);for(const g of h)g()}finally{St(a),Fn(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(K(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(a){let l=Nf(a=be(a))?a:be(a&&a.provide);const d=function Zn(s){return cT(s)?Fc(void 0,s.useValue):Fc(BI(s),Lf)}(a);if(Nf(a)||!0!==a.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Fc(void 0,Lf,!0),h.factory=()=>Pn(h.multi),this.records.set(l,h)),l=a,h.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===Lf&&(l.value=_v,l.value=l.factory()),"object"==typeof l.value&&l.value&&function T2(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=be(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}removeOnDestroy(a){const l=this._onDestroyHooks.indexOf(a);-1!==l&&this._onDestroyHooks.splice(l,1)}}function yv(s){const a=ut(s),l=null!==a?a.factory:Pa(s);if(null!==l)return l;if(s instanceof ar)throw new oe(204,!1);if(s instanceof Function)return function FI(s){const a=s.length;if(a>0)throw Qa(a,"?"),new oe(204,!1);const l=function _n(s){return s&&(s[cn]||s[Xn])||null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new oe(204,!1)}function BI(s,a,l){let d;if(Nf(s)){const h=be(s);return Pa(h)||yv(h)}if(cT(s))d=()=>be(s.useValue);else if(function oM(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Pn(s.deps||[]));else if(function sM(s){return!(!s||!s.useExisting)}(s))d=()=>en(be(s.useExisting));else{const h=be(s&&(s.useClass||s.provide));if(!function aM(s){return!!s.deps}(s))return Pa(h)||yv(h);d=()=>new h(...Pn(s.deps))}return d}function Fc(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function Gg(s,a){for(const l of s)Array.isArray(l)?Gg(l,a):l&&q(l)?Gg(l.\u0275providers,a):a(l)}const cM=new ar("AppId",{providedIn:"root",factory:()=>D2}),D2="ng",uT=new ar("Platform Initializer"),UI=new ar("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),S2=new ar("CSP nonce",{providedIn:"root",factory:()=>{var s;return(null===(s=function ah(){if(void 0!==jC)return jC;if(typeof document<"u")return document;throw new oe(210,!1)}().body)||void 0===s||null===(s=s.querySelector("[ngCspNonce]"))||void 0===s?void 0:s.getAttribute("ngCspNonce"))||null}});let jI=(s,a,l)=>null;function HI(s,a,l=!1){return jI(s,a,l)}class fM{}class gT{}class mT{resolveComponentFactory(a){throw function qg(s){const a=Error(`No component factory found for ${K(s)}.`);return a.ngComponent=s,a}(a)}}let wv=(()=>{class a{}return a.NULL=new mT,a})();function pM(){return $f(li(),ot())}function $f(s,a){return new Yg(wi(s,a))}let Yg=(()=>{class a{constructor(d){this.nativeElement=d}}return a.__NG_ELEMENT_ID__=pM,a})();function _T(s){return s instanceof Yg?s.nativeElement:s}class bv{}let vT=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function KI(){const s=ot(),l=bi(li().index,s);return(si(l)?l:s)[on]}(),a})(),yT=(()=>{var s;class a{}return(s=a).\u0275prov=He({token:s,providedIn:"root",factory:()=>null}),a})();class Vf{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const IT=new Vf("16.2.8"),Kg={};function JI(s,a=null,l=null,d){const h=Sv(s,a,l,d);return h.resolveInjectorInitializers(),h}function Sv(s,a=null,l=null,d,h=new Set){const g=[l||An,rM(s)];return d=d||("object"==typeof s?void 0:K(s)),new Hg(g,a||vv(),d||null,h)}let Go=(()=>{var s;class a{static create(d,h){if(Array.isArray(d))return JI({name:""},h,d,"");{var g;const y=null!==(g=d.name)&&void 0!==g?g:"";return JI({name:y},d.parent,d.providers,y)}}}return(s=a).THROW_IF_NOT_FOUND=gt,s.NULL=new gv,s.\u0275prov=He({token:s,providedIn:"any",factory:()=>en(iT)}),s.__NG_ELEMENT_ID__=-1,a})();function eE(s){return s.ngOriginalError}class Bc{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&eE(a);for(;l&&eE(l);)l=eE(l);return l||null}}function tE(s){return a=>{setTimeout(s,void 0,a)}}const Bl=class vM extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let h=a,g=l||(()=>null),y=d;if(a&&"object"==typeof a){var w,T,A;const B=a;h=null===(w=B.next)||void 0===w?void 0:w.bind(B),g=null===(T=B.error)||void 0===T?void 0:T.bind(B),y=null===(A=B.complete)||void 0===A?void 0:A.bind(B)}this.__isAsync&&(g=tE(g),h&&(h=tE(h)),y&&(y=tE(y)));const M=super.subscribe({next:h,error:g,complete:y});return a instanceof le.w0&&a.add(M),M}};function TT(...s){}class gs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bl(!1),this.onMicrotaskEmpty=new Bl(!1),this.onStable=new Bl(!1),this.onError=new Bl(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function yM(){const s="function"==typeof En.requestAnimationFrame;let a=En[s?"requestAnimationFrame":"setTimeout"],l=En[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&l){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function ST(s){const a=()=>{!function DT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(En,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Zg(s),s.isCheckStableRunning=!0,jf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Zg(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,g,y,w)=>{if(function xT(s){var a;return!(!Array.isArray(s)||1!==s.length)&&!0===(null===(a=s[0].data)||void 0===a?void 0:a.__ignore_ng_zone__)}(w))return l.invokeTask(h,g,y,w);try{return AT(s),l.invokeTask(h,g,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),RT(s)}},onInvoke:(l,d,h,g,y,w,T)=>{try{return AT(s),l.invoke(h,g,y,w,T)}finally{s.shouldCoalesceRunChangeDetection&&a(),RT(s)}},onHasTask:(l,d,h,g)=>{l.hasTask(h,g),d===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Zg(s),jf(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gs.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(gs.isInAngularZone())throw new oe(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,a,IM,TT,TT);try{return g.runTask(y,l,d)}finally{g.cancelTask(y)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const IM={};function jf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Zg(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function AT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function RT(s){s._nesting--,jf(s)}class EM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bl,this.onMicrotaskEmpty=new Bl,this.onStable=new Bl,this.onError=new Bl}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,h){return a.apply(l,d)}}const nE=new ar("",{providedIn:"root",factory:rE});function rE(){const s=fn(gs);let a=!0;const l=new F.y(h=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(a),h.complete()})}),d=new F.y(h=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{gs.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const y=s.onUnstable.subscribe(()=>{gs.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{g.unsubscribe(),y.unsubscribe()}});return(0,de.T)(l,d.pipe((0,Q.B)()))}function zu(s){return s instanceof Function?s():s}let Rv=(()=>{var s;class a{constructor(){this.renderDepth=0,this.handler=null}begin(){var d;null===(d=this.handler)||void 0===d||d.validateBegin(),this.renderDepth++}end(){var d;this.renderDepth--,0===this.renderDepth&&(null===(d=this.handler)||void 0===d||d.execute())}ngOnDestroy(){var d;null===(d=this.handler)||void 0===d||d.destroy(),this.handler=null}}return(s=a).\u0275prov=He({token:s,providedIn:"root",factory:()=>new s}),a})();function Qg(s){for(;s;){s[tn]|=64;const a=ft(s);if(pl(s)&&!a)return s;s=a}return null}const Gf=new ar("",{providedIn:"root",factory:()=>!1});let Mv=null;function AM(s,a){var l;return null!==(l=s[a])&&void 0!==l?l:Pv()}function em(s,a){var l;const d=Pv();null!==(l=d.producerNode)&&void 0!==l&&l.length&&(s[a]=Mv,d.lView=s,Mv=kv())}const RM={...Na,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{Qg(s.lView)},lView:null};function kv(){return Object.create(RM)}function Pv(){var s;return null!==(s=Mv)&&void 0!==s||(Mv=kv()),Mv}const bn={};function Ov(s){Nv(On(),ot(),Di()+s,!1)}function Nv(s,a,l,d){if(!d)if(3==(3&a[tn])){const g=s.preOrderCheckHooks;null!==g&&la(a,g,l)}else{const g=s.preOrderHooks;null!==g&&Tu(a,g,0,l)}Bo(l)}function Wu(s,a=qt.Default){const l=ot();return null===l?en(s,a):Cc(li(),l,be(s),a)}function Lv(){throw new Error("invalid")}function Fv(s,a,l,d,h,g,y,w,T,A,M){const B=a.blueprint.slice();return B[_r]=h,B[tn]=140|d,(null!==A||s&&2048&s[tn])&&(B[tn]|=2048),_g(B),B[vr]=B[Oo]=s,B[ir]=l,B[hl]=y||s&&s[hl],B[on]=w||s&&s[on],B[Po]=T||s&&s[Po]||null,B[yi]=g,B[No]=function rh(){return mI++}(),B[Fs]=M,B[Lo]=A,B[yr]=2==a.type?s[yr]:B,B}function qu(s,a,l,d,h){let g=s.data[a];if(null===g)g=function oE(s,a,l,d,h){const g=Iu(),y=ja(),T=s.data[a]=function OM(s,a,l,d,h,g){let y=a?a.injectorIndex:-1,w=0;return bo()&&(w|=128),{type:l,index:d,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,l,a,d,h);return null===s.firstChild&&(s.firstChild=T),null!==g&&(y?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(s,a,l,d,h),function uf(){return an.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=l,g.value=d,g.attrs=h;const y=function El(){const s=an.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return oa(g,!0),g}function nm(s,a,l,d){if(0===l)return-1;const h=a.length;for(let g=0;g<l;g++)a.push(d),s.blueprint.push(d),s.data.push(null);return h}function NT(s,a,l,d,h){const g=AM(a,ac),y=Di(),w=2&d;try{Bo(-1),w&&a.length>wn&&Nv(s,a,wn,!1),Js(w?2:0,h);const A=w?g:null,M=Zh(A);try{null!==A&&(A.dirty=!1),l(d,h)}finally{oi(A,M)}}finally{w&&null===a[ac]&&em(a,ac),Bo(y),Js(w?3:1,h)}}function Bv(s,a,l){if(lu(a)){const d=ls(null);try{const g=a.directiveEnd;for(let y=a.directiveStart;y<g;y++){const w=s.data[y];w.contentQueries&&w.contentQueries(1,l[y],y)}}finally{ls(d)}}}function aE(s,a,l){Ci()&&(function FM(s,a,l,d){const h=l.directiveStart,g=l.directiveEnd;ka(l)&&function qT(s,a,l){const d=wi(a,s),h=LT(l);let y=16;l.signals?y=4096:l.onPush&&(y=64);const w=Vv(s,Fv(s,h,null,y,d,a,null,s[hl].rendererFactory.createRenderer(d,l),null,null,null));s[a.index]=w}(a,l,s.data[h+l.componentOffset]),s.firstCreatePass||br(l,a),fs(d,a);const y=l.initialInputs;for(let w=h;w<g;w++){const T=s.data[w],A=Xa(a,s,w,l);fs(A,a),null!==y&&Hs(0,w-h,A,T,0,y),as(T)&&(bi(l.index,a)[ir]=Xa(a,s,w,l))}}(s,a,l,wi(l,a)),64==(64&l.flags)&&GT(s,a,l))}function Uv(s,a,l=wi){const d=a.localNames;if(null!==d){let h=a.index+1;for(let g=0;g<d.length;g+=2){const y=d[g+1],w=-1===y?l(a,s):s[y];s[h++]=w}}}function LT(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=$v(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function $v(s,a,l,d,h,g,y,w,T,A,M){const B=wn+d,ee=B+h,Ee=function xM(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:bn);return l}(B,ee),Je="function"==typeof A?A():A;return Ee[Ot]={type:s,blueprint:Ee,template:l,queries:null,viewQuery:w,declTNode:a,data:Ee.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:Je,incompleteFirstPass:!1,ssrId:M}}let FT=s=>null;function $T(s,a,l,d){for(let h in s)if(s.hasOwnProperty(h)){l=null===l?{}:l;const g=s[h];null===d?Gr(l,a,h,g):d.hasOwnProperty(h)&&Gr(l,a,d[h],g)}return l}function Gr(s,a,l,d){s.hasOwnProperty(l)?s[l].push(a,d):s[l]=[a,d]}function oo(s,a,l,d,h,g,y,w){const T=wi(a,l);let M,A=a.inputs;!w&&null!=A&&(M=A[d])?(Gv(s,l,M,d,h),ka(a)&&function NM(s,a){const l=bi(a,s);16&l[tn]||(l[tn]|=64)}(l,a.index)):3&a.type&&(d=function lE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,a.value||"",d):h,g.setProperty(T,d,h))}function cE(s,a,l,d){if(Ci()){const h=null===d?null:{"":-1},g=function zT(s,a){const l=s.directiveRegistry;let d=null,h=null;if(l)for(let y=0;y<l.length;y++){const w=l[y];if(L(a,w.selectors,!1))if(d||(d=[]),as(w))if(null!==w.findHostDirectiveDefs){const T=[];h=h||new Map,w.findHostDirectiveDefs(w,T,h),d.unshift(...T,w),uE(s,a,T.length)}else d.unshift(w),uE(s,a,0);else{var g;h=h||new Map,null===(g=w.findHostDirectiveDefs)||void 0===g||g.call(w,w,d,h),d.push(w)}}return null===d?null:[d,h]}(s,l);let y,w;null===g?y=w=null:[y,w]=g,null!==y&&VT(s,a,l,y,h,w),h&&function UM(s,a,l){if(a){const d=s.localNames=[];for(let h=0;h<a.length;h+=2){const g=l[a[h+1]];if(null==g)throw new oe(-301,!1);d.push(a[h],g)}}}(l,d,h)}l.mergedAttrs=Cs(l.mergedAttrs,l.attrs)}function VT(s,a,l,d,h,g){for(let B=0;B<d.length;B++)Ya(br(l,a),s,d[B].type);!function zf(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}(l,s.data.length,d.length);for(let B=0;B<d.length;B++){const ee=d[B];ee.providersResolver&&ee.providersResolver(ee)}let y=!1,w=!1,T=nm(s,a,d.length,null);for(let B=0;B<d.length;B++){const ee=d[B];l.mergedAttrs=Cs(l.mergedAttrs,ee.hostAttrs),WT(s,l,a,T,ee),$M(T,ee,h),null!==ee.contentQueries&&(l.flags|=4),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(l.flags|=64);const Ee=ee.type.prototype;var A,M;!y&&(Ee.ngOnChanges||Ee.ngOnInit||Ee.ngDoCheck)&&((null!==(A=s.preOrderHooks)&&void 0!==A?A:s.preOrderHooks=[]).push(l.index),y=!0),w||!Ee.ngOnChanges&&!Ee.ngDoCheck||((null!==(M=s.preOrderCheckHooks)&&void 0!==M?M:s.preOrderCheckHooks=[]).push(l.index),w=!0),T++}!function zr(s,a,l){const h=a.directiveEnd,g=s.data,y=a.attrs,w=[];let T=null,A=null;for(let M=a.directiveStart;M<h;M++){const B=g[M],ee=l?l.get(B):null,Je=ee?ee.outputs:null;T=$T(B.inputs,M,T,ee?ee.inputs:null),A=$T(B.outputs,M,A,Je);const dt=null===T||null===y||ss(a)?null:VM(T,M,y);w.push(dt)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=w,a.inputs=T,a.outputs=A}(s,l,g)}function GT(s,a,l){const d=l.directiveStart,h=l.directiveEnd,g=l.index,y=function q_(){return an.lFrame.currentDirectiveIndex}();try{Bo(g);for(let w=d;w<h;w++){const T=s.data[w],A=a[w];wu(w),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&BM(T,A)}}finally{Bo(-1),wu(y)}}function BM(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function uE(s,a,l){var d;a.componentOffset=l,(null!==(d=s.components)&&void 0!==d?d:s.components=[]).push(a.index)}function $M(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;as(a)&&(l[""]=s)}}function WT(s,a,l,d,h){s.data[d]=h;const g=h.factory||(h.factory=Pa(h.type)),y=new Co(g,as(h),Wu);s.blueprint[d]=y,l[d]=y,function jT(s,a,l,d,h){const g=h.hostBindings;if(g){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const w=~a.index;(function HT(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(y)!=w&&y.push(w),y.push(l,d,g)}}(s,a,d,nm(s,l,h.hostVars,bn),h)}function Do(s,a,l,d,h,g){const y=wi(s,a);!function uh(s,a,l,d,h,g,y){if(null==g)s.removeAttribute(a,h,l);else{const w=null==y?ae(g):y(g,d||"",h);s.setAttribute(a,h,w,l)}}(a[on],y,g,s.value,l,d,h)}function Hs(s,a,l,d,h,g){const y=g[a];if(null!==y)for(let w=0;w<y.length;)YT(d,l,y[w++],y[w++],y[w++])}function YT(s,a,l,d,h){const g=ls(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(d)&&(h=y[d].call(a,h)),null!==s.setInput?s.setInput(a,h,l,d):a[d]=h}finally{ls(g)}}function VM(s,a,l){let d=null,h=0;for(;h<l.length;){const g=l[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===d&&(d=[]);const y=s[g];for(let w=0;w<y.length;w+=2)if(y[w]===a){d.push(g,y[w+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function KT(s,a,l,d){return[s,!0,!1,a,null,0,d,l,null,null,null]}function ZT(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const g=l[d+1];if(-1!==g){const y=s.data[g];ff(l[d]),y.contentQueries(2,a[g],g)}}}function Vv(s,a){return s[Ii]?s[ig][Ji]=a:s[Ii]=a,s[ig]=a,a}function dE(s,a,l){ff(0);const d=ls(null);try{a(s,l)}finally{ls(d)}}function fE(s){return s[oc]||(s[oc]=[])}function jv(s){return s.cleanup||(s.cleanup=[])}function Ul(s,a){const l=s[Po],d=l?l.get(Bc,null):null;d&&d.handleError(a)}function Gv(s,a,l,d,h){for(let g=0;g<l.length;){const y=l[g++],w=l[g++];YT(s.data[y],a[y],d,w,h)}}function XT(s,a){const l=bi(a,s),d=l[Ot];!function jM(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])}(d,l);const h=l[_r];null!==h&&null===l[Fs]&&(l[Fs]=HI(h,l[Po])),Wf(d,l,l[ir])}function Wf(s,a,l){ci(a);try{const d=s.viewQuery;null!==d&&dE(1,d,l);const h=s.template;null!==h&&NT(s,a,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ZT(s,a),s.staticViewQueries&&dE(2,s.viewQuery,l);const g=s.components;null!==g&&function HM(s,a){for(let l=0;l<a.length;l++)XT(s,a[l])}(a,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[tn]&=-5,Ti()}}let QT=(()=>{var s;class a{constructor(){this.all=new Set,this.queue=new Map}create(d,h,g){const y=typeof Zone>"u"?null:Zone.current,w=function H_(s,a,l){const d=Object.create(ug);l&&(d.consumerAllowSignalWrites=!0),d.fn=s,d.schedule=a;const h=y=>{d.cleanupFn=y};return d.ref={notify:()=>dc(d),run:()=>{if(d.dirty=!1,d.hasRun&&!xd(d))return;d.hasRun=!0;const y=Zh(d);try{d.cleanupFn(),d.cleanupFn=Ld,d.fn(h)}finally{oi(d,y)}},cleanup:()=>d.cleanupFn()},d.ref}(d,M=>{this.all.has(M)&&this.queue.set(M,y)},g);let T;this.all.add(w),w.notify();const A=()=>{var M;w.cleanup(),null===(M=T)||void 0===M||M(),this.all.delete(w),this.queue.delete(w)};return T=null==h?void 0:h.onDestroy(A),{destroy:A}}flush(){if(0!==this.queue.size)for(const[d,h]of this.queue)this.queue.delete(d),h?h.run(()=>d.run()):d.run()}get isQueueEmpty(){return 0===this.queue.size}}return(s=a).\u0275prov=He({token:s,providedIn:"root",factory:()=>new s}),a})();function zv(s,a,l){let d=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==a)for(let y=0;y<a.length;y++){const w=a[y];"number"==typeof w?g=w:1==g?h=re(h,w):2==g&&(d=re(d,w+": "+a[++y]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}function rm(s,a,l,d,h=!1){for(;null!==l;){const g=a[l.index];null!==g&&d.push(jn(g)),$i(g)&&JT(g,d);const y=l.type;if(8&y)rm(s,a,l.child,d);else if(32&y){const w=Ae(l,a);let T;for(;T=w();)d.push(T)}else if(16&y){const w=bI(a,l);if(Array.isArray(w))d.push(...w);else{const T=ft(a[yr]);rm(T[Ot],T,w,d,!0)}}l=h?l.projectionNext:l.next}return d}function JT(s,a){for(let l=Ei;l<s.length;l++){const d=s[l],h=d[Ot].firstChild;null!==h&&rm(d[Ot],d,h,a)}s[ri]!==s[_r]&&a.push(s[ri])}function Wv(s,a,l,d=!0){const h=a[hl],g=h.rendererFactory,y=h.afterRenderEventManager;var T;null===(T=g.begin)||void 0===T||T.call(g),null==y||y.begin();try{Ao(s,a,s.template,l)}catch(B){throw d&&Ul(a,B),B}finally{var A,M;null===(A=g.end)||void 0===A||A.call(g),null===(M=h.effectManager)||void 0===M||M.flush(),null==y||y.end()}}function Ao(s,a,l,d){var h;const g=a[tn];if(256!=(256&g)){null===(h=a[hl].effectManager)||void 0===h||h.flush(),ci(a);try{_g(a),function cf(s){return an.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&NT(s,a,l,2,d);const w=3==(3&g);if(w){const M=s.preOrderCheckHooks;null!==M&&la(a,M,null)}else{const M=s.preOrderHooks;null!==M&&Tu(a,M,0,null),Cl(a,0)}if(function pE(s){for(let a=Tr(s);null!==a;a=so(a)){if(!a[au])continue;const l=a[ii];for(let d=0;d<l.length;d++){Ud(l[d])}}}(a),qv(a,2),null!==s.contentQueries&&ZT(s,a),w){const M=s.contentCheckHooks;null!==M&&la(a,M)}else{const M=s.contentHooks;null!==M&&Tu(a,M,1),Cl(a,1)}!function tm(s,a){const l=s.hostBindingOpCodes;if(null===l)return;const d=AM(a,ra);try{for(let h=0;h<l.length;h++){const g=l[h];if(g<0)Bo(~g);else{const y=g,w=l[++h],T=l[++h];Eu(w,y),d.dirty=!1;const A=Zh(d);try{T(2,a[y])}finally{oi(d,A)}}}}finally{null===a[ra]&&em(a,ra),Bo(-1)}}(s,a);const T=s.components;null!==T&&gE(a,T,0);const A=s.viewQuery;if(null!==A&&dE(2,A,d),w){const M=s.viewCheckHooks;null!==M&&la(a,M)}else{const M=s.viewHooks;null!==M&&Tu(a,M,2),Cl(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[tn]&=-73,pu(a)}finally{Ti()}}}function qv(s,a){for(let l=Tr(s);null!==l;l=so(l))for(let d=Ei;d<l.length;d++)tD(l[d],a)}function eD(s,a,l){tD(bi(a,s),l)}function tD(s,a){if(!function Il(s){return 128==(128&s[tn])}(s))return;const l=s[Ot],d=s[tn];if(80&d&&0===a||1024&d||2===a)Ao(l,s,l.template,s[ir]);else if(s[Ra]>0){qv(s,1);const h=l.components;null!==h&&gE(s,h,1)}}function gE(s,a,l){for(let d=0;d<a.length;d++)eD(s,a[d],l)}class qf{get rootNodes(){const a=this._lView,l=a[Ot];return rm(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ir]}set context(a){this._lView[ir]=a}get destroyed(){return 256==(256&this._lView[tn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[vr];if($i(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(av(a,d),wg(l,d))}this._attachedToViewContainer=!1}II(this._lView[Ot],this._lView)}onDestroy(a){!function fr(s,a){if(256==(256&s[tn]))throw new oe(911,!1);null===s[na]&&(s[na]=[]),s[na].push(a)}(this._lView,a)}markForCheck(){Qg(this._cdRefInjectingView||this._lView)}detach(){this._lView[tn]&=-129}reattach(){this._lView[tn]|=128}detectChanges(){Wv(this._lView[Ot],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nc(s,a){Lg(s,a,a[on],2,null,null)}(this._lView[Ot],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=a}}class WM extends qf{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Wv(a[Ot],a,a[ir],!1)}checkNoChanges(){}get context(){return null}}class nD extends wv{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=pn(a);return new im(l,this.ngModule)}}function rD(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class mE{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){d=mr(d);const h=this.injector.get(a,Kg,d);return h!==Kg||l===Kg?h:this.parentInjector.get(a,l,d)}}class im extends gT{get inputs(){const a=this.componentDef,l=a.inputTransforms,d=rD(a.inputs);if(null!==l)for(const h of d)l.hasOwnProperty(h.propName)&&(h.transform=l[h.propName]);return d}get outputs(){return rD(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function st(s){return s.map(Xe).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,d,h){var g;let y=(h=h||this.ngModule)instanceof il?h:null===(g=h)||void 0===g?void 0:g.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const w=y?new mE(a,y):a,T=w.get(bv,null);if(null===T)throw new oe(407,!1);const ee={rendererFactory:T,sanitizer:w.get(yT,null),effectManager:w.get(QT,null),afterRenderEventManager:w.get(Rv,null)},Ee=T.createRenderer(null,this.componentDef),Je=this.componentDef.selectors[0][0]||"div",dt=d?function MM(s,a,l,d){const g=d.get(Gf,!1)||l===Br.ShadowDom,y=s.selectRootElement(a,g);return function kM(s){FT(s)}(y),y}(Ee,d,this.componentDef.encapsulation,w):Uu(Ee,Je,function $l(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(Je)),rt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let sn=null;null!==dt&&(sn=HI(dt,w,!0));const Dn=$v(0,null,null,1,0,null,null,null,null,null,null),Gn=Fv(null,Dn,null,rt,null,null,ee,Ee,w,null,sn);let Ea,Mp;ci(Gn);try{const ud=this.componentDef;let dd,c_=null;ud.findHostDirectiveDefs?(dd=[],c_=new Map,ud.findHostDirectiveDefs(ud,dd,c_),dd.push(ud)):dd=[ud];const UA=function iD(s,a){const l=s[Ot],d=wn;return s[d]=a,qu(l,d,2,"#host",null)}(Gn,dt),sb=function YM(s,a,l,d,h,g,y){const w=h[Ot];!function ao(s,a,l,d){for(const h of s)a.mergedAttrs=Cs(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(zv(a,a.mergedAttrs,!0),null!==l&&Fg(d,l,a))}(d,s,a,y);let T=null;null!==a&&(T=HI(a,h[Po]));const A=g.rendererFactory.createRenderer(a,l);let M=16;l.signals?M=4096:l.onPush&&(M=64);const B=Fv(h,LT(l),null,M,h[s.index],s,g,A,null,null,T);return w.firstCreatePass&&uE(w,s,d.length-1),Vv(h,B),h[s.index]=B}(UA,dt,ud,dd,Gn,ee,Ee);Mp=Bd(Dn,wn),dt&&function KM(s,a,l,d){if(d)vo(s,l,["ng-version",IT.full]);else{const{attrs:h,classes:g}=function tt(s){const a=[],l=[];let d=1,h=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===h?""!==g&&a.push(g,s[++d]):8===h&&l.push(g);else{if(!Zr(h))break;h=g}d++}return{attrs:a,classes:l}}(a.selectors[0]);h&&vo(s,l,h),g&&g.length>0&&$C(s,l,g.join(" "))}}(Ee,ud,dt,d),void 0!==l&&function sm(s,a,l){const d=s.projection=[];for(let h=0;h<a.length;h++){const g=l[h];d.push(null!=g?Array.from(g):null)}}(Mp,this.ngContentSelectors,l),Ea=function Yv(s,a,l,d,h,g){const y=li(),w=h[Ot],T=wi(y,h);VT(w,h,y,l,null,d);for(let M=0;M<l.length;M++)fs(Xa(h,w,y.directiveStart+M,y),h);GT(w,h,y),T&&fs(T,h);const A=Xa(h,w,y.directiveStart+y.componentOffset,y);if(s[ir]=h[ir]=A,null!==g)for(const M of g)M(A,a);return Bv(w,y,s),A}(sb,ud,dd,c_,Gn,[ZM]),Wf(Dn,Gn,null)}finally{Ti()}return new qM(this.componentType,Ea,$f(Mp,Gn),Gn,Mp)}}class qM extends fM{constructor(a,l,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.previousInputValues=null,this.instance=l,this.hostView=this.changeDetectorRef=new WM(h),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){var g;if(null!==(g=this.previousInputValues)&&void 0!==g||(this.previousInputValues=new Map),this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),l))return;const y=this._rootLView;Gv(y[Ot],y,h,a,l),this.previousInputValues.set(a,l),Qg(bi(this._tNode.index,y))}}get injector(){return new Cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function ZM(){const s=li();bl(ot()[Ot],s)}function Kv(s){let a=function sD(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let h;if(as(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new oe(903,!1);h=a.\u0275dir}if(h){if(l){d.push(h);const y=s;y.inputs=Yf(s.inputs),y.inputTransforms=Yf(s.inputTransforms),y.declaredInputs=Yf(s.declaredInputs),y.outputs=Yf(s.outputs);const w=h.hostBindings;w&&QM(s,w);const T=h.viewQuery,A=h.contentQueries;if(T&&oD(s,T),A&&aD(s,A),j(s.inputs,h.inputs),j(s.declaredInputs,h.declaredInputs),j(s.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),j(y.inputTransforms,h.inputTransforms)),as(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const w=g[y];w&&w.ngInherit&&w(s),w===Kv&&(l=!1)}}a=Object.getPrototypeOf(a)}!function XM(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=a+=h.hostVars,h.hostAttrs=Cs(h.hostAttrs,l=Cs(l,h.hostAttrs))}}(d)}function Yf(s){return s===Bi?{}:s===An?[]:s}function oD(s,a){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{a(d,h),l(d,h)}:a}function aD(s,a){const l=s.contentQueries;s.contentQueries=l?(d,h,g)=>{a(d,h,g),l(d,h,g)}:a}function QM(s,a){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{a(d,h),l(d,h)}:a}function uD(s){const a=s.inputConfig,l={};for(const d in a)if(a.hasOwnProperty(d)){const h=a[d];Array.isArray(h)&&h[2]&&(l[d]=h[2])}s.inputTransforms=l}function Qv(s){return!!vE(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function vE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ms(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function yE(s,a,l,d){const h=ot();return ms(h,Ha(),a)&&(On(),Do(sr(),h,s,a,l,d)),yE}function Hi(s,a,l,d){return ms(s,Ha(),l)?a+ae(l)+d:bn}function fk(s,a,l,d,h,g,y,w){const T=ot(),A=On(),M=s+wn,B=A.firstCreatePass?function z2(s,a,l,d,h,g,y,w,T){const A=a.consts,M=qu(a,s,4,y||null,cs(A,w));cE(a,l,M,cs(A,T)),bl(a,M);const B=M.tView=$v(2,M,d,h,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A,null);return null!==a.queries&&(a.queries.template(a,M),B.queries=a.queries.embeddedTView(M)),M}(M,A,T,a,l,d,h,g,y):A.data[M];oa(B,!1);const ee=bD(A,T,B,s);Us()&&Og(A,T,ee,B),fs(ee,T),Vv(T,T[M]=KT(ee,T,ee,B)),Ds(B)&&aE(A,T,B),null!=y&&Uv(T,B,w)}let bD=function CD(s,a,l,d){return no(!0),a[on].createComment("")};function iy(s,a,l){const d=ot();return ms(d,Ha(),a)&&oo(On(),sr(),d,s,a,d[on],l,!1),iy}function sy(s,a,l,d,h){const y=h?"class":"style";Gv(s,l,a.inputs[y],y,d)}function oy(s,a,l,d){const h=ot(),g=On(),y=wn+s,w=h[on],T=g.firstCreatePass?function pk(s,a,l,d,h,g){const y=a.consts,T=qu(a,s,2,d,cs(y,h));return cE(a,l,T,cs(y,g)),null!==T.attrs&&zv(T,T.attrs,!1),null!==T.mergedAttrs&&zv(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(y,g,h,a,l,d):g.data[y],A=SD(g,h,T,w,a,s);h[y]=A;const M=Ds(T);return oa(T,!0),Fg(w,A,T),32!=(32&T.flags)&&Us()&&Og(g,h,A,T),0===function gu(){return an.lFrame.elementDepthCount}()&&fs(A,h),function ai(){an.lFrame.elementDepthCount++}(),M&&(aE(g,h,T),Bv(g,T,h)),null!==d&&Uv(h,T),oy}function ay(){let s=li();ja()?Vd():(s=s.parent,oa(s,!1));const a=s;(function mu(s){return an.skipHydrationRootTNode===s})(a)&&function $d(){an.skipHydrationRootTNode=null}(),function lf(){an.lFrame.elementDepthCount--}();const l=On();return l.firstCreatePass&&(bl(l,s),lu(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Uo(s){return 0!=(8&s.flags)}(a)&&sy(l,a,ot(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function mf(s){return 0!=(16&s.flags)}(a)&&sy(l,a,ot(),a.stylesWithoutHost,!1),ay}function AE(s,a,l,d){return oy(s,a,l,d),ay(),AE}let SD=(s,a,l,d,h,g)=>(no(!0),Uu(d,h,function Hd(){return an.lFrame.currentNamespace}()));function RE(s,a,l){const d=ot(),h=On(),g=s+wn,y=h.firstCreatePass?function ly(s,a,l,d,h){const g=a.consts,y=cs(g,d),w=qu(a,s,8,"ng-container",y);return null!==y&&zv(w,y,!0),cE(a,l,w,cs(g,h)),null!==a.queries&&a.queries.elementStart(a,w),w}(g,h,d,a,l):h.data[g];oa(y,!0);const w=RD(h,d,y,s);return d[g]=w,Us()&&Og(h,d,w,y),fs(w,d),Ds(y)&&(aE(h,d,y),Bv(h,y,d)),null!=l&&Uv(d,y),RE}function xE(){let s=li();const a=On();return ja()?Vd():(s=s.parent,oa(s,!1)),a.firstCreatePass&&(bl(a,s),lu(s)&&a.queries.elementEnd(s)),xE}function ME(s,a,l){return RE(s,a,l),xE(),ME}let RD=(s,a,l,d)=>(no(!0),Ll(a[on],""));function xD(){return ot()}function kE(s){return!!s&&"function"==typeof s.then}function cy(s){return!!s&&"function"==typeof s.subscribe}function am(s,a,l,d){const h=ot(),g=On(),y=li();return function $c(s,a,l,d,h,g,y){const w=Ds(d),A=s.firstCreatePass&&jv(s),M=a[ir],B=fE(a);let ee=!0;if(3&d.type||y){const dt=wi(d,a),bt=y?y(dt):dt,zt=B.length,rt=y?Dn=>y(jn(Dn[d.index])):d.index;let sn=null;if(!y&&w&&(sn=function MD(s,a,l,d){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===l&&h[g+1]===d){const w=a[oc],T=h[g+2];return w.length>T?w[T]:null}"string"==typeof y&&(g+=2)}return null}(s,a,h,d.index)),null!==sn)(sn.__ngLastListenerFn__||sn).__ngNextListenerFn__=g,sn.__ngLastListenerFn__=g,ee=!1;else{g=pa(d,a,M,g,!1);const Dn=l.listen(bt,h,g);B.push(g,Dn),A&&A.push(h,rt,zt,zt+1)}}else g=pa(d,a,M,g,!1);const Ee=d.outputs;let Je;if(ee&&null!==Ee&&(Je=Ee[h])){const dt=Je.length;if(dt)for(let bt=0;bt<dt;bt+=2){const Gn=a[Je[bt]][Je[bt+1]].subscribe(g),Ea=B.length;B.push(g,Gn),A&&A.push(h,d.index,Ea,-(Ea+1))}}}(g,h,h[on],y,s,a,d),am}function kD(s,a,l,d){try{return Js(6,a,l),!1!==l(d)}catch(h){return Ul(s,h),!1}finally{Js(7,a,l)}}function pa(s,a,l,d,h){return function g(y){if(y===Function)return d;Qg(s.componentOffset>-1?bi(s.index,a):a);let T=kD(a,l,d,y),A=g.__ngNextListenerFn__;for(;A;)T=kD(a,l,A,y)&&T,A=A.__ngNextListenerFn__;return h&&!1===T&&y.preventDefault(),T}}function Lt(s=1){return function Cu(s){return(an.lFrame.contextLView=function vc(s,a){for(;s>0;)a=a[Oo],s--;return a}(s,an.lFrame.contextLView))[ir]}(s)}function PE(s,a){let l=null;const d=function k(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(!(1&l))return a[l+1]}return null}(s);for(let h=0;h<a.length;h++){const g=a[h];if("*"!==g){if(null===d?L(s,g,!0):Fe(d,g))return h}else l=h}return l}function Cn(s){const a=ot()[yr][yi];if(!a.projection){const d=a.projection=Qa(s?s.length:1,null),h=d.slice();let g=a.child;for(;null!==g;){const y=s?PE(g,s):0;null!==y&&(h[y]?h[y].projectionNext=g:d[y]=g,h[y]=g),g=g.next}}}function lm(s,a=0,l){const d=ot(),h=On(),g=qu(h,wn+s,16,null,l||null);null===g.projection&&(g.projection=a),Vd(),(!d[Fs]||bo())&&32!=(32&g.flags)&&function TI(s,a,l){DI(a[on],0,a,l,xf(s,l,a),FC(l.parent||a[yi],l,a))}(h,d,g)}function ph(s,a,l){return OE(s,"",a,"",l),ph}function OE(s,a,l,d,h){const g=ot(),y=Hi(g,a,l,d);return y!==bn&&oo(On(),sr(),g,s,y,g[on],h,!1),OE}function dy(s,a){return s<<17|a<<2}function jc(s){return s>>17&32767}function _s(s){return 2|s}function gh(s){return(131068&s)>>2}function mh(s,a){return-131069&s|a<<2}function ga(s){return 1|s}function LE(s,a,l,d,h){const g=s[l+1],y=null===a;let w=d?jc(g):gh(g),T=!1;for(;0!==w&&(!1===T||y);){const M=s[w+1];FE(s[w],a)&&(T=!0,s[w+1]=d?ga(M):_s(M)),w=d?jc(M):gh(M)}T&&(s[l+1]=d?_s(g):ga(g))}function FE(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&xu(s,a)>=0}function fm(s,a){return function Ro(s,a,l,d){const h=ot(),g=On(),y=function aa(s){const a=an.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);g.firstUpdatePass&&function _y(s,a,l,d){const h=s.data;if(null===h[l+1]){const g=h[Di()],y=function my(s,a){return a>=s.expandoStartIndex}(s,l);(function pm(s,a){return 0!=(s.flags&(a?8:16))})(g,d)&&null===a&&!y&&(a=!1),a=function $E(s,a,l,d){const h=function hf(s){const a=an.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(l=rp(l=vy(null,s,a,l,d),a.attrs,d),g=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==h)if(l=vy(h,s,a,l,d),null===g){let T=function GD(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==gh(d))return s[jc(d)]}(s,a,d);void 0!==T&&Array.isArray(T)&&(T=vy(null,s,a,T[1],d),T=rp(T,a.attrs,d),function zD(s,a,l,d){s[jc(l?a.classBindings:a.styleBindings)]=d}(s,a,d,T))}else g=function Ik(s,a,l){let d;const h=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<h;g++)d=rp(d,s[g].hostAttrs,l);return rp(d,a.attrs,l)}(s,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(h,g,a,d),function vk(s,a,l,d,h,g){let y=g?a.classBindings:a.styleBindings,w=jc(y),T=gh(y);s[d]=l;let M,A=!1;if(Array.isArray(l)?(M=l[1],(null===M||xu(l,M)>0)&&(A=!0)):M=l,h)if(0!==T){const ee=jc(s[w+1]);s[d+1]=dy(ee,w),0!==ee&&(s[ee+1]=mh(s[ee+1],d)),s[w+1]=function LD(s,a){return 131071&s|a<<17}(s[w+1],d)}else s[d+1]=dy(w,0),0!==w&&(s[w+1]=mh(s[w+1],d)),w=d;else s[d+1]=dy(T,0),0===w?w=d:s[T+1]=mh(s[T+1],d),T=d;A&&(s[d+1]=_s(s[d+1])),LE(s,M,d,!0),LE(s,M,d,!1),function np(s,a,l,d,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&xu(g,a)>=0&&(l[d+1]=ga(l[d+1]))}(a,M,s,d,g),y=dy(w,T),g?a.classBindings=y:a.styleBindings=y}(h,g,a,l,y,d)}}(g,s,y,d),a!==bn&&ms(h,y,a)&&function yy(s,a,l,d,h,g,y,w){if(!(3&a.type))return;const T=s.data,A=T[w+1],M=function hy(s){return 1==(1&s)}(A)?Iy(T,a,l,h,gh(A),y):void 0;Mi(M)||(Mi(g)||function NE(s){return 2==(2&s)}(A)&&(g=Iy(T,null,l,h,w,y)),function Ux(s,a,l,d,h){if(a)h?s.addClass(l,d):s.removeClass(l,d);else{let g=-1===d.indexOf("-")?void 0:Fu.DashCase;null==h?s.removeStyle(l,d,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Fu.Important),s.setStyle(l,d,h,g))}}(d,y,$a(Di(),l),h,g))}(g,g.data[Di()],h,h[on],s,h[y+1]=function Os(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=K(Vu(s)))),s}(a,l),d,y)}(s,a,null,!0),fm}function vy(s,a,l,d,h){let g=null;const y=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<y&&(g=a[w],d=rp(d,g.hostAttrs,h),g!==s);)w++;return null!==s&&(l.directiveStylingLast=w),d}function rp(s,a,l){const d=l?1:2;let h=-1;if(null!==a)for(let g=0;g<a.length;g++){const y=a[g];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),io(s,y,!!l||a[++g]))}return void 0===s?null:s}function Iy(s,a,l,d,h,g){const y=null===a;let w;for(;h>0;){const T=s[h],A=Array.isArray(T),M=A?T[1]:T,B=null===M;let ee=l[h+1];ee===bn&&(ee=B?An:void 0);let Ee=B?Cg(ee,d):M===d?ee:void 0;if(A&&!Mi(Ee)&&(Ee=Cg(T,d)),Mi(Ee)&&(w=Ee,y))return w;const Je=s[h+1];h=y?jc(Je):gh(Je)}if(null!==a){let T=g?a.residualClasses:a.residualStyles;null!=T&&(w=Cg(T,d))}return w}function Mi(s){return void 0!==s}function Ey(s,a=""){const l=ot(),d=On(),h=s+wn,g=d.firstCreatePass?qu(d,h,1,a,null):d.data[h],y=WD(d,l,g,a,s);l[h]=y,Us()&&Og(d,l,y,g),oa(g,!1)}let WD=(s,a,l,d,h)=>(no(!0),function Bu(s,a){return s.createText(a)}(a[on],d));function wy(s){return GE("",s,""),wy}function GE(s,a,l){const d=ot(),h=Hi(d,s,a,l);return h!==bn&&function So(s,a,l){const d=$a(a,s);!function Nl(s,a,l){s.setValue(a,l)}(s[on],d,l)}(d,Di(),h),GE}const Hc=void 0;var ew=["en",[["a","p"],["AM","PM"],Hc],[["AM","PM"],Hc,Hc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hc,"{1} 'at' {0}",Hc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JE(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Gc={};function Ay(s){const a=function rS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=vm(a);if(l)return l;const d=a.split("-")[0];if(l=vm(d),l)return l;if("en"===d)return ew;throw new oe(701,!1)}function Ry(s){return Ay(s)[yh.PluralCase]}function vm(s){return s in Gc||(Gc[s]=En.ng&&En.ng.common&&En.ng.common.locales&&En.ng.common.locales[s]),Gc[s]}var yh=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(yh||{});const Gl="en-US";let aS=Gl;function up(s,a,l,d,h){if(s=be(s),Array.isArray(s))for(let g=0;g<s.length;g++)up(s[g],a,l,d,h);else{const g=On(),y=ot(),w=li();let T=Nf(s)?s:be(s.provide);const A=BI(s),M=1048575&w.providerIndexes,B=w.directiveStart,ee=w.providerIndexes>>20;if(Nf(s)||!s.multi){const Ee=new Co(A,h,Wu),Je=Uy(T,a,h?M:M+ee,B);-1===Je?(Ya(br(w,y),g,T),lo(g,s,a.length),a.push(T),w.directiveStart++,w.directiveEnd++,h&&(w.providerIndexes+=1048576),l.push(Ee),y.push(Ee)):(l[Je]=Ee,y[Je]=Ee)}else{const Ee=Uy(T,a,M+ee,B),Je=Uy(T,a,M,M+ee),bt=Je>=0&&l[Je];if(h&&!bt||!h&&!(Ee>=0&&l[Ee])){Ya(br(w,y),g,T);const zt=function gw(s,a,l,d,h){const g=new Co(s,l,Wu);return g.multi=[],g.index=a,g.componentProviders=0,pw(g,h,d&&!l),g}(h?Uk:dp,l.length,h,d,A);!h&&bt&&(l[Je].providerFactory=zt),lo(g,s,a.length,0),a.push(T),w.directiveStart++,w.directiveEnd++,h&&(w.providerIndexes+=1048576),l.push(zt),y.push(zt)}else lo(g,s,Ee>-1?Ee:Je,pw(l[h?Je:Ee],A,!h&&d));!h&&d&&bt&&l[Je].componentProviders++}}}function lo(s,a,l,d){const h=Nf(a),g=function C2(s){return!!s.useClass}(a);if(h||g){const T=(g?be(a.useClass):a).prototype.ngOnDestroy;if(T){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const M=A.indexOf(l);-1===M?A.push(l,[d,T]):A[M+1].push(d,T)}else A.push(l,T)}}}function pw(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Uy(s,a,l,d){for(let h=l;h<d;h++)if(a[h]===s)return h;return-1}function dp(s,a,l,d){return qo(this.multi,[])}function Uk(s,a,l,d){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Xa(l,l[Ot],this.providerFactory.index,d);g=w.slice(0,y),qo(h,g);for(let T=y;T<w.length;T++)g.push(w[T])}else g=[],qo(h,g);return g}function qo(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function lr(s,a=[]){return l=>{l.providersResolver=(d,h)=>function US(s,a,l){const d=On();if(d.firstCreatePass){const h=as(s);up(l,d.data,d.blueprint,h,!0),up(a,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,a)}}class wh{}class $y{}function Wl(s,a){return new xm(s,null!=a?a:null,[])}class xm extends wh{constructor(a,l,d){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nD(this);const h=Qi(a);this._bootstrapComponents=zu(h.bootstrap),this._r3Injector=Sv(a,l,[{provide:wh,useValue:this},{provide:wv,useValue:this.componentFactoryResolver},...d],K(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class nd extends $y{constructor(a){super(),this.moduleType=a}create(a){return new xm(this.moduleType,a,[])}}class _w extends wh{constructor(a){super(),this.componentFactoryResolver=new nD(this),this.instance=null;const l=new Hg([...a.providers,{provide:wh,useValue:this},{provide:wv,useValue:this.componentFactoryResolver}],a.parent||vv(),a.debugName,new Set(["environment"]));this.injector=l,a.runEnvironmentInitializers&&l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function ql(s,a,l=null){return new _w({providers:s,parent:a,debugName:l,runEnvironmentInitializers:!0}).injector}let _a=(()=>{var s;class a{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d)){const h=aT(0,d.type),g=h.length>0?ql([h],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d,g)}return this.cachedInjectors.get(d)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return(s=a).\u0275prov=He({token:s,providedIn:"environment",factory:()=>new s(en(il))}),a})();function vs(s){s.getStandaloneInjector=a=>a.get(_a).getOrCreateStandaloneInjector(s)}function Ew(s,a,l){const d=function us(){const s=an.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}()+s,h=ot();return h[d]===bn?function sl(s,a,l){return s[a]=l}(h,d,l?a.call(l):a()):function Yu(s,a){return s[a]}(h,d)}function Zk(){return this._results[Symbol.iterator]()}class Hy{get changes(){return this._changes||(this._changes=new Bl)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Hy.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=Zk)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const h=function hs(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function To(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],g=a[d];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GS(s,a,l,d=!0){const h=a[Ot];if(function yI(s,a,l,d){const h=Ei+d,g=l.length;d>0&&(l[h-1][Ji]=a),d<g-Ei?(a[Ji]=l[h],Y_(l,Ei+d,a)):(l.push(a),a[Ji]=null),a[vr]=l;const y=a[bd];null!==y&&l!==y&&function kg(s,a){const l=s[ii];a[yr]!==a[vr][vr][yr]&&(s[au]=!0),null===l?s[ii]=[a]:l.push(a)}(y,a);const w=a[ni];null!==w&&w.insertView(s),a[tn]|=128}(h,a,s,l),d){const g=CI(l,s),y=a[on],w=lv(y,s[ri]);null!==w&&function $u(s,a,l,d,h,g){d[_r]=h,d[yi]=a,Lg(s,d,l,1,h,g)}(h,s[yi],y,a,w,g)}}let Yt=(()=>{class a{}return a.__NG_ELEMENT_ID__=Xk,a})();const Om=Yt,Wn=class extends Om{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}get ssrId(){var a;return(null===(a=this._declarationTContainer.tView)||void 0===a?void 0:a.ssrId)||null}createEmbeddedView(a,l){return this.createEmbeddedViewImpl(a,l)}createEmbeddedViewImpl(a,l,d){const h=function Tn(s,a,l,d){var h,g;const y=a.tView,A=Fv(s,y,l,4096&s[tn]?4096:16,null,a,null,null,null,null!==(h=null==d?void 0:d.injector)&&void 0!==h?h:null,null!==(g=null==d?void 0:d.hydrationInfo)&&void 0!==g?g:null);A[bd]=s[a.index];const B=s[ni];return null!==B&&(A[ni]=B.createEmbeddedView(y)),Wf(y,A,l),A}(this._declarationLView,this._declarationTContainer,a,{injector:l,hydrationInfo:d});return new qf(h)}};function Xk(){return Or(li(),ot())}function Or(s,a){return 4&s.type?new Wn(a,s,$f(s,a)):null}let Ws=(()=>{class a{}return a.__NG_ELEMENT_ID__=Tw,a})();function Tw(){return Be(li(),ot())}const qS=Ws,Dw=class extends qS{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return $f(this._hostTNode,this._hostLView)}get injector(){return new Cr(this._hostTNode,this._hostLView)}get parentInjector(){const a=Rs(this._hostTNode,this._hostLView);if(Tl(a)){const l=$s(a,this._hostLView),d=$r(a);return new Cr(l[Ot].data[d+8],l)}return new Cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=Wc(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-Ei}createEmbeddedView(a,l,d){let h,g;"number"==typeof d?h=d:null!=d&&(h=d.index,g=d.injector);const w=a.createEmbeddedViewImpl(l||{},g,null);return this.insertImpl(w,h,false),w}createComponent(a,l,d,h,g){var y,T;const A=a&&!function ui(s){return"function"==typeof s}(a);let M;if(A)M=l;else{const rt=l||{};M=rt.index,d=rt.injector,h=rt.projectableNodes,g=rt.environmentInjector||rt.ngModuleRef}const B=A?a:new im(pn(a)),ee=d||this.parentInjector;if(!g&&null==B.ngModule){const sn=(A?ee:this.parentInjector).get(il,null);sn&&(g=sn)}const Ee=pn(null!==(y=B.componentType)&&void 0!==y?y:{}),Je=(null==Ee?void 0:Ee.id,null),dt=null!==(T=null==Je?void 0:Je.firstChild)&&void 0!==T?T:null,bt=B.create(ee,h,dt,g),zt=!!Je&&!Lu(this._hostTNode);return this.insertImpl(bt.hostView,M,zt),bt}insert(a,l){return this.insertImpl(a,l,!1)}insertImpl(a,l,d){const h=a._lView;if(function mg(s){return $i(s[vr])}(h)){const T=this.indexOf(a);if(-1!==T)this.detach(T);else{const A=h[vr],M=new Dw(A,A[yi],A[vr]);M.detach(M.indexOf(a))}}const y=this._adjustIndex(l),w=this._lContainer;return GS(w,h,y,!d),a.attachToViewContainerRef(),Y_(Lm(w),y,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=Wc(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=av(this._lContainer,l);d&&(wg(Lm(this._lContainer),l),II(d[Ot],d))}detach(a){const l=this._adjustIndex(a,-1),d=av(this._lContainer,l);return d&&null!=wg(Lm(this._lContainer),l)?new qf(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function Wc(s){return s[8]}function Lm(s){return s[8]||(s[8]=[])}function Be(s,a){let l;const d=a[s.index];return $i(d)?l=d:(l=KT(d,a,null,s),a[s.index]=l,Vv(a,l)),ya(l,a,s,d),new Dw(l,s,a)}let ya=function YS(s,a,l,d){if(s[ri])return;let h;h=8&l.type?jn(d):function qy(s,a){const l=s[on],d=l.createComment(""),h=wi(a,s);return oh(l,lv(l,h),d,function Fx(s,a){return s.nextSibling(a)}(l,h),!1),d}(a,l),s[ri]=h};class Sw{constructor(a){this.queryList=a,this.matches=null}clone(){return new Sw(this.queryList)}setDirty(){this.queryList.setDirty()}}class qc{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let g=0;g<d;g++){const y=l.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new qc(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==XS(a,l).matches&&this.queries[l].setDirty()}}class Aw{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class Bm{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,h);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new Bm(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Rw{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Rw(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(a,l,Jk(l,g)),this.matchTNodeWithReadOption(a,l,Za(l,a,g,!1,!1))}else d===Yt?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Za(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Yg||h===Ws||h===Yt&&4&l.type)this.addMatch(l.index,-2);else{const g=Za(l,a,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function Jk(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function Um(s,a,l,d){return-1===l?function Yo(s,a){return 11&s.type?$f(s,a):4&s.type?Or(s,a):null}(a,s):-2===l?function $m(s,a,l){return l===Yg?$f(a,s):l===Yt?Or(a,s):l===Ws?Be(a,s):void 0}(s,a,d):Xa(s,s[Ot],l,a)}function xw(s,a,l,d){const h=a[ni].queries[d];if(null===h.matches){const g=s.data,y=l.matches,w=[];for(let T=0;T<y.length;T+=2){const A=y[T];w.push(A<0?null:Um(a,g[A],y[T+1],l.metadata.read))}h.matches=w}return h.matches}function Is(s,a,l,d){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const y=xw(s,a,h,l);for(let w=0;w<g.length;w+=2){const T=g[w];if(T>0)d.push(y[w/2]);else{const A=g[w+1],M=a[-T];for(let B=Ei;B<M.length;B++){const ee=M[B];ee[bd]===ee[vr]&&Is(ee[Ot],ee,A,d)}if(null!==M[ii]){const B=M[ii];for(let ee=0;ee<B.length;ee++){const Ee=B[ee];Is(Ee[Ot],Ee,A,d)}}}}}return d}function KS(s){const a=ot(),l=On(),d=bu();ff(d+1);const h=XS(l,d);if(s.dirty&&function gg(s){return 4==(4&s[tn])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Is(l,a,d,[]):xw(l,a,h,d);s.reset(g,_T),s.notifyOnChanges()}return!0}return!1}function Mw(s,a,l){const d=On();d.firstCreatePass&&(ZS(d,new Aw(s,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),Pw(d,ot(),a)}function ll(s,a,l,d){const h=On();if(h.firstCreatePass){const g=li();ZS(h,new Aw(a,l,d),g.index),function eP(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Pw(h,ot(),l)}function kw(){return function Yy(s,a){return s[ni].queries[a].queryList}(ot(),bu())}function Pw(s,a,l){const d=new Hy(4==(4&l));(function PM(s,a,l,d){const h=fE(a);h.push(l),s.firstCreatePass&&jv(s).push(d,h.length-1)})(s,a,d,d.destroy),null===a[ni]&&(a[ni]=new qc),a[ni].queries.push(new Sw(d))}function ZS(s,a,l){null===s.queries&&(s.queries=new Bm),s.queries.track(new Rw(a,l))}function XS(s,a){return s.queries.getByIndex(a)}function Ow(s){return!!Qi(s)}const Sr=new ar("Application Initializer");let Xl=(()=>{var s;class a{constructor(){var d;this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,g)=>{this.resolve=h,this.reject=g}),this.appInits=null!==(d=fn(Sr,{optional:!0}))&&void 0!==d?d:[]}runInitializers(){if(this.initialized)return;const d=[];for(const g of this.appInits){const y=g();if(kE(y))d.push(y);else if(cy(y)){const w=new Promise((T,A)=>{y.subscribe({complete:T,error:A})});d.push(w)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(d).then(()=>{h()}).catch(g=>{this.reject(g)}),0===d.length&&h(),this.initialized=!0}}return(s=a).\u0275fac=function(d){return new(d||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),a})(),jw=(()=>{var s;class a{log(d){console.log(d)}warn(d){console.warn(d)}}return(s=a).\u0275fac=function(d){return new(d||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();const Xc=new ar("LocaleId",{providedIn:"root",factory:()=>fn(Xc,qt.Optional|qt.SkipSelf)||function iA(){return typeof $localize<"u"&&$localize.locale||Gl}()}),dP=new ar("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Sh=(()=>{var s;class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new me.X(!1)}add(){this.hasPendingTasks.next(!0);const d=this.taskId++;return this.pendingTasks.add(d),d}remove(d){this.pendingTasks.delete(d),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(s=a).\u0275fac=function(d){return new(d||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();class Hw{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Gw=(()=>{var s;class a{compileModuleSync(d){return new nd(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const h=this.compileModuleSync(d),y=zu(Qi(d).declarations).reduce((w,T)=>{const A=pn(T);return A&&w.push(new im(A)),w},[]);return new Hw(h,y)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return(s=a).\u0275fac=function(d){return new(d||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();const Ys=new ar(""),s0=new ar("");let Km,o0=(()=>{var s;class a{constructor(d,h,g){this._ngZone=d,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Km||(function pA(s){Km=s}(g),g.addToWindow(h)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(d)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,h,g){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==y),d(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:d,timeoutId:y,updateCb:g})}whenStable(d,h,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,h,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,h,g){return[]}}return(s=a).\u0275fac=function(d){return new(d||s)(en(gs),en(wp),en(s0))},s.\u0275prov=He({token:s,factory:s.\u0275fac}),a})(),wp=(()=>{var s;class a{constructor(){this._applications=new Map}registerApplication(d,h){this._applications.set(d,h)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,h=!0){var g,y;return null!==(g=null===(y=Km)||void 0===y?void 0:y.findTestabilityInTree(this,d,h))&&void 0!==g?g:null}}return(s=a).\u0275fac=function(d){return new(d||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})(),Ia=null;const qw=new ar("AllowMultipleToken"),a0=new ar("PlatformDestroyListeners"),Yw=new ar("appBootstrapListener");class Zm{constructor(a,l){this.name=a,this.token=l}}function _A(s,a,l=[]){const d=`Platform: ${a}`,h=new ar(d);return(g=[])=>{let y=Xm();if(!y||y.injector.get(qw,!1)){const w=[...l,...g,{provide:h,useValue:!0}];s?s(w):function mA(s){if(Ia&&!Ia.get(qw,!1))throw new oe(400,!1);(function ho(){!function lg(s){Jh=s}(()=>{throw new oe(600,!1)})})(),Ia=s;const a=s.get(Zw);(function Kw(s){const a=s.get(uT,null);null==a||a.forEach(l=>l())})(s)}(function kn(s=[],a){return Go.create({name:a,providers:[{provide:xi,useValue:"platform"},{provide:a0,useValue:new Set([()=>Ia=null])},...s]})}(w,d))}return function yP(s){const a=Xm();if(!a)throw new oe(401,!1);return a}()}}function Xm(){var s,a;return null!==(s=null===(a=Ia)||void 0===a?void 0:a.get(Zw))&&void 0!==s?s:null}let Zw=(()=>{var s;class a{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,h){const g=function vA(s="zone.js",a){return"noop"===s?new EM:"zone.js"===s?new gs(a):s}(null==h?void 0:h.ngZone,function Xw(s){var a,l;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(a=null==s?void 0:s.eventCoalescing)&&void 0!==a&&a,shouldCoalesceRunChangeDetection:null!==(l=null==s?void 0:s.runCoalescing)&&void 0!==l&&l}}({eventCoalescing:null==h?void 0:h.ngZoneEventCoalescing,runCoalescing:null==h?void 0:h.ngZoneRunCoalescing}));return g.run(()=>{const y=function mw(s,a,l){return new xm(s,a,l)}(d.moduleType,this.injector,function Mh(s){return[{provide:gs,useFactory:s},{provide:Of,multi:!0,useFactory:()=>{const a=fn(xh,{optional:!0});return()=>a.initialize()}},{provide:ld,useFactory:IA},{provide:nE,useFactory:rE}]}(()=>g)),w=y.injector.get(Bc,null);return g.runOutsideAngular(()=>{const T=g.onError.subscribe({next:A=>{w.handleError(A)}});y.onDestroy(()=>{Jm(this._modules,y),T.unsubscribe()})}),function Qm(s,a,l){try{const d=l();return kE(d)?d.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(w,g,()=>{const T=y.injector.get(Xl);return T.runInitializers(),T.donePromise.then(()=>(function lS(s){lt(s,"Expected localeId to be defined"),"string"==typeof s&&(aS=s.toLowerCase().replace(/_/g,"-"))}(y.injector.get(Xc,Gl)||Gl),this._moduleDoBootstrap(y),y))})})}bootstrapModule(d,h=[]){const g=yA({},h);return function Qc(s,a,l){const d=new nd(l);return Promise.resolve(d)}(0,0,d).then(y=>this.bootstrapModuleFactory(y,g))}_moduleDoBootstrap(d){const h=d.injector.get(bp);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(g=>h.bootstrap(g));else{if(!d.instance.ngDoBootstrap)throw new oe(-403,!1);d.instance.ngDoBootstrap(h)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const d=this._injector.get(a0,null);d&&(d.forEach(h=>h()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(s=a).\u0275fac=function(d){return new(d||s)(en(Go))},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();function yA(s,a){return Array.isArray(a)?a.reduce(yA,s):{...s,...a}}let bp=(()=>{var s;class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=fn(ld),this.zoneIsStable=fn(nE),this.componentTypes=[],this.components=[],this.isStable=fn(Sh).hasPendingTasks.pipe((0,De.w)(d=>d?(0,ye.of)(!1):this.zoneIsStable),(0,ge.x)(),(0,Q.B)()),this._injector=fn(il)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(d,h){const g=d instanceof gT;if(!this._injector.get(Xl).done)throw!g&&Ts(d),new oe(405,!1);let w;w=g?d:this._injector.get(wv).resolveComponentFactory(d),this.componentTypes.push(w.componentType);const T=function gA(s){return s.isBoundToModule}(w)?void 0:this._injector.get(wh),M=w.create(Go.NULL,[],h||w.selector,T),B=M.location.nativeElement,ee=M.injector.get(Ys,null);return null==ee||ee.registerApplication(B),M.onDestroy(()=>{this.detachView(M.hostView),Jm(this.components,M),null==ee||ee.unregisterApplication(B)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this.internalErrorHandler(d)}finally{this._runningTick=!1}}attachView(d){const h=d;this._views.push(h),h.attachToAppRef(this)}detachView(d){const h=d;Jm(this._views,h),h.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const h=this._injector.get(Yw,[]);h.push(...this._bootstrapListeners),h.forEach(g=>g(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>Jm(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new oe(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(s=a).\u0275fac=function(d){return new(d||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function Jm(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}const ld=new ar("",{providedIn:"root",factory:()=>fn(Bc).handleError.bind(void 0)});function IA(){const s=fn(gs),a=fn(Bc);return l=>s.runOutsideAngular(()=>a.handleError(l))}let xh=(()=>{var s;class a{constructor(){this.zone=fn(gs),this.applicationRef=fn(bp)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var d;null===(d=this._onMicrotaskEmptySubscription)||void 0===d||d.unsubscribe()}}return(s=a).\u0275fac=function(d){return new(d||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function wA(){return!1}function e_(){}let c0=(()=>{class a{}return a.__NG_ELEMENT_ID__=u0,a})();function u0(s){return function bA(s,a,l){if(ka(s)&&!l){const d=bi(s.index,a);return new qf(d,d)}return 47&s.type?new qf(a[yr],a):null}(li(),ot(),16==(16&s))}class s_{constructor(){}supports(a){return Qv(a)}create(a){return new TP(a)}}const SA=(s,a)=>a;class TP{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||SA}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,h=0,g=null;for(;l||d;){const y=!d||l&&l.currentIndex<Cp(d,h,g)?l:d,w=Cp(y,h,g),T=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{g||(g=[]);const A=w-h,M=T-h;if(A!=M){for(let ee=0;ee<A;ee++){const Ee=ee<g.length?g[ee]:g[ee]=0,Je=Ee+ee;M<=Je&&Je<A&&(g[ee]=Ee+1)}g[y.previousIndex]=M-A}}w!==T&&a(y,w,T)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Qv(a))throw new oe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,g,y,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],y=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,g,y,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,y,w),d=!0),l=l._next}else h=0,function nk(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Symbol.iterator]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,w=>{y=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,w,y,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,y,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,h){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,h)):a=this._addAfter(new AA(l,d),g,h),a}_verifyReinsertion(a,l,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,g=a._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new f0),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new f0),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class AA{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RA{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class f0{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new RA,this.map.set(l,d)),d.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cp(s,a,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+a+h}class Tp{constructor(){}supports(a){return a instanceof Map||vE(a)}create(){return new o_}}class o_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||vE(a)))throw new oe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const d=new p0(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class p0{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jw(){return new g0([new s_])}let g0=(()=>{var s;class a{constructor(d){this.factories=d}static create(d,h){if(null!=h){const g=h.factories.slice();d=d.concat(g)}return new a(d)}static extend(d){return{provide:a,useFactory:h=>a.create(d,h||Jw()),deps:[[a,new el,new Kd]]}}find(d){const h=this.factories.find(g=>g.supports(d));if(null!=h)return h;throw new oe(901,!1)}}return(s=a).\u0275prov=He({token:s,providedIn:"root",factory:Jw}),a})();function xA(){return new m0([new Tp])}let m0=(()=>{var s;class a{constructor(d){this.factories=d}static create(d,h){if(h){const g=h.factories.slice();d=d.concat(g)}return new a(d)}static extend(d){return{provide:a,useFactory:h=>a.create(d,h||xA()),deps:[[a,new el,new Kd]]}}find(d){const h=this.factories.find(g=>g.supports(d));if(h)return h;throw new oe(901,!1)}}return(s=a).\u0275prov=He({token:s,providedIn:"root",factory:xA}),a})();const AP=_A(null,"core",[]);let eb=(()=>{var s;class a{constructor(d){}}return(s=a).\u0275fac=function(d){return new(d||s)(en(bp))},s.\u0275mod=Mn({type:s}),s.\u0275inj=je({}),a})();function PP(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function y0(s,a){const l=pn(s),d=a.elementInjector||vv();return new im(l).create(d,a.projectableNodes,a.hostElement,a.environmentInjector)}function Oh(s){const a=pn(s);if(!a)return null;const l=new im(a);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(wt,Le,P)=>{"use strict";P.d(Le,{Z:()=>Se});var u=P(9058),le=P(4537),F=P(7592),de=P(7879);class me{constructor(fe,q){this._delegate=fe,this.firebase=q,(0,F._addComponent)(fe,new le.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(fe,q=F._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(fe);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Me=Ve.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:q})}_removeServiceInstance(fe,q=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(q)}_addComponent(fe){(0,F._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,F._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Q=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function ge(){const be=function De(be){const fe={},q={__esModule:!0,initializeApp:function oe(se,Z={}){const W=F.initializeApp(se,Z);if((0,u.r3)(fe,W.name))return fe[W.name];const ve=new be(W,q);return fe[W.name]=ve,ve},app:Ve,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function ae(se){const Z=se.name,W=Z.replace("-compat","");if(F._registerComponent(se)&&"PUBLIC"===se.type){const ve=(Pe=Ve())=>{if("function"!=typeof Pe[W])throw Q.create("invalid-app-argument",{appName:Z});return Pe[W]()};void 0!==se.serviceProps&&(0,u.ZB)(ve,se.serviceProps),q[W]=ve,be.prototype[W]=function(...Pe){return this._getService.bind(this,Z).apply(this,se.multipleInstances?Pe:[])}}return"PUBLIC"===se.type?q[W]:null},removeApp:function Me(se){delete fe[se]},useAsService:function Ce(se,Z){return"serverAuth"===Z?null:Z},modularAPIs:F}};function Ve(se){if(!(0,u.r3)(fe,se=se||F._DEFAULT_ENTRY_NAME))throw Q.create("no-app",{appName:se});return fe[se]}return q.default=q,Object.defineProperty(q,"apps",{get:function _e(){return Object.keys(fe).map(se=>fe[se])}}),Ve.App=be,q}(me);return be.INTERNAL=Object.assign(Object.assign({},be.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function fe(q){(0,u.ZB)(be,q)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),be}(),j=new de.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const be=self.firebase.SDK_VERSION;be&&be.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=V;!function ue(be){(0,F.registerVersion)("@firebase/app-compat","0.2.13",be)}()},7592:(wt,Le,P)=>{"use strict";P.r(Le),P.d(Le,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>je,_DEFAULT_ENTRY_NAME:()=>H,_addComponent:()=>ke,_addOrOverwriteComponent:()=>Oe,_apps:()=>ie,_clearComponents:()=>It,_components:()=>we,_getProvider:()=>nt,_registerComponent:()=>lt,_removeServiceInstance:()=>_t,deleteApp:()=>_n,getApp:()=>Mt,getApps:()=>mn,initializeApp:()=>ut,onLog:()=>In,registerVersion:()=>cn,setLogLevel:()=>Xn});var u=P(5861),le=P(4537),F=P(7879),de=P(9058),me=P(1878);class ye{constructor(he){this.container=he}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function Q(Qe){const he=Qe.getComponent();return"VERSION"===(null==he?void 0:he.type)}(Ze)){const gt=Ze.getImmediate();return`${gt.library}/${gt.version}`}return null}).filter(Ze=>Ze).join(" ")}}const De="@firebase/app",V=new F.Yd("@firebase/app"),H="[DEFAULT]",Y={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ie=new Map,we=new Map;function ke(Qe,he){try{Qe.container.addComponent(he)}catch(Ze){V.debug(`Component ${he.name} failed to register with FirebaseApp ${Qe.name}`,Ze)}}function Oe(Qe,he){Qe.container.addOrOverwriteComponent(he)}function lt(Qe){const he=Qe.name;if(we.has(he))return V.debug(`There were multiple attempts to register component ${he}.`),!1;we.set(he,Qe);for(const Ze of ie.values())ke(Ze,Qe);return!0}function nt(Qe,he){const Ze=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),Qe.container.getProvider(he)}function _t(Qe,he,Ze=H){nt(Qe,he).clearInstance(Ze)}function It(){we.clear()}const He=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class We{constructor(he,Ze,gt){this._isDeleted=!1,this._options=Object.assign({},he),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=gt,this.container.addComponent(new le.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this.checkDestroyed(),this._automaticDataCollectionEnabled=he}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(he){this._isDeleted=he}checkDestroyed(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}const je="9.23.0";function ut(Qe,he={}){let Ze=Qe;"object"!=typeof he&&(he={name:he});const gt=Object.assign({name:H,automaticDataCollectionEnabled:!1},he),Et=gt.name;if("string"!=typeof Et||!Et)throw He.create("bad-app-name",{appName:String(Et)});if(Ze||(Ze=(0,de.aH)()),!Ze)throw He.create("no-options");const $t=ie.get(Et);if($t){if((0,de.vZ)(Ze,$t.options)&&(0,de.vZ)(gt,$t.config))return $t;throw He.create("duplicate-app",{appName:Et})}const dn=new le.H0(Et);for(const X of we.values())dn.addComponent(X);const te=new We(Ze,gt,dn);return ie.set(Et,te),te}function Mt(Qe=H){const he=ie.get(Qe);if(!he&&Qe===H&&(0,de.aH)())return ut();if(!he)throw He.create("no-app",{appName:Qe});return he}function mn(){return Array.from(ie.values())}function _n(Qe){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(Qe){const he=Qe.name;ie.has(he)&&(ie.delete(he),yield Promise.all(Qe.container.getProviders().map(Ze=>Ze.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function cn(Qe,he,Ze){var gt;let Et=null!==(gt=Y[Qe])&&void 0!==gt?gt:Qe;Ze&&(Et+=`-${Ze}`);const $t=Et.match(/\s|\//),dn=he.match(/\s|\//);if($t||dn){const te=[`Unable to register library "${Et}" with version "${he}":`];return $t&&te.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),$t&&dn&&te.push("and"),dn&&te.push(`version name "${he}" contains illegal characters (whitespace or "/")`),void V.warn(te.join(" "))}lt(new le.wA(`${Et}-version`,()=>({library:Et,version:he}),"VERSION"))}function In(Qe,he){if(null!==Qe&&"function"!=typeof Qe)throw He.create("invalid-log-argument");(0,F.Am)(Qe,he)}function Xn(Qe){(0,F.Ub)(Qe)}const Kn="firebase-heartbeat-database",qt=1,Qt="firebase-heartbeat-store";let un=null;function Fn(){return un||(un=(0,me.X3)(Kn,qt,{upgrade:(Qe,he)=>{0===he&&Qe.createObjectStore(Qt)}}).catch(Qe=>{throw He.create("idb-open",{originalErrorMessage:Qe.message})})),un}function ur(){return(ur=(0,u.Z)(function*(Qe){try{return yield(yield Fn()).transaction(Qt).objectStore(Qt).get(dr(Qe))}catch(he){if(he instanceof de.ZR)V.warn(he.message);else{const Ze=He.create("idb-get",{originalErrorMessage:null==he?void 0:he.message});V.warn(Ze.message)}}})).apply(this,arguments)}function En(Qe,he){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,u.Z)(function*(Qe,he){try{const gt=(yield Fn()).transaction(Qt,"readwrite");yield gt.objectStore(Qt).put(he,dr(Qe)),yield gt.done}catch(Ze){if(Ze instanceof de.ZR)V.warn(Ze.message);else{const gt=He.create("idb-set",{originalErrorMessage:null==Ze?void 0:Ze.message});V.warn(gt.message)}}})).apply(this,arguments)}function dr(Qe){return`${Qe.name}!${Qe.options.appId}`}class xn{constructor(he){this.container=he,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new Li(Ze),this._heartbeatsCachePromise=this._storage.read().then(gt=>(this._heartbeatsCache=gt,gt))}triggerHeartbeat(){var he=this;return(0,u.Z)(function*(){const gt=he.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=ti();if(null===he._heartbeatsCache&&(he._heartbeatsCache=yield he._heartbeatsCachePromise),he._heartbeatsCache.lastSentHeartbeatDate!==Et&&!he._heartbeatsCache.heartbeats.some($t=>$t.date===Et))return he._heartbeatsCache.heartbeats.push({date:Et,agent:gt}),he._heartbeatsCache.heartbeats=he._heartbeatsCache.heartbeats.filter($t=>{const dn=new Date($t.date).valueOf();return Date.now()-dn<=2592e6}),he._storage.overwrite(he._heartbeatsCache)})()}getHeartbeatsHeader(){var he=this;return(0,u.Z)(function*(){if(null===he._heartbeatsCache&&(yield he._heartbeatsCachePromise),null===he._heartbeatsCache||0===he._heartbeatsCache.heartbeats.length)return"";const Ze=ti(),{heartbeatsToSend:gt,unsentEntries:Et}=function Yi(Qe,he=1024){const Ze=[];let gt=Qe.slice();for(const Et of Qe){const $t=Ze.find(dn=>dn.agent===Et.agent);if($t){if($t.dates.push(Et.date),Fr(Ze)>he){$t.dates.pop();break}}else if(Ze.push({agent:Et.agent,dates:[Et.date]}),Fr(Ze)>he){Ze.pop();break}gt=gt.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:gt}}(he._heartbeatsCache.heartbeats),$t=(0,de.L)(JSON.stringify({version:2,heartbeats:gt}));return he._heartbeatsCache.lastSentHeartbeatDate=Ze,Et.length>0?(he._heartbeatsCache.heartbeats=Et,yield he._storage.overwrite(he._heartbeatsCache)):(he._heartbeatsCache.heartbeats=[],he._storage.overwrite(he._heartbeatsCache)),$t})()}}function ti(){return(new Date).toISOString().substring(0,10)}class Li{constructor(he){this.app=he,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var he=this;return(0,u.Z)(function*(){return(yield he._canUseIndexedDBPromise)&&(yield function zn(Qe){return ur.apply(this,arguments)}(he.app))||{heartbeats:[]}})()}overwrite(he){var Ze=this;return(0,u.Z)(function*(){var gt;if(yield Ze._canUseIndexedDBPromise){const $t=yield Ze.read();return En(Ze.app,{lastSentHeartbeatDate:null!==(gt=he.lastSentHeartbeatDate)&&void 0!==gt?gt:$t.lastSentHeartbeatDate,heartbeats:he.heartbeats})}})()}add(he){var Ze=this;return(0,u.Z)(function*(){var gt;if(yield Ze._canUseIndexedDBPromise){const $t=yield Ze.read();return En(Ze.app,{lastSentHeartbeatDate:null!==(gt=he.lastSentHeartbeatDate)&&void 0!==gt?gt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...he.heartbeats]})}})()}}function Fr(Qe){return(0,de.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function Ki(Qe){lt(new le.wA("platform-logger",he=>new ye(he),"PRIVATE")),lt(new le.wA("heartbeat",he=>new xn(he),"PRIVATE")),cn(De,"0.9.13",Qe),cn(De,"0.9.13","esm2017"),cn("fire-js","")}("")},4097:(wt,Le,P)=>{"use strict";P.d(Le,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=P(7592);(0,u.registerVersion)("firebase","9.23.0","app")},120:(wt,Le,P)=>{"use strict";P.d(Le,{Z:()=>u.Z});var u=P(3399);u.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(wt,Le,P)=>{"use strict";P.r(Le);var u=P(5861),le=P(3399),F=P(9058),de=P(7592),me=P(7582),ye=P(7879),Q=P(4537);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Se=function re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},be=function ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new ye.Yd("@firebase/auth");function oe(I,...p){Me.logLevel<=ye.in.ERROR&&Me.error(`Auth (${de.SDK_VERSION}): ${I}`,...p)}function _e(I,...p){throw Z(I,...p)}function ae(I,...p){return Z(I,...p)}function Ce(I,p,_){const E=Object.assign(Object.assign({},be()),{[p]:_});return new F.LL("auth","Firebase",E).create(p,{appName:I.name})}function se(I,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&_e(I,"argument-error"),Ce(I,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z(I,...p){if("string"!=typeof I){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=I.name),I._errorFactory.create(_,...E)}return fe.create(I,...p)}function W(I,p,..._){if(!I)throw Z(p,..._)}function ve(I){const p="INTERNAL ASSERTION FAILED: "+I;throw oe(p),new Error(p)}function Pe(I,p){I||ve(p)}function Ue(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function Ge(){return"http:"===pt()||"https:"===pt()}function pt(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class Ke{constructor(p,_){this.shortDelay=p,this.longDelay=_,Pe(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ge()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function H(I,p){Pe(I.emulator,"Emulator should always be set here");const{url:_}=I.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Y{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},we=new Ke(3e4,6e4);function ke(I,p){return I.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:I.tenantId}):p}function Oe(I,p,_,E){return lt.apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(I,p,_,E,R={}){return nt(I,R,(0,u.Z)(function*(){let N={},ce={};E&&("GET"===p?ce=E:N={body:JSON.stringify(E)});const Ae=(0,F.xO)(Object.assign({key:I.config.apiKey},ce)).slice(1),ct=yield I._getAdditionalHeaders();return ct["Content-Type"]="application/json",I.languageCode&&(ct["X-Firebase-Locale"]=I.languageCode),Y.fetch()(He(I,I.config.apiHost,_,Ae),Object.assign({method:p,headers:ct,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function nt(I,p,_){return _t.apply(this,arguments)}function _t(){return(_t=(0,u.Z)(function*(I,p,_){I._canInitEmulator=!1;const E=Object.assign(Object.assign({},ie),p);try{const R=new We(I),N=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const ce=yield N.json();if("needConfirmation"in ce)throw je(I,"account-exists-with-different-credential",ce);if(N.ok&&!("errorMessage"in ce))return ce;{const Ae=N.ok?ce.errorMessage:ce.error.message,[ct,ft]=Ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ct)throw je(I,"credential-already-in-use",ce);if("EMAIL_EXISTS"===ct)throw je(I,"email-already-in-use",ce);if("USER_DISABLED"===ct)throw je(I,"user-disabled",ce);const Vt=E[ct]||ct.toLowerCase().replace(/[_\s]+/g,"-");if(ft)throw Ce(I,Vt,ft);_e(I,Vt)}}catch(R){if(R instanceof F.ZR)throw R;_e(I,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function It(I,p,_,E){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,u.Z)(function*(I,p,_,E,R={}){const N=yield Oe(I,p,_,E,R);return"mfaPendingCredential"in N&&_e(I,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function He(I,p,_,E){const R=`${p}${_}?${E}`;return I.config.emulator?H(I.config,R):`${I.config.apiScheme}://${R}`}class We{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(ae(this.auth,"network-request-failed")),we.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function je(I,p,_){const E={appName:I.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const R=ae(I,p,E);return R.customData._tokenResponse=_,R}function Mt(){return(Mt=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function _n(){return(_n=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function cn(){return(cn=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function In(I){if(I)try{const p=new Date(Number(I));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function qt(){return(qt=(0,u.Z)(function*(I,p=!1){const _=(0,F.m9)(I),E=yield _.getIdToken(p),R=un(E);W(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const N="object"==typeof R.firebase?R.firebase:void 0,ce=null==N?void 0:N.sign_in_provider;return{claims:R,token:E,authTime:In(Qt(R.auth_time)),issuedAtTime:In(Qt(R.iat)),expirationTime:In(Qt(R.exp)),signInProvider:ce||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Qt(I){return 1e3*Number(I)}function un(I){const[p,_,E]=I.split(".");if(void 0===p||void 0===_||void 0===E)return oe("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,F.tV)(_);return R?JSON.parse(R):(oe("Failed to decode base64 JWT payload"),null)}catch(R){return oe("Caught error parsing JWT payload as JSON",null==R?void 0:R.toString()),null}}function zn(I,p){return ur.apply(this,arguments)}function ur(){return(ur=(0,u.Z)(function*(I,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof F.ZR&&function En({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(E)&&I.auth.currentUser===I&&(yield I.auth.signOut()),E}})).apply(this,arguments)}class Qn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,u.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null==_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class dr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=In(this.lastLoginAt),this.creationTime=In(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(I){return Ar.apply(this,arguments)}function Ar(){return Ar=(0,u.Z)(function*(I){var p;const _=I.auth,E=yield I.getIdToken(),R=yield zn(I,function ln(I,p){return cn.apply(this,arguments)}(_,{idToken:E}));W(null==R?void 0:R.users.length,_,"internal-error");const N=R.users[0];I._notifyReloadListener(N);const ce=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?function Li(I){return I.map(p=>{var{providerId:_}=p,E=(0,me._T)(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(N.providerUserInfo):[],Ae=function Yi(I,p){return[...I.filter(E=>!p.some(R=>R.providerId===E.providerId)),...p]}(I.providerData,ce),Vt=!!I.isAnonymous&&!(I.email&&N.passwordHash||null!=Ae&&Ae.length),jt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Ae,metadata:new dr(N.createdAt,N.lastLoginAt),isAnonymous:Vt};Object.assign(I,jt)}),Ar.apply(this,arguments)}function ti(){return(ti=(0,u.Z)(function*(I){const p=(0,F.m9)(I);yield Sn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ki(){return(Ki=(0,u.Z)(function*(I,p){const _=yield nt(I,{},(0,u.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:R,apiKey:N}=I.config,ce=He(I,R,"/v1/token",`key=${N}`),Ae=yield I._getAdditionalHeaders();return Ae["Content-Type"]="application/x-www-form-urlencoded",Y.fetch()(ce,{method:"POST",headers:Ae,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){W(p.idToken,"internal-error"),W(typeof p.idToken<"u","internal-error"),W(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Fn(I){const p=un(I);return W(p,"internal-error"),W(typeof p.exp<"u","internal-error"),W(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,u.Z)(function*(){return W(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,u.Z)(function*(){const{accessToken:R,refreshToken:N,expiresIn:ce}=yield function Fr(I,p){return Ki.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(R,N,Number(ce))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:R,expirationTime:N}=_,ce=new Qe;return E&&(W("string"==typeof E,"internal-error",{appName:p}),ce.refreshToken=E),R&&(W("string"==typeof R,"internal-error",{appName:p}),ce.accessToken=R),N&&(W("number"==typeof N,"internal-error",{appName:p}),ce.expirationTime=N),ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return ve("not implemented")}}function he(I,p){W("string"==typeof I||typeof I>"u","internal-error",{appName:p})}class Ze{constructor(p){var{uid:_,auth:E,stsTokenManager:R}=p,N=(0,me._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new dr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,u.Z)(function*(){const E=yield zn(_,_.stsTokenManager.getToken(_.auth,p));return W(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function Kn(I){return qt.apply(this,arguments)}(this,p)}reload(){return function xn(I){return ti.apply(this,arguments)}(this)}_assign(p){this!==p&&(W(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new Ze(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,u.Z)(function*(){let R=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),R=!0),_&&(yield Sn(E)),yield E.auth._persistUserIfCurrent(E),R&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,u.Z)(function*(){const _=yield p.getIdToken();return yield zn(p,function ut(I,p){return Mt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,R,N,ce,Ae,ct,ft,Vt;const jt=null!==(E=_.displayName)&&void 0!==E?E:void 0,Tr=null!==(R=_.email)&&void 0!==R?R:void 0,so=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,Ol=null!==(ce=_.photoURL)&&void 0!==ce?ce:void 0,Oc=null!==(Ae=_.tenantId)&&void 0!==Ae?Ae:void 0,Bu=null!==(ct=_._redirectEventId)&&void 0!==ct?ct:void 0,Nl=null!==(ft=_.createdAt)&&void 0!==ft?ft:void 0,Ll=null!==(Vt=_.lastLoginAt)&&void 0!==Vt?Vt:void 0,{uid:Uu,emailVerified:iv,isAnonymous:$u,providerData:Nc,stsTokenManager:sv}=_;W(Uu&&sv,p,"internal-error");const yI=Qe.fromJSON(this.name,sv);W("string"==typeof Uu,p,"internal-error"),he(jt,p.name),he(Tr,p.name),W("boolean"==typeof iv,p,"internal-error"),W("boolean"==typeof $u,p,"internal-error"),he(so,p.name),he(Ol,p.name),he(Oc,p.name),he(Bu,p.name),he(Nl,p.name),he(Ll,p.name);const kg=new Ze({uid:Uu,auth:p,email:Tr,emailVerified:iv,displayName:jt,isAnonymous:$u,photoURL:Ol,phoneNumber:so,tenantId:Oc,stsTokenManager:yI,createdAt:Nl,lastLoginAt:Ll});return Nc&&Array.isArray(Nc)&&(kg.providerData=Nc.map(ov=>Object.assign({},ov))),Bu&&(kg._redirectEventId=Bu),kg}static _fromIdTokenResponse(p,_,E=!1){return(0,u.Z)(function*(){const R=new Qe;R.updateFromServerResponse(_);const N=new Ze({uid:_.localId,auth:p,stsTokenManager:R,isAnonymous:E});return yield Sn(N),N})()}}const gt=new Map;function Et(I){Pe(I instanceof Function,"Expected a class definition");let p=gt.get(I);return p?(Pe(p instanceof I,"Instance stored in cache mismatched with class"),p):(p=new I,gt.set(I,p),p)}const dn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,E){var R=this;return(0,u.Z)(function*(){R.storage[_]=E})()}_get(_){var E=this;return(0,u.Z)(function*(){const R=E.storage[_];return void 0===R?null:R})()}_remove(_){var E=this;return(0,u.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return I.type="NONE",I})();function te(I,p,_){return`firebase:${I}:${p}:${_}`}class X{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:R,name:N}=this.auth;this.fullUserKey=te(this.userKey,R.apiKey,N),this.fullPersistenceKey=te("persistence",R.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,u.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Ze._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,u.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,u.Z)(function*(){if(!_.length)return new X(Et(dn),p,E);const R=(yield Promise.all(_.map(function(){var ft=(0,u.Z)(function*(Vt){if(yield Vt._isAvailable())return Vt});return function(Vt){return ft.apply(this,arguments)}}()))).filter(ft=>ft);let N=R[0]||Et(dn);const ce=te(E,p.config.apiKey,p.name);let Ae=null;for(const ft of _)try{const Vt=yield ft._get(ce);if(Vt){const jt=Ze._fromJSON(p,Vt);ft!==N&&(Ae=jt),N=ft;break}}catch{}const ct=R.filter(ft=>ft._shouldAllowMigration);return N._shouldAllowMigration&&ct.length?(N=ct[0],Ae&&(yield N._set(ce,Ae.toJSON())),yield Promise.all(_.map(function(){var ft=(0,u.Z)(function*(Vt){if(Vt!==N)try{yield Vt._remove(ce)}catch{}});return function(Vt){return ft.apply(this,arguments)}}())),new X(N,p,E)):new X(N,p,E)})()}}function Ie(I){const p=I.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(hn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(et(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Rr(p))return"Blackberry";if(fn(p))return"Webos";if($e(p))return"Safari";if((p.includes("chrome/")||St(p))&&!p.includes("edge/"))return"Chrome";if(en(p))return"Android";{const E=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function et(I=(0,F.z$)()){return/firefox\//i.test(I)}function $e(I=(0,F.z$)()){const p=I.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function St(I=(0,F.z$)()){return/crios\//i.test(I)}function hn(I=(0,F.z$)()){return/iemobile/i.test(I)}function en(I=(0,F.z$)()){return/android/i.test(I)}function Rr(I=(0,F.z$)()){return/blackberry/i.test(I)}function fn(I=(0,F.z$)()){return/webos/i.test(I)}function mr(I=(0,F.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function go(I=(0,F.z$)()){return mr(I)||en(I)||fn(I)||Rr(I)||/windows phone/i.test(I)||hn(I)}function Fi(I,p=[]){let _;switch(I){case"Browser":_=Ie((0,F.z$)());break;case"Worker":_=`${Ie((0,F.z$)())}-${I}`;break;default:_=I}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${de.SDK_VERSION}/${E}`}function Br(){return(Br=(0,u.Z)(function*(I){return(yield Oe(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bi(I,p){return An.apply(this,arguments)}function An(){return(An=(0,u.Z)(function*(I,p){return Oe(I,"GET","/v2/recaptchaConfig",ke(I,p))})).apply(this,arguments)}function Kr(I){return void 0!==I&&void 0!==I.getResponse}function Zi(I){return void 0!==I&&void 0!==I.enterprise}class mo{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function nr(I){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",I),E.onload=p,E.onerror=R=>{const N=ae("internal-error");N.customData=R,_(N)},E.type="text/javascript",E.charset="UTF-8",function _o(){var I,p;return null!==(p=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==p?p:document}().appendChild(E)})}function Xi(I){return`__${I}${Math.floor(1e6*Math.random())}`}class Ta{constructor(p){this.type="recaptcha-enterprise",this.auth=hr(p)}verify(p="verify",_=!1){var E=this;return(0,u.Z)(function*(){function N(){return N=(0,u.Z)(function*(Ae){if(!_){if(null==Ae.tenantId&&null!=Ae._agentRecaptchaConfig)return Ae._agentRecaptchaConfig.siteKey;if(null!=Ae.tenantId&&void 0!==Ae._tenantRecaptchaConfigs[Ae.tenantId])return Ae._tenantRecaptchaConfigs[Ae.tenantId].siteKey}return new Promise(function(){var ct=(0,u.Z)(function*(ft,Vt){Bi(Ae,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(jt=>{if(void 0!==jt.recaptchaKey){const Tr=new mo(jt);return null==Ae.tenantId?Ae._agentRecaptchaConfig=Tr:Ae._tenantRecaptchaConfigs[Ae.tenantId]=Tr,ft(Tr.siteKey)}Vt(new Error("recaptcha Enterprise site key undefined"))}).catch(jt=>{Vt(jt)})});return function(ft,Vt){return ct.apply(this,arguments)}}())}),N.apply(this,arguments)}function ce(Ae,ct,ft){const Vt=window.grecaptcha;Zi(Vt)?Vt.enterprise.ready(()=>{Vt.enterprise.execute(Ae,{action:p}).then(jt=>{ct(jt)}).catch(()=>{ct("NO_RECAPTCHA")})}):ft(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ae,ct)=>{(function R(Ae){return N.apply(this,arguments)})(E.auth).then(ft=>{if(!_&&Zi(window.grecaptcha))ce(ft,Ae,ct);else{if(typeof window>"u")return void ct(new Error("RecaptchaVerifier is only supported in browser"));nr("https://www.google.com/recaptcha/enterprise.js?render="+ft).then(()=>{ce(ft,Ae,ct)}).catch(Vt=>{ct(Vt)})}}).catch(ft=>{ct(ft)})})})()}}function Ui(I,p,_){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,u.Z)(function*(I,p,_,E=!1){const R=new Ta(I);let N;try{N=yield R.verify(_)}catch{N=yield R.verify(_,!0)}const ce=Object.assign({},p);return Object.assign(ce,E?{captchaResp:N}:{captchaResponse:N}),Object.assign(ce,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ce,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ce})).apply(this,arguments)}class yo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const E=N=>new Promise((ce,Ae)=>{try{ce(p(N))}catch(ct){Ae(ct)}});E.onAbort=_,this.queue.push(E);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===p)return;const E=[];try{for(const R of _.queue)yield R(p),R.onAbort&&E.push(R.onAbort)}catch(R){E.reverse();for(const N of E)try{N()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null==R?void 0:R.message})}})()}}class ta{constructor(p,_,E,R){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=E,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ss(this),this.idTokenSubscription=new ss(this),this.beforeStateQueue=new yo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=Et(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var R,N;if(!E._deleted&&(E.persistenceManager=yield X.create(E,p),!E._deleted)){if(null!==(R=E._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,u.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,u.Z)(function*(){var E;const R=yield _.assertedPersistence.getCurrentUser();let N=R,ce=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ae=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,ct=null==N?void 0:N._redirectEventId,ft=yield _.tryRedirectSignIn(p);(!Ae||Ae===ct)&&null!=ft&&ft.user&&(N=ft.user,ce=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(ce)try{yield _.beforeStateQueue.runMiddleware(N)}catch(Ae){N=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ae))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return W(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var _=this;return(0,u.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,u.Z)(function*(){try{yield Sn(p)}catch(E){if("auth/network-request-failed"!==(null==E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ut(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var p=this;return(0,u.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,u.Z)(function*(){const E=p?(0,F.m9)(p):null;return E&&W(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p,_=!1){var E=this;return(0,u.Z)(function*(){if(!E._deleted)return p&&W(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,u.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,u.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(Et(p))}))}initializeRecaptchaConfig(){var p=this;return(0,u.Z)(function*(){const _=yield Bi(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new mo(_);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new Ta(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,u.Z)(function*(){const R=yield E.getOrInitRedirectPersistenceManager(_);return null===p?R.removeCurrentUser():R.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&Et(p)||_._popupRedirectResolver;W(E,_,"argument-error"),_.redirectPersistenceManager=yield X.create(_,[Et(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,u.Z)(function*(){var E,R;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,u.Z)(function*(){if(p===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,R){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),ce=this._isInitialized?Promise.resolve():this._initializationPromise;return W(ce,this,"internal-error"),ce.then(()=>N(this.currentUser)),"function"==typeof _?p.addObserver(_,E,R):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,u.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const R=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();R&&(E["X-Firebase-Client"]=R);const N=yield p._getAppCheckToken();return N&&(E["X-Firebase-AppCheck"]=N),E})()}_getAppCheckToken(){var p=this;return(0,u.Z)(function*(){var _;const E=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return null!=E&&E.error&&function Ve(I,...p){Me.logLevel<=ye.in.WARN&&Me.warn(`Auth (${de.SDK_VERSION}): ${I}`,...p)}(`Error while retrieving App Check token: ${E.error}`),null==E?void 0:E.token})()}}function hr(I){return(0,F.m9)(I)}class ss{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Io(I){const p=I.indexOf(":");return p<0?"":I.substr(0,p+1)}function k(I){if(!I)return null;const p=Number(I);return isNaN(p)?null:p}class J{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ve("not implemented")}_getIdTokenResponse(p){return ve("not implemented")}_linkToIdToken(p,_){return ve("not implemented")}_getReauthenticationResolver(p){return ve("not implemented")}}function Fe(I,p){return xe.apply(this,arguments)}function xe(){return(xe=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:resetPassword",ke(I,p))})).apply(this,arguments)}function Xe(I,p){return st.apply(this,arguments)}function st(){return(st=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function it(){return(it=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:update",ke(I,p))})).apply(this,arguments)}function mt(I,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signInWithPassword",ke(I,p))})).apply(this,arguments)}function rn(I,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:sendOobCode",ke(I,p))})).apply(this,arguments)}function Ur(){return(Ur=(0,u.Z)(function*(I,p){return rn(I,p)})).apply(this,arguments)}function os(I,p){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(I,p){return rn(I,p)})).apply(this,arguments)}function pn(I,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(I,p){return rn(I,p)})).apply(this,arguments)}function Ts(){return(Ts=(0,u.Z)(function*(I,p){return rn(I,p)})).apply(this,arguments)}function wd(){return(wd=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signInWithEmailLink",ke(I,p))})).apply(this,arguments)}function sc(){return(sc=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signInWithEmailLink",ke(I,p))})).apply(this,arguments)}class ou extends J{constructor(p,_,E,R=null){super("password",E),this._email=p,this._password=_,this._tenantId=R}static _fromEmailAndPassword(p,_){return new ou(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new ou(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(null!=_&&_.email&&null!=_&&_.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,u.Z)(function*(){var E;switch(_.signInMethod){case"password":const R={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const N=yield Ui(p,R,"signInWithPassword");return mt(p,N)}return mt(p,R).catch(function(){var N=(0,u.Z)(function*(ce){if("auth/missing-recaptcha-token"===ce.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ae=yield Ui(p,R,"signInWithPassword");return mt(p,Ae)}return Promise.reject(ce)});return function(ce){return N.apply(this,arguments)}}());case"emailLink":return function Qi(I,p){return wd.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:_e(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return Xe(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function rg(I,p){return sc.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:_e(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ls(I,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signInWithIdp",ke(I,p))})).apply(this,arguments)}class tn extends J{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new tn(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):_e("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:R}=_,N=(0,me._T)(_,["providerId","signInMethod"]);if(!E||!R)return null;const ce=new tn(E,R);return ce.idToken=N.idToken||void 0,ce.accessToken=N.accessToken||void 0,ce.secret=N.secret,ce.nonce=N.nonce,ce.pendingToken=N.pendingToken||null,ce}_getIdTokenResponse(p){return Ls(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Ls(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ls(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,F.xO)(_)}return p}}function Ji(){return(Ji=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:sendVerificationCode",ke(I,p))})).apply(this,arguments)}function yi(){return(yi=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signInWithPhoneNumber",ke(I,p))})).apply(this,arguments)}function ir(){return(ir=(0,u.Z)(function*(I,p){const _=yield It(I,"POST","/v1/accounts:signInWithPhoneNumber",ke(I,p));if(_.temporaryProof)throw je(I,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Po={USER_NOT_FOUND:"user-not-found"};function on(){return(on=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signInWithPhoneNumber",ke(I,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Po)})).apply(this,arguments)}class Ii extends J{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ii({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ii({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Ra(I,p){return yi.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function oc(I,p){return ir.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function hl(I,p){return on.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:R}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:R}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:N}=p;return E||_||R||N?new Ii({verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:N}):null}}class yr{constructor(p){var _,E,R,N,ce,Ae;const ct=(0,F.zd)((0,F.pd)(p)),ft=null!==(_=ct.apiKey)&&void 0!==_?_:null,Vt=null!==(E=ct.oobCode)&&void 0!==E?E:null,jt=function ig(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=ct.mode)&&void 0!==R?R:null);W(ft&&Vt&&jt,"argument-error"),this.apiKey=ft,this.operation=jt,this.code=Vt,this.continueUrl=null!==(N=ct.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(ce=ct.languageCode)&&void 0!==ce?ce:null,this.tenantId=null!==(Ae=ct.tenantId)&&void 0!==Ae?Ae:null}static parseLink(p){const _=function Oo(I){const p=(0,F.zd)((0,F.pd)(I)).link,_=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(I)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||_||p||I}(p);try{return new yr(_)}catch{return null}}}let xa=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(_,E){return ou._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const R=yr.parseLink(E);return W(R,"argument-error"),ou._fromEmailAndCode(_,R.code,R.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class ni{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class No extends ni{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Lo extends No{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return W("providerId"in _&&"signInMethod"in _,"argument-error"),tn._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return W(p.idToken||p.accessToken,"argument-error"),tn._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Lo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Lo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:N,nonce:ce,providerId:Ae}=p;if(!E&&!R&&!_&&!N||!Ae)return null;try{return new Lo(Ae)._credential({idToken:_,accessToken:E,nonce:ce,pendingToken:N})}catch{return null}}}let na=(()=>{class I extends No{constructor(){super("facebook.com")}static credential(_){return tn._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),Fs=(()=>{class I extends No{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return tn._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:R}=_;if(!E&&!R)return null;try{return I.credential(E,R)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),ac=(()=>{class I extends No{constructor(){super("github.com")}static credential(_){return tn._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class wn extends J{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Ls(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Ls(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ls(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:R,pendingToken:N}=_;return E&&R&&N&&E===R?new wn(E,N):null}static _create(p,_){return new wn(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fl extends ni{constructor(p){W(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return fl.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return fl.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=wn.fromJSON(p);return W(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return wn._create(E,_)}catch{return null}}}let au=(()=>{class I extends No{constructor(){super("twitter.com")}static credential(_,E){return tn._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:R}=_;if(!E||!R)return null;try{return I.credential(E,R)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function ri(I,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signUp",ke(I,p))})).apply(this,arguments)}class ii{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,R=!1){return(0,u.Z)(function*(){const N=yield Ze._fromIdTokenResponse(p,E,R),ce=ia(E);return new ii({user:N,providerId:ce,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,u.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const R=ia(E);return new ii({user:p,providerId:R,_tokenResponse:E,operationType:_})})()}}function ia(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function sg(){return(sg=(0,u.Z)(function*(I){var p;const _=hr(I);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new ii({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield ri(_,{returnSecureToken:!0}),R=yield ii._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class si extends F.ZR{constructor(p,_,E,R){var N;super(_.code,_.message),this.operationType=E,this.user=R,Object.setPrototypeOf(this,si.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,R){return new si(p,_,E,R)}}function $i(I,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(I):_._getIdTokenResponse(I)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?si._fromErrorAndOperation(I,N,p,E):N})}function lu(I){return new Set(I.map(({providerId:p})=>p).filter(p=>!!p))}function Ds(){return Ds=(0,u.Z)(function*(I,p){const _=(0,F.m9)(I);yield gl(!0,_,p);const{providerUserInfo:E}=yield function mn(I,p){return _n.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),R=lu(E||[]);return _.providerData=_.providerData.filter(N=>R.has(N.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ds.apply(this,arguments)}function as(I,p){return pl.apply(this,arguments)}function pl(){return(pl=(0,u.Z)(function*(I,p,_=!1){const E=yield zn(I,p._linkToIdToken(I.auth,yield I.getIdToken()),_);return ii._forOperation(I,"link",E)})).apply(this,arguments)}function gl(I,p,_){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,u.Z)(function*(I,p,_){yield Sn(p);const R=!1===I?"provider-already-linked":"no-such-provider";W(lu(p.providerData).has(_)===I,p.auth,R)})).apply(this,arguments)}function F_(I,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,u.Z)(function*(I,p,_=!1){const{auth:E}=I,R="reauthenticate";try{const N=yield zn(I,$i(E,R,p,I),_);W(N.idToken,E,"internal-error");const ce=un(N.idToken);W(ce,E,"internal-error");const{sub:Ae}=ce;return W(I.uid===Ae,E,"user-mismatch"),ii._forOperation(I,R,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&_e(E,"user-mismatch"),N}})).apply(this,arguments)}function Td(I,p){return zh.apply(this,arguments)}function zh(){return(zh=(0,u.Z)(function*(I,p,_=!1){const E="signIn",R=yield $i(I,E,p),N=yield ii._fromIdTokenResponse(I,E,R);return _||(yield I._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Dd(I,p){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,u.Z)(function*(I,p){return Td(hr(I),p)})).apply(this,arguments)}function B_(I,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(I,p){const _=(0,F.m9)(I);return yield gl(!1,_,p.providerId),as(_,p)})).apply(this,arguments)}function U_(I,p){return og.apply(this,arguments)}function og(){return(og=(0,u.Z)(function*(I,p){return F_((0,F.m9)(I),p)})).apply(this,arguments)}function ag(){return(ag=(0,u.Z)(function*(I,p){return It(I,"POST","/v1/accounts:signInWithCustomToken",ke(I,p))})).apply(this,arguments)}function Fo(){return Fo=(0,u.Z)(function*(I,p){const _=hr(I),E=yield function rI(I,p){return ag.apply(this,arguments)}(_,{token:p,returnSecureToken:!0}),R=yield ii._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(R.user),R}),Fo.apply(this,arguments)}class Sd{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?ml._fromServerResponse(p,_):"totpInfo"in _?Ad._fromServerResponse(p,_):_e(p,"internal-error")}}class ml extends Sd{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new ml(_)}}class Ad extends Sd{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new Ad(_)}}function lc(I,p,_){var E;W((null===(E=_.url)||void 0===E?void 0:E.length)>0,I,"invalid-continue-uri"),W(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(W(_.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(W(_.android.packageName.length>0,I,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function cc(){return cc=(0,u.Z)(function*(I,p,_){var E;const R=hr(I),N={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=R._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ce=yield Ui(R,N,"getOobCode",!0);_&&lc(R,ce,_),yield os(R,ce)}else _&&lc(R,N,_),yield os(R,N).catch(function(){var ce=(0,u.Z)(function*(Ae){if("auth/missing-recaptcha-token"!==Ae.code)return Promise.reject(Ae);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ct=yield Ui(R,N,"getOobCode",!0);_&&lc(R,ct,_),yield os(R,ct)}});return function(Ae){return ce.apply(this,arguments)}}())}),cc.apply(this,arguments)}function Eo(){return(Eo=(0,u.Z)(function*(I,p,_){yield Fe((0,F.m9)(I),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Bs(){return Bs=(0,u.Z)(function*(I,p){yield function tt(I,p){return it.apply(this,arguments)}((0,F.m9)(I),{oobCode:p})}),Bs.apply(this,arguments)}function Xr(I,p){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(I,p){const _=(0,F.m9)(I),E=yield Fe(_,{oobCode:p}),R=E.requestType;switch(W(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(E.mfaInfo,_,"internal-error");default:W(E.email,_,"internal-error")}let N=null;return E.mfaInfo&&(N=Sd._fromServerResponse(hr(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:R}})).apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(I,p){const{data:_}=yield Xr((0,F.m9)(I),p);return _.email})).apply(this,arguments)}function uc(){return uc=(0,u.Z)(function*(I,p,_){var E;const R=hr(I),N={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let ce;if(null!==(E=R._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ft=yield Ui(R,N,"signUpPassword");ce=ri(R,ft)}else ce=ri(R,N).catch(function(){var ft=(0,u.Z)(function*(Vt){if("auth/missing-recaptcha-token"===Vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const jt=yield Ui(R,N,"signUpPassword");return ri(R,jt)}return Promise.reject(Vt)});return function(Vt){return ft.apply(this,arguments)}}());const Ae=yield ce.catch(ft=>Promise.reject(ft)),ct=yield ii._fromIdTokenResponse(R,"signIn",Ae);return yield R._updateCurrentUser(ct.user),ct}),uc.apply(this,arguments)}function dc(){return dc=(0,u.Z)(function*(I,p,_){var E;const R=hr(I),N={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function ce(Ae,ct){W(ct.handleCodeInApp,R,"argument-error"),ct&&lc(R,Ae,ct)}if(null!==(E=R._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ae=yield Ui(R,N,"getOobCode",!0);ce(Ae,_),yield pn(R,Ae)}else ce(N,_),yield pn(R,N).catch(function(){var Ae=(0,u.Z)(function*(ct){if("auth/missing-recaptcha-token"!==ct.code)return Promise.reject(ct);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ft=yield Ui(R,N,"getOobCode",!0);ce(ft,_),yield pn(R,ft)}});return function(ct){return Ae.apply(this,arguments)}}())}),dc.apply(this,arguments)}function xd(){return(xd=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I),R=xa.credentialWithLink(p,_||Ue());return W(R._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Dd(E,R)})).apply(this,arguments)}function kd(){return(kd=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:createAuthUri",ke(I,p))})).apply(this,arguments)}function La(){return La=(0,u.Z)(function*(I,p){const E={identifier:p,continueUri:Ge()?Ue():"http://localhost"},{signinMethods:R}=yield function Md(I,p){return kd.apply(this,arguments)}((0,F.m9)(I),E);return R||[]}),La.apply(this,arguments)}function fc(){return fc=(0,u.Z)(function*(I,p){const _=(0,F.m9)(I),R={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};p&&lc(_.auth,R,p);const{email:N}=yield function _i(I,p){return Ur.apply(this,arguments)}(_.auth,R);N!==I.email&&(yield I.reload())}),fc.apply(this,arguments)}function uu(){return uu=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:p};_&&lc(E.auth,N,_);const{email:ce}=yield function vi(I,p){return Ts.apply(this,arguments)}(E.auth,N);ce!==I.email&&(yield I.reload())}),uu.apply(this,arguments)}function Qh(){return(Qh=(0,u.Z)(function*(I,p){return Oe(I,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Pd(){return Pd=(0,u.Z)(function*(I,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,F.m9)(I),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},ce=yield zn(E,function $_(I,p){return Qh.apply(this,arguments)}(E.auth,N));E.displayName=ce.displayName||null,E.photoURL=ce.photoUrl||null;const Ae=E.providerData.find(({providerId:ct})=>"password"===ct);Ae&&(Ae.displayName=E.displayName,Ae.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ce)}),Pd.apply(this,arguments)}function lg(I,p,_){return vl.apply(this,arguments)}function vl(){return(vl=(0,u.Z)(function*(I,p,_){const{auth:E}=I,N={idToken:yield I.getIdToken(),returnSecureToken:!0};p&&(N.email=p),_&&(N.password=_);const ce=yield zn(I,Xe(E,N));yield I._updateTokensIfNecessary(ce,!0)})).apply(this,arguments)}class yl{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class pc extends yl{constructor(p,_,E,R){super(p,_,E),this.username=R}}class Od extends yl{constructor(p,_){super(p,"facebook.com",_)}}class ef extends pc{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class hu extends yl{constructor(p,_){super(p,"google.com",_)}}class gc extends pc{constructor(p,_,E){super(p,"twitter.com",_,E)}}function cg(I){const{user:p,_tokenResponse:_}=I;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function j_(I){var p,_;if(!I)return null;const{providerId:E}=I,R=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},N=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!E&&null!=I&&I.idToken){const ce=null===(_=null===(p=un(I.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(ce)return new yl(N,"anonymous"!==ce&&"custom"!==ce?ce:null)}if(!E)return null;switch(E){case"facebook.com":return new Od(N,R);case"github.com":return new ef(N,R);case"google.com":return new hu(N,R);case"twitter.com":return new gc(N,R,I.screenName||null);case"custom":case"anonymous":return new yl(N,null);default:return new yl(N,E,R)}}(_)}class wo{constructor(p,_,E){this.type=p,this.credential=_,this.auth=E}static _fromIdtoken(p,_){return new wo("enroll",p,_)}static _fromMfaPendingCredential(p){return new wo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(null!=p&&p.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return wo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return wo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ba{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=hr(p),R=_.customData._serverResponse,N=(R.mfaInfo||[]).map(Ae=>Sd._fromServerResponse(E,Ae));W(R.mfaPendingCredential,E,"internal-error");const ce=wo._fromMfaPendingCredential(R.mfaPendingCredential);return new Ba(ce,N,function(){var Ae=(0,u.Z)(function*(ct){const ft=yield ct._process(E,ce);delete R.mfaInfo,delete R.mfaPendingCredential;const Vt=Object.assign(Object.assign({},R),{idToken:ft.idToken,refreshToken:ft.refreshToken});switch(_.operationType){case"signIn":const jt=yield ii._fromIdTokenResponse(E,_.operationType,Vt);return yield E._updateCurrentUser(jt.user),jt;case"reauthenticate":return W(_.user,E,"internal-error"),ii._forOperation(_.user,_.operationType,Vt);default:_e(E,"internal-error")}});return function(ct){return Ae.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,u.Z)(function*(){return _.signInResolver(p)})()}}class jn{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Sd._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new jn(p)}getSession(){var p=this;return(0,u.Z)(function*(){return wo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var E=this;return(0,u.Z)(function*(){const R=p,N=yield E.getSession(),ce=yield zn(E.user,R._process(E.user.auth,N,_));return yield E.user._updateTokensIfNecessary(ce),E.user.reload()})()}unenroll(p){var _=this;return(0,u.Z)(function*(){const E="string"==typeof p?p:p.uid,R=yield _.user.getIdToken();try{const N=yield zn(_.user,function rf(I,p){return Oe(I,"POST","/v2/accounts/mfaEnrollment:withdraw",ke(I,p))}(_.user.auth,{idToken:R,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ce})=>ce!==E),yield _.user._updateTokensIfNecessary(N),yield _.user.reload()}catch(N){throw N}})()}}const Ua=new WeakMap,wi="__sak";class pg{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(wi,"1"),this.storage.removeItem(wi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Il=(()=>{class I extends pg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bd(){const I=(0,F.z$)();return $e(I)||mr(I)}()&&function dl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=go(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const R=this.storage.getItem(E),N=this.localCache[E];R!==N&&_(E,N,R)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Ae,ct,ft)=>{this.notifyListeners(Ae,ft)});const R=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ae=this.storage.getItem(R);if(_.newValue!==Ae)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!E)return}const N=()=>{const Ae=this.storage.getItem(R);!E&&this.localCache[R]===Ae||this.notifyListeners(R,Ae)},ce=this.storage.getItem(R);!function Ns(){return(0,F.w1)()&&10===document.documentMode}()||ce===_.newValue||_.newValue===_.oldValue?N():setTimeout(N,10)}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var R=()=>super._set,N=this;return(0,u.Z)(function*(){yield R().call(N,_,E),N.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,R=this;return(0,u.Z)(function*(){const N=yield E().call(R,_);return R.localCache[_]=JSON.stringify(N),N})()}_remove(_){var E=()=>super._remove,R=this;return(0,u.Z)(function*(){yield E().call(R,_),delete R.localCache[_]})()}}return I.type="LOCAL",I})(),cs=(()=>{class I extends pg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return I.type="SESSION",I})();let Ud=(()=>{class I{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(N=>N.isListeningto(_));if(E)return E;const R=new I(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,u.Z)(function*(){const R=_,{eventId:N,eventType:ce,data:Ae}=R.data,ct=E.handlersMap[ce];if(null==ct||!ct.size)return;R.ports[0].postMessage({status:"ack",eventId:N,eventType:ce});const ft=Array.from(ct).map(function(){var jt=(0,u.Z)(function*(Tr){return Tr(R.origin,Ae)});return function(Tr){return jt.apply(this,arguments)}}()),Vt=yield function _g(I){return Promise.all(I.map(function(){var p=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(ft);R.ports[0].postMessage({status:"done",eventId:N,eventType:ce,response:Vt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function pu(I="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return I+_}class G_{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var R=this;return(0,u.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let ce,Ae;return new Promise((ct,ft)=>{const Vt=pu("",20);N.port1.start();const jt=setTimeout(()=>{ft(new Error("unsupported_event"))},E);Ae={messageChannel:N,onMessage(Tr){const so=Tr;if(so.data.eventId===Vt)switch(so.data.status){case"ack":clearTimeout(jt),ce=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(ce),ct(so.data.response);break;default:clearTimeout(jt),clearTimeout(ce),ft(new Error("invalid_response"))}}},R.handlers.add(Ae),N.port1.addEventListener("message",Ae.onMessage),R.target.postMessage({eventType:p,eventId:Vt,data:_},[N.port2])}).finally(()=>{Ae&&R.removeMessageHandler(Ae)})})()}}function fr(){return window}function an(){return typeof fr().WorkerGlobalScope<"u"&&"function"==typeof fr().importScripts}function af(){return(af=(0,u.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const lf="firebaseLocalStorageDb",bo="firebaseLocalStorage",mu="fbase_key";class _u{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function vu(I,p){return I.transaction([bo],p?"readwrite":"readonly").objectStore(bo)}function $d(){const I=indexedDB.open(lf,1);return new Promise((p,_)=>{I.addEventListener("error",()=>{_(I.error)}),I.addEventListener("upgradeneeded",()=>{const E=I.result;try{E.createObjectStore(bo,{keyPath:mu})}catch(R){_(R)}}),I.addEventListener("success",(0,u.Z)(function*(){const E=I.result;E.objectStoreNames.contains(bo)?p(E):(E.close(),yield function W_(){const I=indexedDB.deleteDatabase(lf);return new _u(I).toPromise()}(),p(yield $d()))}))})}function ot(I,p,_){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(I,p,_){const E=vu(I,!0).put({[mu]:p,value:_});return new _u(E).toPromise()})).apply(this,arguments)}function yu(){return(yu=(0,u.Z)(function*(I,p){const _=vu(I,!1).get(p),E=yield new _u(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function li(I,p){const _=vu(I,!0).delete(p);return new _u(_).toPromise()}const ja=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield $d()),_.db})()}_withRetries(_){var E=this;return(0,u.Z)(function*(){let R=0;for(;;)try{const N=yield E._openDb();return yield _(N)}catch(N){if(R++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return an()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Ud._getInstance(function ai(){return an()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,u.Z)(function*(R,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(R,N){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,u.Z)(function*(R,N){return["keyChanged"]});return function(R,N){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var E,R;if(_.activeServiceWorker=yield function sf(){return af.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new G_(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);N&&null!==(E=N[0])&&void 0!==E&&E.fulfilled&&null!==(R=N[0])&&void 0!==R&&R.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,u.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function gu(){var I;return(null===(I=null==navigator?void 0:navigator.serviceWorker)||void 0===I?void 0:I.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield $d();return yield ot(_,wi,"1"),yield li(_,wi),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,u.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var R=this;return(0,u.Z)(function*(){return R._withPendingWrite((0,u.Z)(function*(){return yield R._withRetries(N=>ot(N,_,E)),R.localCache[_]=E,R.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,u.Z)(function*(){const R=yield E._withRetries(N=>function eo(I,p){return yu.apply(this,arguments)}(N,_));return E.localCache[_]=R,R})()}_remove(_){var E=this;return(0,u.Z)(function*(){return E._withPendingWrite((0,u.Z)(function*(){return yield E._withRetries(R=>li(R,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const E=yield _._withRetries(ce=>{const Ae=vu(ce,!1).getAll();return new _u(Ae).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const R=[],N=new Set;for(const{fbase_key:ce,value:Ae}of E)N.add(ce),JSON.stringify(_.localCache[ce])!==JSON.stringify(Ae)&&(_.notifyListeners(ce,Ae),R.push(ce));for(const ce of Object.keys(_.localCache))_.localCache[ce]&&!N.has(ce)&&(_.notifyListeners(ce,null),R.push(ce));return R})()}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const N of Array.from(R))N(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),Ss=1e12;class cf{constructor(p){this.auth=p,this.counter=Ss,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new Ha(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||Ss;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Ss))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,u.Z)(function*(){var E;return null===(E=_._widgets.get(p||Ss))||void 0===E||E.execute(),""})()}}class Ha{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof p?document.getElementById(p):p;W(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function aa(I){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<I;E++)p.push(_.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const uf=Xi("rcb"),df=new Ke(3e4,6e4);class q_{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=fr().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return W(function wu(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&Kr(fr().grecaptcha)?Promise.resolve(fr().grecaptcha):new Promise((E,R)=>{const N=fr().setTimeout(()=>{R(ae(p,"network-request-failed"))},df.get());fr()[uf]=()=>{fr().clearTimeout(N),delete fr()[uf];const Ae=fr().grecaptcha;if(!Ae||!Kr(Ae))return void R(ae(p,"internal-error"));const ct=Ae.render;Ae.render=(ft,Vt)=>{const jt=ct(ft,Vt);return this.counter++,jt},this.hostLanguage=_,E(Ae)},nr(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:uf,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),R(ae(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=fr().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hf{load(p){return(0,u.Z)(function*(){return new cf(p)})()}clearedOneInstance(){}}const bu="recaptcha",ff={theme:"light",type:"image"};class pf{constructor(p,_=Object.assign({},ff),E){this.parameters=_,this.type=bu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hr(E),this.isInvisible="invisible"===this.parameters.size,W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof p?document.getElementById(p):p;W(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hf:new q_,this.validateStartingState()}verify(){var p=this;return(0,u.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(N=>{const ce=Ae=>{Ae&&(p.tokenChangeListeners.delete(ce),N(Ae))};p.tokenChangeListeners.add(ce),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=fr()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,u.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,u.Z)(function*(){W(Ge()&&!an(),p.auth,"internal-error"),yield function yg(){let I=null;return new Promise(p=>{"complete"!==document.readyState?(I=()=>p(),window.addEventListener("load",I)):p()}).catch(p=>{throw I&&window.removeEventListener("load",I),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Mr(I){return Br.apply(this,arguments)}(p.auth);W(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ci{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ii._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function wl(){return(wl=(0,u.Z)(function*(I,p,_){const E=hr(I),R=yield vc(E,p,(0,F.m9)(_));return new ci(R,N=>Dd(E,N))})).apply(this,arguments)}function Wt(){return(Wt=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I);yield gl(!1,E,"phone");const R=yield vc(E.auth,p,(0,F.m9)(_));return new ci(R,N=>B_(E,N))})).apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I),R=yield vc(E.auth,p,(0,F.m9)(_));return new ci(R,N=>U_(E,N))})).apply(this,arguments)}function vc(I,p,_){return Di.apply(this,arguments)}function Di(){return Di=(0,u.Z)(function*(I,p,_){var E;const R=yield _.verify();try{let N;if(W("string"==typeof R,I,"argument-error"),W(_.type===bu,I,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const ce=N.session;if("phoneNumber"in N)return W("enroll"===ce.type,I,"internal-error"),(yield function _c(I,p){return Oe(I,"POST","/v2/accounts/mfaEnrollment:start",ke(I,p))}(I,{idToken:ce.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{W("signin"===ce.type,I,"internal-error");const Ae=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return W(Ae,I,"missing-multi-factor-info"),(yield function Vd(I,p){return Oe(I,"POST","/v2/accounts/mfaSignIn:start",ke(I,p))}(I,{mfaPendingCredential:ce.credential,mfaEnrollmentId:Ae,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ce}=yield function vr(I,p){return Ji.apply(this,arguments)}(I,{phoneNumber:N.phoneNumber,recaptchaToken:R});return ce}}finally{_._reset()}}),Di.apply(this,arguments)}function sr(){return(sr=(0,u.Z)(function*(I,p){yield as((0,F.m9)(I),p)})).apply(this,arguments)}let Ga=(()=>{class I{constructor(_){this.providerId=I.PROVIDER_ID,this.auth=hr(_)}verifyPhoneNumber(_,E){return vc(this.auth,_,(0,F.m9)(E))}static credential(_,E){return Ii._fromVerification(_,E)}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:R}=_;return E&&R?Ii._fromTokenResponse(E,R):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function to(I,p){return p?Et(p):(W(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Kt extends J{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ls(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Ls(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Ls(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function gf(I){return Td(I.auth,new Kt(I),I.bypassAuthState)}function Hd(I){const{auth:p,user:_}=I;return W(_,p,"internal-error"),F_(_,new Kt(I),I.bypassAuthState)}function za(I){return Us.apply(this,arguments)}function Us(){return(Us=(0,u.Z)(function*(I){const{auth:p,user:_}=I;return W(_,p,"internal-error"),as(_,new Kt(I),I.bypassAuthState)})).apply(this,arguments)}class no{constructor(p,_,E,R,N=!1){this.auth=p,this.resolver=E,this.user=R,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,u.Z)(function*(E,R){p.pendingPromise={resolve:E,reject:R};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,R){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,u.Z)(function*(){const{urlResponse:E,sessionId:R,postBody:N,tenantId:ce,error:Ae,type:ct}=p;if(Ae)return void _.reject(Ae);const ft={auth:_.auth,requestUri:E,sessionId:R,tenantId:ce||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(ct)(ft))}catch(Vt){_.reject(Vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return gf;case"linkViaPopup":case"linkViaRedirect":return za;case"reauthViaPopup":case"reauthViaRedirect":return Hd;default:_e(this.auth,"internal-error")}}resolve(p){Pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const or=new Ke(2e3,1e4);function la(){return(la=(0,u.Z)(function*(I,p,_){const E=hr(I);se(I,p,ni);const R=to(E,_);return new qa(E,"signInViaPopup",p,R).executeNotNull()})).apply(this,arguments)}function Cl(){return(Cl=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I);se(E.auth,p,ni);const R=to(E.auth,_);return new qa(E.auth,"reauthViaPopup",p,R,E).executeNotNull()})).apply(this,arguments)}function Wa(){return(Wa=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I);se(E.auth,p,ni);const R=to(E.auth,_);return new qa(E.auth,"linkViaPopup",p,R,E).executeNotNull()})).apply(this,arguments)}let qa=(()=>{class I extends no{constructor(_,E,R,N,ce){super(_,E,N,ce),this.provider=R,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const E=yield _.execute();return W(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,u.Z)(function*(){Pe(1===_.filter.length,"Popup operations only handle one event");const E=pu();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(ae(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,R;this.pollId=null!==(R=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ae(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,or.get())};_()}}return I.currentPopupAction=null,I})();const ca="pendingRedirect",Co=new Map;class yc extends no{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,u.Z)(function*(){let E=Co.get(_.auth._key());if(!E){try{const N=(yield function Gd(I,p){return Du.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(N)}catch(R){E=()=>Promise.reject(R)}Co.set(_.auth._key(),E)}return _.bypassAuthState||Co.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,u.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const R=yield E.auth._redirectUserForId(p.eventId);if(R)return E.user=R,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Du(){return(Du=(0,u.Z)(function*(I,p){const _=Tl(p),E=_f(I);if(!(yield E._isAvailable()))return!1;const R="true"===(yield E._get(_));return yield E._remove(_),R})).apply(this,arguments)}function Ic(I,p){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,u.Z)(function*(I,p){return _f(I)._set(Tl(p),"true")})).apply(this,arguments)}function Si(I,p){Co.set(I._key(),p)}function _f(I){return Et(I._redirectPersistence)}function Tl(I){return te(ca,I.config.apiKey,I.name)}function $r(I,p,_){return function wr(I,p,_){return $s.apply(this,arguments)}(I,p,_)}function $s(){return($s=(0,u.Z)(function*(I,p,_){const E=hr(I);se(I,p,ni),yield E._initializationPromise;const R=to(E,_);return yield Ic(R,E),R._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Dl(I,p,_){return function Vi(I,p,_){return Ai.apply(this,arguments)}(I,p,_)}function Ai(){return(Ai=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I);se(E.auth,p,ni),yield E.auth._initializationPromise;const R=to(E.auth,_);yield Ic(R,E.auth);const N=yield wc(E);return R._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function Ec(I,p,_){return function vf(I,p,_){return zd.apply(this,arguments)}(I,p,_)}function zd(){return(zd=(0,u.Z)(function*(I,p,_){const E=(0,F.m9)(I);se(E.auth,p,ni),yield E.auth._initializationPromise;const R=to(E.auth,_);yield gl(!1,E,p.providerId),yield Ic(R,E.auth);const N=yield wc(E);return R._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function ua(){return(ua=(0,u.Z)(function*(I,p){return yield hr(I)._initializationPromise,br(I,p,!1)})).apply(this,arguments)}function br(I,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,u.Z)(function*(I,p,_=!1){const E=hr(I),R=to(E,p),ce=yield new yc(E,R,_).execute();return ce&&!_&&(delete ce.user._redirectEventId,yield E._persistUserIfCurrent(ce.user),yield E._setRedirectUser(null,p)),ce})).apply(this,arguments)}function wc(I){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,u.Z)(function*(I){const p=pu(`${I.uid}:::`);return I._redirectEventId=p,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),p})).apply(this,arguments)}class Su{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Cc(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ka(I);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!Ka(p)){const R=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(ae(this.auth,R))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bc(p))}saveEventToCache(p){this.cachedEventUids.add(bc(p)),this.lastProcessedEventTime=Date.now()}}function bc(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(p=>p).join("-")}function Ka({type:I,error:p}){return"unknown"===I&&"auth/no-auth-event"===(null==p?void 0:p.code)}function yf(I){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(I,p={}){return Oe(I,"GET","/v1/projects",p)})).apply(this,arguments)}const Za=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xa=/^https?/;function $o(){return($o=(0,u.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:p}=yield yf(I);for(const _ of p)try{if(Wd(_))return}catch{}_e(I,"unauthorized-domain")})).apply(this,arguments)}function Wd(I){const p=Ue(),{protocol:_,hostname:E}=new URL(p);if(I.startsWith("chrome-extension://")){const ce=new URL(I);return""===ce.hostname&&""===E?"chrome-extension:"===_&&I.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&ce.hostname===E}if(!Xa.test(_))return!1;if(Za.test(I))return E===I;const R=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(E)}const ds=new Ke(3e4,6e4);function qd(){const I=fr().___jsl;if(null!=I&&I.H)for(const p of Object.keys(I.H))if(I.H[p].r=I.H[p].r||[],I.H[p].L=I.H[p].L||[],I.H[p].r=[...I.H[p].L],I.CP)for(let _=0;_<I.CP.length;_++)I.CP[_]=null}let ro=null;const Au=new Ke(5e3,15e3),Eg="__/auth/iframe",Yd="emulator/auth/iframe",Ru={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Al=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rl(I){const p=I.config;W(p.authDomain,I,"auth-domain-config-required");const _=p.emulator?H(p,Yd):`https://${I.config.authDomain}/${Eg}`,E={apiKey:p.apiKey,appName:I.name,v:de.SDK_VERSION},R=Al.get(I.config.apiHost);R&&(E.eid=R);const N=I._getFrameworks();return N.length&&(E.fw=N.join(",")),`${_}?${(0,F.xO)(E).slice(1)}`}function D(){return D=(0,u.Z)(function*(I){const p=yield function da(I){return ro=ro||function Cr(I){return new Promise((p,_)=>{var E,R,N;function ce(){qd(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{qd(),_(ae(I,"network-request-failed"))},timeout:ds.get()})}if(null!==(R=null===(E=fr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==R&&R.Iframe)p(gapi.iframes.getContext());else{if(null===(N=fr().gapi)||void 0===N||!N.load){const Ae=Xi("iframefcb");return fr()[Ae]=()=>{gapi.load?ce():_(ae(I,"network-request-failed"))},nr(`https://apis.google.com/js/api.js?onload=${Ae}`).catch(ct=>_(ct))}ce()}}).catch(p=>{throw ro=null,p})}(I),ro}(I),_=fr().gapi;return W(_,I,"internal-error"),p.open({where:document.body,url:Rl(I),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ru,dontclear:!0},E=>new Promise(function(){var R=(0,u.Z)(function*(N,ce){yield E.restyle({setHideOnLeave:!1});const Ae=ae(I,"network-request-failed"),ct=fr().setTimeout(()=>{ce(Ae)},Au.get());function ft(){fr().clearTimeout(ct),N(E)}E.ping(ft).then(ft,()=>{ce(Ae)})});return function(N,ce){return R.apply(this,arguments)}}()))}),D.apply(this,arguments)}const x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dt{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const yn="__/auth/handler",gn="emulator/auth/handler",kr=encodeURIComponent("fac");function Vr(I,p,_,E,R,N){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(I,p,_,E,R,N){W(I.config.authDomain,I,"auth-domain-config-required"),W(I.config.apiKey,I,"invalid-api-key");const ce={apiKey:I.config.apiKey,appName:I.name,authType:_,redirectUrl:E,v:de.SDK_VERSION,eventId:R};if(p instanceof ni){p.setDefaultLanguage(I.languageCode),ce.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(ce.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Vt,jt]of Object.entries(N||{}))ce[Vt]=jt}if(p instanceof No){const Vt=p.getScopes().filter(jt=>""!==jt);Vt.length>0&&(ce.scopes=Vt.join(","))}I.tenantId&&(ce.tid=I.tenantId);const Ae=ce;for(const Vt of Object.keys(Ae))void 0===Ae[Vt]&&delete Ae[Vt];const ct=yield I._getAppCheckToken(),ft=ct?`#${kr}=${encodeURIComponent(ct)}`:"";return`${function Pr({config:I}){return I.emulator?H(I,gn):`https://${I.authDomain}/${yn}`}(I)}?${(0,F.xO)(Ae).slice(1)}${ft}`})).apply(this,arguments)}const jo="webStorageSupport",To=class ui{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cs,this._completeRedirectFn=br,this._overrideRedirectResult=Si}_openPopup(p,_,E,R){var N=this;return(0,u.Z)(function*(){var ce;Pe(null===(ce=N.eventManagers[p._key()])||void 0===ce?void 0:ce.manager,"_initialize() not called before _openPopup()");const Ae=yield Vr(p,_,E,Ue(),R);return function vt(I,p,_,E=500,R=600){const N=Math.max((window.screen.availHeight-R)/2,0).toString(),ce=Math.max((window.screen.availWidth-E)/2,0).toString();let Ae="";const ct=Object.assign(Object.assign({},x),{width:E.toString(),height:R.toString(),top:N,left:ce}),ft=(0,F.z$)().toLowerCase();_&&(Ae=St(ft)?"_blank":_),et(ft)&&(p=p||"http://localhost",ct.scrollbars="yes");const Vt=Object.entries(ct).reduce((Tr,[so,Ol])=>`${Tr}${so}=${Ol},`,"");if(function xr(I=(0,F.z$)()){var p;return mr(I)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ft)&&"_self"!==Ae)return function Ht(I,p){const _=document.createElement("a");_.href=I,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",Ae),new Dt(null);const jt=window.open(p||"",Ae,Vt);W(jt,I,"popup-blocked");try{jt.focus()}catch{}return new Dt(jt)}(p,Ae,pu())})()}_openRedirect(p,_,E,R){var N=this;return(0,u.Z)(function*(){return yield N._originValidation(p),function z_(I){fr().location.href=I}(yield Vr(p,_,E,Ue(),R)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:R,promise:N}=this.eventManagers[_];return R?Promise.resolve(R):(Pe(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,u.Z)(function*(){const E=yield function b(I){return D.apply(this,arguments)}(p),R=new Su(p);return E.register("authEvent",N=>(W(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:R.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:R},_.iframes[p._key()]=E,R})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(jo,{type:jo},R=>{var N;const ce=null===(N=null==R?void 0:R[0])||void 0===N?void 0:N[jo];void 0!==ce&&_(!!ce),_e(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Sl(I){return $o.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return go()||$e()||mr()}};class hs{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return ve("unexpected MultiFactorSessionType")}}}class xl extends hs{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new xl(p)}_finalizeEnroll(p,_,E){return function fg(I,p){return Oe(I,"POST","/v2/accounts/mfaEnrollment:finalize",ke(I,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function vg(I,p){return Oe(I,"POST","/v2/accounts/mfaSignIn:finalize",ke(I,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Y_=(()=>{class I{constructor(){}static assertion(_){return xl._fromCredential(_)}}return I.FACTOR_ID="phone",I})();var Z_="@firebase/auth";class io{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{p((null==E?void 0:E.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ml(){return window}(0,F.Pz)("authIdTokenMaxAge"),function xu(I){(0,de._registerComponent)(new Q.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),R=p.getProvider("heartbeat"),N=p.getProvider("app-check-internal"),{apiKey:ce,authDomain:Ae}=E.options;W(ce&&!ce.includes(":"),"invalid-api-key",{appName:E.name});const ct={apiKey:ce,authDomain:Ae,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fi(I)},ft=new ta(E,R,N,ct);return function Sa(I,p){const _=(null==p?void 0:p.persistence)||[],E=(Array.isArray(_)?_:[_]).map(Et);null!=p&&p.errorMap&&I._updateErrorMap(p.errorMap),I._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(ft,_),ft},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new Q.wA("auth-internal",p=>{const _=hr(p.getProvider("auth").getImmediate());return new io(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(Z_,"0.23.2",function Cg(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,de.registerVersion)(Z_,"0.23.2","esm2017")}("Browser");function Ja(){return Ja=(0,u.Z)(function*(I,p,_){var E;const{BuildInfo:R}=Ml();Pe(p.sessionId,"AuthEvent did not contain a session ID");const N=yield function J_(I){return Zd.apply(this,arguments)}(p.sessionId),ce={};return mr()?ce.ibi=R.packageName:en()?ce.apn=R.packageName:_e(I,"operation-not-supported-in-this-environment"),R.displayName&&(ce.appDisplayName=R.displayName),ce.sessionId=N,Vr(I,_,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,ce)}),Ja.apply(this,arguments)}function Ef(){return(Ef=(0,u.Z)(function*(I){const{BuildInfo:p}=Ml(),_={};mr()?_.iosBundleId=p.packageName:en()?_.androidPackageName=p.packageName:_e(I,"operation-not-supported-in-this-environment"),yield yf(I,_)})).apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(I,p,_){const{cordova:E}=Ml();let R=()=>{};try{yield new Promise((N,ce)=>{let Ae=null;function ct(){var jt;N();const Tr=null===(jt=E.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof Tr&&Tr(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function ft(){Ae||(Ae=window.setTimeout(()=>{ce(ae(I,"redirect-cancelled-by-user"))},2e3))}function Vt(){"visible"===(null==document?void 0:document.visibilityState)&&ft()}p.addPassiveListener(ct),document.addEventListener("resume",ft,!1),en()&&document.addEventListener("visibilitychange",Vt,!1),R=()=>{p.removePassiveListener(ct),document.removeEventListener("resume",ft,!1),document.removeEventListener("visibilitychange",Vt,!1),Ae&&window.clearTimeout(Ae)}})}finally{R()}})).apply(this,arguments)}function Zd(){return(Zd=(0,u.Z)(function*(I){const p=function Xd(I){if(Pe(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const p=new ArrayBuffer(I.length),_=new Uint8Array(p);for(let E=0;E<I.length;E++)_[E]=I.charCodeAt(E);return _}(I),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class uI extends Su{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,u.Z)(function*(){yield p.initPromise})()}}function Dc(I){return wf.apply(this,arguments)}function wf(){return(wf=(0,u.Z)(function*(I){const p=yield Sc()._get(tl(I));return p&&(yield Sc()._remove(tl(I))),p})).apply(this,arguments)}function Ho(){const I=[];for(let _=0;_<20;_++){const E=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return I.join("")}function Sc(){return Et(Il)}function tl(I){return te("authEvent",I.config.apiKey,I.name)}function Ac(I){if(null==I||!I.includes("?"))return{};const[p,..._]=I.split("?");return(0,F.zd)(_.join("?"))}const dI=class ev{constructor(){this._redirectPersistence=cs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=br,this._overrideRedirectResult=Si}_initialize(p){var _=this;return(0,u.Z)(function*(){const E=p._key();let R=_.eventManagers.get(E);return R||(R=new uI(p),_.eventManagers.set(E,R),_.attachCallbackListeners(p,R)),R})()}_openPopup(p){_e(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,E,R){var N=this;return(0,u.Z)(function*(){!function cI(I){var p,_,E,R,N,ce,Ae,ct,ft,Vt;const jt=Ml();W("function"==typeof(null===(p=null==jt?void 0:jt.universalLinks)||void 0===p?void 0:p.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),W(typeof(null===(_=null==jt?void 0:jt.BuildInfo)||void 0===_?void 0:_.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),W("function"==typeof(null===(N=null===(R=null===(E=null==jt?void 0:jt.cordova)||void 0===E?void 0:E.plugins)||void 0===R?void 0:R.browsertab)||void 0===N?void 0:N.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(ct=null===(Ae=null===(ce=null==jt?void 0:jt.cordova)||void 0===ce?void 0:ce.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===ct?void 0:ct.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(Vt=null===(ft=null==jt?void 0:jt.cordova)||void 0===ft?void 0:ft.InAppBrowser)||void 0===Vt?void 0:Vt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const ce=yield N._initialize(p);yield ce.initialized(),ce.resetRedirect(),function mf(){Co.clear()}(),yield N._originValidation(p);const Ae=function Dg(I,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:Ho(),postBody:null,tenantId:I.tenantId,error:ae(I,"no-auth-event")}}(p,E,R);yield function Pu(I,p){return Sc()._set(tl(I),p)}(p,Ae);const ct=yield function If(I,p,_){return Ja.apply(this,arguments)}(p,Ae,_),ft=yield function Kd(I){const{cordova:p}=Ml();return new Promise(_=>{p.plugins.browsertab.isAvailable(E=>{let R=null;E?p.plugins.browsertab.openUrl(I):R=p.InAppBrowser.open(I,function Pn(I=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),_(R)})})}(ct);return function lI(I,p,_){return el.apply(this,arguments)}(p,ce,ft)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Mu(I){return Ef.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:E,handleOpenURL:R,BuildInfo:N}=Ml(),ce=setTimeout((0,u.Z)(function*(){yield Dc(p),_.onEvent(Sg())}),500),Ae=function(){var Vt=(0,u.Z)(function*(jt){clearTimeout(ce);const Tr=yield Dc(p);let so=null;Tr&&null!=jt&&jt.url&&(so=function bf(I,p){var _,E;const R=function Ou(I){const p=Ac(I),_=p.link?decodeURIComponent(p.link):void 0,E=Ac(_).link,R=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Ac(R).link||R||E||_||I}(p);if(R.includes("/__/auth/callback")){const N=Ac(R),ce=N.firebaseError?function Qd(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,Ae=null===(E=null===(_=null==ce?void 0:ce.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],ct=Ae?ae(Ae):null;return ct?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:ct,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:R,postBody:null}}return null}(Tr,jt.url)),_.onEvent(so||Sg())});return function(Tr){return Vt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Ae);const ct=R,ft=`${N.packageName.toLowerCase()}://`;Ml().handleOpenURL=function(){var Vt=(0,u.Z)(function*(jt){if(jt.toLowerCase().startsWith(ft)&&Ae({url:jt}),"function"==typeof ct)try{ct(jt)}catch(Tr){console.error(Tr)}});return function(jt){return Vt.apply(this,arguments)}}()}};function Sg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ae("no-auth-event")}}function eh(){var I;return(null===(I=null==self?void 0:self.location)||void 0===I?void 0:I.protocol)||null}function fI(I=(0,F.z$)()){return!("file:"!==eh()&&"ionic:"!==eh()&&"capacitor:"!==eh()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function gI(){try{const I=self.localStorage,p=pu();if(I)return I.setItem(p,"1"),I.removeItem(p),!function Ox(I=(0,F.z$)()){return function th(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function nv(I=(0,F.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,F.hl)()}catch{return kl()&&(0,F.hl)()}return!1}function kl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rg(){return(function Ag(){return"http:"===eh()||"https:"===eh()}()||(0,F.ru)()||fI())&&!function pI(){return(0,F.b$)()||(0,F.UG)()}()&&gI()&&!kl()}function Cf(){return fI()&&typeof document<"u"}function js(){return(js=(0,u.Z)(function*(){return!!Cf()&&new Promise(I=>{const p=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),I(!0)})})})).apply(this,arguments)}const xs={LOCAL:"local",NONE:"none",SESSION:"session"},xc=W,Mc="persistence";function nh(I){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,u.Z)(function*(I){yield I._initializationPromise;const p=Fu(),_=te(Mc,I.config.apiKey,I.name);p&&p.setItem(_,I._getPersistence())})).apply(this,arguments)}function Fu(){var I;try{return(null===(I=function Rc(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const xg=W;class nl{constructor(){this.browserResolver=Et(To),this.cordovaResolver=Et(dI),this.underlyingResolver=null,this._redirectPersistence=cs,this._completeRedirectFn=br,this._overrideRedirectResult=Si}_initialize(p){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,E,R){var N=this;return(0,u.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,_,E,R)})()}_openRedirect(p,_,E,R){var N=this;return(0,u.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,_,E,R)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Cf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,u.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Nu(){return js.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Tf(I){return I.unwrap()}function Sf(I){return rh(I)}function rh(I){const{_tokenResponse:p}=I instanceof F.ZR?I.customData:I;if(!p)return null;if(!(I instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Ga.credentialFromResult(I);const _=p.providerId;if(!_||_===ge.PASSWORD)return null;let E;switch(_){case ge.GOOGLE:E=Fs;break;case ge.FACEBOOK:E=na;break;case ge.GITHUB:E=ac;break;case ge.TWITTER:E=au;break;default:const{oauthIdToken:R,oauthAccessToken:N,oauthTokenSecret:ce,pendingToken:Ae,nonce:ct}=p;return N||ce||R||Ae?Ae?_.startsWith("saml.")?wn._create(_,Ae):tn._fromParams({providerId:_,signInMethod:_,pendingToken:Ae,idToken:R,accessToken:N}):new Lo(_).credential({idToken:R,accessToken:N,rawNonce:ct}):null}return I instanceof F.ZR?E.credentialFromError(I):E.credentialFromResult(I)}function Ms(I,p){return p.catch(_=>{throw _ instanceof F.ZR&&function mI(I,p){var _;const E=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new _I(I,function tf(I,p){var _;const E=(0,F.m9)(I),R=p;return W(p.customData.operationType,E,"argument-error"),W(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Ba._fromError(E,R)}(I,p));else if(E){const R=rh(p),N=p;R&&(N.credential=R,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(I,_),_}).then(_=>{const R=_.user;return{operationType:_.operationType,credential:Sf(_),additionalUserInfo:cg(_),user:jr.getOrCreate(R)}})}function Af(I,p){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,u.Z)(function*(I,p){const _=yield p;return{verificationId:_.verificationId,confirm:E=>Ms(I,_.confirm(E))}})).apply(this,arguments)}class _I{constructor(p,_){this.resolver=_,this.auth=function Df(I){return I.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Ms(Tf(this.auth),this.resolver.resolveSignIn(p))}}class jr{constructor(p){this._delegate=p,this.multiFactor=function $a(I){const p=(0,F.m9)(I);return Ua.has(p)||Ua.set(p,jn._fromUser(p)),Ua.get(p)}(p)}static getOrCreate(p){return jr.USER_MAP.has(p)||jr.USER_MAP.set(p,new jr(p)),jr.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,u.Z)(function*(){return Ms(_.auth,B_(_._delegate,p))})()}linkWithPhoneNumber(p,_){var E=this;return(0,u.Z)(function*(){return Af(E.auth,function er(I,p,_){return Wt.apply(this,arguments)}(E._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,u.Z)(function*(){return Ms(_.auth,function Ig(I,p,_){return Wa.apply(this,arguments)}(_._delegate,p,nl))})()}linkWithRedirect(p){var _=this;return(0,u.Z)(function*(){return yield nh(hr(_.auth)),Ec(_._delegate,p,nl)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,u.Z)(function*(){return Ms(_.auth,U_(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return Af(this.auth,function Ti(I,p,_){return Cu.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Ms(this.auth,function Tu(I,p,_){return Cl.apply(this,arguments)}(this._delegate,p,nl))}reauthenticateWithRedirect(p){var _=this;return(0,u.Z)(function*(){return yield nh(hr(_.auth)),Dl(_._delegate,p,nl)})()}sendEmailVerification(p){return function sa(I,p){return fc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,u.Z)(function*(){return yield function ka(I,p){return Ds.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function Jh(I,p){return lg((0,F.m9)(I),p,null)}(this._delegate,p)}updatePassword(p){return function du(I,p){return lg((0,F.m9)(I),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Bo(I,p){return sr.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function V_(I,p){return Pd.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Xh(I,p,_){return uu.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jr.USER_MAP=new WeakMap;const rl=W;let Rf=(()=>{class I{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=_.options;rl(R,"invalid-api-key",{appName:_.name}),rl(R,"invalid-api-key",{appName:_.name});const N=typeof window<"u"?nl:void 0;this._delegate=E.initialize({options:{persistence:fs(R,_.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Se),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function Zr(I,p,_){const E=hr(I);W(E._canInitEmulator,E,"emulator-config-failed"),W(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const R=!(null==_||!_.disableWarnings),N=Io(p),{host:ce,port:Ae}=function L(I){const p=Io(I),_=/(\/\/)?([^?#/]+)/.exec(I.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(E);if(R){const N=R[1];return{host:N,port:k(E.substr(N.length+1))}}{const[N,ce]=E.split(":");return{host:N,port:k(ce)}}}(p);E.config.emulator={url:`${N}//${ce}${null===Ae?"":`:${Ae}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ce,port:Ae,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function z(){function I(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,_,E)}applyActionCode(_){return function Yh(I,p){return Bs.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Xr(this._delegate,_)}confirmPasswordReset(_,E){return function Pa(I,p,_){return Eo.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var R=this;return(0,u.Z)(function*(){return Ms(R._delegate,function Rd(I,p,_){return uc.apply(this,arguments)}(R._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function hc(I,p){return La.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Zh(I,p){const _=yr.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){rl(Rg(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function Ri(I,p){return ua.apply(this,arguments)}(_._delegate,nl);return E?Ms(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function xC(I,p){hr(I)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,E,R){const{next:N,error:ce,complete:Ae}=ih(_,E,R);return this._delegate.onAuthStateChanged(N,ce,Ae)}onIdTokenChanged(_,E,R){const{next:N,error:ce,complete:Ae}=ih(_,E,R);return this._delegate.onIdTokenChanged(N,ce,Ae)}sendSignInLinkToEmail(_,E){return function _l(I,p,_){return dc.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function iI(I,p,_){return cc.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,u.Z)(function*(){let R;switch(function ha(I,p){xc(Object.values(xs).includes(p),I,"invalid-persistence-type"),(0,F.b$)()?xc(p!==xs.SESSION,I,"unsupported-persistence-type"):(0,F.UG)()?xc(p===xs.NONE,I,"unsupported-persistence-type"):kl()?xc(p===xs.NONE||p===xs.LOCAL&&(0,F.hl)(),I,"unsupported-persistence-type"):xc(p===xs.NONE||gI(),I,"unsupported-persistence-type")}(E._delegate,_),_){case xs.SESSION:R=cs;break;case xs.LOCAL:R=(yield Et(ja)._isAvailable())?ja:Il;break;case xs.NONE:R=dn;break;default:return _e("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ms(this._delegate,function Ei(I){return sg.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ms(this._delegate,Dd(this._delegate,_))}signInWithCustomToken(_){return Ms(this._delegate,function qh(I,p){return Fo.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Ms(this._delegate,function Kh(I,p,_){return Dd((0,F.m9)(I),xa.credential(p,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Ms(this._delegate,function oi(I,p,_){return xd.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return Af(this._delegate,function As(I,p,_){return wl.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,u.Z)(function*(){return rl(Rg(),E._delegate,"operation-not-supported-in-this-environment"),Ms(E._delegate,function bl(I,p,_){return la.apply(this,arguments)}(E._delegate,_,nl))})()}signInWithRedirect(_){var E=this;return(0,u.Z)(function*(){return rl(Rg(),E._delegate,"operation-not-supported-in-this-environment"),yield nh(E._delegate),$r(E._delegate,_,nl)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function ls(I,p){return Na.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=xs,I})();function ih(I,p,_){let E=I;"function"!=typeof I&&({next:E,error:p,complete:_}=I);const R=E;return{next:ce=>R(ce&&jr.getOrCreate(ce)),error:p,complete:_}}function fs(I,p){const _=function kc(I,p){const _=Fu();if(!_)return[];const E=te(Mc,I,p);switch(_.getItem(E)){case xs.NONE:return[dn];case xs.LOCAL:return[ja,cs];case xs.SESSION:return[cs];default:return[]}}(I,p);if(typeof self<"u"&&!_.includes(ja)&&_.push(ja),typeof window<"u")for(const E of[Il,cs])_.includes(E)||_.push(E);return _.includes(dn)||_.push(dn),_}class Pl{constructor(){this.providerId="phone",this._delegate=new Ga(Tf(le.Z.auth()))}static credential(p,_){return Ga.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Pl.PHONE_SIGN_IN_METHOD=Ga.PHONE_SIGN_IN_METHOD,Pl.PROVIDER_ID=Ga.PROVIDER_ID;const Mg=W;class rv{constructor(p,_,E=le.Z.app()){var R;Mg(null===(R=E.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new pf(p,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vI(I){I.INTERNAL.registerComponent(new Q.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Rf(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xa,FacebookAuthProvider:na,GithubAuthProvider:ac,GoogleAuthProvider:Fs,OAuthProvider:Lo,SAMLAuthProvider:fl,PhoneAuthProvider:Pl,PhoneMultiFactorGenerator:Y_,RecaptchaVerifier:rv,TwitterAuthProvider:au,Auth:Rf,AuthCredential:J,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.4.2")}(le.Z)},4303:(wt,Le,P)=>{"use strict";P.r(Le),P.d(Le,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>je,_DEFAULT_ENTRY_NAME:()=>H,_addComponent:()=>ke,_addOrOverwriteComponent:()=>Oe,_apps:()=>ie,_clearComponents:()=>It,_components:()=>we,_getProvider:()=>nt,_registerComponent:()=>lt,_removeServiceInstance:()=>_t,deleteApp:()=>_n,getApp:()=>Mt,getApps:()=>mn,initializeApp:()=>ut,onLog:()=>In,registerVersion:()=>cn,setLogLevel:()=>Xn});var u=P(5861),le=P(4537),F=P(7879),de=P(9058),me=P(1878);class ye{constructor(he){this.container=he}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function Q(Qe){const he=Qe.getComponent();return"VERSION"===(null==he?void 0:he.type)}(Ze)){const gt=Ze.getImmediate();return`${gt.library}/${gt.version}`}return null}).filter(Ze=>Ze).join(" ")}}const De="@firebase/app",V=new F.Yd("@firebase/app"),H="[DEFAULT]",Y={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ie=new Map,we=new Map;function ke(Qe,he){try{Qe.container.addComponent(he)}catch(Ze){V.debug(`Component ${he.name} failed to register with FirebaseApp ${Qe.name}`,Ze)}}function Oe(Qe,he){Qe.container.addOrOverwriteComponent(he)}function lt(Qe){const he=Qe.name;if(we.has(he))return V.debug(`There were multiple attempts to register component ${he}.`),!1;we.set(he,Qe);for(const Ze of ie.values())ke(Ze,Qe);return!0}function nt(Qe,he){const Ze=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),Qe.container.getProvider(he)}function _t(Qe,he,Ze=H){nt(Qe,he).clearInstance(Ze)}function It(){we.clear()}const He=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class We{constructor(he,Ze,gt){this._isDeleted=!1,this._options=Object.assign({},he),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=gt,this.container.addComponent(new le.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this.checkDestroyed(),this._automaticDataCollectionEnabled=he}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(he){this._isDeleted=he}checkDestroyed(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}const je="10.4.0";function ut(Qe,he={}){let Ze=Qe;"object"!=typeof he&&(he={name:he});const gt=Object.assign({name:H,automaticDataCollectionEnabled:!1},he),Et=gt.name;if("string"!=typeof Et||!Et)throw He.create("bad-app-name",{appName:String(Et)});if(Ze||(Ze=(0,de.aH)()),!Ze)throw He.create("no-options");const $t=ie.get(Et);if($t){if((0,de.vZ)(Ze,$t.options)&&(0,de.vZ)(gt,$t.config))return $t;throw He.create("duplicate-app",{appName:Et})}const dn=new le.H0(Et);for(const X of we.values())dn.addComponent(X);const te=new We(Ze,gt,dn);return ie.set(Et,te),te}function Mt(Qe=H){const he=ie.get(Qe);if(!he&&Qe===H&&(0,de.aH)())return ut();if(!he)throw He.create("no-app",{appName:Qe});return he}function mn(){return Array.from(ie.values())}function _n(Qe){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(Qe){const he=Qe.name;ie.has(he)&&(ie.delete(he),yield Promise.all(Qe.container.getProviders().map(Ze=>Ze.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function cn(Qe,he,Ze){var gt;let Et=null!==(gt=Y[Qe])&&void 0!==gt?gt:Qe;Ze&&(Et+=`-${Ze}`);const $t=Et.match(/\s|\//),dn=he.match(/\s|\//);if($t||dn){const te=[`Unable to register library "${Et}" with version "${he}":`];return $t&&te.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),$t&&dn&&te.push("and"),dn&&te.push(`version name "${he}" contains illegal characters (whitespace or "/")`),void V.warn(te.join(" "))}lt(new le.wA(`${Et}-version`,()=>({library:Et,version:he}),"VERSION"))}function In(Qe,he){if(null!==Qe&&"function"!=typeof Qe)throw He.create("invalid-log-argument");(0,F.Am)(Qe,he)}function Xn(Qe){(0,F.Ub)(Qe)}const Kn="firebase-heartbeat-database",qt=1,Qt="firebase-heartbeat-store";let un=null;function Fn(){return un||(un=(0,me.X3)(Kn,qt,{upgrade:(Qe,he)=>{0===he&&Qe.createObjectStore(Qt)}}).catch(Qe=>{throw He.create("idb-open",{originalErrorMessage:Qe.message})})),un}function ur(){return(ur=(0,u.Z)(function*(Qe){try{return yield(yield Fn()).transaction(Qt).objectStore(Qt).get(dr(Qe))}catch(he){if(he instanceof de.ZR)V.warn(he.message);else{const Ze=He.create("idb-get",{originalErrorMessage:null==he?void 0:he.message});V.warn(Ze.message)}}})).apply(this,arguments)}function En(Qe,he){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,u.Z)(function*(Qe,he){try{const gt=(yield Fn()).transaction(Qt,"readwrite");yield gt.objectStore(Qt).put(he,dr(Qe)),yield gt.done}catch(Ze){if(Ze instanceof de.ZR)V.warn(Ze.message);else{const gt=He.create("idb-set",{originalErrorMessage:null==Ze?void 0:Ze.message});V.warn(gt.message)}}})).apply(this,arguments)}function dr(Qe){return`${Qe.name}!${Qe.options.appId}`}class xn{constructor(he){this.container=he,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new Li(Ze),this._heartbeatsCachePromise=this._storage.read().then(gt=>(this._heartbeatsCache=gt,gt))}triggerHeartbeat(){var he=this;return(0,u.Z)(function*(){const gt=he.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=ti();if(null===he._heartbeatsCache&&(he._heartbeatsCache=yield he._heartbeatsCachePromise),he._heartbeatsCache.lastSentHeartbeatDate!==Et&&!he._heartbeatsCache.heartbeats.some($t=>$t.date===Et))return he._heartbeatsCache.heartbeats.push({date:Et,agent:gt}),he._heartbeatsCache.heartbeats=he._heartbeatsCache.heartbeats.filter($t=>{const dn=new Date($t.date).valueOf();return Date.now()-dn<=2592e6}),he._storage.overwrite(he._heartbeatsCache)})()}getHeartbeatsHeader(){var he=this;return(0,u.Z)(function*(){if(null===he._heartbeatsCache&&(yield he._heartbeatsCachePromise),null===he._heartbeatsCache||0===he._heartbeatsCache.heartbeats.length)return"";const Ze=ti(),{heartbeatsToSend:gt,unsentEntries:Et}=function Yi(Qe,he=1024){const Ze=[];let gt=Qe.slice();for(const Et of Qe){const $t=Ze.find(dn=>dn.agent===Et.agent);if($t){if($t.dates.push(Et.date),Fr(Ze)>he){$t.dates.pop();break}}else if(Ze.push({agent:Et.agent,dates:[Et.date]}),Fr(Ze)>he){Ze.pop();break}gt=gt.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:gt}}(he._heartbeatsCache.heartbeats),$t=(0,de.L)(JSON.stringify({version:2,heartbeats:gt}));return he._heartbeatsCache.lastSentHeartbeatDate=Ze,Et.length>0?(he._heartbeatsCache.heartbeats=Et,yield he._storage.overwrite(he._heartbeatsCache)):(he._heartbeatsCache.heartbeats=[],he._storage.overwrite(he._heartbeatsCache)),$t})()}}function ti(){return(new Date).toISOString().substring(0,10)}class Li{constructor(he){this.app=he,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var he=this;return(0,u.Z)(function*(){return(yield he._canUseIndexedDBPromise)&&(yield function zn(Qe){return ur.apply(this,arguments)}(he.app))||{heartbeats:[]}})()}overwrite(he){var Ze=this;return(0,u.Z)(function*(){var gt;if(yield Ze._canUseIndexedDBPromise){const $t=yield Ze.read();return En(Ze.app,{lastSentHeartbeatDate:null!==(gt=he.lastSentHeartbeatDate)&&void 0!==gt?gt:$t.lastSentHeartbeatDate,heartbeats:he.heartbeats})}})()}add(he){var Ze=this;return(0,u.Z)(function*(){var gt;if(yield Ze._canUseIndexedDBPromise){const $t=yield Ze.read();return En(Ze.app,{lastSentHeartbeatDate:null!==(gt=he.lastSentHeartbeatDate)&&void 0!==gt?gt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...he.heartbeats]})}})()}}function Fr(Qe){return(0,de.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function Ki(Qe){lt(new le.wA("platform-logger",he=>new ye(he),"PRIVATE")),lt(new le.wA("heartbeat",he=>new xn(he),"PRIVATE")),cn(De,"0.9.19",Qe),cn(De,"0.9.19","esm2017"),cn("fire-js","")}("")},4537:(wt,Le,P)=>{"use strict";P.d(Le,{H0:()=>De,wA:()=>F,zt:()=>me});var u=P(5861),le=P(9058);class F{constructor(V,j,K){this.name=V,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const de="[DEFAULT]";class me{constructor(V,j){this.name=V,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const j=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(j)){const K=new le.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const re=this.getOrInitializeService({instanceIdentifier:j});re&&K.resolve(re)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(V){var j;const K=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),re=null!==(j=null==V?void 0:V.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(re)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(ue){if(re)return null;throw ue}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function Q(ge){return"EAGER"===ge.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:de})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const re=this.normalizeInstanceIdentifier(j);try{const ue=this.getOrInitializeService({instanceIdentifier:re});K.resolve(ue)}catch{}}}}clearInstance(V=de){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,u.Z)(function*(){const j=Array.from(V.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=de){return this.instances.has(V)}getOptions(V=de){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:j={}}=V,K=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const re=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[ue,Se]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(ue)&&Se.resolve(re);return re}onInit(V,j){var K;const re=this.normalizeInstanceIdentifier(j),ue=null!==(K=this.onInitCallbacks.get(re))&&void 0!==K?K:new Set;ue.add(V),this.onInitCallbacks.set(re,ue);const Se=this.instances.get(re);return Se&&V(Se,re),()=>{ue.delete(V)}}invokeOnInitCallbacks(V,j){const K=this.onInitCallbacks.get(j);if(K)for(const re of K)try{re(V,j)}catch{}}getOrInitializeService({instanceIdentifier:V,options:j={}}){let K=this.instances.get(V);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=V,ge===de?void 0:ge),options:j}),this.instances.set(V,K),this.instancesOptions.set(V,j),this.invokeOnInitCallbacks(K,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,K)}catch{}var ge;return K||null}normalizeInstanceIdentifier(V=de){return this.component?this.component.multipleInstances?V:de:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class De{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const j=this.getProvider(V.name);if(j.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);j.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const j=new me(V,this);return this.providers.set(V,j),j}getProviders(){return Array.from(this.providers.values())}}},7879:(wt,Le,P)=>{"use strict";P.d(Le,{Am:()=>ge,Ub:()=>De,Yd:()=>Q,in:()=>le});const u=[];var le=function(V){return V[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V}(le||{});const F={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},de=le.INFO,me={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},ye=(V,j,...K)=>{if(j<V.logLevel)return;const re=(new Date).toISOString(),ue=me[j];if(!ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[ue](`[${re}]  ${V.name}:`,...K)};class Q{constructor(j){this.name=j,this._logLevel=de,this._logHandler=ye,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in le))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?F[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...j),this._logHandler(this,le.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...j),this._logHandler(this,le.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,le.INFO,...j),this._logHandler(this,le.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,le.WARN,...j),this._logHandler(this,le.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...j),this._logHandler(this,le.ERROR,...j)}}function De(V){u.forEach(j=>{j.setLogLevel(V)})}function ge(V,j){for(const K of u){let re=null;j&&j.level&&(re=F[j.level]),K.userLogHandler=null===V?null:(ue,Se,...be)=>{const fe=be.map(q=>{if(null==q)return null;if("string"==typeof q)return q;if("number"==typeof q||"boolean"==typeof q)return q.toString();if(q instanceof Error)return q.message;try{return JSON.stringify(q)}catch{return null}}).filter(q=>q).join(" ");Se>=(null!=re?re:ue.logLevel)&&V({level:le[Se].toLowerCase(),message:fe,args:be,type:ue.name})}}}},1878:(wt,Le,P)=>{"use strict";P.d(Le,{X3:()=>Ve});var u=P(5861);const le=(Z,W)=>W.some(ve=>Z instanceof ve);let F,de;const Q=new WeakMap,De=new WeakMap,ge=new WeakMap,V=new WeakMap,j=new WeakMap;let ue={get(Z,W,ve){if(Z instanceof IDBTransaction){if("done"===W)return De.get(Z);if("objectStoreNames"===W)return Z.objectStoreNames||ge.get(Z);if("store"===W)return ve.objectStoreNames[1]?void 0:ve.objectStore(ve.objectStoreNames[0])}return q(Z[W])},set:(Z,W,ve)=>(Z[W]=ve,!0),has:(Z,W)=>Z instanceof IDBTransaction&&("done"===W||"store"===W)||W in Z};function fe(Z){return"function"==typeof Z?function be(Z){return Z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Z)?function(...W){return Z.apply(Me(this),W),q(Q.get(this))}:function(...W){return q(Z.apply(Me(this),W))}:function(W,...ve){const Pe=Z.call(Me(this),W,...ve);return ge.set(Pe,W.sort?W.sort():[W]),q(Pe)}}(Z):(Z instanceof IDBTransaction&&function re(Z){if(De.has(Z))return;const W=new Promise((ve,Pe)=>{const Ue=()=>{Z.removeEventListener("complete",Ge),Z.removeEventListener("error",pt),Z.removeEventListener("abort",pt)},Ge=()=>{ve(),Ue()},pt=()=>{Pe(Z.error||new DOMException("AbortError","AbortError")),Ue()};Z.addEventListener("complete",Ge),Z.addEventListener("error",pt),Z.addEventListener("abort",pt)});De.set(Z,W)}(Z),le(Z,function me(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Z,ue):Z)}function q(Z){if(Z instanceof IDBRequest)return function K(Z){const W=new Promise((ve,Pe)=>{const Ue=()=>{Z.removeEventListener("success",Ge),Z.removeEventListener("error",pt)},Ge=()=>{ve(q(Z.result)),Ue()},pt=()=>{Pe(Z.error),Ue()};Z.addEventListener("success",Ge),Z.addEventListener("error",pt)});return W.then(ve=>{ve instanceof IDBCursor&&Q.set(ve,Z)}).catch(()=>{}),j.set(W,Z),W}(Z);if(V.has(Z))return V.get(Z);const W=fe(Z);return W!==Z&&(V.set(Z,W),j.set(W,Z)),W}const Me=Z=>j.get(Z);function Ve(Z,W,{blocked:ve,upgrade:Pe,blocking:Ue,terminated:Ge}={}){const pt=indexedDB.open(Z,W),Gt=q(pt);return Pe&&pt.addEventListener("upgradeneeded",Ut=>{Pe(q(pt.result),Ut.oldVersion,Ut.newVersion,q(pt.transaction),Ut)}),ve&&pt.addEventListener("blocked",Ut=>ve(Ut.oldVersion,Ut.newVersion,Ut)),Gt.then(Ut=>{Ge&&Ut.addEventListener("close",()=>Ge()),Ue&&Ut.addEventListener("versionchange",Ke=>Ue(Ke.oldVersion,Ke.newVersion,Ke))}).catch(()=>{}),Gt}const _e=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],Ce=new Map;function se(Z,W){if(!(Z instanceof IDBDatabase)||W in Z||"string"!=typeof W)return;if(Ce.get(W))return Ce.get(W);const ve=W.replace(/FromIndex$/,""),Pe=W!==ve,Ue=ae.includes(ve);if(!(ve in(Pe?IDBIndex:IDBObjectStore).prototype)||!Ue&&!_e.includes(ve))return;const Ge=function(){var pt=(0,u.Z)(function*(Gt,...Ut){const Ke=this.transaction(Gt,Ue?"readwrite":"readonly");let H=Ke.store;return Pe&&(H=H.index(Ut.shift())),(yield Promise.all([H[ve](...Ut),Ue&&Ke.done]))[0]});return function(Ut){return pt.apply(this,arguments)}}();return Ce.set(W,Ge),Ge}!function Se(Z){ue=Z(ue)}(Z=>({...Z,get:(W,ve,Pe)=>se(W,ve)||Z.get(W,ve,Pe),has:(W,ve)=>!!se(W,ve)||Z.has(W,ve)}))},5861:(wt,Le,P)=>{"use strict";function u(F,de,me,ye,Q,De,ge){try{var V=F[De](ge),j=V.value}catch(K){return void me(K)}V.done?de(j):Promise.resolve(j).then(ye,Q)}function le(F){return function(){var de=this,me=arguments;return new Promise(function(ye,Q){var De=F.apply(de,me);function ge(j){u(De,ye,Q,ge,V,"next",j)}function V(j){u(De,ye,Q,ge,V,"throw",j)}ge(void 0)})}}P.d(Le,{Z:()=>le})},7582:(wt,Le,P)=>{"use strict";function de(H,Y){var ie={};for(var we in H)Object.prototype.hasOwnProperty.call(H,we)&&Y.indexOf(we)<0&&(ie[we]=H[we]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(we=Object.getOwnPropertySymbols(H);ke<we.length;ke++)Y.indexOf(we[ke])<0&&Object.prototype.propertyIsEnumerable.call(H,we[ke])&&(ie[we[ke]]=H[we[ke]])}return ie}function me(H,Y,ie,we){var lt,ke=arguments.length,Oe=ke<3?Y:null===we?we=Object.getOwnPropertyDescriptor(Y,ie):we;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Oe=Reflect.decorate(H,Y,ie,we);else for(var nt=H.length-1;nt>=0;nt--)(lt=H[nt])&&(Oe=(ke<3?lt(Oe):ke>3?lt(Y,ie,Oe):lt(Y,ie))||Oe);return ke>3&&Oe&&Object.defineProperty(Y,ie,Oe),Oe}function K(H,Y,ie,we){return new(ie||(ie=Promise))(function(Oe,lt){function nt(Jt){try{It(we.next(Jt))}catch(He){lt(He)}}function _t(Jt){try{It(we.throw(Jt))}catch(He){lt(He)}}function It(Jt){Jt.done?Oe(Jt.value):function ke(Oe){return Oe instanceof ie?Oe:new ie(function(lt){lt(Oe)})}(Jt.value).then(nt,_t)}It((we=we.apply(H,Y||[])).next())})}function oe(H){return this instanceof oe?(this.v=H,this):new oe(H)}function _e(H,Y,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,we=ie.apply(H,Y||[]),Oe=[];return ke={},lt("next"),lt("throw"),lt("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function lt(We){we[We]&&(ke[We]=function(je){return new Promise(function(ut,Mt){Oe.push([We,je,ut,Mt])>1||nt(We,je)})})}function nt(We,je){try{!function _t(We){We.value instanceof oe?Promise.resolve(We.value.v).then(It,Jt):He(Oe[0][2],We)}(we[We](je))}catch(ut){He(Oe[0][3],ut)}}function It(We){nt("next",We)}function Jt(We){nt("throw",We)}function He(We,je){We(je),Oe.shift(),Oe.length&&nt(Oe[0][0],Oe[0][1])}}function Ce(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,Y=H[Symbol.asyncIterator];return Y?Y.call(H):(H=function be(H){var Y="function"==typeof Symbol&&Symbol.iterator,ie=Y&&H[Y],we=0;if(ie)return ie.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&we>=H.length&&(H=void 0),{value:H&&H[we++],done:!H}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),ie={},we("next"),we("throw"),we("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function we(Oe){ie[Oe]=H[Oe]&&function(lt){return new Promise(function(nt,_t){!function ke(Oe,lt,nt,_t){Promise.resolve(_t).then(function(It){Oe({value:It,done:nt})},lt)}(nt,_t,(lt=H[Oe](lt)).done,lt.value)})}}}P.d(Le,{FC:()=>_e,KL:()=>Ce,_T:()=>de,gn:()=>me,mG:()=>K,qq:()=>oe}),"function"==typeof SuppressedError&&SuppressedError}},wt=>{wt(wt.s=1763)}]);